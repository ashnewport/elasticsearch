{
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./plugins/xpack_main",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "main"
              }
            ]
          },
          {
            "source": "./plugins/graph",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "graph"
              }
            ]
          },
          {
            "source": "./plugins/monitoring",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "monitoring"
              }
            ]
          },
          {
            "source": "./plugins/reporting",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "reporting"
              }
            ]
          },
          {
            "source": "./plugins/security",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "security"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _pluginsXpack_main = require('./plugins/xpack_main');\n\nvar _pluginsXpack_main2 = _interopRequireDefault(_pluginsXpack_main);\n\nvar _pluginsGraph = require('./plugins/graph');\n\nvar _pluginsGraph2 = _interopRequireDefault(_pluginsGraph);\n\nvar _pluginsMonitoring = require('./plugins/monitoring');\n\nvar _pluginsMonitoring2 = _interopRequireDefault(_pluginsMonitoring);\n\nvar _pluginsReporting = require('./plugins/reporting');\n\nvar _pluginsReporting2 = _interopRequireDefault(_pluginsReporting);\n\nvar _pluginsSecurity = require('./plugins/security');\n\nvar _pluginsSecurity2 = _interopRequireDefault(_pluginsSecurity);\n\nmodule.exports = function (kibana) {\n  return [(0, _pluginsXpack_main2['default'])(kibana), (0, _pluginsGraph2['default'])(kibana), (0, _pluginsMonitoring2['default'])(kibana), (0, _pluginsReporting2['default'])(kibana), (0, _pluginsSecurity2['default'])(kibana)];\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O2lDQUFpQixzQkFBc0I7Ozs7NEJBQ3JCLGlCQUFpQjs7OztpQ0FDWixzQkFBc0I7Ozs7Z0NBQ3ZCLHFCQUFxQjs7OzsrQkFDdEIsb0JBQW9COzs7O0FBRXpDLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxNQUFNLEVBQUU7QUFDakMsU0FBTyxDQUNMLG9DQUFLLE1BQU0sQ0FBQyxFQUNaLCtCQUFNLE1BQU0sQ0FBQyxFQUNiLG9DQUFXLE1BQU0sQ0FBQyxFQUNsQixtQ0FBVSxNQUFNLENBQUMsRUFDakIsa0NBQVMsTUFBTSxDQUFDLENBQ2pCLENBQUM7Q0FDSCxDQUFDIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBtYWluIGZyb20gJy4vcGx1Z2lucy94cGFja19tYWluJztcbmltcG9ydCBncmFwaCBmcm9tICcuL3BsdWdpbnMvZ3JhcGgnO1xuaW1wb3J0IG1vbml0b3JpbmcgZnJvbSAnLi9wbHVnaW5zL21vbml0b3JpbmcnO1xuaW1wb3J0IHJlcG9ydGluZyBmcm9tICcuL3BsdWdpbnMvcmVwb3J0aW5nJztcbmltcG9ydCBzZWN1cml0eSBmcm9tICcuL3BsdWdpbnMvc2VjdXJpdHknO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChraWJhbmEpIHtcbiAgcmV0dXJuIFtcbiAgICBtYWluKGtpYmFuYSksXG4gICAgZ3JhcGgoa2liYW5hKSxcbiAgICBtb25pdG9yaW5nKGtpYmFuYSksXG4gICAgcmVwb3J0aW5nKGtpYmFuYSksXG4gICAgc2VjdXJpdHkoa2liYW5hKVxuICBdO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/index.js"
      ],
      "names": [],
      "mappings": ";;;;iCAAiB,sBAAsB;;;;4BACrB,iBAAiB;;;;iCACZ,sBAAsB;;;;gCACvB,qBAAqB;;;;+BACtB,oBAAoB;;;;AAEzC,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE;AACjC,SAAO,CACL,oCAAK,MAAM,CAAC,EACZ,+BAAM,MAAM,CAAC,EACb,oCAAW,MAAM,CAAC,EAClB,mCAAU,MAAM,CAAC,EACjB,kCAAS,MAAM,CAAC,CACjB,CAAC;CACH,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/index.js",
      "sourcesContent": [
        "import main from './plugins/xpack_main';\nimport graph from './plugins/graph';\nimport monitoring from './plugins/monitoring';\nimport reporting from './plugins/reporting';\nimport security from './plugins/security';\n\nmodule.exports = function (kibana) {\n  return [\n    main(kibana),\n    graph(kibana),\n    monitoring(kibana),\n    reporting(kibana),\n    security(kibana)\n  ];\n};\n"
      ]
    },
    "mtime": 1485775585489
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/xpack_main/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "once",
              "partial"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "once",
                "local": "once"
              },
              {
                "kind": "named",
                "imported": "partial",
                "local": "partial"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "join",
              "resolve"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "join",
                "local": "join"
              },
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              }
            ]
          },
          {
            "source": "../../server/lib/mirror_plugin_status",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mirrorPluginStatus"
              }
            ]
          },
          {
            "source": "../../server/lib/require_all_and_apply",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "requireAllAndApply"
              }
            ]
          },
          {
            "source": "./server/lib/inject_xpack_info_signature",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "injectXPackInfoSignature"
              }
            ]
          },
          {
            "source": "../../server/lib/xpack_info",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "xpackInfo"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "setupXPackMain",
            "server",
            "xpackMainPlugin",
            "getXPackInfo"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "setupXPackMain",
              "exported": "setupXPackMain"
            },
            {
              "kind": "local",
              "local": "server",
              "exported": "server"
            },
            {
              "kind": "local",
              "local": "xpackMainPlugin",
              "exported": "xpackMainPlugin"
            },
            {
              "kind": "local",
              "local": "getXPackInfo",
              "exported": "getXPackInfo"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.setupXPackMain = setupXPackMain;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _path = require('path');\n\nvar _serverLibMirror_plugin_status = require('../../server/lib/mirror_plugin_status');\n\nvar _serverLibMirror_plugin_status2 = _interopRequireDefault(_serverLibMirror_plugin_status);\n\nvar _serverLibRequire_all_and_apply = require('../../server/lib/require_all_and_apply');\n\nvar _serverLibRequire_all_and_apply2 = _interopRequireDefault(_serverLibRequire_all_and_apply);\n\nvar _serverLibInject_xpack_info_signature = require('./server/lib/inject_xpack_info_signature');\n\nvar _serverLibInject_xpack_info_signature2 = _interopRequireDefault(_serverLibInject_xpack_info_signature);\n\nvar _serverLibXpack_info = require('../../server/lib/xpack_info');\n\nvar _serverLibXpack_info2 = _interopRequireDefault(_serverLibXpack_info);\n\nvar registerPreResponseHandlerSingleton = (0, _lodash.once)(function (server, info) {\n  server.ext('onPreResponse', (0, _lodash.partial)(_serverLibInject_xpack_info_signature2['default'], info));\n});\n\n/**\n * Setup the X-Pack Main plugin. This is fired every time that the Elasticsearch plugin becomes Green.\n *\n * This will ensure that X-Pack is installed on the Elasticsearch cluster, as well as trigger the initial\n * polling for _xpack/info.\n *\n * @param server {Object} The Kibana server object.\n * @param xpackMainPlugin {Object} The X-Pack Main plugin object.\n * @param getXPackInfo {Function} The X-Pack Info function construct.\n * @return {Promise} Never {@code null}.\n */\n\nfunction setupXPackMain(server, xpackMainPlugin, getXPackInfo) {\n  var client = server.plugins.elasticsearch.client; // NOTE: authenticated client using server config auth\n  return getXPackInfo(server, client).then(function (info) {\n    server.expose('info', info);\n    registerPreResponseHandlerSingleton(server, info);\n  }).then(function () {\n    return xpackMainPlugin.status.green('Ready');\n  })['catch'](function (reason) {\n    var errorMessage = reason;\n\n    if (reason instanceof Error && reason.status === 400) {\n      errorMessage = 'X-Pack plugin is not installed on Elasticsearch cluster';\n    }\n\n    server.expose('info', reason.info);\n\n    xpackMainPlugin.status.red(errorMessage);\n  });\n}\n\nexports['default'] = function (kibana) {\n  return new kibana.Plugin({\n    id: 'xpack_main',\n    publicDir: (0, _path.resolve)(__dirname, 'public'),\n    require: ['elasticsearch'],\n    uiExports: {\n      hacks: ['plugins/xpack_main/hacks/check_xpack_info_change', 'plugins/xpack_main/hacks/init_xpack_info']\n    },\n    init: function init(server) {\n      var _this = this;\n\n      var elasticsearchPlugin = server.plugins.elasticsearch;\n      (0, _serverLibMirror_plugin_status2['default'])(elasticsearchPlugin, this, 'yellow', 'red');\n      elasticsearchPlugin.status.on('green', function () {\n        return setupXPackMain(server, _this, _serverLibXpack_info2['default']);\n      });\n\n      return (0, _serverLibRequire_all_and_apply2['default'])((0, _path.join)(__dirname, 'server', 'routes', '**', '*.js'), server);\n    }\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3hwYWNrX21haW4vaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O3NCQUE4QixRQUFROztvQkFDUixNQUFNOzs2Q0FDTCx1Q0FBdUM7Ozs7OENBQ3ZDLHdDQUF3Qzs7OztvREFDbEMsMENBQTBDOzs7O21DQUN6RCw2QkFBNkI7Ozs7QUFFbkQsSUFBTSxtQ0FBbUMsR0FBRyxrQkFBSyxVQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUs7QUFDakUsUUFBTSxDQUFDLEdBQUcsQ0FBQyxlQUFlLEVBQUUsd0VBQWtDLElBQUksQ0FBQyxDQUFDLENBQUM7Q0FDdEUsQ0FBQyxDQUFDOzs7Ozs7Ozs7Ozs7OztBQWFJLFNBQVMsY0FBYyxDQUFDLE1BQU0sRUFBRSxlQUFlLEVBQUUsWUFBWSxFQUFFO0FBQ3BFLE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQztBQUNuRCxTQUFPLFlBQVksQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQ2xDLElBQUksQ0FBQyxVQUFBLElBQUksRUFBSTtBQUNaLFVBQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxDQUFDO0FBQzVCLHVDQUFtQyxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsQ0FBQztHQUNuRCxDQUFDLENBQ0QsSUFBSSxDQUFDO1dBQU0sZUFBZSxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDO0dBQUEsQ0FBQyxTQUM1QyxDQUFDLFVBQUEsTUFBTSxFQUFJO0FBQ2YsUUFBSSxZQUFZLEdBQUcsTUFBTSxDQUFDOztBQUUxQixRQUFJLEFBQUMsTUFBTSxZQUFZLEtBQUssSUFBSyxNQUFNLENBQUMsTUFBTSxLQUFLLEdBQUcsRUFBRTtBQUN0RCxrQkFBWSxHQUFHLHlEQUF5RCxDQUFDO0tBQzFFOztBQUVELFVBQU0sQ0FBQyxNQUFNLENBQUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQzs7QUFFbkMsbUJBQWUsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQyxDQUFDO0dBQzFDLENBQUMsQ0FBQztDQUNKOztxQkFFYyxVQUFVLE1BQU0sRUFBRTtBQUMvQixTQUFPLElBQUksTUFBTSxDQUFDLE1BQU0sQ0FBQztBQUN2QixNQUFFLEVBQUUsWUFBWTtBQUNoQixhQUFTLEVBQUUsbUJBQVEsU0FBUyxFQUFFLFFBQVEsQ0FBQztBQUN2QyxXQUFPLEVBQUUsQ0FBQyxlQUFlLENBQUM7QUFDMUIsYUFBUyxFQUFFO0FBQ1QsV0FBSyxFQUFFLENBQ0wsa0RBQWtELEVBQ2xELDBDQUEwQyxDQUMzQztLQUNGO0FBQ0QsUUFBSSxFQUFFLGNBQVUsTUFBTSxFQUFFOzs7QUFDdEIsVUFBTSxtQkFBbUIsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQztBQUN6RCxzREFBbUIsbUJBQW1CLEVBQUUsSUFBSSxFQUFFLFFBQVEsRUFBRSxLQUFLLENBQUMsQ0FBQztBQUMvRCx5QkFBbUIsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRTtlQUFNLGNBQWMsQ0FBQyxNQUFNLDBDQUFrQjtPQUFBLENBQUMsQ0FBQzs7QUFFdEYsYUFBTyxpREFBbUIsZ0JBQUssU0FBUyxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLE1BQU0sQ0FBQyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0tBQ3RGO0dBQ0YsQ0FBQyxDQUFDO0NBQ0oiLCJmaWxlIjoiL2hvbWUvdWJ1bnR1L3dvcmtzcGFjZS9raWJhbmEtNS4wLjItbGludXgteDg2XzY0L3BsdWdpbnMveC1wYWNrL3BsdWdpbnMveHBhY2tfbWFpbi9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IG9uY2UsIHBhcnRpYWwgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHsgam9pbiwgcmVzb2x2ZSB9IGZyb20gJ3BhdGgnO1xuaW1wb3J0IG1pcnJvclBsdWdpblN0YXR1cyBmcm9tICcuLi8uLi9zZXJ2ZXIvbGliL21pcnJvcl9wbHVnaW5fc3RhdHVzJztcbmltcG9ydCByZXF1aXJlQWxsQW5kQXBwbHkgZnJvbSAnLi4vLi4vc2VydmVyL2xpYi9yZXF1aXJlX2FsbF9hbmRfYXBwbHknO1xuaW1wb3J0IGluamVjdFhQYWNrSW5mb1NpZ25hdHVyZSBmcm9tICcuL3NlcnZlci9saWIvaW5qZWN0X3hwYWNrX2luZm9fc2lnbmF0dXJlJztcbmltcG9ydCB4cGFja0luZm8gZnJvbSAnLi4vLi4vc2VydmVyL2xpYi94cGFja19pbmZvJztcblxuY29uc3QgcmVnaXN0ZXJQcmVSZXNwb25zZUhhbmRsZXJTaW5nbGV0b24gPSBvbmNlKChzZXJ2ZXIsIGluZm8pID0+IHtcbiAgc2VydmVyLmV4dCgnb25QcmVSZXNwb25zZScsIHBhcnRpYWwoaW5qZWN0WFBhY2tJbmZvU2lnbmF0dXJlLCBpbmZvKSk7XG59KTtcblxuLyoqXG4gKiBTZXR1cCB0aGUgWC1QYWNrIE1haW4gcGx1Z2luLiBUaGlzIGlzIGZpcmVkIGV2ZXJ5IHRpbWUgdGhhdCB0aGUgRWxhc3RpY3NlYXJjaCBwbHVnaW4gYmVjb21lcyBHcmVlbi5cbiAqXG4gKiBUaGlzIHdpbGwgZW5zdXJlIHRoYXQgWC1QYWNrIGlzIGluc3RhbGxlZCBvbiB0aGUgRWxhc3RpY3NlYXJjaCBjbHVzdGVyLCBhcyB3ZWxsIGFzIHRyaWdnZXIgdGhlIGluaXRpYWxcbiAqIHBvbGxpbmcgZm9yIF94cGFjay9pbmZvLlxuICpcbiAqIEBwYXJhbSBzZXJ2ZXIge09iamVjdH0gVGhlIEtpYmFuYSBzZXJ2ZXIgb2JqZWN0LlxuICogQHBhcmFtIHhwYWNrTWFpblBsdWdpbiB7T2JqZWN0fSBUaGUgWC1QYWNrIE1haW4gcGx1Z2luIG9iamVjdC5cbiAqIEBwYXJhbSBnZXRYUGFja0luZm8ge0Z1bmN0aW9ufSBUaGUgWC1QYWNrIEluZm8gZnVuY3Rpb24gY29uc3RydWN0LlxuICogQHJldHVybiB7UHJvbWlzZX0gTmV2ZXIge0Bjb2RlIG51bGx9LlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBYUGFja01haW4oc2VydmVyLCB4cGFja01haW5QbHVnaW4sIGdldFhQYWNrSW5mbykge1xuICBjb25zdCBjbGllbnQgPSBzZXJ2ZXIucGx1Z2lucy5lbGFzdGljc2VhcmNoLmNsaWVudDsgLy8gTk9URTogYXV0aGVudGljYXRlZCBjbGllbnQgdXNpbmcgc2VydmVyIGNvbmZpZyBhdXRoXG4gIHJldHVybiBnZXRYUGFja0luZm8oc2VydmVyLCBjbGllbnQpXG4gIC50aGVuKGluZm8gPT4ge1xuICAgIHNlcnZlci5leHBvc2UoJ2luZm8nLCBpbmZvKTtcbiAgICByZWdpc3RlclByZVJlc3BvbnNlSGFuZGxlclNpbmdsZXRvbihzZXJ2ZXIsIGluZm8pO1xuICB9KVxuICAudGhlbigoKSA9PiB4cGFja01haW5QbHVnaW4uc3RhdHVzLmdyZWVuKCdSZWFkeScpKVxuICAuY2F0Y2gocmVhc29uID0+IHtcbiAgICBsZXQgZXJyb3JNZXNzYWdlID0gcmVhc29uO1xuXG4gICAgaWYgKChyZWFzb24gaW5zdGFuY2VvZiBFcnJvcikgJiYgcmVhc29uLnN0YXR1cyA9PT0gNDAwKSB7XG4gICAgICBlcnJvck1lc3NhZ2UgPSAnWC1QYWNrIHBsdWdpbiBpcyBub3QgaW5zdGFsbGVkIG9uIEVsYXN0aWNzZWFyY2ggY2x1c3Rlcic7XG4gICAgfVxuXG4gICAgc2VydmVyLmV4cG9zZSgnaW5mbycsIHJlYXNvbi5pbmZvKTtcblxuICAgIHhwYWNrTWFpblBsdWdpbi5zdGF0dXMucmVkKGVycm9yTWVzc2FnZSk7XG4gIH0pO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAoa2liYW5hKSB7XG4gIHJldHVybiBuZXcga2liYW5hLlBsdWdpbih7XG4gICAgaWQ6ICd4cGFja19tYWluJyxcbiAgICBwdWJsaWNEaXI6IHJlc29sdmUoX19kaXJuYW1lLCAncHVibGljJyksXG4gICAgcmVxdWlyZTogWydlbGFzdGljc2VhcmNoJ10sXG4gICAgdWlFeHBvcnRzOiB7XG4gICAgICBoYWNrczogW1xuICAgICAgICAncGx1Z2lucy94cGFja19tYWluL2hhY2tzL2NoZWNrX3hwYWNrX2luZm9fY2hhbmdlJyxcbiAgICAgICAgJ3BsdWdpbnMveHBhY2tfbWFpbi9oYWNrcy9pbml0X3hwYWNrX2luZm8nXG4gICAgICBdLFxuICAgIH0sXG4gICAgaW5pdDogZnVuY3Rpb24gKHNlcnZlcikge1xuICAgICAgY29uc3QgZWxhc3RpY3NlYXJjaFBsdWdpbiA9IHNlcnZlci5wbHVnaW5zLmVsYXN0aWNzZWFyY2g7XG4gICAgICBtaXJyb3JQbHVnaW5TdGF0dXMoZWxhc3RpY3NlYXJjaFBsdWdpbiwgdGhpcywgJ3llbGxvdycsICdyZWQnKTtcbiAgICAgIGVsYXN0aWNzZWFyY2hQbHVnaW4uc3RhdHVzLm9uKCdncmVlbicsICgpID0+IHNldHVwWFBhY2tNYWluKHNlcnZlciwgdGhpcywgeHBhY2tJbmZvKSk7XG5cbiAgICAgIHJldHVybiByZXF1aXJlQWxsQW5kQXBwbHkoam9pbihfX2Rpcm5hbWUsICdzZXJ2ZXInLCAncm91dGVzJywgJyoqJywgJyouanMnKSwgc2VydmVyKTtcbiAgICB9XG4gIH0pO1xufVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/xpack_main/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;sBAA8B,QAAQ;;oBACR,MAAM;;6CACL,uCAAuC;;;;8CACvC,wCAAwC;;;;oDAClC,0CAA0C;;;;mCACzD,6BAA6B;;;;AAEnD,IAAM,mCAAmC,GAAG,kBAAK,UAAC,MAAM,EAAE,IAAI,EAAK;AACjE,QAAM,CAAC,GAAG,CAAC,eAAe,EAAE,wEAAkC,IAAI,CAAC,CAAC,CAAC;CACtE,CAAC,CAAC;;;;;;;;;;;;;;AAaI,SAAS,cAAc,CAAC,MAAM,EAAE,eAAe,EAAE,YAAY,EAAE;AACpE,MAAM,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC;AACnD,SAAO,YAAY,CAAC,MAAM,EAAE,MAAM,CAAC,CAClC,IAAI,CAAC,UAAA,IAAI,EAAI;AACZ,UAAM,CAAC,MAAM,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;AAC5B,uCAAmC,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;GACnD,CAAC,CACD,IAAI,CAAC;WAAM,eAAe,CAAC,MAAM,CAAC,KAAK,CAAC,OAAO,CAAC;GAAA,CAAC,SAC5C,CAAC,UAAA,MAAM,EAAI;AACf,QAAI,YAAY,GAAG,MAAM,CAAC;;AAE1B,QAAI,AAAC,MAAM,YAAY,KAAK,IAAK,MAAM,CAAC,MAAM,KAAK,GAAG,EAAE;AACtD,kBAAY,GAAG,yDAAyD,CAAC;KAC1E;;AAED,UAAM,CAAC,MAAM,CAAC,MAAM,EAAE,MAAM,CAAC,IAAI,CAAC,CAAC;;AAEnC,mBAAe,CAAC,MAAM,CAAC,GAAG,CAAC,YAAY,CAAC,CAAC;GAC1C,CAAC,CAAC;CACJ;;qBAEc,UAAU,MAAM,EAAE;AAC/B,SAAO,IAAI,MAAM,CAAC,MAAM,CAAC;AACvB,MAAE,EAAE,YAAY;AAChB,aAAS,EAAE,mBAAQ,SAAS,EAAE,QAAQ,CAAC;AACvC,WAAO,EAAE,CAAC,eAAe,CAAC;AAC1B,aAAS,EAAE;AACT,WAAK,EAAE,CACL,kDAAkD,EAClD,0CAA0C,CAC3C;KACF;AACD,QAAI,EAAE,cAAU,MAAM,EAAE;;;AACtB,UAAM,mBAAmB,GAAG,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC;AACzD,sDAAmB,mBAAmB,EAAE,IAAI,EAAE,QAAQ,EAAE,KAAK,CAAC,CAAC;AAC/D,yBAAmB,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE;eAAM,cAAc,CAAC,MAAM,0CAAkB;OAAA,CAAC,CAAC;;AAEtF,aAAO,iDAAmB,gBAAK,SAAS,EAAE,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,CAAC,EAAE,MAAM,CAAC,CAAC;KACtF;GACF,CAAC,CAAC;CACJ",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/xpack_main/index.js",
      "sourcesContent": [
        "import { once, partial } from 'lodash';\nimport { join, resolve } from 'path';\nimport mirrorPluginStatus from '../../server/lib/mirror_plugin_status';\nimport requireAllAndApply from '../../server/lib/require_all_and_apply';\nimport injectXPackInfoSignature from './server/lib/inject_xpack_info_signature';\nimport xpackInfo from '../../server/lib/xpack_info';\n\nconst registerPreResponseHandlerSingleton = once((server, info) => {\n  server.ext('onPreResponse', partial(injectXPackInfoSignature, info));\n});\n\n/**\n * Setup the X-Pack Main plugin. This is fired every time that the Elasticsearch plugin becomes Green.\n *\n * This will ensure that X-Pack is installed on the Elasticsearch cluster, as well as trigger the initial\n * polling for _xpack/info.\n *\n * @param server {Object} The Kibana server object.\n * @param xpackMainPlugin {Object} The X-Pack Main plugin object.\n * @param getXPackInfo {Function} The X-Pack Info function construct.\n * @return {Promise} Never {@code null}.\n */\nexport function setupXPackMain(server, xpackMainPlugin, getXPackInfo) {\n  const client = server.plugins.elasticsearch.client; // NOTE: authenticated client using server config auth\n  return getXPackInfo(server, client)\n  .then(info => {\n    server.expose('info', info);\n    registerPreResponseHandlerSingleton(server, info);\n  })\n  .then(() => xpackMainPlugin.status.green('Ready'))\n  .catch(reason => {\n    let errorMessage = reason;\n\n    if ((reason instanceof Error) && reason.status === 400) {\n      errorMessage = 'X-Pack plugin is not installed on Elasticsearch cluster';\n    }\n\n    server.expose('info', reason.info);\n\n    xpackMainPlugin.status.red(errorMessage);\n  });\n}\n\nexport default function (kibana) {\n  return new kibana.Plugin({\n    id: 'xpack_main',\n    publicDir: resolve(__dirname, 'public'),\n    require: ['elasticsearch'],\n    uiExports: {\n      hacks: [\n        'plugins/xpack_main/hacks/check_xpack_info_change',\n        'plugins/xpack_main/hacks/init_xpack_info'\n      ],\n    },\n    init: function (server) {\n      const elasticsearchPlugin = server.plugins.elasticsearch;\n      mirrorPluginStatus(elasticsearchPlugin, this, 'yellow', 'red');\n      elasticsearchPlugin.status.on('green', () => setupXPackMain(server, this, xpackInfo));\n\n      return requireAllAndApply(join(__dirname, 'server', 'routes', '**', '*.js'), server);\n    }\n  });\n}\n"
      ]
    },
    "mtime": 1485775588029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/server/lib/mirror_plugin_status.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "mirrorPluginStatus",
            "upstreamPlugin",
            "downstreamPlugin",
            "statesToMirror"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "mirrorPluginStatus",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "upstreamPlugin",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "downstreamPlugin",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "statesToMirror",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = mirrorPluginStatus;\n\nfunction mirrorPluginStatus(upstreamPlugin, downstreamPlugin) {\n\n  function mirror(previousState, previousMsg, newState, newMsg) {\n    if (newState) {\n      downstreamPlugin.status[newState](newMsg);\n    }\n  }\n\n  for (var _len = arguments.length, statesToMirror = Array(_len > 2 ? _len - 2 : 0), _key = 2; _key < _len; _key++) {\n    statesToMirror[_key - 2] = arguments[_key];\n  }\n\n  if (statesToMirror.length === 0) {\n    statesToMirror.push('change');\n  }\n\n  statesToMirror.map(function (state) {\n    return upstreamPlugin.status.on(state, mirror);\n  });\n  mirror(null, null, upstreamPlugin.status.state, upstreamPlugin.status.message); // initial mirroring\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9zZXJ2ZXIvbGliL21pcnJvcl9wbHVnaW5fc3RhdHVzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O3FCQUF3QixrQkFBa0I7O0FBQTNCLFNBQVMsa0JBQWtCLENBQUMsY0FBYyxFQUFFLGdCQUFnQixFQUFxQjs7QUFFOUYsV0FBUyxNQUFNLENBQUMsYUFBYSxFQUFFLFdBQVcsRUFBRSxRQUFRLEVBQUUsTUFBTSxFQUFFO0FBQzVELFFBQUksUUFBUSxFQUFFO0FBQ1osc0JBQWdCLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0tBQzNDO0dBQ0Y7O29DQU42RSxjQUFjO0FBQWQsa0JBQWM7OztBQVE1RixNQUFJLGNBQWMsQ0FBQyxNQUFNLEtBQUssQ0FBQyxFQUFFO0FBQy9CLGtCQUFjLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0dBQy9COztBQUVELGdCQUFjLENBQUMsR0FBRyxDQUFDLFVBQUEsS0FBSztXQUFJLGNBQWMsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLEtBQUssRUFBRSxNQUFNLENBQUM7R0FBQSxDQUFDLENBQUM7QUFDckUsUUFBTSxDQUFDLElBQUksRUFBRSxJQUFJLEVBQUUsY0FBYyxDQUFDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsY0FBYyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztDQUNoRiIsImZpbGUiOiIvaG9tZS91YnVudHUvd29ya3NwYWNlL2tpYmFuYS01LjAuMi1saW51eC14ODZfNjQvcGx1Z2lucy94LXBhY2svc2VydmVyL2xpYi9taXJyb3JfcGx1Z2luX3N0YXR1cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1pcnJvclBsdWdpblN0YXR1cyh1cHN0cmVhbVBsdWdpbiwgZG93bnN0cmVhbVBsdWdpbiwgLi4uc3RhdGVzVG9NaXJyb3IpIHtcblxuICBmdW5jdGlvbiBtaXJyb3IocHJldmlvdXNTdGF0ZSwgcHJldmlvdXNNc2csIG5ld1N0YXRlLCBuZXdNc2cpIHtcbiAgICBpZiAobmV3U3RhdGUpIHtcbiAgICAgIGRvd25zdHJlYW1QbHVnaW4uc3RhdHVzW25ld1N0YXRlXShuZXdNc2cpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChzdGF0ZXNUb01pcnJvci5sZW5ndGggPT09IDApIHtcbiAgICBzdGF0ZXNUb01pcnJvci5wdXNoKCdjaGFuZ2UnKTtcbiAgfVxuXG4gIHN0YXRlc1RvTWlycm9yLm1hcChzdGF0ZSA9PiB1cHN0cmVhbVBsdWdpbi5zdGF0dXMub24oc3RhdGUsIG1pcnJvcikpO1xuICBtaXJyb3IobnVsbCwgbnVsbCwgdXBzdHJlYW1QbHVnaW4uc3RhdHVzLnN0YXRlLCB1cHN0cmVhbVBsdWdpbi5zdGF0dXMubWVzc2FnZSk7IC8vIGluaXRpYWwgbWlycm9yaW5nXG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/server/lib/mirror_plugin_status.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAAwB,kBAAkB;;AAA3B,SAAS,kBAAkB,CAAC,cAAc,EAAE,gBAAgB,EAAqB;;AAE9F,WAAS,MAAM,CAAC,aAAa,EAAE,WAAW,EAAE,QAAQ,EAAE,MAAM,EAAE;AAC5D,QAAI,QAAQ,EAAE;AACZ,sBAAgB,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC;KAC3C;GACF;;oCAN6E,cAAc;AAAd,kBAAc;;;AAQ5F,MAAI,cAAc,CAAC,MAAM,KAAK,CAAC,EAAE;AAC/B,kBAAc,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;GAC/B;;AAED,gBAAc,CAAC,GAAG,CAAC,UAAA,KAAK;WAAI,cAAc,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,EAAE,MAAM,CAAC;GAAA,CAAC,CAAC;AACrE,QAAM,CAAC,IAAI,EAAE,IAAI,EAAE,cAAc,CAAC,MAAM,CAAC,KAAK,EAAE,cAAc,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;CAChF",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/server/lib/mirror_plugin_status.js",
      "sourcesContent": [
        "export default function mirrorPluginStatus(upstreamPlugin, downstreamPlugin, ...statesToMirror) {\n\n  function mirror(previousState, previousMsg, newState, newMsg) {\n    if (newState) {\n      downstreamPlugin.status[newState](newMsg);\n    }\n  }\n\n  if (statesToMirror.length === 0) {\n    statesToMirror.push('change');\n  }\n\n  statesToMirror.map(state => upstreamPlugin.status.on(state, mirror));\n  mirror(null, null, upstreamPlugin.status.state, upstreamPlugin.status.message); // initial mirroring\n}\n"
      ]
    },
    "mtime": 1485775588029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/server/lib/require_all_and_apply.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "bluebird",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Promise"
              }
            ]
          },
          {
            "source": "glob",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "glob"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _bluebird = require('bluebird');\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _glob = require('glob');\n\nvar _glob2 = _interopRequireDefault(_glob);\n\nexports['default'] = function (path, server) {\n  return new _bluebird2['default'](function (resolve, reject) {\n    (0, _glob2['default'])(path, { ignore: '**/__test__/**' }, function (err, files) {\n      if (err) return reject(err);\n      var modules = files.map(require);\n      modules.forEach(function (fn) {\n        fn(server);\n      });\n      resolve(modules);\n    });\n  });\n};\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9zZXJ2ZXIvbGliL3JlcXVpcmVfYWxsX2FuZF9hcHBseS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozt3QkFBb0IsVUFBVTs7OztvQkFDYixNQUFNOzs7O3FCQUVSLFVBQVUsSUFBSSxFQUFFLE1BQU0sRUFBRTtBQUNyQyxTQUFPLDBCQUFZLFVBQVUsT0FBTyxFQUFFLE1BQU0sRUFBRTtBQUM1QywyQkFBSyxJQUFJLEVBQUUsRUFBRSxNQUFNLEVBQUUsZ0JBQWdCLEVBQUUsRUFBRSxVQUFVLEdBQUcsRUFBRSxLQUFLLEVBQUU7QUFDN0QsVUFBSSxHQUFHLEVBQUUsT0FBTyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7QUFDNUIsVUFBSSxPQUFPLEdBQUcsS0FBSyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUNqQyxhQUFPLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxFQUFFO0FBQzVCLFVBQUUsQ0FBQyxNQUFNLENBQUMsQ0FBQztPQUNaLENBQUMsQ0FBQztBQUNILGFBQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztLQUNsQixDQUFDLENBQUM7R0FDSixDQUFDLENBQUM7Q0FDSjs7QUFBQSxDQUFDIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9zZXJ2ZXIvbGliL3JlcXVpcmVfYWxsX2FuZF9hcHBseS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQcm9taXNlIGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCBnbG9iIGZyb20gJ2dsb2InO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiAocGF0aCwgc2VydmVyKSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgZ2xvYihwYXRoLCB7IGlnbm9yZTogJyoqL19fdGVzdF9fLyoqJyB9LCBmdW5jdGlvbiAoZXJyLCBmaWxlcykge1xuICAgICAgaWYgKGVycikgcmV0dXJuIHJlamVjdChlcnIpO1xuICAgICAgdmFyIG1vZHVsZXMgPSBmaWxlcy5tYXAocmVxdWlyZSk7XG4gICAgICBtb2R1bGVzLmZvckVhY2goZnVuY3Rpb24gKGZuKSB7XG4gICAgICAgIGZuKHNlcnZlcik7XG4gICAgICB9KTtcbiAgICAgIHJlc29sdmUobW9kdWxlcyk7XG4gICAgfSk7XG4gIH0pO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/server/lib/require_all_and_apply.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;wBAAoB,UAAU;;;;oBACb,MAAM;;;;qBAER,UAAU,IAAI,EAAE,MAAM,EAAE;AACrC,SAAO,0BAAY,UAAU,OAAO,EAAE,MAAM,EAAE;AAC5C,2BAAK,IAAI,EAAE,EAAE,MAAM,EAAE,gBAAgB,EAAE,EAAE,UAAU,GAAG,EAAE,KAAK,EAAE;AAC7D,UAAI,GAAG,EAAE,OAAO,MAAM,CAAC,GAAG,CAAC,CAAC;AAC5B,UAAI,OAAO,GAAG,KAAK,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AACjC,aAAO,CAAC,OAAO,CAAC,UAAU,EAAE,EAAE;AAC5B,UAAE,CAAC,MAAM,CAAC,CAAC;OACZ,CAAC,CAAC;AACH,aAAO,CAAC,OAAO,CAAC,CAAC;KAClB,CAAC,CAAC;GACJ,CAAC,CAAC;CACJ;;AAAA,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/server/lib/require_all_and_apply.js",
      "sourcesContent": [
        "import Promise from 'bluebird';\nimport glob from 'glob';\n\nexport default function (path, server) {\n  return new Promise(function (resolve, reject) {\n    glob(path, { ignore: '**/__test__/**' }, function (err, files) {\n      if (err) return reject(err);\n      var modules = files.map(require);\n      modules.forEach(function (fn) {\n        fn(server);\n      });\n      resolve(modules);\n    });\n  });\n};\n"
      ]
    },
    "mtime": 1485775588029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/xpack_main/server/lib/inject_xpack_info_signature.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "injectXPackInfoSignature",
            "info",
            "request",
            "reply"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "injectXPackInfoSignature",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "info",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "request",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "reply",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = injectXPackInfoSignature;\n\nfunction injectXPackInfoSignature(info, request, reply) {\n\n  function addSignatureHeader(response, signature) {\n    if (signature) {\n      response.headers['kbn-xpack-sig'] = signature;\n    }\n    return reply['continue']();\n  }\n\n  // If we're returning an error response, refresh xpack info\n  // from Elastisearch in case the error is due to a change in\n  // license information in Elasticsearch\n  if (request.response instanceof Error) {\n    return info.refreshNow().then(function (refreshedInfo) {\n      var signature = refreshedInfo.getSignature();\n      // Note: request.response.output is used instead of request.response\n      // because evidently HAPI does not allow headers to be set on the latter\n      // in case of error responses.\n      return addSignatureHeader(request.response.output, signature);\n    });\n  } else {\n    var signature = info.getSignature();\n    return addSignatureHeader(request.response, signature);\n  }\n}\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3hwYWNrX21haW4vc2VydmVyL2xpYi9pbmplY3RfeHBhY2tfaW5mb19zaWduYXR1cmUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7cUJBQXdCLHdCQUF3Qjs7QUFBakMsU0FBUyx3QkFBd0IsQ0FBQyxJQUFJLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRTs7QUFFckUsV0FBUyxrQkFBa0IsQ0FBQyxRQUFRLEVBQUUsU0FBUyxFQUFFO0FBQy9DLFFBQUksU0FBUyxFQUFFO0FBQ2IsY0FBUSxDQUFDLE9BQU8sQ0FBQyxlQUFlLENBQUMsR0FBRyxTQUFTLENBQUM7S0FDL0M7QUFDRCxXQUFPLEtBQUssWUFBUyxFQUFFLENBQUM7R0FDekI7Ozs7O0FBS0QsTUFBSSxPQUFPLENBQUMsUUFBUSxZQUFZLEtBQUssRUFBRTtBQUNyQyxXQUFPLElBQUksQ0FBQyxVQUFVLEVBQUUsQ0FDdkIsSUFBSSxDQUFDLFVBQUMsYUFBYSxFQUFLO0FBQ3ZCLFVBQU0sU0FBUyxHQUFHLGFBQWEsQ0FBQyxZQUFZLEVBQUUsQ0FBQzs7OztBQUkvQyxhQUFPLGtCQUFrQixDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsTUFBTSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0tBQy9ELENBQUMsQ0FBQztHQUNKLE1BQU07QUFDTCxRQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsWUFBWSxFQUFFLENBQUM7QUFDdEMsV0FBTyxrQkFBa0IsQ0FBQyxPQUFPLENBQUMsUUFBUSxFQUFFLFNBQVMsQ0FBQyxDQUFDO0dBQ3hEO0NBQ0Y7O0FBQUEsQ0FBQyIsImZpbGUiOiIvaG9tZS91YnVudHUvd29ya3NwYWNlL2tpYmFuYS01LjAuMi1saW51eC14ODZfNjQvcGx1Z2lucy94LXBhY2svcGx1Z2lucy94cGFja19tYWluL3NlcnZlci9saWIvaW5qZWN0X3hwYWNrX2luZm9fc2lnbmF0dXJlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaW5qZWN0WFBhY2tJbmZvU2lnbmF0dXJlKGluZm8sIHJlcXVlc3QsIHJlcGx5KSB7XG5cbiAgZnVuY3Rpb24gYWRkU2lnbmF0dXJlSGVhZGVyKHJlc3BvbnNlLCBzaWduYXR1cmUpIHtcbiAgICBpZiAoc2lnbmF0dXJlKSB7XG4gICAgICByZXNwb25zZS5oZWFkZXJzWydrYm4teHBhY2stc2lnJ10gPSBzaWduYXR1cmU7XG4gICAgfVxuICAgIHJldHVybiByZXBseS5jb250aW51ZSgpO1xuICB9XG5cbiAgLy8gSWYgd2UncmUgcmV0dXJuaW5nIGFuIGVycm9yIHJlc3BvbnNlLCByZWZyZXNoIHhwYWNrIGluZm9cbiAgLy8gZnJvbSBFbGFzdGlzZWFyY2ggaW4gY2FzZSB0aGUgZXJyb3IgaXMgZHVlIHRvIGEgY2hhbmdlIGluXG4gIC8vIGxpY2Vuc2UgaW5mb3JtYXRpb24gaW4gRWxhc3RpY3NlYXJjaFxuICBpZiAocmVxdWVzdC5yZXNwb25zZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgcmV0dXJuIGluZm8ucmVmcmVzaE5vdygpXG4gICAgLnRoZW4oKHJlZnJlc2hlZEluZm8pID0+IHtcbiAgICAgIGNvbnN0IHNpZ25hdHVyZSA9IHJlZnJlc2hlZEluZm8uZ2V0U2lnbmF0dXJlKCk7XG4gICAgICAvLyBOb3RlOiByZXF1ZXN0LnJlc3BvbnNlLm91dHB1dCBpcyB1c2VkIGluc3RlYWQgb2YgcmVxdWVzdC5yZXNwb25zZVxuICAgICAgLy8gYmVjYXVzZSBldmlkZW50bHkgSEFQSSBkb2VzIG5vdCBhbGxvdyBoZWFkZXJzIHRvIGJlIHNldCBvbiB0aGUgbGF0dGVyXG4gICAgICAvLyBpbiBjYXNlIG9mIGVycm9yIHJlc3BvbnNlcy5cbiAgICAgIHJldHVybiBhZGRTaWduYXR1cmVIZWFkZXIocmVxdWVzdC5yZXNwb25zZS5vdXRwdXQsIHNpZ25hdHVyZSk7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgY29uc3Qgc2lnbmF0dXJlID0gaW5mby5nZXRTaWduYXR1cmUoKTtcbiAgICByZXR1cm4gYWRkU2lnbmF0dXJlSGVhZGVyKHJlcXVlc3QucmVzcG9uc2UsIHNpZ25hdHVyZSk7XG4gIH1cbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/xpack_main/server/lib/inject_xpack_info_signature.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAAwB,wBAAwB;;AAAjC,SAAS,wBAAwB,CAAC,IAAI,EAAE,OAAO,EAAE,KAAK,EAAE;;AAErE,WAAS,kBAAkB,CAAC,QAAQ,EAAE,SAAS,EAAE;AAC/C,QAAI,SAAS,EAAE;AACb,cAAQ,CAAC,OAAO,CAAC,eAAe,CAAC,GAAG,SAAS,CAAC;KAC/C;AACD,WAAO,KAAK,YAAS,EAAE,CAAC;GACzB;;;;;AAKD,MAAI,OAAO,CAAC,QAAQ,YAAY,KAAK,EAAE;AACrC,WAAO,IAAI,CAAC,UAAU,EAAE,CACvB,IAAI,CAAC,UAAC,aAAa,EAAK;AACvB,UAAM,SAAS,GAAG,aAAa,CAAC,YAAY,EAAE,CAAC;;;;AAI/C,aAAO,kBAAkB,CAAC,OAAO,CAAC,QAAQ,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;KAC/D,CAAC,CAAC;GACJ,MAAM;AACL,QAAM,SAAS,GAAG,IAAI,CAAC,YAAY,EAAE,CAAC;AACtC,WAAO,kBAAkB,CAAC,OAAO,CAAC,QAAQ,EAAE,SAAS,CAAC,CAAC;GACxD;CACF;;AAAA,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/xpack_main/server/lib/inject_xpack_info_signature.js",
      "sourcesContent": [
        "export default function injectXPackInfoSignature(info, request, reply) {\n\n  function addSignatureHeader(response, signature) {\n    if (signature) {\n      response.headers['kbn-xpack-sig'] = signature;\n    }\n    return reply.continue();\n  }\n\n  // If we're returning an error response, refresh xpack info\n  // from Elastisearch in case the error is due to a change in\n  // license information in Elasticsearch\n  if (request.response instanceof Error) {\n    return info.refreshNow()\n    .then((refreshedInfo) => {\n      const signature = refreshedInfo.getSignature();\n      // Note: request.response.output is used instead of request.response\n      // because evidently HAPI does not allow headers to be set on the latter\n      // in case of error responses.\n      return addSignatureHeader(request.response.output, signature);\n    });\n  } else {\n    const signature = info.getSignature();\n    return addSignatureHeader(request.response, signature);\n  }\n};\n"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/server/lib/xpack_info.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "once"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "once",
                "local": "once"
              }
            ]
          },
          {
            "source": "./_xpack_info",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_xpackInfo"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _xpack_info = require('./_xpack_info');\n\nvar _xpack_info2 = _interopRequireDefault(_xpack_info);\n\nexports['default'] = (0, _lodash.once)(_xpack_info2['default']);\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9zZXJ2ZXIvbGliL3hwYWNrX2luZm8uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7c0JBQXFCLFFBQVE7OzBCQUNOLGVBQWU7Ozs7cUJBRXZCLDBDQUFnQiIsImZpbGUiOiIvaG9tZS91YnVudHUvd29ya3NwYWNlL2tpYmFuYS01LjAuMi1saW51eC14ODZfNjQvcGx1Z2lucy94LXBhY2svc2VydmVyL2xpYi94cGFja19pbmZvLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgb25jZSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgX3hwYWNrSW5mbyBmcm9tICcuL194cGFja19pbmZvJztcblxuZXhwb3J0IGRlZmF1bHQgb25jZShfeHBhY2tJbmZvKTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/server/lib/xpack_info.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;sBAAqB,QAAQ;;0BACN,eAAe;;;;qBAEvB,0CAAgB",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/server/lib/xpack_info.js",
      "sourcesContent": [
        "import { once } from 'lodash';\nimport _xpackInfo from './_xpack_info';\n\nexport default once(_xpackInfo);\n"
      ]
    },
    "mtime": 1485775587893
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/server/lib/_xpack_info.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "crypto",
            "imported": [
              "createHash"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "createHash",
                "local": "createHash"
              }
            ]
          },
          {
            "source": "moment",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "moment"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "get",
              "set",
              "includes",
              "forIn"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "get",
                "local": "get"
              },
              {
                "kind": "named",
                "imported": "set",
                "local": "set"
              },
              {
                "kind": "named",
                "imported": "includes",
                "local": "includes"
              },
              {
                "kind": "named",
                "imported": "forIn",
                "local": "forIn"
              }
            ]
          },
          {
            "source": "./poller",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Poller"
              }
            ]
          },
          {
            "source": "./constants",
            "imported": [
              "LICENSE_EXPIRY_SOON_DURATION",
              "XPACK_INFO_API_DEFAULT_POLL_FREQUENCY"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "LICENSE_EXPIRY_SOON_DURATION",
                "local": "LICENSE_EXPIRY_SOON_DURATION"
              },
              {
                "kind": "named",
                "imported": "XPACK_INFO_API_DEFAULT_POLL_FREQUENCY",
                "local": "XPACK_INFO_API_DEFAULT_POLL_FREQUENCY"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "_xpackInfo",
            "server",
            "client",
            "pollFrequencyInMillis"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "_xpackInfo",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "server",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "client",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "pollFrequencyInMillis",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = _xpackInfo;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _crypto = require('crypto');\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _lodash = require('lodash');\n\nvar _poller = require('./poller');\n\nvar _poller2 = _interopRequireDefault(_poller);\n\nvar _constants = require('./constants');\n\nfunction _xpackInfo(server, client, pollFrequencyInMillis) {\n\n  pollFrequencyInMillis = pollFrequencyInMillis || _constants.XPACK_INFO_API_DEFAULT_POLL_FREQUENCY.asMilliseconds();\n\n  var _cachedResponseFromElasticsearch = undefined;\n\n  var _licenseCheckResultsGenerators = {};\n  var _licenseCheckResults = {};\n  var _cachedXPackInfoJSON = undefined;\n  var _cachedXPackInfoJSONSignature = undefined;\n\n  var poller = new _poller2['default']({\n    functionToPoll: _callElasticsearchXPackAPI,\n    successFunction: _handleResponseFromElasticsearch,\n    errorFunction: _handleErrorFromElasticsearch,\n    pollFrequencyInMillis: pollFrequencyInMillis,\n    continuePollingOnError: true\n  });\n\n  var xpackInfoObject = {\n    license: {\n      isActive: function isActive() {\n        return (0, _lodash.get)(_cachedResponseFromElasticsearch, 'license.status') === 'active';\n      },\n      expiresSoon: function expiresSoon() {\n        var expiryDateMillis = (0, _lodash.get)(_cachedResponseFromElasticsearch, 'license.expiry_date_in_millis');\n        var expirySoonDate = _moment2['default'].utc(expiryDateMillis).subtract(_constants.LICENSE_EXPIRY_SOON_DURATION);\n        return _moment2['default'].utc().isAfter(expirySoonDate);\n      },\n      getExpiryDateInMillis: function getExpiryDateInMillis() {\n        return (0, _lodash.get)(_cachedResponseFromElasticsearch, 'license.expiry_date_in_millis');\n      },\n      isOneOf: function isOneOf(candidateLicenses) {\n        if (!Array.isArray(candidateLicenses)) {\n          candidateLicenses = [candidateLicenses];\n        }\n        return (0, _lodash.includes)(candidateLicenses, (0, _lodash.get)(_cachedResponseFromElasticsearch, 'license.mode'));\n      },\n      getType: function getType() {\n        return (0, _lodash.get)(_cachedResponseFromElasticsearch, 'license.type');\n      }\n    },\n    feature: function feature(_feature) {\n      return {\n        isAvailable: function isAvailable() {\n          return (0, _lodash.get)(_cachedResponseFromElasticsearch, 'features.' + _feature + '.available');\n        },\n        isEnabled: function isEnabled() {\n          return (0, _lodash.get)(_cachedResponseFromElasticsearch, 'features.' + _feature + '.enabled');\n        },\n        registerLicenseCheckResultsGenerator: function registerLicenseCheckResultsGenerator(generator) {\n          _licenseCheckResultsGenerators[_feature] = generator;\n          _updateXPackInfoJSON();\n        },\n        getLicenseCheckResults: function getLicenseCheckResults() {\n          return _licenseCheckResults[_feature];\n        }\n      };\n    },\n    isAvailable: function isAvailable() {\n      return !!_cachedResponseFromElasticsearch && !!(0, _lodash.get)(_cachedResponseFromElasticsearch, 'license');\n    },\n    getSignature: function getSignature() {\n      return _cachedXPackInfoJSONSignature;\n    },\n    refreshNow: function refreshNow() {\n      var self = this;\n      return _callElasticsearchXPackAPI().then(_handleResponseFromElasticsearch)['catch'](_handleErrorFromElasticsearch).then(function () {\n        return self;\n      });\n    },\n    stopPolling: function stopPolling() {\n      // This method exists primarily for unit testing\n      poller.stop();\n    },\n    toJSON: function toJSON() {\n      return _cachedXPackInfoJSON;\n    }\n  };\n\n  function _callElasticsearchXPackAPI() {\n    server.log(['license', 'debug', 'xpack'], 'Calling Elasticsearch _xpack API');\n    return client.transport.request({\n      method: 'GET',\n      path: '/_xpack'\n    });\n  };\n\n  function _updateXPackInfoJSON() {\n    var json = {};\n\n    // Set response elements common to all features\n    (0, _lodash.set)(json, 'license.type', xpackInfoObject.license.getType());\n    (0, _lodash.set)(json, 'license.isActive', xpackInfoObject.license.isActive());\n    (0, _lodash.set)(json, 'license.expiryDateInMillis', xpackInfoObject.license.getExpiryDateInMillis());\n\n    // Set response elements specific to each feature. To do this,\n    // call the license check results generator for each feature, passing them\n    // the xpack info object\n    (0, _lodash.forIn)(_licenseCheckResultsGenerators, function (generator, feature) {\n      _licenseCheckResults[feature] = generator(xpackInfoObject); // return value expected to be a dictionary object\n    });\n    (0, _lodash.set)(json, 'features', _licenseCheckResults);\n\n    _cachedXPackInfoJSON = json;\n    _cachedXPackInfoJSONSignature = (0, _crypto.createHash)('md5').update(JSON.stringify(json)).digest('hex');\n  }\n\n  function _hasLicenseInfoFromElasticsearchChanged(response) {\n    var cachedResponse = _cachedResponseFromElasticsearch;\n    return (0, _lodash.get)(response, 'license.mode') !== (0, _lodash.get)(cachedResponse, 'license.mode') || (0, _lodash.get)(response, 'license.status') !== (0, _lodash.get)(cachedResponse, 'license.status') || (0, _lodash.get)(response, 'license.expiry_date_in_millis') !== (0, _lodash.get)(cachedResponse, 'license.expiry_date_in_millis');\n  }\n\n  function _getLicenseInfoForLog(response) {\n    var mode = (0, _lodash.get)(response, 'license.mode');\n    var status = (0, _lodash.get)(response, 'license.status');\n    var expiryDateInMillis = (0, _lodash.get)(response, 'license.expiry_date_in_millis');\n\n    return ['mode: ' + mode, 'status: ' + status, 'expiry date: ' + (0, _moment2['default'])(expiryDateInMillis, 'x').format()].join(' | ');\n  }\n\n  function _handleResponseFromElasticsearch(response) {\n\n    if (_hasLicenseInfoFromElasticsearchChanged(response)) {\n      var changed = '';\n      if (_cachedResponseFromElasticsearch) {\n        changed = 'changed ';\n      }\n\n      var licenseInfo = _getLicenseInfoForLog(response);\n      var logMessage = 'Imported ' + changed + 'license information from Elasticsearch: ' + licenseInfo;\n      server.log(['license', 'info', 'xpack'], logMessage);\n    }\n\n    _cachedResponseFromElasticsearch = response;\n    _updateXPackInfoJSON();\n  }\n\n  function _handleErrorFromElasticsearch(error) {\n    server.log(['license', 'warning', 'xpack'], 'License information could not be obtained from Elasticsearch. ' + error);\n    _cachedResponseFromElasticsearch = null;\n    _updateXPackInfoJSON();\n\n    // allow tests to shutdown\n    error.info = xpackInfoObject;\n\n    throw error;\n  }\n\n  // Start polling for changes\n  return poller.start().then(function () {\n    return xpackInfoObject;\n  });\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9zZXJ2ZXIvbGliL194cGFja19pbmZvLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O3FCQU13QixVQUFVOzs7O3NCQU5QLFFBQVE7O3NCQUNoQixRQUFROzs7O3NCQUNlLFFBQVE7O3NCQUMvQixVQUFVOzs7O3lCQUN1RCxhQUFhOztBQUVsRixTQUFTLFVBQVUsQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLHFCQUFxQixFQUFFOztBQUV4RSx1QkFBcUIsR0FBRyxxQkFBcUIsSUFBSSxpREFBc0MsY0FBYyxFQUFFLENBQUM7O0FBRXhHLE1BQUksZ0NBQWdDLFlBQUEsQ0FBQzs7QUFFckMsTUFBSSw4QkFBOEIsR0FBRyxFQUFFLENBQUM7QUFDeEMsTUFBSSxvQkFBb0IsR0FBRyxFQUFFLENBQUM7QUFDOUIsTUFBSSxvQkFBb0IsWUFBQSxDQUFDO0FBQ3pCLE1BQUksNkJBQTZCLFlBQUEsQ0FBQzs7QUFFbEMsTUFBTSxNQUFNLEdBQUcsd0JBQVc7QUFDeEIsa0JBQWMsRUFBRSwwQkFBMEI7QUFDMUMsbUJBQWUsRUFBRSxnQ0FBZ0M7QUFDakQsaUJBQWEsRUFBRSw2QkFBNkI7QUFDNUMseUJBQXFCLEVBQXJCLHFCQUFxQjtBQUNyQiwwQkFBc0IsRUFBRSxJQUFJO0dBQzdCLENBQUMsQ0FBQzs7QUFFSCxNQUFNLGVBQWUsR0FBRztBQUN0QixXQUFPLEVBQUU7QUFDUCxjQUFRLEVBQUUsb0JBQVk7QUFDcEIsZUFBTyxpQkFBSSxnQ0FBZ0MsRUFBRSxnQkFBZ0IsQ0FBQyxLQUFLLFFBQVEsQ0FBQztPQUM3RTtBQUNELGlCQUFXLEVBQUUsdUJBQVk7QUFDdkIsWUFBTSxnQkFBZ0IsR0FBRyxpQkFBSSxnQ0FBZ0MsRUFBRSwrQkFBK0IsQ0FBQyxDQUFDO0FBQ2hHLFlBQU0sY0FBYyxHQUFHLG9CQUFPLEdBQUcsQ0FBQyxnQkFBZ0IsQ0FBQyxD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RSxDQUMzRCxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQztHQUNmOztBQUVELFdBQVMsZ0NBQWdDLENBQUMsUUFBUSxFQUFFOztBQUVsRCxRQUFJLHVDQUF1QyxDQUFDLFFBQVEsQ0FBQyxFQUFFO0FBQ3JELFVBQUksT0FBTyxHQUFHLEVBQUUsQ0FBQztBQUNqQixVQUFJLGdDQUFnQyxFQUFFO0FBQ3BDLGVBQU8sR0FBRyxVQUFVLENBQUM7T0FDdEI7O0FBRUQsVUFBTSxXQUFXLEdBQUcscUJBQXFCLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDcEQsVUFBTSxVQUFVLGlCQUFlLE9BQU8sZ0RBQTJDLFdBQVcsQUFBRSxDQUFDO0FBQy9GLFlBQU0sQ0FBQyxHQUFHLENBQUMsQ0FBRSxTQUFTLEVBQUUsTUFBTSxFQUFFLE9BQU8sQ0FBRyxFQUFFLFVBQVUsQ0FBQyxDQUFDO0tBQ3pEOztBQUVELG9DQUFnQyxHQUFHLFFBQVEsQ0FBQztBQUM1Qyx3QkFBb0IsRUFBRSxDQUFDO0dBQ3hCOztBQUVELFdBQVMsNkJBQTZCLENBQUMsS0FBSyxFQUFFO0FBQzVDLFVBQU0sQ0FBQyxHQUFHLENBQUMsQ0FBRSxTQUFTLEVBQUUsU0FBUyxFQUFFLE9BQU8sQ0FBRSxFQUFFLGdFQUFnRSxHQUFHLEtBQUssQ0FBQyxDQUFDO0FBQ3hILG9DQUFnQyxHQUFHLElBQUksQ0FBQztBQUN4Qyx3QkFBb0IsRUFBRSxDQUFDOzs7QUFHdkIsU0FBSyxDQUFDLElBQUksR0FBRyxlQUFlLENBQUM7O0FBRTdCLFVBQU0sS0FBSyxDQUFDO0dBQ2I7OztBQUdELFNBQU8sTUFBTSxDQUFDLEtBQUssRUFBRSxDQUNwQixJQUFJLENBQUM7V0FBTSxlQUFlO0dBQUEsQ0FBQyxDQUFDO0NBQzlCIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9zZXJ2ZXIvbGliL194cGFja19pbmZvLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgY3JlYXRlSGFzaCB9IGZyb20gJ2NyeXB0byc7XG5pbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5pbXBvcnQgeyBnZXQsIHNldCwgaW5jbHVkZXMsIGZvckluIH0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBQb2xsZXIgZnJvbSAnLi9wb2xsZXInO1xuaW1wb3J0IHsgTElDRU5TRV9FWFBJUllfU09PTl9EVVJBVElPTiwgWFBBQ0tfSU5GT19BUElfREVGQVVMVF9QT0xMX0ZSRVFVRU5DWSB9IGZyb20gJy4vY29uc3RhbnRzJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gX3hwYWNrSW5mbyhzZXJ2ZXIsIGNsaWVudCwgcG9sbEZyZXF1ZW5jeUluTWlsbGlzKSB7XG5cbiAgcG9sbEZyZXF1ZW5jeUluTWlsbGlzID0gcG9sbEZyZXF1ZW5jeUluTWlsbGlzIHx8IFhQQUNLX0lORk9fQVBJX0RFRkFVTFRfUE9MTF9GUkVRVUVOQ1kuYXNNaWxsaXNlY29uZHMoKTtcblxuICBsZXQgX2NhY2hlZFJlc3BvbnNlRnJvbUVsYXN0aWNzZWFyY2g7XG5cbiAgbGV0IF9saWNlbnNlQ2hlY2tSZXN1bHRzR2VuZXJhdG9ycyA9IHt9O1xuICBsZXQgX2xpY2Vuc2VDaGVja1Jlc3VsdHMgPSB7fTtcbiAgbGV0IF9jYWNoZWRYUGFja0luZm9KU09OO1xuICBsZXQgX2NhY2hlZFhQYWNrSW5mb0pTT05TaWduYXR1cmU7XG5cbiAgY29uc3QgcG9sbGVyID0gbmV3IFBvbGxlcih7XG4gICAgZnVuY3Rpb25Ub1BvbGw6IF9jYWxsRWxhc3RpY3NlYXJjaFhQYWNrQVBJLFxuICAgIHN1Y2Nlc3NGdW5jdGlvbjogX2hhbmRsZVJlc3BvbnNlRnJvbUVsYXN0aWNzZWFyY2gsXG4gICAgZXJyb3JGdW5jdGlvbjogX2hhbmRsZUVycm9yRnJvbUVsYXN0aWNzZWFyY2gsXG4gICAgcG9sbEZyZXF1ZW5jeUluTWlsbGlzLFxuICAgIGNvbnRpbnVlUG9sbGluZ09uRXJyb3I6IHRydWVcbiAgfSk7XG5cbiAgY29uc3QgeHBhY2tJbmZvT2JqZWN0ID0ge1xuICAgIGxpY2Vuc2U6IHtcbiAgICAgIGlzQWN0aXZlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgIHJldHVybiBnZXQoX2NhY2hlZFJlc3BvbnNlRnJvbUVsYXN0aWNzZWFyY2gsICdsaWNlbnNlLnN0YXR1cycpID09PSAnYWN0aXZlJztcbiAgICAgIH0sXG4gICAgICBleHBpcmVzU29vbjogZnVuY3Rpb24gKCkge1xuICAgICAgICBjb25zdCBleHBpcnlEYXRlTWlsbGlzID0gZ2V0KF9jYWNoZWRSZXNwb25zZUZyb21FbGFzdGljc2VhcmNoLCAnbGljZW5zZS5leHBpcnlfZGF0ZV9pbl9taWxsaXMnKTtcbiAgICAgICAgY29uc3QgZXhwaXJ5U29vbkRhdGUgPSBtb21lbnQudXRjKGV4cGlyeURhdGVNaWxsaXMpLnN1YnRyYWN0KExJQ0VOU0VfRVhQSVJZX1NPT05fRFVSQVRJT04pO1xuICAgICAgICByZXR1cm4gbW9tZW50LnV0YygpLmlzQWZ0ZXIoZXhwaXJ5U29vbkRhdGUpO1xuICAgICAgfSxcbiAgICAgIGdldEV4cGlyeURhdGVJbk1pbGxpczogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gZ2V0KF9jYWNoZWRSZXNwb25zZUZyb21FbGFzdGljc2VhcmNoLCAnbGljZW5zZS5leHBpcnlfZGF0ZV9pbl9taWxsaXMnKTtcbiAgICAgIH0sXG4gICAgICBpc09uZU9mOiBmdW5jdGlvbiAoY2FuZGlkYXRlTGljZW5zZXMpIHtcbiAgICAgICAgaWYgKCFBcnJheS5pc0FycmF5KGNhbmRpZGF0ZUxpY2Vuc2VzKSkge1xuICAgICAgICAgIGNhbmRpZGF0ZUxpY2Vuc2VzID0gWyBjYW5kaWRhdGVMaWNlbnNlcyBdO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBpbmNsdWRlcyhjYW5kaWRhdGVMaWNlbnNlcywgZ2V0KF9jYWNoZWRSZXNwb25zZUZyb21FbGFzdGljc2VhcmNoLCAnbGljZW5zZS5tb2RlJykpO1xuICAgICAgfSxcbiAgICAgIGdldFR5cGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgcmV0dXJuIGdldChfY2FjaGVkUmVzcG9uc2VGcm9tRWxhc3RpY3NlYXJjaCwgJ2xpY2Vuc2UudHlwZScpO1xuICAgICAgfVxuICAgIH0sXG4gICAgZmVhdHVyZTogZnVuY3Rpb24gKGZlYXR1cmUpIHtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlzQXZhaWxhYmxlOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIGdldChfY2FjaGVkUmVzcG9uc2VGcm9tRWxhc3RpY3NlYXJjaCwgJ2ZlYXR1cmVzLicgKyBmZWF0dXJlICsgJy5hdmFpbGFibGUnKTtcbiAgICAgICAgfSxcbiAgICAgICAgaXNFbmFibGVkOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIGdldChfY2FjaGVkUmVzcG9uc2VGcm9tRWxhc3RpY3NlYXJjaCwgJ2ZlYXR1cmVzLicgKyBmZWF0dXJlICsgJy5lbmFibGVkJyk7XG4gICAgICAgIH0sXG4gICAgICAgIHJlZ2lzdGVyTGljZW5zZUNoZWNrUmVzdWx0c0dlbmVyYXRvcjogZnVuY3Rpb24gKGdlbmVyYXRvcikge1xuICAgICAgICAgIF9saWNlbnNlQ2hlY2tSZXN1bHRzR2VuZXJhdG9yc1tmZWF0dXJlXSA9IGdlbmVyYXRvcjtcbiAgICAgICAgICBfdXBkYXRlWFBhY2tJbmZvSlNPTigpO1xuICAgICAgICB9LFxuICAgICAgICBnZXRMaWNlbnNlQ2hlY2tSZXN1bHRzOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgcmV0dXJuIF9saWNlbnNlQ2hlY2tSZXN1bHRzW2ZlYXR1cmVdO1xuICAgICAgICB9XG4gICAgICB9O1xuICAgIH0sXG4gICAgaXNBdmFpbGFibGU6IGZ1bmN0aW9uICgpIHtcbiAgICAgIHJldHVybiAhIV9jYWNoZWRSZXNwb25zZUZyb21FbGFzdGljc2VhcmNoICYmICEhZ2V0KF9jYWNoZWRSZXNwb25zZUZyb21FbGFzdGljc2VhcmNoLCAnbGljZW5zZScpO1xuICAgIH0sXG4gICAgZ2V0U2lnbmF0dXJlOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gX2NhY2hlZFhQYWNrSW5mb0pTT05TaWduYXR1cmU7XG4gICAgfSxcbiAgICByZWZyZXNoTm93OiBmdW5jdGlvbiAoKSB7XG4gICAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICAgIHJldHVybiBfY2FsbEVsYXN0aWNzZWFyY2hYUGFja0FQSSgpXG4gICAgICAudGhlbihfaGFuZGxlUmVzcG9uc2VGcm9tRWxhc3RpY3NlYXJjaClcbiAgICAgIC5jYXRjaChfaGFuZGxlRXJyb3JGcm9tRWxhc3RpY3NlYXJjaClcbiAgICAgIC50aGVuKCgpID0+IHNlbGYpO1xuICAgIH0sXG4gICAgc3RvcFBvbGxpbmc6IGZ1bmN0aW9uICgpIHtcbiAgICAgIC8vIFRoaXMgbWV0aG9kIGV4aXN0cyBwcmltYXJpbHkgZm9yIHVuaXQgdGVzdGluZ1xuICAgICAgcG9sbGVyLnN0b3AoKTtcbiAgICB9LFxuICAgIHRvSlNPTjogZnVuY3Rpb24gKCkge1xuICAgICAgcmV0dXJuIF9jYWNoZWRYUGFja0luZm9KU09OO1xuICAgIH1cbiAgfTtcblxuICBmdW5jdGlvbiBfY2FsbEVsYXN0aWNzZWFyY2hYUGFja0FQSSgpIHtcbiAgICBzZXJ2ZXIubG9nKFsgJ2xpY2Vuc2UnLCAnZGVidWcnLCAneHBhY2snIF0sICdDYWxsaW5nIEVsYXN0aWNzZWFyY2ggX3hwYWNrIEFQSScpO1xuICAgIHJldHVybiBjbGllbnQudHJhbnNwb3J0LnJlcXVlc3Qoe1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIHBhdGg6ICcvX3hwYWNrJ1xuICAgIH0pO1xuICB9O1xuXG4gIGZ1bmN0aW9uIF91cGRhdGVYUGFja0luZm9KU09OKCkge1xuICAgIGxldCBqc29uID0ge307XG5cbiAgICAvLyBTZXQgcmVzcG9uc2UgZWxlbWVudHMgY29tbW9uIHRvIGFsbCBmZWF0dXJlc1xuICAgIHNldChqc29uLCAnbGljZW5zZS50eXBlJywgeHBhY2tJbmZvT2JqZWN0LmxpY2Vuc2UuZ2V0VHlwZSgpKTtcbiAgICBzZXQoanNvbiwgJ2xpY2Vuc2UuaXNBY3RpdmUnLCB4cGFja0luZm9PYmplY3QubGljZW5zZS5pc0FjdGl2ZSgpKTtcbiAgICBzZXQoanNvbiwgJ2xpY2Vuc2UuZXhwaXJ5RGF0ZUluTWlsbGlzJywgeHBhY2tJbmZvT2JqZWN0LmxpY2Vuc2UuZ2V0RXhwaXJ5RGF0ZUluTWlsbGlzKCkpO1xuXG4gICAgLy8gU2V0IHJlc3BvbnNlIGVsZW1lbnRzIHNwZWNpZmljIHRvIGVhY2ggZmVhdHVyZS4gVG8gZG8gdGhpcyxcbiAgICAvLyBjYWxsIHRoZSBsaWNlbnNlIGNoZWNrIHJlc3VsdHMgZ2VuZXJhdG9yIGZvciBlYWNoIGZlYXR1cmUsIHBhc3NpbmcgdGhlbVxuICAgIC8vIHRoZSB4cGFjayBpbmZvIG9iamVjdFxuICAgIGZvckluKF9saWNlbnNlQ2hlY2tSZXN1bHRzR2VuZXJhdG9ycywgKGdlbmVyYXRvciwgZmVhdHVyZSkgPT4ge1xuICAgICAgX2xpY2Vuc2VDaGVja1Jlc3VsdHNbZmVhdHVyZV0gPSBnZW5lcmF0b3IoeHBhY2tJbmZvT2JqZWN0KTsgLy8gcmV0dXJuIHZhbHVlIGV4cGVjdGVkIHRvIGJlIGEgZGljdGlvbmFyeSBvYmplY3RcbiAgICB9KTtcbiAgICBzZXQoanNvbiwgJ2ZlYXR1cmVzJywgX2xpY2Vuc2VDaGVja1Jlc3VsdHMpO1xuXG4gICAgX2NhY2hlZFhQYWNrSW5mb0pTT04gPSBqc29uO1xuICAgIF9jYWNoZWRYUGFja0luZm9KU09OU2lnbmF0dXJlID0gY3JlYXRlSGFzaCgnbWQ1JylcbiAgICAudXBkYXRlKEpTT04uc3RyaW5naWZ5KGpzb24pKVxuICAgIC5kaWdlc3QoJ2hleCcpO1xuICB9XG5cbiAgZnVuY3Rpb24gX2hhc0xpY2Vuc2VJbmZvRnJvbUVsYXN0aWNzZWFyY2hDaGFuZ2VkKHJlc3BvbnNlKSB7XG4gICAgY29uc3QgY2FjaGVkUmVzcG9uc2UgPSBfY2FjaGVkUmVzcG9uc2VGcm9tRWxhc3RpY3NlYXJjaDtcbiAgICByZXR1cm4gKGdldChyZXNwb25zZSwgJ2xpY2Vuc2UubW9kZScpICE9PSBnZXQoY2FjaGVkUmVzcG9uc2UsICdsaWNlbnNlLm1vZGUnKVxuICAgICAgfHwgZ2V0KHJlc3BvbnNlLCAnbGljZW5zZS5zdGF0dXMnKSAhPT0gZ2V0KGNhY2hlZFJlc3BvbnNlLCAnbGljZW5zZS5zdGF0dXMnKVxuICAgICAgfHwgZ2V0KHJlc3BvbnNlLCAnbGljZW5zZS5leHBpcnlfZGF0ZV9pbl9taWxsaXMnKSAhPT0gZ2V0KGNhY2hlZFJlc3BvbnNlLCAnbGljZW5zZS5leHBpcnlfZGF0ZV9pbl9taWxsaXMnKSk7XG4gIH1cblxuICBmdW5jdGlvbiBfZ2V0TGljZW5zZUluZm9Gb3JMb2cocmVzcG9uc2UpIHtcbiAgICBjb25zdCBtb2RlID0gZ2V0KHJlc3BvbnNlLCAnbGljZW5zZS5tb2RlJyk7XG4gICAgY29uc3Qgc3RhdHVzID0gZ2V0KHJlc3BvbnNlLCAnbGljZW5zZS5zdGF0dXMnKTtcbiAgICBjb25zdCBleHBpcnlEYXRlSW5NaWxsaXMgPSBnZXQocmVzcG9uc2UsICdsaWNlbnNlLmV4cGlyeV9kYXRlX2luX21pbGxpcycpO1xuXG4gICAgcmV0dXJuIFtcbiAgICAgICdtb2RlOiAnICsgbW9kZSxcbiAgICAgICdzdGF0dXM6ICcgKyBzdGF0dXMsXG4gICAgICAnZXhwaXJ5IGRhdGU6ICcgKyBtb21lbnQoZXhwaXJ5RGF0ZUluTWlsbGlzLCAneCcpLmZvcm1hdCgpXG4gICAgXS5qb2luKCcgfCAnKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIF9oYW5kbGVSZXNwb25zZUZyb21FbGFzdGljc2VhcmNoKHJlc3BvbnNlKSB7XG5cbiAgICBpZiAoX2hhc0xpY2Vuc2VJbmZvRnJvbUVsYXN0aWNzZWFyY2hDaGFuZ2VkKHJlc3BvbnNlKSkge1xuICAgICAgbGV0IGNoYW5nZWQgPSAnJztcbiAgICAgIGlmIChfY2FjaGVkUmVzcG9uc2VGcm9tRWxhc3RpY3NlYXJjaCkge1xuICAgICAgICBjaGFuZ2VkID0gJ2NoYW5nZWQgJztcbiAgICAgIH1cblxuICAgICAgY29uc3QgbGljZW5zZUluZm8gPSBfZ2V0TGljZW5zZUluZm9Gb3JMb2cocmVzcG9uc2UpO1xuICAgICAgY29uc3QgbG9nTWVzc2FnZSA9IGBJbXBvcnRlZCAke2NoYW5nZWR9bGljZW5zZSBpbmZvcm1hdGlvbiBmcm9tIEVsYXN0aWNzZWFyY2g6ICR7bGljZW5zZUluZm99YDtcbiAgICAgIHNlcnZlci5sb2coWyAnbGljZW5zZScsICdpbmZvJywgJ3hwYWNrJyAgXSwgbG9nTWVzc2FnZSk7XG4gICAgfVxuXG4gICAgX2NhY2hlZFJlc3BvbnNlRnJvbUVsYXN0aWNzZWFyY2ggPSByZXNwb25zZTtcbiAgICBfdXBkYXRlWFBhY2tJbmZvSlNPTigpO1xuICB9XG5cbiAgZnVuY3Rpb24gX2hhbmRsZUVycm9yRnJvbUVsYXN0aWNzZWFyY2goZXJyb3IpIHtcbiAgICBzZXJ2ZXIubG9nKFsgJ2xpY2Vuc2UnLCAnd2FybmluZycsICd4cGFjaycgXSwgJ0xpY2Vuc2UgaW5mb3JtYXRpb24gY291bGQgbm90IGJlIG9idGFpbmVkIGZyb20gRWxhc3RpY3NlYXJjaC4gJyArIGVycm9yKTtcbiAgICBfY2FjaGVkUmVzcG9uc2VGcm9tRWxhc3RpY3NlYXJjaCA9IG51bGw7XG4gICAgX3VwZGF0ZVhQYWNrSW5mb0pTT04oKTtcblxuICAgIC8vIGFsbG93IHRlc3RzIHRvIHNodXRkb3duXG4gICAgZXJyb3IuaW5mbyA9IHhwYWNrSW5mb09iamVjdDtcblxuICAgIHRocm93IGVycm9yO1xuICB9XG5cbiAgLy8gU3RhcnQgcG9sbGluZyBmb3IgY2hhbmdlc1xuICByZXR1cm4gcG9sbGVyLnN0YXJ0KClcbiAgLnRoZW4oKCkgPT4geHBhY2tJbmZvT2JqZWN0KTtcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/server/lib/_xpack_info.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/server/lib/_xpack_info.js",
      "sourcesContent": [
        "import { createHash } from 'crypto';\nimport moment from 'moment';\nimport { get, set, includes, forIn } from 'lodash';\nimport Poller from './poller';\nimport { LICENSE_EXPIRY_SOON_DURATION, XPACK_INFO_API_DEFAULT_POLL_FREQUENCY } from './constants';\n\nexport default function _xpackInfo(server, client, pollFrequencyInMillis) {\n\n  pollFrequencyInMillis = pollFrequencyInMillis || XPACK_INFO_API_DEFAULT_POLL_FREQUENCY.asMilliseconds();\n\n  let _cachedResponseFromElasticsearch;\n\n  let _licenseCheckResultsGenerators = {};\n  let _licenseCheckResults = {};\n  let _cachedXPackInfoJSON;\n  let _cachedXPackInfoJSONSignature;\n\n  const poller = new Poller({\n    functionToPoll: _callElasticsearchXPackAPI,\n    successFunction: _handleResponseFromElasticsearch,\n    errorFunction: _handleErrorFromElasticsearch,\n    pollFrequencyInMillis,\n    continuePollingOnError: true\n  });\n\n  const xpackInfoObject = {\n    license: {\n      isActive: function () {\n        return get(_cachedResponseFromElasticsearch, 'license.status') === 'active';\n      },\n      expiresSoon: function () {\n        const expiryDateMillis = get(_cachedResponseFromElasticsearch, 'license.expiry_date_in_millis');\n        const expirySoonDate = moment.utc(expiryDateMillis).subtract(LICENSE_EXPIRY_SOON_DURATION);\n        return moment.utc().isAfter(expirySoonDate);\n      },\n      getExpiryDateInMillis: function () {\n        return get(_cachedResponseFromElasticsearch, 'license.expiry_date_in_millis');\n      },\n      isOneOf: function (candidateLicenses) {\n        if (!Array.isArray(candidateLicenses)) {\n          candidateLicenses = [ candidateLicenses ];\n        }\n        return includes(candidateLicenses, get(_cachedResponseFromElasticsearch, 'license.mode'));\n      },\n      getType: function () {\n        return get(_cachedResponseFromElasticsearch, 'license.type');\n      }\n    },\n    feature: function (feature) {\n      return {\n        isAvailable: function () {\n          return get(_cachedResponseFromElasticsearch, 'features.' + feature + '.available');\n        },\n        isEnabled: function () {\n          return get(_cachedResponseFromElasticsearch, 'features.' + feature + '.enabled');\n        },\n        registerLicenseCheckResultsGenerator: function (generator) {\n          _licenseCheckResultsGenerators[feature] = generator;\n          _updateXPackInfoJSON();\n        },\n        getLicenseCheckResults: function () {\n          return _licenseCheckResults[feature];\n        }\n      };\n    },\n    isAvailable: function () {\n      return !!_cachedResponseFromElasticsearch && !!get(_cachedResponseFromElasticsearch, 'license');\n    },\n    getSignature: function () {\n      return _cachedXPackInfoJSONSignature;\n    },\n    refreshNow: function () {\n      const self = this;\n      return _callElasticsearchXPackAPI()\n      .then(_handleResponseFromElasticsearch)\n      .catch(_handleErrorFromElasticsearch)\n      .then(() => self);\n    },\n    stopPolling: function () {\n      // This method exists primarily for unit testing\n      poller.stop();\n    },\n    toJSON: function () {\n      return _cachedXPackInfoJSON;\n    }\n  };\n\n  function _callElasticsearchXPackAPI() {\n    server.log([ 'license', 'debug', 'xpack' ], 'Calling Elasticsearch _xpack API');\n    return client.transport.request({\n      method: 'GET',\n      path: '/_xpack'\n    });\n  };\n\n  function _updateXPackInfoJSON() {\n    let json = {};\n\n    // Set response elements common to all features\n    set(json, 'license.type', xpackInfoObject.license.getType());\n    set(json, 'license.isActive', xpackInfoObject.license.isActive());\n    set(json, 'license.expiryDateInMillis', xpackInfoObject.license.getExpiryDateInMillis());\n\n    // Set response elements specific to each feature. To do this,\n    // call the license check results generator for each feature, passing them\n    // the xpack info object\n    forIn(_licenseCheckResultsGenerators, (generator, feature) => {\n      _licenseCheckResults[feature] = generator(xpackInfoObject); // return value expected to be a dictionary object\n    });\n    set(json, 'features', _licenseCheckResults);\n\n    _cachedXPackInfoJSON = json;\n    _cachedXPackInfoJSONSignature = createHash('md5')\n    .update(JSON.stringify(json))\n    .digest('hex');\n  }\n\n  function _hasLicenseInfoFromElasticsearchChanged(response) {\n    const cachedResponse = _cachedResponseFromElasticsearch;\n    return (get(response, 'license.mode') !== get(cachedResponse, 'license.mode')\n      || get(response, 'license.status') !== get(cachedResponse, 'license.status')\n      || get(response, 'license.expiry_date_in_millis') !== get(cachedResponse, 'license.expiry_date_in_millis'));\n  }\n\n  function _getLicenseInfoForLog(response) {\n    const mode = get(response, 'license.mode');\n    const status = get(response, 'license.status');\n    const expiryDateInMillis = get(response, 'license.expiry_date_in_millis');\n\n    return [\n      'mode: ' + mode,\n      'status: ' + status,\n      'expiry date: ' + moment(expiryDateInMillis, 'x').format()\n    ].join(' | ');\n  }\n\n  function _handleResponseFromElasticsearch(response) {\n\n    if (_hasLicenseInfoFromElasticsearchChanged(response)) {\n      let changed = '';\n      if (_cachedResponseFromElasticsearch) {\n        changed = 'changed ';\n      }\n\n      const licenseInfo = _getLicenseInfoForLog(response);\n      const logMessage = `Imported ${changed}license information from Elasticsearch: ${licenseInfo}`;\n      server.log([ 'license', 'info', 'xpack'  ], logMessage);\n    }\n\n    _cachedResponseFromElasticsearch = response;\n    _updateXPackInfoJSON();\n  }\n\n  function _handleErrorFromElasticsearch(error) {\n    server.log([ 'license', 'warning', 'xpack' ], 'License information could not be obtained from Elasticsearch. ' + error);\n    _cachedResponseFromElasticsearch = null;\n    _updateXPackInfoJSON();\n\n    // allow tests to shutdown\n    error.info = xpackInfoObject;\n\n    throw error;\n  }\n\n  // Start polling for changes\n  return poller.start()\n  .then(() => xpackInfoObject);\n}\n"
      ]
    },
    "mtime": 1485775588029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/server/lib/poller.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "Poller"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "Poller",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar Poller = (function () {\n  function Poller(options) {\n    _classCallCheck(this, Poller);\n\n    this.functionToPoll = options.functionToPoll; // Must return a Promise\n    this.successFunction = options.successFunction || _lodash2['default'].noop;\n    this.errorFunction = options.errorFunction || _lodash2['default'].noop;\n    this.pollFrequencyInMillis = options.pollFrequencyInMillis;\n    this.continuePollingOnError = options.continuePollingOnError || false;\n    this._timeoutId = null;\n  }\n\n  _createClass(Poller, [{\n    key: '_poll',\n    value: function _poll() {\n      var _this = this;\n\n      return this.functionToPoll().then(this.successFunction).then(function () {\n        _this._timeoutId = setTimeout(_this._poll.bind(_this), _this.pollFrequencyInMillis);\n      })['catch'](function (e) {\n        if (_this.continuePollingOnError) {\n          _this._timeoutId = setTimeout(_this._poll.bind(_this), _this.pollFrequencyInMillis);\n        } else {\n          _this.stop();\n        }\n        _this.errorFunction(e);\n      });\n    }\n  }, {\n    key: 'start',\n    value: function start() {\n      if (!this.isRunning()) {\n        return this._poll();\n      }\n    }\n  }, {\n    key: 'stop',\n    value: function stop() {\n      if (this.isRunning()) {\n        clearTimeout(this._timeoutId);\n        this._timeoutId = null;\n      }\n    }\n  }, {\n    key: 'isRunning',\n    value: function isRunning() {\n      return this._timeoutId !== null;\n    }\n  }]);\n\n  return Poller;\n})();\n\nexports['default'] = Poller;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9zZXJ2ZXIvbGliL3BvbGxlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7c0JBQWMsUUFBUTs7OztJQUVELE1BQU07QUFFZCxXQUZRLE1BQU0sQ0FFYixPQUFPLEVBQUU7MEJBRkYsTUFBTTs7QUFHdkIsUUFBSSxDQUFDLGNBQWMsR0FBRyxPQUFPLENBQUMsY0FBYyxDQUFDO0FBQzdDLFFBQUksQ0FBQyxlQUFlLEdBQUcsT0FBTyxDQUFDLGVBQWUsSUFBSSxvQkFBRSxJQUFJLENBQUM7QUFDekQsUUFBSSxDQUFDLGFBQWEsR0FBRyxPQUFPLENBQUMsYUFBYSxJQUFJLG9CQUFFLElBQUksQ0FBQztBQUNyRCxRQUFJLENBQUMscUJBQXFCLEdBQUcsT0FBTyxDQUFDLHFCQUFxQixDQUFDO0FBQzNELFFBQUksQ0FBQyxzQkFBc0IsR0FBRyxPQUFPLENBQUMsc0JBQXNCLElBQUksS0FBSyxDQUFDO0FBQ3RFLFFBQUksQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO0dBQ3hCOztlQVRrQixNQUFNOztXQVdwQixpQkFBRzs7O0FBQ04sYUFBTyxJQUFJLENBQUMsY0FBYyxFQUFFLENBQzNCLElBQUksQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQzFCLElBQUksQ0FBQyxZQUFNO0FBQ1YsY0FBSyxVQUFVLEdBQUcsVUFBVSxDQUFDLE1BQUssS0FBSyxDQUFDLElBQUksT0FBTSxFQUFFLE1BQUsscUJBQXFCLENBQUMsQ0FBQztPQUNqRixDQUFDLFNBQ0ksQ0FBQyxVQUFBLENBQUMsRUFBSTtBQUNWLFlBQUksTUFBSyxzQkFBc0IsRUFBRTtBQUMvQixnQkFBSyxVQUFVLEdBQUcsVUFBVSxDQUFDLE1BQUssS0FBSyxDQUFDLElBQUksT0FBTSxFQUFFLE1BQUsscUJBQXFCLENBQUMsQ0FBQztTQUNqRixNQUFNO0FBQ0wsZ0JBQUssSUFBSSxFQUFFLENBQUM7U0FDYjtBQUNELGNBQUssYUFBYSxDQUFDLENBQUMsQ0FBQyxDQUFDO09BQ3ZCLENBQUMsQ0FBQztLQUNKOzs7V0FFSSxpQkFBRztBQUNOLFVBQUksQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLEVBQUU7QUFDckIsZUFBTyxJQUFJLENBQUMsS0FBSyxFQUFFLENBQUM7T0FDckI7S0FDRjs7O1dBRUcsZ0JBQUc7QUFDTCxVQUFJLElBQUksQ0FBQyxTQUFTLEVBQUUsRUFBRTtBQUNwQixvQkFBWSxDQUFDLElBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUM5QixZQUFJLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQztPQUN4QjtLQUNGOzs7V0FFUSxxQkFBRztBQUNWLGFBQU8sSUFBSSxDQUFDLFVBQVUsS0FBSyxJQUFJLENBQUM7S0FDakM7OztTQTFDa0IsTUFBTTs7O3FCQUFOLE1BQU0iLCJmaWxlIjoiL2hvbWUvdWJ1bnR1L3dvcmtzcGFjZS9raWJhbmEtNS4wLjItbGludXgteDg2XzY0L3BsdWdpbnMveC1wYWNrL3NlcnZlci9saWIvcG9sbGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9sbGVyIHtcblxuICBjb25zdHJ1Y3RvcihvcHRpb25zKSB7XG4gICAgdGhpcy5mdW5jdGlvblRvUG9sbCA9IG9wdGlvbnMuZnVuY3Rpb25Ub1BvbGw7IC8vIE11c3QgcmV0dXJuIGEgUHJvbWlzZVxuICAgIHRoaXMuc3VjY2Vzc0Z1bmN0aW9uID0gb3B0aW9ucy5zdWNjZXNzRnVuY3Rpb24gfHwgXy5ub29wO1xuICAgIHRoaXMuZXJyb3JGdW5jdGlvbiA9IG9wdGlvbnMuZXJyb3JGdW5jdGlvbiB8fCBfLm5vb3A7XG4gICAgdGhpcy5wb2xsRnJlcXVlbmN5SW5NaWxsaXMgPSBvcHRpb25zLnBvbGxGcmVxdWVuY3lJbk1pbGxpcztcbiAgICB0aGlzLmNvbnRpbnVlUG9sbGluZ09uRXJyb3IgPSBvcHRpb25zLmNvbnRpbnVlUG9sbGluZ09uRXJyb3IgfHwgZmFsc2U7XG4gICAgdGhpcy5fdGltZW91dElkID0gbnVsbDtcbiAgfVxuXG4gIF9wb2xsKCkge1xuICAgIHJldHVybiB0aGlzLmZ1bmN0aW9uVG9Qb2xsKClcbiAgICAudGhlbih0aGlzLnN1Y2Nlc3NGdW5jdGlvbilcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICB0aGlzLl90aW1lb3V0SWQgPSBzZXRUaW1lb3V0KHRoaXMuX3BvbGwuYmluZCh0aGlzKSwgdGhpcy5wb2xsRnJlcXVlbmN5SW5NaWxsaXMpO1xuICAgIH0pXG4gICAgLmNhdGNoKGUgPT4ge1xuICAgICAgaWYgKHRoaXMuY29udGludWVQb2xsaW5nT25FcnJvcikge1xuICAgICAgICB0aGlzLl90aW1lb3V0SWQgPSBzZXRUaW1lb3V0KHRoaXMuX3BvbGwuYmluZCh0aGlzKSwgdGhpcy5wb2xsRnJlcXVlbmN5SW5NaWxsaXMpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5zdG9wKCk7XG4gICAgICB9XG4gICAgICB0aGlzLmVycm9yRnVuY3Rpb24oZSk7XG4gICAgfSk7XG4gIH1cblxuICBzdGFydCgpIHtcbiAgICBpZiAoIXRoaXMuaXNSdW5uaW5nKCkpIHtcbiAgICAgIHJldHVybiB0aGlzLl9wb2xsKCk7XG4gICAgfVxuICB9XG5cbiAgc3RvcCgpIHtcbiAgICBpZiAodGhpcy5pc1J1bm5pbmcoKSkge1xuICAgICAgY2xlYXJUaW1lb3V0KHRoaXMuX3RpbWVvdXRJZCk7XG4gICAgICB0aGlzLl90aW1lb3V0SWQgPSBudWxsO1xuICAgIH1cbiAgfVxuXG4gIGlzUnVubmluZygpIHtcbiAgICByZXR1cm4gdGhpcy5fdGltZW91dElkICE9PSBudWxsO1xuICB9XG5cbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/server/lib/poller.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;sBAAc,QAAQ;;;;IAED,MAAM;AAEd,WAFQ,MAAM,CAEb,OAAO,EAAE;0BAFF,MAAM;;AAGvB,QAAI,CAAC,cAAc,GAAG,OAAO,CAAC,cAAc,CAAC;AAC7C,QAAI,CAAC,eAAe,GAAG,OAAO,CAAC,eAAe,IAAI,oBAAE,IAAI,CAAC;AACzD,QAAI,CAAC,aAAa,GAAG,OAAO,CAAC,aAAa,IAAI,oBAAE,IAAI,CAAC;AACrD,QAAI,CAAC,qBAAqB,GAAG,OAAO,CAAC,qBAAqB,CAAC;AAC3D,QAAI,CAAC,sBAAsB,GAAG,OAAO,CAAC,sBAAsB,IAAI,KAAK,CAAC;AACtE,QAAI,CAAC,UAAU,GAAG,IAAI,CAAC;GACxB;;eATkB,MAAM;;WAWpB,iBAAG;;;AACN,aAAO,IAAI,CAAC,cAAc,EAAE,CAC3B,IAAI,CAAC,IAAI,CAAC,eAAe,CAAC,CAC1B,IAAI,CAAC,YAAM;AACV,cAAK,UAAU,GAAG,UAAU,CAAC,MAAK,KAAK,CAAC,IAAI,OAAM,EAAE,MAAK,qBAAqB,CAAC,CAAC;OACjF,CAAC,SACI,CAAC,UAAA,CAAC,EAAI;AACV,YAAI,MAAK,sBAAsB,EAAE;AAC/B,gBAAK,UAAU,GAAG,UAAU,CAAC,MAAK,KAAK,CAAC,IAAI,OAAM,EAAE,MAAK,qBAAqB,CAAC,CAAC;SACjF,MAAM;AACL,gBAAK,IAAI,EAAE,CAAC;SACb;AACD,cAAK,aAAa,CAAC,CAAC,CAAC,CAAC;OACvB,CAAC,CAAC;KACJ;;;WAEI,iBAAG;AACN,UAAI,CAAC,IAAI,CAAC,SAAS,EAAE,EAAE;AACrB,eAAO,IAAI,CAAC,KAAK,EAAE,CAAC;OACrB;KACF;;;WAEG,gBAAG;AACL,UAAI,IAAI,CAAC,SAAS,EAAE,EAAE;AACpB,oBAAY,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;AAC9B,YAAI,CAAC,UAAU,GAAG,IAAI,CAAC;OACxB;KACF;;;WAEQ,qBAAG;AACV,aAAO,IAAI,CAAC,UAAU,KAAK,IAAI,CAAC;KACjC;;;SA1CkB,MAAM;;;qBAAN,MAAM",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/server/lib/poller.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\nexport default class Poller {\n\n  constructor(options) {\n    this.functionToPoll = options.functionToPoll; // Must return a Promise\n    this.successFunction = options.successFunction || _.noop;\n    this.errorFunction = options.errorFunction || _.noop;\n    this.pollFrequencyInMillis = options.pollFrequencyInMillis;\n    this.continuePollingOnError = options.continuePollingOnError || false;\n    this._timeoutId = null;\n  }\n\n  _poll() {\n    return this.functionToPoll()\n    .then(this.successFunction)\n    .then(() => {\n      this._timeoutId = setTimeout(this._poll.bind(this), this.pollFrequencyInMillis);\n    })\n    .catch(e => {\n      if (this.continuePollingOnError) {\n        this._timeoutId = setTimeout(this._poll.bind(this), this.pollFrequencyInMillis);\n      } else {\n        this.stop();\n      }\n      this.errorFunction(e);\n    });\n  }\n\n  start() {\n    if (!this.isRunning()) {\n      return this._poll();\n    }\n  }\n\n  stop() {\n    if (this.isRunning()) {\n      clearTimeout(this._timeoutId);\n      this._timeoutId = null;\n    }\n  }\n\n  isRunning() {\n    return this._timeoutId !== null;\n  }\n\n}\n"
      ]
    },
    "mtime": 1485775587893
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/server/lib/constants.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "moment",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "moment"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "LICENSE_EXPIRY_SOON_DURATION",
            "XPACK_INFO_API_DEFAULT_POLL_FREQUENCY"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "LICENSE_EXPIRY_SOON_DURATION",
              "exported": "LICENSE_EXPIRY_SOON_DURATION"
            },
            {
              "kind": "local",
              "local": "XPACK_INFO_API_DEFAULT_POLL_FREQUENCY",
              "exported": "XPACK_INFO_API_DEFAULT_POLL_FREQUENCY"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar LICENSE_EXPIRY_SOON_DURATION = _moment2['default'].duration(30, 'days');\nexports.LICENSE_EXPIRY_SOON_DURATION = LICENSE_EXPIRY_SOON_DURATION;\nvar XPACK_INFO_API_DEFAULT_POLL_FREQUENCY = _moment2['default'].duration(30, 'seconds');\nexports.XPACK_INFO_API_DEFAULT_POLL_FREQUENCY = XPACK_INFO_API_DEFAULT_POLL_FREQUENCY;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9zZXJ2ZXIvbGliL2NvbnN0YW50cy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OztzQkFBbUIsUUFBUTs7OztBQUVwQixJQUFNLDRCQUE0QixHQUFHLG9CQUFPLFFBQVEsQ0FBQyxFQUFFLEVBQUUsTUFBTSxDQUFDLENBQUM7O0FBQ2pFLElBQU0scUNBQXFDLEdBQUcsb0JBQU8sUUFBUSxDQUFDLEVBQUUsRUFBRSxTQUFTLENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS91YnVudHUvd29ya3NwYWNlL2tpYmFuYS01LjAuMi1saW51eC14ODZfNjQvcGx1Z2lucy94LXBhY2svc2VydmVyL2xpYi9jb25zdGFudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgbW9tZW50IGZyb20gJ21vbWVudCc7XG5cbmV4cG9ydCBjb25zdCBMSUNFTlNFX0VYUElSWV9TT09OX0RVUkFUSU9OID0gbW9tZW50LmR1cmF0aW9uKDMwLCAnZGF5cycpO1xuZXhwb3J0IGNvbnN0IFhQQUNLX0lORk9fQVBJX0RFRkFVTFRfUE9MTF9GUkVRVUVOQ1kgPSBtb21lbnQuZHVyYXRpb24oMzAsICdzZWNvbmRzJyk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/server/lib/constants.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;sBAAmB,QAAQ;;;;AAEpB,IAAM,4BAA4B,GAAG,oBAAO,QAAQ,CAAC,EAAE,EAAE,MAAM,CAAC,CAAC;;AACjE,IAAM,qCAAqC,GAAG,oBAAO,QAAQ,CAAC,EAAE,EAAE,SAAS,CAAC,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/server/lib/constants.js",
      "sourcesContent": [
        "import moment from 'moment';\n\nexport const LICENSE_EXPIRY_SOON_DURATION = moment.duration(30, 'days');\nexport const XPACK_INFO_API_DEFAULT_POLL_FREQUENCY = moment.duration(30, 'seconds');\n"
      ]
    },
    "mtime": 1485775588029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/graph/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "path",
            "imported": [
              "resolve"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              }
            ]
          },
          {
            "source": "boom",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Boom"
              }
            ]
          },
          {
            "source": "./server/lib/check_license",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "checkLicense"
              }
            ]
          },
          {
            "source": "../../server/lib/mirror_plugin_status",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mirrorPluginStatus"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _path = require('path');\n\nvar _boom = require('boom');\n\nvar _boom2 = _interopRequireDefault(_boom);\n\nvar _serverLibCheck_license = require('./server/lib/check_license');\n\nvar _serverLibCheck_license2 = _interopRequireDefault(_serverLibCheck_license);\n\nvar _serverLibMirror_plugin_status = require('../../server/lib/mirror_plugin_status');\n\nvar _serverLibMirror_plugin_status2 = _interopRequireDefault(_serverLibMirror_plugin_status);\n\nvar graphExploreRoute = require('./server/routes/graphExplore');\nvar searchProxyRoute = require('./server/routes/searchProxy');\n\nvar APP_TITLE = 'Graph';\n\nmodule.exports = function (kibana) {\n\n  //2.x bootstrap code copied from https://github.com/elastic/timelion/pull/57/files\n  var mainFile = 'plugins/graph/app';\n  var ownDescriptor = Object.getOwnPropertyDescriptor(kibana, 'autoload');\n  var protoDescriptor = Object.getOwnPropertyDescriptor(kibana.constructor.prototype, 'autoload');\n  var descriptor = ownDescriptor || protoDescriptor || {};\n  if (descriptor.get) {\n    // the autoload list has been replaced with a getter that complains about\n    // improper access, bypass that getter by seeing if it is defined\n    mainFile = 'plugins/graph/app_with_autoload';\n  }\n\n  return new kibana.Plugin({\n    id: 'graph',\n    configPrefix: 'xpack.graph',\n    publicDir: (0, _path.resolve)(__dirname, 'public'),\n    require: ['kibana', 'elasticsearch', 'xpack_main'],\n    uiExports: {\n      app: {\n        title: APP_TITLE,\n        icon: 'plugins/graph/icon.png',\n        description: 'Graph exploration',\n        //2.x        main: 'plugins/graph/app',\n        main: mainFile, //2.x\n        injectVars: function injectVars(server, options) {\n          var config = server.config();\n          return {\n            kbnIndex: config.get('kibana.index'),\n            esApiVersion: config.get('elasticsearch.apiVersion'),\n            esShardTimeout: config.get('elasticsearch.shardTimeout'),\n            graphSavePolicy: config.get('xpack.graph.savePolicy'),\n            canEditDrillDownUrls: config.get('xpack.graph.canEditDrillDownUrls')\n          };\n        }\n      },\n      hacks: ['plugins/graph/hacks/toggle_app_link_in_nav']\n    },\n\n    config: function config(Joi) {\n      return Joi.object({\n        enabled: Joi.boolean()['default'](true),\n        canEditDrillDownUrls: Joi.boolean()['default'](true),\n        savePolicy: Joi.string().valid(['config', 'configAndDataWithConsent', 'configAndData', 'none'])['default']('configAndData')\n      })['default']();\n    },\n\n    init: function init(server, options) {\n      var thisPlugin = this;\n      var xpackMainPlugin = server.plugins.xpack_main;\n\n      (0, _serverLibMirror_plugin_status2['default'])(xpackMainPlugin, thisPlugin);\n      xpackMainPlugin.status.once('green', function () {\n        // Register a function that is called whenever the xpack info changes,\n        // to re-compute the license check results for this plugin\n        xpackMainPlugin.info.feature(thisPlugin.id).registerLicenseCheckResultsGenerator(_serverLibCheck_license2['default']);\n      });\n\n      // Add server routes and initalize the plugin here\n      var commonRouteConfig = {\n        pre: [function forbidApiAccess(request, reply) {\n          var licenseCheckResults = xpackMainPlugin.info.feature(thisPlugin.id).getLicenseCheckResults();\n          if (licenseCheckResults.showAppLink && licenseCheckResults.enableAppLink) {\n            reply();\n          } else {\n            reply(_boom2['default'].forbidden(licenseCheckResults.message));\n          }\n        }]\n      };\n      graphExploreRoute(server, commonRouteConfig);\n      searchProxyRoute(server, commonRouteConfig);\n    }\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL2dyYXBoL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7b0JBQXdCLE1BQU07O29CQUNiLE1BQU07Ozs7c0NBR0UsNEJBQTRCOzs7OzZDQUN0Qix1Q0FBdUM7Ozs7QUFIdEUsSUFBSSxpQkFBaUIsR0FBRyxPQUFPLENBQUMsOEJBQThCLENBQUMsQ0FBQztBQUNoRSxJQUFJLGdCQUFnQixHQUFHLE9BQU8sQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDOztBQUk5RCxJQUFNLFNBQVMsR0FBRyxPQUFPLENBQUM7O0FBRTFCLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxNQUFNLEVBQUU7OztBQUdqQyxNQUFJLFFBQVEsR0FBRyxtQkFBbUIsQ0FBQztBQUNuQyxNQUFJLGFBQWEsR0FBRyxNQUFNLENBQUMsd0JBQXdCLENBQUMsTUFBTSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0FBQ3hFLE1BQUksZUFBZSxHQUFHLE1BQU0sQ0FBQyx3QkFBd0IsQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLFNBQVMsRUFBRSxVQUFVLENBQUMsQ0FBQztBQUNoRyxNQUFJLFVBQVUsR0FBRyxhQUFhLElBQUksZUFBZSxJQUFJLEVBQUUsQ0FBQztBQUN4RCxNQUFJLFVBQVUsQ0FBQyxHQUFHLEVBQUU7OztBQUdsQixZQUFRLEdBQUcsaUNBQWlDLENBQUM7R0FDOUM7O0FBSUQsU0FBTyxJQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUM7QUFDdkIsTUFBRSxFQUFFLE9BQU87QUFDWCxnQkFBWSxFQUFFLGFBQWE7QUFDM0IsYUFBUyxFQUFFLG1CQUFRLFNBQVMsRUFBRSxRQUFRLENBQUM7QUFDdkMsV0FBTyxFQUFFLENBQUMsUUFBUSxFQUFFLGVBQWUsRUFBRSxZQUFZLENBQUM7QUFDbEQsYUFBUyxFQUFFO0FBQ1QsU0FBRyxFQUFFO0FBQ0gsYUFBSyxFQUFFLFNBQVM7QUFDaEIsWUFBSSxFQUFFLHdCQUF3QjtBQUM5QixtQkFBVyxFQUFFLG1CQUFtQjs7QUFFaEMsWUFBSSxFQUFFLFFBQVE7QUFDZCxrQkFBVSxFQUFFLG9CQUFVLE1BQU0sRUFBRSxPQUFPLEVBQUU7QUFDckMsY0FBSSxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQzdCLGlCQUFPO0FBQ0wsb0JBQVEsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQztBQUNwQyx3QkFBWSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsMEJBQTBCLENBQUM7QUFDcEQsMEJBQWMsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLDRCQUE0QixDQUFDO0FBQ3hELDJCQUFlLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyx3QkFBd0IsQ0FBQztBQUNyRCxnQ0FBb0IsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLGtDQUFrQyxDQUFDO1dBQ3JFLENBQUM7U0FDSDtPQUNGO0FBQ0QsV0FBSyxFQUFFLENBQUMsNENBQTRDLENBQUM7S0FDdEQ7O0FBRUQsVUFBTSxFQUFFLGdCQUFVLEdBQUcsRUFBRTtBQUNyQixhQUFPLEdBQUcsQ0FBQyxNQUFNLENBQUM7QUFDaEIsZUFBTyxFQUFFLEdBQUcsQ0FBQyxPQUFPLEVBQUUsV0FBUSxDQUFDLElBQUksQ0FBQztBQUNwQyw0QkFBb0IsRUFBRSxHQUFHLENBQUMsT0FBTyxFQUFFLFdBQVEsQ0FBQyxJQUFJLENBQUM7QUFDakQsa0JBQVUsRUFBRyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLENBQUMsUUFBUSxFQUFDLDBCQUEwQixFQUFDLGVBQWUsRUFBQyxNQUFNLENBQUMsQ0FBQyxXQUFRLENBQUMsZUFBZSxDQUFDO09BQ3ZILENBQUMsV0FBUSxFQUFFLENBQUM7S0FDZDs7QUFFRCxRQUFJLEVBQUUsY0FBVSxNQUFNLEVBQUUsT0FBTyxFQUFFO0FBQy9CLFVBQU0sVUFBVSxHQUFHLElBQUksQ0FBQztBQUN4QixVQUFNLGVBQWUsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQzs7QUFFbEQsc0RBQW1CLGVBQWUsRUFBRSxVQUFVLENBQUMsQ0FBQztBQUNoRCxxQkFBZSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLFlBQU07OztBQUd6Qyx1QkFBZSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFDLG9DQUFvQyxxQ0FBYyxDQUFDO09BQ2hHLENBQUMsQ0FBQzs7O0FBR0gsVUFBTSxpQkFBaUIsR0FBRztBQUN4QixXQUFHLEVBQUUsQ0FDSCxTQUFTLGVBQWUsQ0FBQyxPQUFPLEVBQUUsS0FBSyxFQUFFO0FBQ3ZDLGNBQU0sbUJBQW1CLEdBQUcsZUFBZSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLEVBQUUsQ0FBQyxDQUFDLHNCQUFzQixFQUFFLENBQUM7QUFDakcsY0FBSSxtQkFBbUIsQ0FBQyxXQUFXLElBQUksbUJBQW1CLENBQUMsYUFBYSxFQUFFO0FBQ3hFLGlCQUFLLEVBQUUsQ0FBQztXQUNULE1BQU07QUFDTCxpQkFBSyxDQUFDLGtCQUFLLFNBQVMsQ0FBQyxtQkFBbUIsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO1dBQ3BEO1NBQ0YsQ0FDRjtPQUNGLENBQUM7QUFDRix1QkFBaUIsQ0FBQyxNQUFNLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztBQUM3QyxzQkFBZ0IsQ0FBQyxNQUFNLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztLQUM3QztHQUNGLENBQUMsQ0FBQztDQUNKLENBQUMiLCJmaWxlIjoiL2hvbWUvdWJ1bnR1L3dvcmtzcGFjZS9raWJhbmEtNS4wLjItbGludXgteDg2XzY0L3BsdWdpbnMveC1wYWNrL3BsdWdpbnMvZ3JhcGgvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZXNvbHZlIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgQm9vbSBmcm9tICdib29tJztcbnZhciBncmFwaEV4cGxvcmVSb3V0ZSA9IHJlcXVpcmUoJy4vc2VydmVyL3JvdXRlcy9ncmFwaEV4cGxvcmUnKTtcbnZhciBzZWFyY2hQcm94eVJvdXRlID0gcmVxdWlyZSgnLi9zZXJ2ZXIvcm91dGVzL3NlYXJjaFByb3h5Jyk7XG5pbXBvcnQgY2hlY2tMaWNlbnNlIGZyb20gJy4vc2VydmVyL2xpYi9jaGVja19saWNlbnNlJztcbmltcG9ydCBtaXJyb3JQbHVnaW5TdGF0dXMgZnJvbSAnLi4vLi4vc2VydmVyL2xpYi9taXJyb3JfcGx1Z2luX3N0YXR1cyc7XG5cbmNvbnN0IEFQUF9USVRMRSA9ICdHcmFwaCc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKGtpYmFuYSkge1xuXG4gICAgLy8yLnggYm9vdHN0cmFwIGNvZGUgY29waWVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL2VsYXN0aWMvdGltZWxpb24vcHVsbC81Ny9maWxlc1xuICB2YXIgbWFpbkZpbGUgPSAncGx1Z2lucy9ncmFwaC9hcHAnO1xuICB2YXIgb3duRGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioa2liYW5hLCAnYXV0b2xvYWQnKTtcbiAgdmFyIHByb3RvRGVzY3JpcHRvciA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3Ioa2liYW5hLmNvbnN0cnVjdG9yLnByb3RvdHlwZSwgJ2F1dG9sb2FkJyk7XG4gIHZhciBkZXNjcmlwdG9yID0gb3duRGVzY3JpcHRvciB8fCBwcm90b0Rlc2NyaXB0b3IgfHwge307XG4gIGlmIChkZXNjcmlwdG9yLmdldCkge1xuICAgIC8vIHRoZSBhdXRvbG9hZCBsaXN0IGhhcyBiZWVuIHJlcGxhY2VkIHdpdGggYSBnZXR0ZXIgdGhhdCBjb21wbGFpbnMgYWJvdXRcbiAgICAvLyBpbXByb3BlciBhY2Nlc3MsIGJ5cGFzcyB0aGF0IGdldHRlciBieSBzZWVpbmcgaWYgaXQgaXMgZGVmaW5lZFxuICAgIG1haW5GaWxlID0gJ3BsdWdpbnMvZ3JhcGgvYXBwX3dpdGhfYXV0b2xvYWQnO1xuICB9XG5cblxuXG4gIHJldHVybiBuZXcga2liYW5hLlBsdWdpbih7XG4gICAgaWQ6ICdncmFwaCcsXG4gICAgY29uZmlnUHJlZml4OiAneHBhY2suZ3JhcGgnLFxuICAgIHB1YmxpY0RpcjogcmVzb2x2ZShfX2Rpcm5hbWUsICdwdWJsaWMnKSxcbiAgICByZXF1aXJlOiBbJ2tpYmFuYScsICdlbGFzdGljc2VhcmNoJywgJ3hwYWNrX21haW4nXSxcbiAgICB1aUV4cG9ydHM6IHtcbiAgICAgIGFwcDoge1xuICAgICAgICB0aXRsZTogQVBQX1RJVExFLFxuICAgICAgICBpY29uOiAncGx1Z2lucy9ncmFwaC9pY29uLnBuZycsXG4gICAgICAgIGRlc2NyaXB0aW9uOiAnR3JhcGggZXhwbG9yYXRpb24nLFxuICAgICAgICAvLzIueCAgICAgICAgbWFpbjogJ3BsdWdpbnMvZ3JhcGgvYXBwJyxcbiAgICAgICAgbWFpbjogbWFpbkZpbGUsIC8vMi54XG4gICAgICAgIGluamVjdFZhcnM6IGZ1bmN0aW9uIChzZXJ2ZXIsIG9wdGlvbnMpIHtcbiAgICAgICAgICB2YXIgY29uZmlnID0gc2VydmVyLmNvbmZpZygpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBrYm5JbmRleDogY29uZmlnLmdldCgna2liYW5hLmluZGV4JyksXG4gICAgICAgICAgICBlc0FwaVZlcnNpb246IGNvbmZpZy5nZXQoJ2VsYXN0aWNzZWFyY2guYXBpVmVyc2lvbicpLFxuICAgICAgICAgICAgZXNTaGFyZFRpbWVvdXQ6IGNvbmZpZy5nZXQoJ2VsYXN0aWNzZWFyY2guc2hhcmRUaW1lb3V0JyksXG4gICAgICAgICAgICBncmFwaFNhdmVQb2xpY3k6IGNvbmZpZy5nZXQoJ3hwYWNrLmdyYXBoLnNhdmVQb2xpY3knKSxcbiAgICAgICAgICAgIGNhbkVkaXREcmlsbERvd25VcmxzOiBjb25maWcuZ2V0KCd4cGFjay5ncmFwaC5jYW5FZGl0RHJpbGxEb3duVXJscycpXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGhhY2tzOiBbJ3BsdWdpbnMvZ3JhcGgvaGFja3MvdG9nZ2xlX2FwcF9saW5rX2luX25hdiddLFxuICAgIH0sXG5cbiAgICBjb25maWc6IGZ1bmN0aW9uIChKb2kpIHtcbiAgICAgIHJldHVybiBKb2kub2JqZWN0KHtcbiAgICAgICAgZW5hYmxlZDogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KHRydWUpLFxuICAgICAgICBjYW5FZGl0RHJpbGxEb3duVXJsczogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KHRydWUpLFxuICAgICAgICBzYXZlUG9saWN5IDogSm9pLnN0cmluZygpLnZhbGlkKFsnY29uZmlnJywnY29uZmlnQW5kRGF0YVdpdGhDb25zZW50JywnY29uZmlnQW5kRGF0YScsJ25vbmUnXSkuZGVmYXVsdCgnY29uZmlnQW5kRGF0YScpLFxuICAgICAgfSkuZGVmYXVsdCgpO1xuICAgIH0sXG5cbiAgICBpbml0OiBmdW5jdGlvbiAoc2VydmVyLCBvcHRpb25zKSB7XG4gICAgICBjb25zdCB0aGlzUGx1Z2luID0gdGhpcztcbiAgICAgIGNvbnN0IHhwYWNrTWFpblBsdWdpbiA9IHNlcnZlci5wbHVnaW5zLnhwYWNrX21haW47XG5cbiAgICAgIG1pcnJvclBsdWdpblN0YXR1cyh4cGFja01haW5QbHVnaW4sIHRoaXNQbHVnaW4pO1xuICAgICAgeHBhY2tNYWluUGx1Z2luLnN0YXR1cy5vbmNlKCdncmVlbicsICgpID0+IHtcbiAgICAgICAgLy8gUmVnaXN0ZXIgYSBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuZXZlciB0aGUgeHBhY2sgaW5mbyBjaGFuZ2VzLFxuICAgICAgICAvLyB0byByZS1jb21wdXRlIHRoZSBsaWNlbnNlIGNoZWNrIHJlc3VsdHMgZm9yIHRoaXMgcGx1Z2luXG4gICAgICAgIHhwYWNrTWFpblBsdWdpbi5pbmZvLmZlYXR1cmUodGhpc1BsdWdpbi5pZCkucmVnaXN0ZXJMaWNlbnNlQ2hlY2tSZXN1bHRzR2VuZXJhdG9yKGNoZWNrTGljZW5zZSk7XG4gICAgICB9KTtcblxuICAgICAgLy8gQWRkIHNlcnZlciByb3V0ZXMgYW5kIGluaXRhbGl6ZSB0aGUgcGx1Z2luIGhlcmVcbiAgICAgIGNvbnN0IGNvbW1vblJvdXRlQ29uZmlnID0ge1xuICAgICAgICBwcmU6IFtcbiAgICAgICAgICBmdW5jdGlvbiBmb3JiaWRBcGlBY2Nlc3MocmVxdWVzdCwgcmVwbHkpIHtcbiAgICAgICAgICAgIGNvbnN0IGxpY2Vuc2VDaGVja1Jlc3VsdHMgPSB4cGFja01haW5QbHVnaW4uaW5mby5mZWF0dXJlKHRoaXNQbHVnaW4uaWQpLmdldExpY2Vuc2VDaGVja1Jlc3VsdHMoKTtcbiAgICAgICAgICAgIGlmIChsaWNlbnNlQ2hlY2tSZXN1bHRzLnNob3dBcHBMaW5rICYmIGxpY2Vuc2VDaGVja1Jlc3VsdHMuZW5hYmxlQXBwTGluaykge1xuICAgICAgICAgICAgICByZXBseSgpO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgcmVwbHkoQm9vbS5mb3JiaWRkZW4obGljZW5zZUNoZWNrUmVzdWx0cy5tZXNzYWdlKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICBdXG4gICAgICB9O1xuICAgICAgZ3JhcGhFeHBsb3JlUm91dGUoc2VydmVyLCBjb21tb25Sb3V0ZUNvbmZpZyk7XG4gICAgICBzZWFyY2hQcm94eVJvdXRlKHNlcnZlciwgY29tbW9uUm91dGVDb25maWcpO1xuICAgIH1cbiAgfSk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/graph/index.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/graph/index.js",
      "sourcesContent": [
        "import { resolve } from 'path';\nimport Boom from 'boom';\nvar graphExploreRoute = require('./server/routes/graphExplore');\nvar searchProxyRoute = require('./server/routes/searchProxy');\nimport checkLicense from './server/lib/check_license';\nimport mirrorPluginStatus from '../../server/lib/mirror_plugin_status';\n\nconst APP_TITLE = 'Graph';\n\nmodule.exports = function (kibana) {\n\n    //2.x bootstrap code copied from https://github.com/elastic/timelion/pull/57/files\n  var mainFile = 'plugins/graph/app';\n  var ownDescriptor = Object.getOwnPropertyDescriptor(kibana, 'autoload');\n  var protoDescriptor = Object.getOwnPropertyDescriptor(kibana.constructor.prototype, 'autoload');\n  var descriptor = ownDescriptor || protoDescriptor || {};\n  if (descriptor.get) {\n    // the autoload list has been replaced with a getter that complains about\n    // improper access, bypass that getter by seeing if it is defined\n    mainFile = 'plugins/graph/app_with_autoload';\n  }\n\n\n\n  return new kibana.Plugin({\n    id: 'graph',\n    configPrefix: 'xpack.graph',\n    publicDir: resolve(__dirname, 'public'),\n    require: ['kibana', 'elasticsearch', 'xpack_main'],\n    uiExports: {\n      app: {\n        title: APP_TITLE,\n        icon: 'plugins/graph/icon.png',\n        description: 'Graph exploration',\n        //2.x        main: 'plugins/graph/app',\n        main: mainFile, //2.x\n        injectVars: function (server, options) {\n          var config = server.config();\n          return {\n            kbnIndex: config.get('kibana.index'),\n            esApiVersion: config.get('elasticsearch.apiVersion'),\n            esShardTimeout: config.get('elasticsearch.shardTimeout'),\n            graphSavePolicy: config.get('xpack.graph.savePolicy'),\n            canEditDrillDownUrls: config.get('xpack.graph.canEditDrillDownUrls')\n          };\n        }\n      },\n      hacks: ['plugins/graph/hacks/toggle_app_link_in_nav'],\n    },\n\n    config: function (Joi) {\n      return Joi.object({\n        enabled: Joi.boolean().default(true),\n        canEditDrillDownUrls: Joi.boolean().default(true),\n        savePolicy : Joi.string().valid(['config','configAndDataWithConsent','configAndData','none']).default('configAndData'),\n      }).default();\n    },\n\n    init: function (server, options) {\n      const thisPlugin = this;\n      const xpackMainPlugin = server.plugins.xpack_main;\n\n      mirrorPluginStatus(xpackMainPlugin, thisPlugin);\n      xpackMainPlugin.status.once('green', () => {\n        // Register a function that is called whenever the xpack info changes,\n        // to re-compute the license check results for this plugin\n        xpackMainPlugin.info.feature(thisPlugin.id).registerLicenseCheckResultsGenerator(checkLicense);\n      });\n\n      // Add server routes and initalize the plugin here\n      const commonRouteConfig = {\n        pre: [\n          function forbidApiAccess(request, reply) {\n            const licenseCheckResults = xpackMainPlugin.info.feature(thisPlugin.id).getLicenseCheckResults();\n            if (licenseCheckResults.showAppLink && licenseCheckResults.enableAppLink) {\n              reply();\n            } else {\n              reply(Boom.forbidden(licenseCheckResults.message));\n            }\n          }\n        ]\n      };\n      graphExploreRoute(server, commonRouteConfig);\n      searchProxyRoute(server, commonRouteConfig);\n    }\n  });\n};\n"
      ]
    },
    "mtime": 1485775587893
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/graph/server/lib/check_license.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "checkLicense",
            "xpackLicenseInfo"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "checkLicense",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "xpackLicenseInfo",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = checkLicense;\n\nfunction checkLicense(xpackLicenseInfo) {\n\n  if (!xpackLicenseInfo || !xpackLicenseInfo.isAvailable()) {\n    return {\n      showAppLink: true,\n      enableAppLink: false,\n      message: 'Graph is unavailable - license information is not available at this time.'\n    };\n  }\n\n  var graphFeature = xpackLicenseInfo.feature('graph');\n  if (!graphFeature.isEnabled()) {\n    return {\n      showAppLink: false,\n      enableAppLink: false,\n      message: 'Graph is unavailable'\n    };\n  }\n\n  var isLicenseActive = xpackLicenseInfo.license.isActive();\n  var message = undefined;\n  if (!isLicenseActive) {\n    message = 'Graph is unavailable - license has expired.';\n  }\n\n  if (xpackLicenseInfo.license.isOneOf(['trial', 'platinum'])) {\n    return {\n      showAppLink: true,\n      enableAppLink: isLicenseActive,\n      message: message\n    };\n  }\n\n  message = 'Graph is unavailable for the current ' + xpackLicenseInfo.license.getType() + ' license. Please upgrade your license.';\n  return {\n    showAppLink: false,\n    enableAppLink: false,\n    message: message\n  };\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL2dyYXBoL3NlcnZlci9saWIvY2hlY2tfbGljZW5zZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztxQkFBd0IsWUFBWTs7QUFBckIsU0FBUyxZQUFZLENBQUMsZ0JBQWdCLEVBQUU7O0FBRXJELE1BQUksQ0FBQyxnQkFBZ0IsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFdBQVcsRUFBRSxFQUFFO0FBQ3hELFdBQU87QUFDTCxpQkFBVyxFQUFFLElBQUk7QUFDakIsbUJBQWEsRUFBRSxLQUFLO0FBQ3BCLGFBQU8sRUFBRSwyRUFBMkU7S0FDckYsQ0FBQztHQUNIOztBQUVELE1BQU0sWUFBWSxHQUFHLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUN2RCxNQUFJLENBQUMsWUFBWSxDQUFDLFNBQVMsRUFBRSxFQUFFO0FBQzdCLFdBQU87QUFDTCxpQkFBVyxFQUFFLEtBQUs7QUFDbEIsbUJBQWEsRUFBRSxLQUFLO0FBQ3BCLGFBQU8sRUFBRSxzQkFBc0I7S0FDaEMsQ0FBQztHQUNIOztBQUVELE1BQU0sZUFBZSxHQUFHLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxRQUFRLEVBQUUsQ0FBQztBQUM1RCxNQUFJLE9BQU8sWUFBQSxDQUFDO0FBQ1osTUFBSSxDQUFDLGVBQWUsRUFBRTtBQUNwQixXQUFPLGdEQUFnRCxDQUFDO0dBQ3pEOztBQUVELE1BQUksZ0JBQWdCLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFFLE9BQU8sRUFBRSxVQUFVLENBQUUsQ0FBQyxFQUFFO0FBQzdELFdBQU87QUFDTCxpQkFBVyxFQUFFLElBQUk7QUFDakIsbUJBQWEsRUFBRSxlQUFlO0FBQzlCLGFBQU8sRUFBUCxPQUFPO0tBQ1IsQ0FBQztHQUNIOztBQUVELFNBQU8sNkNBQTJDLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxPQUFPLEVBQUUsMkNBQXdDLENBQUM7QUFDN0gsU0FBTztBQUNMLGVBQVcsRUFBRSxLQUFLO0FBQ2xCLGlCQUFhLEVBQUUsS0FBSztBQUNwQixXQUFPLEVBQVAsT0FBTztHQUNSLENBQUM7Q0FDSCIsImZpbGUiOiIvaG9tZS91YnVudHUvd29ya3NwYWNlL2tpYmFuYS01LjAuMi1saW51eC14ODZfNjQvcGx1Z2lucy94LXBhY2svcGx1Z2lucy9ncmFwaC9zZXJ2ZXIvbGliL2NoZWNrX2xpY2Vuc2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjaGVja0xpY2Vuc2UoeHBhY2tMaWNlbnNlSW5mbykge1xuXG4gIGlmICgheHBhY2tMaWNlbnNlSW5mbyB8fCAheHBhY2tMaWNlbnNlSW5mby5pc0F2YWlsYWJsZSgpKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNob3dBcHBMaW5rOiB0cnVlLFxuICAgICAgZW5hYmxlQXBwTGluazogZmFsc2UsXG4gICAgICBtZXNzYWdlOiAnR3JhcGggaXMgdW5hdmFpbGFibGUgLSBsaWNlbnNlIGluZm9ybWF0aW9uIGlzIG5vdCBhdmFpbGFibGUgYXQgdGhpcyB0aW1lLidcbiAgICB9O1xuICB9XG5cbiAgY29uc3QgZ3JhcGhGZWF0dXJlID0geHBhY2tMaWNlbnNlSW5mby5mZWF0dXJlKCdncmFwaCcpO1xuICBpZiAoIWdyYXBoRmVhdHVyZS5pc0VuYWJsZWQoKSkge1xuICAgIHJldHVybiB7XG4gICAgICBzaG93QXBwTGluazogZmFsc2UsXG4gICAgICBlbmFibGVBcHBMaW5rOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6ICdHcmFwaCBpcyB1bmF2YWlsYWJsZSdcbiAgICB9O1xuICB9XG5cbiAgY29uc3QgaXNMaWNlbnNlQWN0aXZlID0geHBhY2tMaWNlbnNlSW5mby5saWNlbnNlLmlzQWN0aXZlKCk7XG4gIGxldCBtZXNzYWdlO1xuICBpZiAoIWlzTGljZW5zZUFjdGl2ZSkge1xuICAgIG1lc3NhZ2UgPSBgR3JhcGggaXMgdW5hdmFpbGFibGUgLSBsaWNlbnNlIGhhcyBleHBpcmVkLmA7XG4gIH1cblxuICBpZiAoeHBhY2tMaWNlbnNlSW5mby5saWNlbnNlLmlzT25lT2YoWyAndHJpYWwnLCAncGxhdGludW0nIF0pKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNob3dBcHBMaW5rOiB0cnVlLFxuICAgICAgZW5hYmxlQXBwTGluazogaXNMaWNlbnNlQWN0aXZlLFxuICAgICAgbWVzc2FnZVxuICAgIH07XG4gIH1cblxuICBtZXNzYWdlID0gYEdyYXBoIGlzIHVuYXZhaWxhYmxlIGZvciB0aGUgY3VycmVudCAke3hwYWNrTGljZW5zZUluZm8ubGljZW5zZS5nZXRUeXBlKCl9IGxpY2Vuc2UuIFBsZWFzZSB1cGdyYWRlIHlvdXIgbGljZW5zZS5gO1xuICByZXR1cm4ge1xuICAgIHNob3dBcHBMaW5rOiBmYWxzZSxcbiAgICBlbmFibGVBcHBMaW5rOiBmYWxzZSxcbiAgICBtZXNzYWdlXG4gIH07XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/graph/server/lib/check_license.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAAwB,YAAY;;AAArB,SAAS,YAAY,CAAC,gBAAgB,EAAE;;AAErD,MAAI,CAAC,gBAAgB,IAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE,EAAE;AACxD,WAAO;AACL,iBAAW,EAAE,IAAI;AACjB,mBAAa,EAAE,KAAK;AACpB,aAAO,EAAE,2EAA2E;KACrF,CAAC;GACH;;AAED,MAAM,YAAY,GAAG,gBAAgB,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;AACvD,MAAI,CAAC,YAAY,CAAC,SAAS,EAAE,EAAE;AAC7B,WAAO;AACL,iBAAW,EAAE,KAAK;AAClB,mBAAa,EAAE,KAAK;AACpB,aAAO,EAAE,sBAAsB;KAChC,CAAC;GACH;;AAED,MAAM,eAAe,GAAG,gBAAgB,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;AAC5D,MAAI,OAAO,YAAA,CAAC;AACZ,MAAI,CAAC,eAAe,EAAE;AACpB,WAAO,gDAAgD,CAAC;GACzD;;AAED,MAAI,gBAAgB,CAAC,OAAO,CAAC,OAAO,CAAC,CAAE,OAAO,EAAE,UAAU,CAAE,CAAC,EAAE;AAC7D,WAAO;AACL,iBAAW,EAAE,IAAI;AACjB,mBAAa,EAAE,eAAe;AAC9B,aAAO,EAAP,OAAO;KACR,CAAC;GACH;;AAED,SAAO,6CAA2C,gBAAgB,CAAC,OAAO,CAAC,OAAO,EAAE,2CAAwC,CAAC;AAC7H,SAAO;AACL,eAAW,EAAE,KAAK;AAClB,iBAAa,EAAE,KAAK;AACpB,WAAO,EAAP,OAAO;GACR,CAAC;CACH",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/graph/server/lib/check_license.js",
      "sourcesContent": [
        "export default function checkLicense(xpackLicenseInfo) {\n\n  if (!xpackLicenseInfo || !xpackLicenseInfo.isAvailable()) {\n    return {\n      showAppLink: true,\n      enableAppLink: false,\n      message: 'Graph is unavailable - license information is not available at this time.'\n    };\n  }\n\n  const graphFeature = xpackLicenseInfo.feature('graph');\n  if (!graphFeature.isEnabled()) {\n    return {\n      showAppLink: false,\n      enableAppLink: false,\n      message: 'Graph is unavailable'\n    };\n  }\n\n  const isLicenseActive = xpackLicenseInfo.license.isActive();\n  let message;\n  if (!isLicenseActive) {\n    message = `Graph is unavailable - license has expired.`;\n  }\n\n  if (xpackLicenseInfo.license.isOneOf([ 'trial', 'platinum' ])) {\n    return {\n      showAppLink: true,\n      enableAppLink: isLicenseActive,\n      message\n    };\n  }\n\n  message = `Graph is unavailable for the current ${xpackLicenseInfo.license.getType()} license. Please upgrade your license.`;\n  return {\n    showAppLink: false,\n    enableAppLink: false,\n    message\n  };\n}\n"
      ]
    },
    "mtime": 1485775595877
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/graph/server/routes/graphExplore.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "boom",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Boom"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "extends",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _boom = require('boom');\n\nvar _boom2 = _interopRequireDefault(_boom);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nmodule.exports = function (server, commonRouteConfig) {\n\n  var callWithRequest = server.plugins.elasticsearch.callWithRequest;\n\n  function graphExplore(req) {\n    var payload = req.payload;\n    return callWithRequest(req, 'transport.request', {\n      'path': '/' + encodeURIComponent(payload.index) + '/_xpack/_graph/_explore',\n      body: payload.query,\n      method: 'POST',\n      query: {}\n    });\n  }\n  server.route({\n    path: '/api/graph/graphExplore',\n    method: 'POST',\n    handler: function handler(req, reply) {\n      graphExplore(req).then(function (resp) {\n        reply({\n          ok: true,\n          resp: resp\n        });\n      })['catch'](function (err) {\n        //Extract known reasons for bad choice of field\n        var reasons = _lodash2['default'].get(err, 'body.error.root_cause', []);\n\n        var fieldDataReason = reasons.find(function (cause) {\n          return cause.reason.includes('Fielddata is disabled on text fields');\n        });\n        if (fieldDataReason) {\n          reply(_boom2['default'].badRequest(fieldDataReason.reason));\n          return;\n        }\n\n        var floatDataReason = reasons.find(function (cause) {\n          return cause.reason.includes('No support for examining floating point');\n        });\n        if (floatDataReason) {\n          reply(_boom2['default'].badRequest(floatDataReason.reason));\n          return;\n        }\n\n        var badDiversityFieldReason = reasons.find(function (cause) {\n          return cause.reason.includes('Sample diversifying key must be a single valued-field');\n        });\n        if (badDiversityFieldReason) {\n          reply(_boom2['default'].badRequest(badDiversityFieldReason.reason));\n          return;\n        }\n\n        var badQueryReason = reasons.find(function (cause) {\n          return cause.reason.includes('Failed to parse query') || cause.type == 'parsing_exception';\n        });\n        if (badQueryReason) {\n          reply(_boom2['default'].badRequest(badQueryReason.reason));\n          return;\n        }\n\n        // Throw generic error\n        throw err;\n      })['catch'](reply);\n    },\n    config: _extends({}, commonRouteConfig)\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL2dyYXBoL3NlcnZlci9yb3V0ZXMvZ3JhcGhFeHBsb3JlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztvQkFDaUIsTUFBTTs7OztzQkFDVCxRQUFROzs7O0FBRXRCLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxNQUFNLEVBQUUsaUJBQWlCLEVBQUU7O0FBRXBELE1BQUksZUFBZSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLGVBQWUsQ0FBQzs7QUFFbkUsV0FBUyxZQUFZLENBQUMsR0FBRyxFQUFFO0FBQ3pCLFFBQUksT0FBTyxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUM7QUFDMUIsV0FBTyxlQUFlLENBQUMsR0FBRyxFQUFFLG1CQUFtQixFQUFFO0FBQy9DLFlBQU0sRUFBRSxHQUFHLEdBQUcsa0JBQWtCLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxHQUFHLHlCQUF5QjtBQUMzRSxVQUFJLEVBQUUsT0FBTyxDQUFDLEtBQUs7QUFDbkIsWUFBTSxFQUFFLE1BQU07QUFDZCxXQUFLLEVBQUUsRUFBRTtLQUNWLENBQUMsQ0FBQztHQUNKO0FBQ0QsUUFBTSxDQUFDLEtBQUssQ0FBQztBQUNYLFFBQUksRUFBRSx5QkFBeUI7QUFDL0IsVUFBTSxFQUFFLE1BQU07QUFDZCxXQUFPLEVBQUUsaUJBQVUsR0FBRyxFQUFFLEtBQUssRUFBRTtBQUM3QixrQkFBWSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFVLElBQUksRUFBRTtBQUNyQyxhQUFLLENBQUM7QUFDSixZQUFFLEVBQUUsSUFBSTtBQUNSLGNBQUksRUFBRSxJQUFJO1NBQ1gsQ0FBQyxDQUFDO09BQ0osQ0FBQyxTQUFNLENBQUMsVUFBVSxHQUFHLEVBQUU7O0FBRXRCLFlBQU0sT0FBTyxHQUFHLG9CQUFFLEdBQUcsQ0FBQyxHQUFHLEVBQUMsdUJBQXVCLEVBQUUsRUFBRSxDQUFDLENBQUM7O0FBRXZELFlBQU0sZUFBZSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsVUFBQSxLQUFLO2lCQUFJLEtBQUssQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLHNDQUFzQyxDQUFDO1NBQUEsQ0FBQyxDQUFDO0FBQzdHLFlBQUksZUFBZSxFQUFFO0FBQ25CLGVBQUssQ0FBQyxrQkFBSyxVQUFVLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7QUFDL0MsaUJBQU87U0FDUjs7QUFFRCxZQUFNLGVBQWUsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLFVBQUEsS0FBSztpQkFBSSxLQUFLLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyx5Q0FBeUMsQ0FBQztTQUFBLENBQUMsQ0FBQztBQUNoSCxZQUFJLGVBQWUsRUFBRTtBQUNuQixlQUFLLENBQUMsa0JBQUssVUFBVSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0FBQy9DLGlCQUFPO1NBQ1I7O0FBRUQsWUFBTSx1QkFBdUIsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLFVBQUEsS0FBSztpQkFDaEQsS0FBSyxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsdURBQXVELENBQUM7U0FBQSxDQUFDLENBQUM7QUFDbEYsWUFBSSx1QkFBdUIsRUFBRTtBQUMzQixlQUFLLENBQUMsa0JBQUssVUFBVSxDQUFDLHVCQUF1QixDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7QUFDdkQsaUJBQU87U0FDUjs7QUFFRCxZQUFNLGNBQWMsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLFVBQUEsS0FBSztpQkFBSSxLQUFLLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQyx1QkFBdUIsQ0FBQyxJQUN0RixLQUFLLENBQUMsSUFBSSxJQUFJLG1CQUFtQjtTQUFBLENBQUMsQ0FBQztBQUN4QyxZQUFJLGNBQWMsRUFBRTtBQUNsQixlQUFLLENBQUMsa0JBQUssVUFBVSxDQUFDLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0FBQzlDLGlCQUFPO1NBQ1I7OztBQUdELGNBQU0sR0FBRyxDQUFDO09BQ1gsQ0FBQyxTQUFNLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDakI7QUFDRCxVQUFNLGVBQ0QsaUJBQWlCLENBQ3JCO0dBQ0YsQ0FBQyxDQUFDO0NBRUosQ0FBQyIsImZpbGUiOiIvaG9tZS91YnVudHUvd29ya3NwYWNlL2tpYmFuYS01LjAuMi1saW51eC14ODZfNjQvcGx1Z2lucy94LXBhY2svcGx1Z2lucy9ncmFwaC9zZXJ2ZXIvcm91dGVzL2dyYXBoRXhwbG9yZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuaW1wb3J0IEJvb20gZnJvbSAnYm9vbSc7XG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChzZXJ2ZXIsIGNvbW1vblJvdXRlQ29uZmlnKSB7XG5cbiAgdmFyIGNhbGxXaXRoUmVxdWVzdCA9IHNlcnZlci5wbHVnaW5zLmVsYXN0aWNzZWFyY2guY2FsbFdpdGhSZXF1ZXN0O1xuXG4gIGZ1bmN0aW9uIGdyYXBoRXhwbG9yZShyZXEpIHtcbiAgICB2YXIgcGF5bG9hZCA9IHJlcS5wYXlsb2FkO1xuICAgIHJldHVybiBjYWxsV2l0aFJlcXVlc3QocmVxLCAndHJhbnNwb3J0LnJlcXVlc3QnLCB7XG4gICAgICAncGF0aCc6ICcvJyArIGVuY29kZVVSSUNvbXBvbmVudChwYXlsb2FkLmluZGV4KSArICcvX3hwYWNrL19ncmFwaC9fZXhwbG9yZScsXG4gICAgICBib2R5OiBwYXlsb2FkLnF1ZXJ5LFxuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBxdWVyeToge31cbiAgICB9KTtcbiAgfVxuICBzZXJ2ZXIucm91dGUoe1xuICAgIHBhdGg6ICcvYXBpL2dyYXBoL2dyYXBoRXhwbG9yZScsXG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gKHJlcSwgcmVwbHkpIHtcbiAgICAgIGdyYXBoRXhwbG9yZShyZXEpLnRoZW4oZnVuY3Rpb24gKHJlc3ApIHtcbiAgICAgICAgcmVwbHkoe1xuICAgICAgICAgIG9rOiB0cnVlLFxuICAgICAgICAgIHJlc3A6IHJlc3BcbiAgICAgICAgfSk7XG4gICAgICB9KS5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgIC8vRXh0cmFjdCBrbm93biByZWFzb25zIGZvciBiYWQgY2hvaWNlIG9mIGZpZWxkXG4gICAgICAgIGNvbnN0IHJlYXNvbnMgPSBfLmdldChlcnIsJ2JvZHkuZXJyb3Iucm9vdF9jYXVzZScsIFtdKTtcblxuICAgICAgICBjb25zdCBmaWVsZERhdGFSZWFzb24gPSByZWFzb25zLmZpbmQoY2F1c2UgPT4gY2F1c2UucmVhc29uLmluY2x1ZGVzKCdGaWVsZGRhdGEgaXMgZGlzYWJsZWQgb24gdGV4dCBmaWVsZHMnKSk7XG4gICAgICAgIGlmIChmaWVsZERhdGFSZWFzb24pIHtcbiAgICAgICAgICByZXBseShCb29tLmJhZFJlcXVlc3QoZmllbGREYXRhUmVhc29uLnJlYXNvbikpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGZsb2F0RGF0YVJlYXNvbiA9IHJlYXNvbnMuZmluZChjYXVzZSA9PiBjYXVzZS5yZWFzb24uaW5jbHVkZXMoJ05vIHN1cHBvcnQgZm9yIGV4YW1pbmluZyBmbG9hdGluZyBwb2ludCcpKTtcbiAgICAgICAgaWYgKGZsb2F0RGF0YVJlYXNvbikge1xuICAgICAgICAgIHJlcGx5KEJvb20uYmFkUmVxdWVzdChmbG9hdERhdGFSZWFzb24ucmVhc29uKSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYmFkRGl2ZXJzaXR5RmllbGRSZWFzb24gPSByZWFzb25zLmZpbmQoY2F1c2UgPT5cbiAgICAgICAgICBjYXVzZS5yZWFzb24uaW5jbHVkZXMoJ1NhbXBsZSBkaXZlcnNpZnlpbmcga2V5IG11c3QgYmUgYSBzaW5nbGUgdmFsdWVkLWZpZWxkJykpO1xuICAgICAgICBpZiAoYmFkRGl2ZXJzaXR5RmllbGRSZWFzb24pIHtcbiAgICAgICAgICByZXBseShCb29tLmJhZFJlcXVlc3QoYmFkRGl2ZXJzaXR5RmllbGRSZWFzb24ucmVhc29uKSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgY29uc3QgYmFkUXVlcnlSZWFzb24gPSByZWFzb25zLmZpbmQoY2F1c2UgPT4gY2F1c2UucmVhc29uLmluY2x1ZGVzKCdGYWlsZWQgdG8gcGFyc2UgcXVlcnknKVxuICAgICAgICAgIHx8IGNhdXNlLnR5cGUgPT0gJ3BhcnNpbmdfZXhjZXB0aW9uJyk7XG4gICAgICAgIGlmIChiYWRRdWVyeVJlYXNvbikge1xuICAgICAgICAgIHJlcGx5KEJvb20uYmFkUmVxdWVzdChiYWRRdWVyeVJlYXNvbi5yZWFzb24pKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cblxuICAgICAgICAgIC8vIFRocm93IGdlbmVyaWMgZXJyb3JcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfSkuY2F0Y2gocmVwbHkpO1xuICAgIH0sXG4gICAgY29uZmlnOiB7XG4gICAgICAuLi5jb21tb25Sb3V0ZUNvbmZpZ1xuICAgIH1cbiAgfSk7XG5cbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/graph/server/routes/graphExplore.js"
      ],
      "names": [],
      "mappings": ";;;;;;oBACiB,MAAM;;;;sBACT,QAAQ;;;;AAEtB,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE,iBAAiB,EAAE;;AAEpD,MAAI,eAAe,GAAG,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,eAAe,CAAC;;AAEnE,WAAS,YAAY,CAAC,GAAG,EAAE;AACzB,QAAI,OAAO,GAAG,GAAG,CAAC,OAAO,CAAC;AAC1B,WAAO,eAAe,CAAC,GAAG,EAAE,mBAAmB,EAAE;AAC/C,YAAM,EAAE,GAAG,GAAG,kBAAkB,CAAC,OAAO,CAAC,KAAK,CAAC,GAAG,yBAAyB;AAC3E,UAAI,EAAE,OAAO,CAAC,KAAK;AACnB,YAAM,EAAE,MAAM;AACd,WAAK,EAAE,EAAE;KACV,CAAC,CAAC;GACJ;AACD,QAAM,CAAC,KAAK,CAAC;AACX,QAAI,EAAE,yBAAyB;AAC/B,UAAM,EAAE,MAAM;AACd,WAAO,EAAE,iBAAU,GAAG,EAAE,KAAK,EAAE;AAC7B,kBAAY,CAAC,GAAG,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,EAAE;AACrC,aAAK,CAAC;AACJ,YAAE,EAAE,IAAI;AACR,cAAI,EAAE,IAAI;SACX,CAAC,CAAC;OACJ,CAAC,SAAM,CAAC,UAAU,GAAG,EAAE;;AAEtB,YAAM,OAAO,GAAG,oBAAE,GAAG,CAAC,GAAG,EAAC,uBAAuB,EAAE,EAAE,CAAC,CAAC;;AAEvD,YAAM,eAAe,GAAG,OAAO,CAAC,IAAI,CAAC,UAAA,KAAK;iBAAI,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,sCAAsC,CAAC;SAAA,CAAC,CAAC;AAC7G,YAAI,eAAe,EAAE;AACnB,eAAK,CAAC,kBAAK,UAAU,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC,CAAC;AAC/C,iBAAO;SACR;;AAED,YAAM,eAAe,GAAG,OAAO,CAAC,IAAI,CAAC,UAAA,KAAK;iBAAI,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,yCAAyC,CAAC;SAAA,CAAC,CAAC;AAChH,YAAI,eAAe,EAAE;AACnB,eAAK,CAAC,kBAAK,UAAU,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC,CAAC;AAC/C,iBAAO;SACR;;AAED,YAAM,uBAAuB,GAAG,OAAO,CAAC,IAAI,CAAC,UAAA,KAAK;iBAChD,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,uDAAuD,CAAC;SAAA,CAAC,CAAC;AAClF,YAAI,uBAAuB,EAAE;AAC3B,eAAK,CAAC,kBAAK,UAAU,CAAC,uBAAuB,CAAC,MAAM,CAAC,CAAC,CAAC;AACvD,iBAAO;SACR;;AAED,YAAM,cAAc,GAAG,OAAO,CAAC,IAAI,CAAC,UAAA,KAAK;iBAAI,KAAK,CAAC,MAAM,CAAC,QAAQ,CAAC,uBAAuB,CAAC,IACtF,KAAK,CAAC,IAAI,IAAI,mBAAmB;SAAA,CAAC,CAAC;AACxC,YAAI,cAAc,EAAE;AAClB,eAAK,CAAC,kBAAK,UAAU,CAAC,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC;AAC9C,iBAAO;SACR;;;AAGD,cAAM,GAAG,CAAC;OACX,CAAC,SAAM,CAAC,KAAK,CAAC,CAAC;KACjB;AACD,UAAM,eACD,iBAAiB,CACrB;GACF,CAAC,CAAC;CAEJ,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/graph/server/routes/graphExplore.js",
      "sourcesContent": [
        "\nimport Boom from 'boom';\nimport _ from 'lodash';\n\nmodule.exports = function (server, commonRouteConfig) {\n\n  var callWithRequest = server.plugins.elasticsearch.callWithRequest;\n\n  function graphExplore(req) {\n    var payload = req.payload;\n    return callWithRequest(req, 'transport.request', {\n      'path': '/' + encodeURIComponent(payload.index) + '/_xpack/_graph/_explore',\n      body: payload.query,\n      method: 'POST',\n      query: {}\n    });\n  }\n  server.route({\n    path: '/api/graph/graphExplore',\n    method: 'POST',\n    handler: function (req, reply) {\n      graphExplore(req).then(function (resp) {\n        reply({\n          ok: true,\n          resp: resp\n        });\n      }).catch(function (err) {\n        //Extract known reasons for bad choice of field\n        const reasons = _.get(err,'body.error.root_cause', []);\n\n        const fieldDataReason = reasons.find(cause => cause.reason.includes('Fielddata is disabled on text fields'));\n        if (fieldDataReason) {\n          reply(Boom.badRequest(fieldDataReason.reason));\n          return;\n        }\n\n        const floatDataReason = reasons.find(cause => cause.reason.includes('No support for examining floating point'));\n        if (floatDataReason) {\n          reply(Boom.badRequest(floatDataReason.reason));\n          return;\n        }\n\n        const badDiversityFieldReason = reasons.find(cause =>\n          cause.reason.includes('Sample diversifying key must be a single valued-field'));\n        if (badDiversityFieldReason) {\n          reply(Boom.badRequest(badDiversityFieldReason.reason));\n          return;\n        }\n\n        const badQueryReason = reasons.find(cause => cause.reason.includes('Failed to parse query')\n          || cause.type == 'parsing_exception');\n        if (badQueryReason) {\n          reply(Boom.badRequest(badQueryReason.reason));\n          return;\n        }\n\n          // Throw generic error\n        throw err;\n      }).catch(reply);\n    },\n    config: {\n      ...commonRouteConfig\n    }\n  });\n\n};\n"
      ]
    },
    "mtime": 1485775595877
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/graph/server/routes/searchProxy.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "extends"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nmodule.exports = function (server, commonRouteConfig) {\n\n  server.route({\n    path: '/api/graph/searchProxy',\n    method: 'POST',\n    handler: function handler(req, reply) {\n      var callWithRequest = server.plugins.elasticsearch.callWithRequest;\n      callWithRequest(req, 'search', req.payload).then(function (resp) {\n        reply({\n          ok: true,\n          resp: resp\n        });\n      })['catch'](reply);\n    },\n    config: _extends({}, commonRouteConfig)\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL2dyYXBoL3NlcnZlci9yb3V0ZXMvc2VhcmNoUHJveHkuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7OztBQUFBLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxNQUFNLEVBQUUsaUJBQWlCLEVBQUU7O0FBRXBELFFBQU0sQ0FBQyxLQUFLLENBQUM7QUFDWCxRQUFJLEVBQUUsd0JBQXdCO0FBQzlCLFVBQU0sRUFBRSxNQUFNO0FBQ2QsV0FBTyxFQUFFLGlCQUFVLEdBQUcsRUFBRSxLQUFLLEVBQUU7QUFDN0IsVUFBSSxlQUFlLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsZUFBZSxDQUFDO0FBQ25FLHFCQUFlLENBQUMsR0FBRyxFQUFFLFFBQVEsRUFBRSxHQUFHLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxDQUFDLFVBQVUsSUFBSSxFQUFFO0FBQy9ELGFBQUssQ0FBQztBQUNKLFlBQUUsRUFBRSxJQUFJO0FBQ1IsY0FBSSxFQUFDLElBQUk7U0FDVixDQUFDLENBQUM7T0FDSixDQUFDLFNBQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQztLQUdqQjtBQUNELFVBQU0sZUFDRCxpQkFBaUIsQ0FDckI7R0FDRixDQUFDLENBQUM7Q0FHSixDQUFDIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL2dyYXBoL3NlcnZlci9yb3V0ZXMvc2VhcmNoUHJveHkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChzZXJ2ZXIsIGNvbW1vblJvdXRlQ29uZmlnKSB7XG5cbiAgc2VydmVyLnJvdXRlKHtcbiAgICBwYXRoOiAnL2FwaS9ncmFwaC9zZWFyY2hQcm94eScsXG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gKHJlcSwgcmVwbHkpIHtcbiAgICAgIHZhciBjYWxsV2l0aFJlcXVlc3QgPSBzZXJ2ZXIucGx1Z2lucy5lbGFzdGljc2VhcmNoLmNhbGxXaXRoUmVxdWVzdDtcbiAgICAgIGNhbGxXaXRoUmVxdWVzdChyZXEsICdzZWFyY2gnLCByZXEucGF5bG9hZCkudGhlbihmdW5jdGlvbiAocmVzcCkge1xuICAgICAgICByZXBseSh7XG4gICAgICAgICAgb2s6IHRydWUsXG4gICAgICAgICAgcmVzcDpyZXNwXG4gICAgICAgIH0pO1xuICAgICAgfSkuY2F0Y2gocmVwbHkpO1xuXG5cbiAgICB9LFxuICAgIGNvbmZpZzoge1xuICAgICAgLi4uY29tbW9uUm91dGVDb25maWdcbiAgICB9XG4gIH0pO1xuXG5cbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/graph/server/routes/searchProxy.js"
      ],
      "names": [],
      "mappings": ";;;;AAAA,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE,iBAAiB,EAAE;;AAEpD,QAAM,CAAC,KAAK,CAAC;AACX,QAAI,EAAE,wBAAwB;AAC9B,UAAM,EAAE,MAAM;AACd,WAAO,EAAE,iBAAU,GAAG,EAAE,KAAK,EAAE;AAC7B,UAAI,eAAe,GAAG,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,eAAe,CAAC;AACnE,qBAAe,CAAC,GAAG,EAAE,QAAQ,EAAE,GAAG,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,UAAU,IAAI,EAAE;AAC/D,aAAK,CAAC;AACJ,YAAE,EAAE,IAAI;AACR,cAAI,EAAC,IAAI;SACV,CAAC,CAAC;OACJ,CAAC,SAAM,CAAC,KAAK,CAAC,CAAC;KAGjB;AACD,UAAM,eACD,iBAAiB,CACrB;GACF,CAAC,CAAC;CAGJ,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/graph/server/routes/searchProxy.js",
      "sourcesContent": [
        "module.exports = function (server, commonRouteConfig) {\n\n  server.route({\n    path: '/api/graph/searchProxy',\n    method: 'POST',\n    handler: function (req, reply) {\n      var callWithRequest = server.plugins.elasticsearch.callWithRequest;\n      callWithRequest(req, 'search', req.payload).then(function (resp) {\n        reply({\n          ok: true,\n          resp:resp\n        });\n      }).catch(reply);\n\n\n    },\n    config: {\n      ...commonRouteConfig\n    }\n  });\n\n\n};\n"
      ]
    },
    "mtime": 1485775595877
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "path",
            "imported": [
              "join",
              "resolve"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "join",
                "local": "join"
              },
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Promise"
              }
            ]
          },
          {
            "source": "elasticsearch",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "elasticsearch"
              }
            ]
          },
          {
            "source": "../../server/lib/require_all_and_apply",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "requireAllAndApply"
              }
            ]
          },
          {
            "source": "./server/lib/es_client/health_check",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "esHealthCheck"
              }
            ]
          },
          {
            "source": "./server/lib/es_client/instantiate_client",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "instantiateClient"
              }
            ]
          },
          {
            "source": "./server/kibana_monitoring",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "initKibanaMonitoring"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "monitoringIndex",
            "kibana"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "monitoringIndex",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "kibana",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = monitoringIndex;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _path = require('path');\n\nvar _bluebird = require('bluebird');\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _elasticsearch = require('elasticsearch');\n\nvar _elasticsearch2 = _interopRequireDefault(_elasticsearch);\n\nvar _serverLibRequire_all_and_apply = require('../../server/lib/require_all_and_apply');\n\nvar _serverLibRequire_all_and_apply2 = _interopRequireDefault(_serverLibRequire_all_and_apply);\n\nvar _serverLibEs_clientHealth_check = require('./server/lib/es_client/health_check');\n\nvar _serverLibEs_clientHealth_check2 = _interopRequireDefault(_serverLibEs_clientHealth_check);\n\nvar _serverLibEs_clientInstantiate_client = require('./server/lib/es_client/instantiate_client');\n\nvar _serverLibEs_clientInstantiate_client2 = _interopRequireDefault(_serverLibEs_clientInstantiate_client);\n\nvar _serverKibana_monitoring = require('./server/kibana_monitoring');\n\nvar _serverKibana_monitoring2 = _interopRequireDefault(_serverKibana_monitoring);\n\nfunction monitoringIndex(kibana) {\n  return new kibana.Plugin({\n    require: ['kibana', 'elasticsearch', 'xpack_main'],\n    id: 'monitoring',\n    configPrefix: 'xpack.monitoring',\n    publicDir: (0, _path.resolve)(__dirname, 'public'),\n    uiExports: {\n      app: {\n        title: 'Monitoring',\n        description: 'Monitoring for Elasticsearch',\n        icon: 'plugins/monitoring/monitoring.svg',\n        main: 'plugins/monitoring/monitoring',\n        injectVars: function injectVars(server) {\n          var config = server.config();\n          return {\n            maxBucketSize: config.get('xpack.monitoring.max_bucket_size'),\n            minIntervalSeconds: config.get('xpack.monitoring.min_interval_seconds'),\n            kbnIndex: config.get('kibana.index'),\n            esApiVersion: config.get('elasticsearch.apiVersion'),\n            esShardTimeout: config.get('elasticsearch.shardTimeout'),\n            showLicenseExpiration: config.get('xpack.monitoring.show_license_expiration')\n          };\n        }\n      },\n      injectDefaultVars: function injectDefaultVars(server) {\n        var config = server.config();\n        return {\n          statsReportUrl: config.get('xpack.monitoring.stats_report_url'),\n          reportStats: config.get('xpack.monitoring.report_stats')\n        };\n      },\n      hacks: ['plugins/monitoring/hacks/phone_home_notifications', 'plugins/monitoring/hacks/phone_home_trigger']\n    },\n\n    config: function config(Joi) {\n      var array = Joi.array;\n      var boolean = Joi.boolean;\n      var number = Joi.number;\n      var object = Joi.object;\n      var string = Joi.string;\n\n      return object({\n        enabled: boolean()['default'](true),\n        chart: object({\n          elasticsearch: object({\n            index: object({\n              index_memory: array().items(string().valid('index_mem_doc_values', 'index_mem_fixed_bit_set', 'index_mem_norms', 'index_mem_points', 'index_mem_stored_fields', 'index_mem_term_vectors', 'index_mem_terms', 'index_mem_versions', 'index_mem_writer', 'index_mem_fielddata', 'index_mem_query_cache', 'index_mem_request_cache')).max(3).unique().single()['default'](['index_mem_terms', 'index_mem_points'])\n            })['default'](),\n            node: object({\n              index_memory: array().items(string().valid('node_index_mem_doc_values', 'node_index_mem_fixed_bit_set', 'node_index_mem_norms', 'node_index_mem_points', 'node_index_mem_stored_fields', 'node_index_mem_term_vectors', 'node_index_mem_terms', 'node_index_mem_versions', 'node_index_mem_writer', 'node_index_mem_fielddata', 'node_index_mem_query_cache', 'node_index_mem_request_cache')).max(3).unique().single()['default'](['node_index_mem_terms', 'node_index_mem_points'])\n            })['default']()\n          })['default']()\n        })['default'](),\n        loggingTag: string()['default']('monitoring-ui'),\n        index: string()['default']('.monitoring-data-2'),\n        kibana: object({\n          index_pattern: string()['default']('.monitoring-kibana-2-*'),\n          collection: object({\n            enabled: boolean()['default'](true),\n            interval: number()['default'](10000)\n          })['default']()\n        })['default'](),\n        missing_intervals: number()['default'](12),\n        max_bucket_size: number()['default'](10000),\n        min_interval_seconds: number()['default'](10),\n        show_license_expiration: boolean()['default'](true),\n        report_stats: boolean()['default'](true),\n        node_resolver: string().regex(/^(?:transport_address|name|uuid)$/)['default']('uuid'),\n        stats_report_url: Joi.when('$dev', {\n          is: true,\n          then: string()['default']('../api/monitoring/v1/phone-home'),\n          otherwise: string()['default']('https://marvel-stats.elasticsearch.com/appdata/marvelOpts')\n        }),\n        agent: object({\n          interval: string().regex(/[\\d\\.]+[yMwdhms]/)['default']('10s')\n        })['default'](),\n        elasticsearch: object({\n          customHeaders: object()['default']({}),\n          index_pattern: string()['default']('.monitoring-es-2-*'),\n          logQueries: boolean()['default'](false),\n          url: string().uri({ scheme: ['http', 'https'] }), // if empty, use Kibana's connection config\n          username: string(),\n          password: string(),\n          requestTimeout: number()['default'](30000),\n          pingTimeout: number()['default'](30000),\n          ssl: object({\n            verify: boolean()['default'](true),\n            ca: array().single().items(string()),\n            cert: string(),\n            key: string()\n          })['default'](),\n          apiVersion: string()['default']('master'),\n          engineVersion: string().valid('^5.0.0')['default']('^5.0.0')\n        })['default']()\n      })['default']();\n    },\n\n    init: function init(server, _options) {\n      var _this = this;\n\n      var xpackMainPlugin = server.plugins.xpack_main;\n      return xpackMainPlugin.status.once('green', function () {\n        return _bluebird2['default'].all([(0, _serverLibEs_clientInstantiate_client2['default'])(server, _elasticsearch2['default']), // Instantiate the dedicated ES client. Dependency injection for ES for test mocking\n        (0, _serverLibRequire_all_and_apply2['default'])((0, _path.join)(__dirname, 'server', 'routes', '**', '*.js'), server), // Require all the routes\n        (0, _serverKibana_monitoring2['default'])(_this.kbnServer, server), // send kibana server ops to the monitoring bulk api\n        (0, _serverLibEs_clientHealth_check2['default'])(_this, server).start() // Make sure the Monitoring index is created and ready\n        ]);\n      });\n    }\n  });\n}\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL21vbml0b3JpbmcvaW5kZXguanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7cUJBUXdCLGVBQWU7Ozs7b0JBUlQsTUFBTTs7d0JBQ2hCLFVBQVU7Ozs7NkJBQ0osZUFBZTs7Ozs4Q0FDVix3Q0FBd0M7Ozs7OENBQzdDLHFDQUFxQzs7OztvREFDakMsMkNBQTJDOzs7O3VDQUN4Qyw0QkFBNEI7Ozs7QUFFOUMsU0FBUyxlQUFlLENBQUMsTUFBTSxFQUFFO0FBQzlDLFNBQU8sSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDO0FBQ3ZCLFdBQU8sRUFBRSxDQUFDLFFBQVEsRUFBRSxlQUFlLEVBQUUsWUFBWSxDQUFDO0FBQ2xELE1BQUUsRUFBRSxZQUFZO0FBQ2hCLGdCQUFZLEVBQUUsa0JBQWtCO0FBQ2hDLGFBQVMsRUFBRSxtQkFBUSxTQUFTLEVBQUUsUUFBUSxDQUFDO0FBQ3ZDLGFBQVMsRUFBRTtBQUNULFNBQUcsRUFBRTtBQUNILGFBQUssRUFBRSxZQUFZO0FBQ25CLG1CQUFXLEVBQUUsOEJBQThCO0FBQzNDLFlBQUksRUFBRSxtQ0FBbUM7QUFDekMsWUFBSSxFQUFFLCtCQUErQjtBQUNyQyxrQkFBVSxFQUFBLG9CQUFDLE1BQU0sRUFBRTtBQUNqQixjQUFJLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDN0IsaUJBQU87QUFDTCx5QkFBYSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsa0NBQWtDLENBQUM7QUFDN0QsOEJBQWtCLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyx1Q0FBdUMsQ0FBQztBQUN2RSxvQkFBUSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsY0FBYyxDQUFDO0FBQ3BDLHdCQUFZLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQywwQkFBMEIsQ0FBQztBQUNwRCwwQkFBYyxFQUFFLE1B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Sjs7QUFBQSxDQUFDIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL21vbml0b3JpbmcvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBqb2luLCByZXNvbHZlIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgUHJvbWlzZSBmcm9tICdibHVlYmlyZCc7XG5pbXBvcnQgZWxhc3RpY3NlYXJjaCBmcm9tICdlbGFzdGljc2VhcmNoJztcbmltcG9ydCByZXF1aXJlQWxsQW5kQXBwbHkgZnJvbSAnLi4vLi4vc2VydmVyL2xpYi9yZXF1aXJlX2FsbF9hbmRfYXBwbHknO1xuaW1wb3J0IGVzSGVhbHRoQ2hlY2sgZnJvbSAnLi9zZXJ2ZXIvbGliL2VzX2NsaWVudC9oZWFsdGhfY2hlY2snO1xuaW1wb3J0IGluc3RhbnRpYXRlQ2xpZW50IGZyb20gJy4vc2VydmVyL2xpYi9lc19jbGllbnQvaW5zdGFudGlhdGVfY2xpZW50JztcbmltcG9ydCBpbml0S2liYW5hTW9uaXRvcmluZyBmcm9tICcuL3NlcnZlci9raWJhbmFfbW9uaXRvcmluZyc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1vbml0b3JpbmdJbmRleChraWJhbmEpIHtcbiAgcmV0dXJuIG5ldyBraWJhbmEuUGx1Z2luKHtcbiAgICByZXF1aXJlOiBbJ2tpYmFuYScsICdlbGFzdGljc2VhcmNoJywgJ3hwYWNrX21haW4nXSxcbiAgICBpZDogJ21vbml0b3JpbmcnLFxuICAgIGNvbmZpZ1ByZWZpeDogJ3hwYWNrLm1vbml0b3JpbmcnLFxuICAgIHB1YmxpY0RpcjogcmVzb2x2ZShfX2Rpcm5hbWUsICdwdWJsaWMnKSxcbiAgICB1aUV4cG9ydHM6IHtcbiAgICAgIGFwcDoge1xuICAgICAgICB0aXRsZTogJ01vbml0b3JpbmcnLFxuICAgICAgICBkZXNjcmlwdGlvbjogJ01vbml0b3JpbmcgZm9yIEVsYXN0aWNzZWFyY2gnLFxuICAgICAgICBpY29uOiAncGx1Z2lucy9tb25pdG9yaW5nL21vbml0b3Jpbmcuc3ZnJyxcbiAgICAgICAgbWFpbjogJ3BsdWdpbnMvbW9uaXRvcmluZy9tb25pdG9yaW5nJyxcbiAgICAgICAgaW5qZWN0VmFycyhzZXJ2ZXIpIHtcbiAgICAgICAgICB2YXIgY29uZmlnID0gc2VydmVyLmNvbmZpZygpO1xuICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBtYXhCdWNrZXRTaXplOiBjb25maWcuZ2V0KCd4cGFjay5tb25pdG9yaW5nLm1heF9idWNrZXRfc2l6ZScpLFxuICAgICAgICAgICAgbWluSW50ZXJ2YWxTZWNvbmRzOiBjb25maWcuZ2V0KCd4cGFjay5tb25pdG9yaW5nLm1pbl9pbnRlcnZhbF9zZWNvbmRzJyksXG4gICAgICAgICAgICBrYm5JbmRleDogY29uZmlnLmdldCgna2liYW5hLmluZGV4JyksXG4gICAgICAgICAgICBlc0FwaVZlcnNpb246IGNvbmZpZy5nZXQoJ2VsYXN0aWNzZWFyY2guYXBpVmVyc2lvbicpLFxuICAgICAgICAgICAgZXNTaGFyZFRpbWVvdXQ6IGNvbmZpZy5nZXQoJ2VsYXN0aWNzZWFyY2guc2hhcmRUaW1lb3V0JyksXG4gICAgICAgICAgICBzaG93TGljZW5zZUV4cGlyYXRpb246IGNvbmZpZy5nZXQoJ3hwYWNrLm1vbml0b3Jpbmcuc2hvd19saWNlbnNlX2V4cGlyYXRpb24nKVxuICAgICAgICAgIH07XG4gICAgICAgIH0sXG4gICAgICB9LFxuICAgICAgaW5qZWN0RGVmYXVsdFZhcnMoc2VydmVyKSB7XG4gICAgICAgIHZhciBjb25maWcgPSBzZXJ2ZXIuY29uZmlnKCk7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgc3RhdHNSZXBvcnRVcmw6IGNvbmZpZy5nZXQoJ3hwYWNrLm1vbml0b3Jpbmcuc3RhdHNfcmVwb3J0X3VybCcpLFxuICAgICAgICAgIHJlcG9ydFN0YXRzOiBjb25maWcuZ2V0KCd4cGFjay5tb25pdG9yaW5nLnJlcG9ydF9zdGF0cycpXG4gICAgICAgIH07XG4gICAgICB9LFxuICAgICAgaGFja3M6IFtcbiAgICAgICAgJ3BsdWdpbnMvbW9uaXRvcmluZy9oYWNrcy9waG9uZV9ob21lX25vdGlmaWNhdGlvbnMnLFxuICAgICAgICAncGx1Z2lucy9tb25pdG9yaW5nL2hhY2tzL3Bob25lX2hvbWVfdHJpZ2dlcidcbiAgICAgIF1cbiAgICB9LFxuXG4gICAgY29uZmlnOiBmdW5jdGlvbiAoSm9pKSB7XG4gICAgICBjb25zdCB7IGFycmF5LCBib29sZWFuLCBudW1iZXIsIG9iamVjdCwgc3RyaW5nIH0gPSBKb2k7XG4gICAgICByZXR1cm4gb2JqZWN0KHtcbiAgICAgICAgZW5hYmxlZDogYm9vbGVhbigpLmRlZmF1bHQodHJ1ZSksXG4gICAgICAgIGNoYXJ0OiBvYmplY3Qoe1xuICAgICAgICAgIGVsYXN0aWNzZWFyY2g6IG9iamVjdCh7XG4gICAgICAgICAgICBpbmRleDogb2JqZWN0KHtcbiAgICAgICAgICAgICAgaW5kZXhfbWVtb3J5OiBhcnJheSgpLml0ZW1zKHN0cmluZygpLnZhbGlkKFxuICAgICAgICAgICAgICAgICdpbmRleF9tZW1fZG9jX3ZhbHVlcycsXG4gICAgICAgICAgICAgICAgJ2luZGV4X21lbV9maXhlZF9iaXRfc2V0JyxcbiAgICAgICAgICAgICAgICAnaW5kZXhfbWVtX25vcm1zJyxcbiAgICAgICAgICAgICAgICAnaW5kZXhfbWVtX3BvaW50cycsXG4gICAgICAgICAgICAgICAgJ2luZGV4X21lbV9zdG9yZWRfZmllbGRzJyxcbiAgICAgICAgICAgICAgICAnaW5kZXhfbWVtX3Rlcm1fdmVjdG9ycycsXG4gICAgICAgICAgICAgICAgJ2luZGV4X21lbV90ZXJtcycsXG4gICAgICAgICAgICAgICAgJ2luZGV4X21lbV92ZXJzaW9ucycsXG4gICAgICAgICAgICAgICAgJ2luZGV4X21lbV93cml0ZXInLFxuICAgICAgICAgICAgICAgICdpbmRleF9tZW1fZmllbGRkYXRhJyxcbiAgICAgICAgICAgICAgICAnaW5kZXhfbWVtX3F1ZXJ5X2NhY2hlJyxcbiAgICAgICAgICAgICAgICAnaW5kZXhfbWVtX3JlcXVlc3RfY2FjaGUnXG4gICAgICAgICAgICAgICkpLm1heCgzKS51bmlxdWUoKS5zaW5nbGUoKS5kZWZhdWx0KFtcbiAgICAgICAgICAgICAgICAnaW5kZXhfbWVtX3Rlcm1zJyxcbiAgICAgICAgICAgICAgICAnaW5kZXhfbWVtX3BvaW50cydcbiAgICAgICAgICAgICAgXSlcbiAgICAgICAgICAgIH0pLmRlZmF1bHQoKSxcbiAgICAgICAgICAgIG5vZGU6IG9iamVjdCh7XG4gICAgICAgICAgICAgIGluZGV4X21lbW9yeTogYXJyYXkoKS5pdGVtcyhzdHJpbmcoKS52YWxpZChcbiAgICAgICAgICAgICAgICAnbm9kZV9pbmRleF9tZW1fZG9jX3ZhbHVlcycsXG4gICAgICAgICAgICAgICAgJ25vZGVfaW5kZXhfbWVtX2ZpeGVkX2JpdF9zZXQnLFxuICAgICAgICAgICAgICAgICdub2RlX2luZGV4X21lbV9ub3JtcycsXG4gICAgICAgICAgICAgICAgJ25vZGVfaW5kZXhfbWVtX3BvaW50cycsXG4gICAgICAgICAgICAgICAgJ25vZGVfaW5kZXhfbWVtX3N0b3JlZF9maWVsZHMnLFxuICAgICAgICAgICAgICAgICdub2RlX2luZGV4X21lbV90ZXJtX3ZlY3RvcnMnLFxuICAgICAgICAgICAgICAgICdub2RlX2luZGV4X21lbV90ZXJtcycsXG4gICAgICAgICAgICAgICAgJ25vZGVfaW5kZXhfbWVtX3ZlcnNpb25zJyxcbiAgICAgICAgICAgICAgICAnbm9kZV9pbmRleF9tZW1fd3JpdGVyJyxcbiAgICAgICAgICAgICAgICAnbm9kZV9pbmRleF9tZW1fZmllbGRkYXRhJyxcbiAgICAgICAgICAgICAgICAnbm9kZV9pbmRleF9tZW1fcXVlcnlfY2FjaGUnLFxuICAgICAgICAgICAgICAgICdub2RlX2luZGV4X21lbV9yZXF1ZXN0X2NhY2hlJ1xuICAgICAgICAgICAgICApKS5tYXgoMykudW5pcXVlKCkuc2luZ2xlKCkuZGVmYXVsdChbXG4gICAgICAgICAgICAgICAgJ25vZGVfaW5kZXhfbWVtX3Rlcm1zJyxcbiAgICAgICAgICAgICAgICAnbm9kZV9pbmRleF9tZW1fcG9pbnRzJ1xuICAgICAgICAgICAgICBdKVxuICAgICAgICAgICAgfSkuZGVmYXVsdCgpXG4gICAgICAgICAgfSkuZGVmYXVsdCgpXG4gICAgICAgIH0pLmRlZmF1bHQoKSxcbiAgICAgICAgbG9nZ2luZ1RhZzogc3RyaW5nKCkuZGVmYXVsdCgnbW9uaXRvcmluZy11aScpLFxuICAgICAgICBpbmRleDogc3RyaW5nKCkuZGVmYXVsdCgnLm1vbml0b3JpbmctZGF0YS0yJyksXG4gICAgICAgIGtpYmFuYTogb2JqZWN0KHtcbiAgICAgICAgICBpbmRleF9wYXR0ZXJuOiBzdHJpbmcoKS5kZWZhdWx0KCcubW9uaXRvcmluZy1raWJhbmEtMi0qJyksXG4gICAgICAgICAgY29sbGVjdGlvbjogb2JqZWN0KHtcbiAgICAgICAgICAgIGVuYWJsZWQ6IGJvb2xlYW4oKS5kZWZhdWx0KHRydWUpLFxuICAgICAgICAgICAgaW50ZXJ2YWw6IG51bWJlcigpLmRlZmF1bHQoMTAwMDApXG4gICAgICAgICAgfSkuZGVmYXVsdCgpXG4gICAgICAgIH0pLmRlZmF1bHQoKSxcbiAgICAgICAgbWlzc2luZ19pbnRlcnZhbHM6IG51bWJlcigpLmRlZmF1bHQoMTIpLFxuICAgICAgICBtYXhfYnVja2V0X3NpemU6IG51bWJlcigpLmRlZmF1bHQoMTAwMDApLFxuICAgICAgICBtaW5faW50ZXJ2YWxfc2Vjb25kczogbnVtYmVyKCkuZGVmYXVsdCgxMCksXG4gICAgICAgIHNob3dfbGljZW5zZV9leHBpcmF0aW9uOiBib29sZWFuKCkuZGVmYXVsdCh0cnVlKSxcbiAgICAgICAgcmVwb3J0X3N0YXRzOiBib29sZWFuKCkuZGVmYXVsdCh0cnVlKSxcbiAgICAgICAgbm9kZV9yZXNvbHZlcjogc3RyaW5nKCkucmVnZXgoL14oPzp0cmFuc3BvcnRfYWRkcmVzc3xuYW1lfHV1aWQpJC8pLmRlZmF1bHQoJ3V1aWQnKSxcbiAgICAgICAgc3RhdHNfcmVwb3J0X3VybDogSm9pLndoZW4oJyRkZXYnLCB7XG4gICAgICAgICAgaXM6IHRydWUsXG4gICAgICAgICAgdGhlbjogc3RyaW5nKCkuZGVmYXVsdCgnLi4vYXBpL21vbml0b3JpbmcvdjEvcGhvbmUtaG9tZScpLFxuICAgICAgICAgIG90aGVyd2lzZTogc3RyaW5nKCkuZGVmYXVsdCgnaHR0cHM6Ly9tYXJ2ZWwtc3RhdHMuZWxhc3RpY3NlYXJjaC5jb20vYXBwZGF0YS9tYXJ2ZWxPcHRzJylcbiAgICAgICAgfSksXG4gICAgICAgIGFnZW50OiBvYmplY3Qoe1xuICAgICAgICAgIGludGVydmFsOiBzdHJpbmcoKS5yZWdleCgvW1xcZFxcLl0rW3lNd2RobXNdLykuZGVmYXVsdCgnMTBzJylcbiAgICAgICAgfSkuZGVmYXVsdCgpLFxuICAgICAgICBlbGFzdGljc2VhcmNoOiBvYmplY3Qoe1xuICAgICAgICAgIGN1c3RvbUhlYWRlcnM6IG9iamVjdCgpLmRlZmF1bHQoe30pLFxuICAgICAgICAgIGluZGV4X3BhdHRlcm46IHN0cmluZygpLmRlZmF1bHQoJy5tb25pdG9yaW5nLWVzLTItKicpLFxuICAgICAgICAgIGxvZ1F1ZXJpZXM6IGJvb2xlYW4oKS5kZWZhdWx0KGZhbHNlKSxcbiAgICAgICAgICB1cmw6IHN0cmluZygpLnVyaSh7IHNjaGVtZTogWydodHRwJywgJ2h0dHBzJ10gfSksIC8vIGlmIGVtcHR5LCB1c2UgS2liYW5hJ3MgY29ubmVjdGlvbiBjb25maWdcbiAgICAgICAgICB1c2VybmFtZTogc3RyaW5nKCksXG4gICAgICAgICAgcGFzc3dvcmQ6IHN0cmluZygpLFxuICAgICAgICAgIHJlcXVlc3RUaW1lb3V0OiBudW1iZXIoKS5kZWZhdWx0KDMwMDAwKSxcbiAgICAgICAgICBwaW5nVGltZW91dDogbnVtYmVyKCkuZGVmYXVsdCgzMDAwMCksXG4gICAgICAgICAgc3NsOiBvYmplY3Qoe1xuICAgICAgICAgICAgdmVyaWZ5OiBib29sZWFuKCkuZGVmYXVsdCh0cnVlKSxcbiAgICAgICAgICAgIGNhOiBhcnJheSgpLnNpbmdsZSgpLml0ZW1zKHN0cmluZygpKSxcbiAgICAgICAgICAgIGNlcnQ6IHN0cmluZygpLFxuICAgICAgICAgICAga2V5OiBzdHJpbmcoKVxuICAgICAgICAgIH0pLmRlZmF1bHQoKSxcbiAgICAgICAgICBhcGlWZXJzaW9uOiBzdHJpbmcoKS5kZWZhdWx0KCdtYXN0ZXInKSxcbiAgICAgICAgICBlbmdpbmVWZXJzaW9uOiBzdHJpbmcoKS52YWxpZCgnXjUuMC4wJykuZGVmYXVsdCgnXjUuMC4wJylcbiAgICAgICAgfSkuZGVmYXVsdCgpXG4gICAgICB9KS5kZWZhdWx0KCk7XG4gICAgfSxcblxuICAgIGluaXQ6IGZ1bmN0aW9uIChzZXJ2ZXIsIF9vcHRpb25zKSB7XG4gICAgICBjb25zdCB4cGFja01haW5QbHVnaW4gPSBzZXJ2ZXIucGx1Z2lucy54cGFja19tYWluO1xuICAgICAgcmV0dXJuIHhwYWNrTWFpblBsdWdpbi5zdGF0dXMub25jZSgnZ3JlZW4nLCAoKSA9PiB7XG4gICAgICAgIHJldHVybiBQcm9taXNlLmFsbChbXG4gICAgICAgICAgaW5zdGFudGlhdGVDbGllbnQoc2VydmVyLCBlbGFzdGljc2VhcmNoKSwgLy8gSW5zdGFudGlhdGUgdGhlIGRlZGljYXRlZCBFUyBjbGllbnQuIERlcGVuZGVuY3kgaW5qZWN0aW9uIGZvciBFUyBmb3IgdGVzdCBtb2NraW5nXG4gICAgICAgICAgcmVxdWlyZUFsbEFuZEFwcGx5KGpvaW4oX19kaXJuYW1lLCAnc2VydmVyJywgJ3JvdXRlcycsICcqKicsICcqLmpzJyksIHNlcnZlciksIC8vIFJlcXVpcmUgYWxsIHRoZSByb3V0ZXNcbiAgICAgICAgICBpbml0S2liYW5hTW9uaXRvcmluZyh0aGlzLmtiblNlcnZlciwgc2VydmVyKSwgLy8gc2VuZCBraWJhbmEgc2VydmVyIG9wcyB0byB0aGUgbW9uaXRvcmluZyBidWxrIGFwaVxuICAgICAgICAgIGVzSGVhbHRoQ2hlY2sodGhpcywgc2VydmVyKS5zdGFydCgpIC8vIE1ha2Ugc3VyZSB0aGUgTW9uaXRvcmluZyBpbmRleCBpcyBjcmVhdGVkIGFuZCByZWFkeVxuICAgICAgICBdKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfSk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/index.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/index.js",
      "sourcesContent": [
        "import { join, resolve } from 'path';\nimport Promise from 'bluebird';\nimport elasticsearch from 'elasticsearch';\nimport requireAllAndApply from '../../server/lib/require_all_and_apply';\nimport esHealthCheck from './server/lib/es_client/health_check';\nimport instantiateClient from './server/lib/es_client/instantiate_client';\nimport initKibanaMonitoring from './server/kibana_monitoring';\n\nexport default function monitoringIndex(kibana) {\n  return new kibana.Plugin({\n    require: ['kibana', 'elasticsearch', 'xpack_main'],\n    id: 'monitoring',\n    configPrefix: 'xpack.monitoring',\n    publicDir: resolve(__dirname, 'public'),\n    uiExports: {\n      app: {\n        title: 'Monitoring',\n        description: 'Monitoring for Elasticsearch',\n        icon: 'plugins/monitoring/monitoring.svg',\n        main: 'plugins/monitoring/monitoring',\n        injectVars(server) {\n          var config = server.config();\n          return {\n            maxBucketSize: config.get('xpack.monitoring.max_bucket_size'),\n            minIntervalSeconds: config.get('xpack.monitoring.min_interval_seconds'),\n            kbnIndex: config.get('kibana.index'),\n            esApiVersion: config.get('elasticsearch.apiVersion'),\n            esShardTimeout: config.get('elasticsearch.shardTimeout'),\n            showLicenseExpiration: config.get('xpack.monitoring.show_license_expiration')\n          };\n        },\n      },\n      injectDefaultVars(server) {\n        var config = server.config();\n        return {\n          statsReportUrl: config.get('xpack.monitoring.stats_report_url'),\n          reportStats: config.get('xpack.monitoring.report_stats')\n        };\n      },\n      hacks: [\n        'plugins/monitoring/hacks/phone_home_notifications',\n        'plugins/monitoring/hacks/phone_home_trigger'\n      ]\n    },\n\n    config: function (Joi) {\n      const { array, boolean, number, object, string } = Joi;\n      return object({\n        enabled: boolean().default(true),\n        chart: object({\n          elasticsearch: object({\n            index: object({\n              index_memory: array().items(string().valid(\n                'index_mem_doc_values',\n                'index_mem_fixed_bit_set',\n                'index_mem_norms',\n                'index_mem_points',\n                'index_mem_stored_fields',\n                'index_mem_term_vectors',\n                'index_mem_terms',\n                'index_mem_versions',\n                'index_mem_writer',\n                'index_mem_fielddata',\n                'index_mem_query_cache',\n                'index_mem_request_cache'\n              )).max(3).unique().single().default([\n                'index_mem_terms',\n                'index_mem_points'\n              ])\n            }).default(),\n            node: object({\n              index_memory: array().items(string().valid(\n                'node_index_mem_doc_values',\n                'node_index_mem_fixed_bit_set',\n                'node_index_mem_norms',\n                'node_index_mem_points',\n                'node_index_mem_stored_fields',\n                'node_index_mem_term_vectors',\n                'node_index_mem_terms',\n                'node_index_mem_versions',\n                'node_index_mem_writer',\n                'node_index_mem_fielddata',\n                'node_index_mem_query_cache',\n                'node_index_mem_request_cache'\n              )).max(3).unique().single().default([\n                'node_index_mem_terms',\n                'node_index_mem_points'\n              ])\n            }).default()\n          }).default()\n        }).default(),\n        loggingTag: string().default('monitoring-ui'),\n        index: string().default('.monitoring-data-2'),\n        kibana: object({\n          index_pattern: string().default('.monitoring-kibana-2-*'),\n          collection: object({\n            enabled: boolean().default(true),\n            interval: number().default(10000)\n          }).default()\n        }).default(),\n        missing_intervals: number().default(12),\n        max_bucket_size: number().default(10000),\n        min_interval_seconds: number().default(10),\n        show_license_expiration: boolean().default(true),\n        report_stats: boolean().default(true),\n        node_resolver: string().regex(/^(?:transport_address|name|uuid)$/).default('uuid'),\n        stats_report_url: Joi.when('$dev', {\n          is: true,\n          then: string().default('../api/monitoring/v1/phone-home'),\n          otherwise: string().default('https://marvel-stats.elasticsearch.com/appdata/marvelOpts')\n        }),\n        agent: object({\n          interval: string().regex(/[\\d\\.]+[yMwdhms]/).default('10s')\n        }).default(),\n        elasticsearch: object({\n          customHeaders: object().default({}),\n          index_pattern: string().default('.monitoring-es-2-*'),\n          logQueries: boolean().default(false),\n          url: string().uri({ scheme: ['http', 'https'] }), // if empty, use Kibana's connection config\n          username: string(),\n          password: string(),\n          requestTimeout: number().default(30000),\n          pingTimeout: number().default(30000),\n          ssl: object({\n            verify: boolean().default(true),\n            ca: array().single().items(string()),\n            cert: string(),\n            key: string()\n          }).default(),\n          apiVersion: string().default('master'),\n          engineVersion: string().valid('^5.0.0').default('^5.0.0')\n        }).default()\n      }).default();\n    },\n\n    init: function (server, _options) {\n      const xpackMainPlugin = server.plugins.xpack_main;\n      return xpackMainPlugin.status.once('green', () => {\n        return Promise.all([\n          instantiateClient(server, elasticsearch), // Instantiate the dedicated ES client. Dependency injection for ES for test mocking\n          requireAllAndApply(join(__dirname, 'server', 'routes', '**', '*.js'), server), // Require all the routes\n          initKibanaMonitoring(this.kbnServer, server), // send kibana server ops to the monitoring bulk api\n          esHealthCheck(this, server).start() // Make sure the Monitoring index is created and ready\n        ]);\n      });\n    }\n  });\n};\n"
      ]
    },
    "mtime": 1485775588029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/lib/es_client/health_check.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "bluebird",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Promise"
              }
            ]
          },
          {
            "source": "elasticsearch",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "elasticsearch"
              }
            ]
          },
          {
            "source": "./check_es_version",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "checkEsVersion"
              }
            ]
          },
          {
            "source": "./kibana_version",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "kibanaVersion"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "esHealthCheck",
            "plugin",
            "server"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "esHealthCheck",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "plugin",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "server",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = esHealthCheck;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _bluebird = require('bluebird');\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _elasticsearch = require('elasticsearch');\n\nvar _elasticsearch2 = _interopRequireDefault(_elasticsearch);\n\nvar _check_es_version = require('./check_es_version');\n\nvar _check_es_version2 = _interopRequireDefault(_check_es_version);\n\nvar _kibana_version = require('./kibana_version');\n\nvar _kibana_version2 = _interopRequireDefault(_kibana_version);\n\nvar NoConnections = _elasticsearch2['default'].errors.NoConnections;\nvar REQUEST_DELAY = 2500;\nvar NO_INDEX = 'no_index';\nvar INITIALIZING = 'initializing';\nvar READY = 'ready';\n\nfunction esHealthCheck(plugin, server) {\n  var client = server.plugins.monitoring.client;\n  var config = server.config();\n  function getHealth() {\n    return client.cluster.health({\n      timeout: '5s',\n      index: config.get('xpack.monitoring.index'),\n      ignore: [408]\n    }).then(function (resp) {\n      // if \"timed_out\" === true then elasticsearch could not\n      // find any idices matching our filter within 5 seconds\n      if (!resp || resp.timed_out) {\n        return NO_INDEX;\n      }\n\n      // \"red\" status means shards are not ready for queries\n      if (resp.status === 'red') {\n        return INITIALIZING;\n      }\n\n      return READY;\n    });\n  }\n\n  function waitForPong() {\n    return client.ping()['catch'](function (err) {\n      if (!(err instanceof NoConnections)) throw err;\n      plugin.status.red('Unable to connect to Elasticsearch at ' + config.get('xpack.monitoring.elasticsearch.url') + '.');\n      return _bluebird2['default'].delay(REQUEST_DELAY).then(waitForPong);\n    });\n  }\n\n  function waitForShards() {\n    return getHealth().then(function (health) {\n      if (health === NO_INDEX) {\n        // UI will show a \"waiting for data\" screen\n      }\n      if (health === INITIALIZING) {\n        plugin.status.red('Elasticsearch is still initializing the Monitoring indices');\n        return _bluebird2['default'].delay(REQUEST_DELAY).then(waitForShards);\n      }\n      // otherwise we are g2g\n      plugin.status.green('Ready');\n    });\n  }\n\n  var timeoutId = null;\n\n  function check() {\n    return waitForPong().then(function () {\n      return (0, _check_es_version2['default'])(server, _kibana_version2['default'].get());\n    }).then(waitForShards)['catch'](function (err) {\n      return plugin.status.red(err);\n    });\n  }\n\n  function scheduleCheck(ms) {\n    if (timeoutId) return;\n    var myId = setTimeout(function () {\n      check()['finally'](function () {\n        if (timeoutId === myId) startOrRestartChecking();\n      });\n    }, ms);\n    timeoutId = myId;\n  }\n\n  function stopChecking() {\n    if (!timeoutId) return false;\n    clearTimeout(timeoutId);\n    timeoutId = null;\n    return true;\n  }\n\n  function startOrRestartChecking() {\n    scheduleCheck(stopChecking() ? REQUEST_DELAY : 1);\n  }\n\n  return {\n    start: function start() {\n      plugin.status.yellow('Waiting for Monitoring Health Check');\n      startOrRestartChecking();\n    }\n  };\n}\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL21vbml0b3Jpbmcvc2VydmVyL2xpYi9lc19jbGllbnQvaGVhbHRoX2NoZWNrLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O3FCQVd3QixhQUFhOzs7O3dCQVhqQixVQUFVOzs7OzZCQUNKLGVBQWU7Ozs7Z0NBQ2Qsb0JBQW9COzs7OzhCQUNyQixrQkFBa0I7Ozs7QUFFNUMsSUFBTSxhQUFhLEdBQUcsMkJBQWMsTUFBTSxDQUFDLGFBQWEsQ0FBQztBQUN6RCxJQUFNLGFBQWEsR0FBRyxJQUFJLENBQUM7QUFDM0IsSUFBTSxRQUFRLEdBQUcsVUFBVSxDQUFDO0FBQzVCLElBQU0sWUFBWSxHQUFHLGNBQWMsQ0FBQztBQUNwQyxJQUFNLEtBQUssR0FBRyxPQUFPLENBQUM7O0FBRVAsU0FBUyxhQUFhLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRTtBQUNwRCxNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxNQUFNLENBQUM7QUFDaEQsTUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQy9CLFdBQVMsU0FBUyxHQUFHO0FBQ25CLFdBQU8sTUFBTSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUM7QUFDM0IsYUFBTyxFQUFFLElBQUk7QUFDYixXQUFLLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyx3QkFBd0IsQ0FBQztBQUMzQyxZQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUM7S0FDZCxDQUFDLENBQ0QsSUFBSSxDQUFDLFVBQUEsSUFBSSxFQUFJOzs7QUFHWixVQUFJLENBQUMsSUFBSSxJQUFJLElBQUksQ0FBQyxTQUFTLEVBQUU7QUFDM0IsZUFBTyxRQUFRLENBQUM7T0FDakI7OztBQUdELFVBQUksSUFBSSxDQUFDLE1BQU0sS0FBSyxLQUFLLEVBQUU7QUFDekIsZUFBTyxZQUFZLENBQUM7T0FDckI7O0FBRUQsYUFBTyxLQUFLLENBQUM7S0FDZCxDQUFDLENBQUM7R0FDSjs7QUFFRCxXQUFTLFdBQVcsR0FBRztBQUNyQixXQUFPLE1BQU0sQ0FBQyxJQUFJLEVBQUUsU0FDZCxDQUFDLFVBQUEsR0FBRyxFQUFJO0FBQ1osVUFBSSxFQUFFLEdBQUcsWUFBWSxhQUFhLENBQUEsQUFBQyxFQUFFLE1BQU0sR0FBRyxDQUFDO0FBQy9DLFlBQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyw0Q0FBMEMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxvQ0FBb0MsQ0FBQyxPQUFJLENBQUM7QUFDaEgsYUFBTyxzQkFBUSxLQUFLLENBQUMsYUFBYSxDQUFDLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxDQUFDO0tBQ3ZELENBQUMsQ0FBQztHQUNKOztBQUVELFdBQVMsYUFBYSxHQUFHO0FBQ3ZCLFdBQU8sU0FBUyxFQUFFLENBQ2pCLElBQUksQ0FBQyxVQUFBLE1BQU0sRUFBSTtBQUNkLFVBQUksTUFBTSxLQUFLLFFBQVEsRUFBRTs7T0FFeEI7QUFDRCxVQUFJLE1BQU0sS0FBSyxZQUFZLEVBQUU7QUFDM0IsY0FBTSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsNERBQTRELENBQUMsQ0FBQztBQUNoRixlQUFPLHNCQUFRLEtBQUssQ0FBQyxhQUFhLENBQUMsQ0FDbEMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO09BQ3RCOztBQUVELFlBQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0tBQzlCLENBQUMsQ0FBQztHQUNKOztBQUVELE1BQUksU0FBUyxHQUFHLElBQUksQ0FBQzs7QUFFckIsV0FBUyxLQUFLLEdBQUc7QUFDZixXQUFPLFdBQVcsRUFBRSxDQUNuQixJQUFJLENBQUM7YUFBTSxtQ0FBZSxNQUFNLEVBQUUsNEJBQWMsR0FBRyxFQUFFLENBQUM7S0FBQSxDQUFDLENBQ3ZELElBQUksQ0FBQyxhQUFhLENBQUMsU0FDZCxDQUFDLFVBQUEsR0FBRzthQUFJLE1BQU0sQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQztLQUFBLENBQUMsQ0FBQztHQUN2Qzs7QUFFRCxXQUFTLGFBQWEsQ0FBQyxFQUFFLEVBQUU7QUFDekIsUUFBSSxTQUFTLEVBQUUsT0FBTztBQUN0QixRQUFNLElBQUksR0FBRyxVQUFVLENBQUMsWUFBTTtBQUM1QixXQUFLLEVBQUUsV0FBUSxDQUFDLFlBQU07QUFDcEIsWUFBSSxTQUFTLEtBQUssSUFBSSxFQUFFLHNCQUFzQixFQUFFLENBQUM7T0FDbEQsQ0FBQyxDQUFDO0tBQ0osRUFBRSxFQUFFLENBQUMsQ0FBQztBQUNQLGFBQVMsR0FBRyxJQUFJLENBQUM7R0FDbEI7O0FBRUQsV0FBUyxZQUFZLEdBQUc7QUFDdEIsUUFBSSxDQUFDLFNBQVMsRUFBRSxPQUFPLEtBQUssQ0FBQztBQUM3QixnQkFBWSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ3hCLGFBQVMsR0FBRyxJQUFJLENBQUM7QUFDakIsV0FBTyxJQUFJLENBQUM7R0FDYjs7QUFFRCxXQUFTLHNCQUFzQixHQUFHO0FBQ2hDLGlCQUFhLENBQUMsWUFBWSxFQUFFLEdBQUcsYUFBYSxHQUFHLENBQUMsQ0FBQyxDQUFDO0dBQ25EOztBQUdELFNBQU87QUFDTCxTQUFLLEVBQUEsaUJBQUc7QUFDTixZQUFNLENBQUMsTUFBTSxDQUFDLE1BQU0sQ0FBQyxxQ0FBcUMsQ0FBQyxDQUFDO0FBQzVELDRCQUFzQixFQUFFLENBQUM7S0FDMUI7R0FDRixDQUFDO0NBQ0g7O0FBQUEsQ0FBQyIsImZpbGUiOiIvaG9tZS91YnVudHUvd29ya3NwYWNlL2tpYmFuYS01LjAuMi1saW51eC14ODZfNjQvcGx1Z2lucy94LXBhY2svcGx1Z2lucy9tb25pdG9yaW5nL3NlcnZlci9saWIvZXNfY2xpZW50L2hlYWx0aF9jaGVjay5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQcm9taXNlIGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCBlbGFzdGljc2VhcmNoIGZyb20gJ2VsYXN0aWNzZWFyY2gnO1xuaW1wb3J0IGNoZWNrRXNWZXJzaW9uIGZyb20gJy4vY2hlY2tfZXNfdmVyc2lvbic7XG5pbXBvcnQga2liYW5hVmVyc2lvbiBmcm9tICcuL2tpYmFuYV92ZXJzaW9uJztcblxuY29uc3QgTm9Db25uZWN0aW9ucyA9IGVsYXN0aWNzZWFyY2guZXJyb3JzLk5vQ29ubmVjdGlvbnM7XG5jb25zdCBSRVFVRVNUX0RFTEFZID0gMjUwMDtcbmNvbnN0IE5PX0lOREVYID0gJ25vX2luZGV4JztcbmNvbnN0IElOSVRJQUxJWklORyA9ICdpbml0aWFsaXppbmcnO1xuY29uc3QgUkVBRFkgPSAncmVhZHknO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBlc0hlYWx0aENoZWNrKHBsdWdpbiwgc2VydmVyKSB7XG4gIGNvbnN0IGNsaWVudCA9IHNlcnZlci5wbHVnaW5zLm1vbml0b3JpbmcuY2xpZW50O1xuICBjb25zdCBjb25maWcgPSBzZXJ2ZXIuY29uZmlnKCk7XG4gIGZ1bmN0aW9uIGdldEhlYWx0aCgpIHtcbiAgICByZXR1cm4gY2xpZW50LmNsdXN0ZXIuaGVhbHRoKHtcbiAgICAgIHRpbWVvdXQ6ICc1cycsXG4gICAgICBpbmRleDogY29uZmlnLmdldCgneHBhY2subW9uaXRvcmluZy5pbmRleCcpLFxuICAgICAgaWdub3JlOiBbNDA4XVxuICAgIH0pXG4gICAgLnRoZW4ocmVzcCA9PiB7XG4gICAgICAvLyBpZiBcInRpbWVkX291dFwiID09PSB0cnVlIHRoZW4gZWxhc3RpY3NlYXJjaCBjb3VsZCBub3RcbiAgICAgIC8vIGZpbmQgYW55IGlkaWNlcyBtYXRjaGluZyBvdXIgZmlsdGVyIHdpdGhpbiA1IHNlY29uZHNcbiAgICAgIGlmICghcmVzcCB8fCByZXNwLnRpbWVkX291dCkge1xuICAgICAgICByZXR1cm4gTk9fSU5ERVg7XG4gICAgICB9XG5cbiAgICAgIC8vIFwicmVkXCIgc3RhdHVzIG1lYW5zIHNoYXJkcyBhcmUgbm90IHJlYWR5IGZvciBxdWVyaWVzXG4gICAgICBpZiAocmVzcC5zdGF0dXMgPT09ICdyZWQnKSB7XG4gICAgICAgIHJldHVybiBJTklUSUFMSVpJTkc7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiBSRUFEWTtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHdhaXRGb3JQb25nKCkge1xuICAgIHJldHVybiBjbGllbnQucGluZygpXG4gICAgLmNhdGNoKGVyciA9PiB7XG4gICAgICBpZiAoIShlcnIgaW5zdGFuY2VvZiBOb0Nvbm5lY3Rpb25zKSkgdGhyb3cgZXJyO1xuICAgICAgcGx1Z2luLnN0YXR1cy5yZWQoYFVuYWJsZSB0byBjb25uZWN0IHRvIEVsYXN0aWNzZWFyY2ggYXQgJHtjb25maWcuZ2V0KCd4cGFjay5tb25pdG9yaW5nLmVsYXN0aWNzZWFyY2gudXJsJyl9LmApO1xuICAgICAgcmV0dXJuIFByb21pc2UuZGVsYXkoUkVRVUVTVF9ERUxBWSkudGhlbih3YWl0Rm9yUG9uZyk7XG4gICAgfSk7XG4gIH1cblxuICBmdW5jdGlvbiB3YWl0Rm9yU2hhcmRzKCkge1xuICAgIHJldHVybiBnZXRIZWFsdGgoKVxuICAgIC50aGVuKGhlYWx0aCA9PiB7XG4gICAgICBpZiAoaGVhbHRoID09PSBOT19JTkRFWCkge1xuICAgICAgICAvLyBVSSB3aWxsIHNob3cgYSBcIndhaXRpbmcgZm9yIGRhdGFcIiBzY3JlZW5cbiAgICAgIH1cbiAgICAgIGlmIChoZWFsdGggPT09IElOSVRJQUxJWklORykge1xuICAgICAgICBwbHVnaW4uc3RhdHVzLnJlZCgnRWxhc3RpY3NlYXJjaCBpcyBzdGlsbCBpbml0aWFsaXppbmcgdGhlIE1vbml0b3JpbmcgaW5kaWNlcycpO1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5kZWxheShSRVFVRVNUX0RFTEFZKVxuICAgICAgICAudGhlbih3YWl0Rm9yU2hhcmRzKTtcbiAgICAgIH1cbiAgICAgIC8vIG90aGVyd2lzZSB3ZSBhcmUgZzJnXG4gICAgICBwbHVnaW4uc3RhdHVzLmdyZWVuKCdSZWFkeScpO1xuICAgIH0pO1xuICB9XG5cbiAgbGV0IHRpbWVvdXRJZCA9IG51bGw7XG5cbiAgZnVuY3Rpb24gY2hlY2soKSB7XG4gICAgcmV0dXJuIHdhaXRGb3JQb25nKClcbiAgICAudGhlbigoKSA9PiBjaGVja0VzVmVyc2lvbihzZXJ2ZXIsIGtpYmFuYVZlcnNpb24uZ2V0KCkpKVxuICAgIC50aGVuKHdhaXRGb3JTaGFyZHMpXG4gICAgLmNhdGNoKGVyciA9PiBwbHVnaW4uc3RhdHVzLnJlZChlcnIpKTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHNjaGVkdWxlQ2hlY2sobXMpIHtcbiAgICBpZiAodGltZW91dElkKSByZXR1cm47XG4gICAgY29uc3QgbXlJZCA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgY2hlY2soKS5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgaWYgKHRpbWVvdXRJZCA9PT0gbXlJZCkgc3RhcnRPclJlc3RhcnRDaGVja2luZygpO1xuICAgICAgfSk7XG4gICAgfSwgbXMpO1xuICAgIHRpbWVvdXRJZCA9IG15SWQ7XG4gIH1cblxuICBmdW5jdGlvbiBzdG9wQ2hlY2tpbmcoKSB7XG4gICAgaWYgKCF0aW1lb3V0SWQpIHJldHVybiBmYWxzZTtcbiAgICBjbGVhclRpbWVvdXQodGltZW91dElkKTtcbiAgICB0aW1lb3V0SWQgPSBudWxsO1xuICAgIHJldHVybiB0cnVlO1xuICB9XG5cbiAgZnVuY3Rpb24gc3RhcnRPclJlc3RhcnRDaGVja2luZygpIHtcbiAgICBzY2hlZHVsZUNoZWNrKHN0b3BDaGVja2luZygpID8gUkVRVUVTVF9ERUxBWSA6IDEpO1xuICB9XG5cblxuICByZXR1cm4ge1xuICAgIHN0YXJ0KCkge1xuICAgICAgcGx1Z2luLnN0YXR1cy55ZWxsb3coJ1dhaXRpbmcgZm9yIE1vbml0b3JpbmcgSGVhbHRoIENoZWNrJyk7XG4gICAgICBzdGFydE9yUmVzdGFydENoZWNraW5nKCk7XG4gICAgfVxuICB9O1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/lib/es_client/health_check.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/lib/es_client/health_check.js",
      "sourcesContent": [
        "import Promise from 'bluebird';\nimport elasticsearch from 'elasticsearch';\nimport checkEsVersion from './check_es_version';\nimport kibanaVersion from './kibana_version';\n\nconst NoConnections = elasticsearch.errors.NoConnections;\nconst REQUEST_DELAY = 2500;\nconst NO_INDEX = 'no_index';\nconst INITIALIZING = 'initializing';\nconst READY = 'ready';\n\nexport default function esHealthCheck(plugin, server) {\n  const client = server.plugins.monitoring.client;\n  const config = server.config();\n  function getHealth() {\n    return client.cluster.health({\n      timeout: '5s',\n      index: config.get('xpack.monitoring.index'),\n      ignore: [408]\n    })\n    .then(resp => {\n      // if \"timed_out\" === true then elasticsearch could not\n      // find any idices matching our filter within 5 seconds\n      if (!resp || resp.timed_out) {\n        return NO_INDEX;\n      }\n\n      // \"red\" status means shards are not ready for queries\n      if (resp.status === 'red') {\n        return INITIALIZING;\n      }\n\n      return READY;\n    });\n  }\n\n  function waitForPong() {\n    return client.ping()\n    .catch(err => {\n      if (!(err instanceof NoConnections)) throw err;\n      plugin.status.red(`Unable to connect to Elasticsearch at ${config.get('xpack.monitoring.elasticsearch.url')}.`);\n      return Promise.delay(REQUEST_DELAY).then(waitForPong);\n    });\n  }\n\n  function waitForShards() {\n    return getHealth()\n    .then(health => {\n      if (health === NO_INDEX) {\n        // UI will show a \"waiting for data\" screen\n      }\n      if (health === INITIALIZING) {\n        plugin.status.red('Elasticsearch is still initializing the Monitoring indices');\n        return Promise.delay(REQUEST_DELAY)\n        .then(waitForShards);\n      }\n      // otherwise we are g2g\n      plugin.status.green('Ready');\n    });\n  }\n\n  let timeoutId = null;\n\n  function check() {\n    return waitForPong()\n    .then(() => checkEsVersion(server, kibanaVersion.get()))\n    .then(waitForShards)\n    .catch(err => plugin.status.red(err));\n  }\n\n  function scheduleCheck(ms) {\n    if (timeoutId) return;\n    const myId = setTimeout(() => {\n      check().finally(() => {\n        if (timeoutId === myId) startOrRestartChecking();\n      });\n    }, ms);\n    timeoutId = myId;\n  }\n\n  function stopChecking() {\n    if (!timeoutId) return false;\n    clearTimeout(timeoutId);\n    timeoutId = null;\n    return true;\n  }\n\n  function startOrRestartChecking() {\n    scheduleCheck(stopChecking() ? REQUEST_DELAY : 1);\n  }\n\n\n  return {\n    start() {\n      plugin.status.yellow('Waiting for Monitoring Health Check');\n      startOrRestartChecking();\n    }\n  };\n};\n"
      ]
    },
    "mtime": 1485775624445
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/lib/es_client/check_es_version.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./is_es_compatible_with_kibana",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "isEsCompatibleWithKibana"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "/**\n * ES and Kibana versions are locked, so Kibana should require that ES has the same version as\n * that defined in Kibana's package.json.\n */\n\n'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _is_es_compatible_with_kibana = require('./is_es_compatible_with_kibana');\n\nvar _is_es_compatible_with_kibana2 = _interopRequireDefault(_is_es_compatible_with_kibana);\n\n/**\n *  tracks the node descriptions that get logged in warnings so\n *  that we don't spam the log with the same message over and over.\n *\n *  There are situations, like in testing or multi-tenancy, where\n *  the server argument changes, so we must track the previous\n *  node warnings per server\n */\nvar lastWarnedNodesForServer = new WeakMap();\n\nmodule.exports = function checkEsVersion(server, kibanaVersion) {\n  server.log(['plugin', 'debug'], 'Checking Elasticsearch version');\n\n  var client = server.plugins.elasticsearch.client;\n\n  return client.nodes.info().then(function (info) {\n    // Aggregate incompatible ES nodes.\n    var incompatibleNodes = [];\n\n    // Aggregate ES nodes which should prompt a Kibana upgrade.\n    var warningNodes = [];\n\n    _lodash2['default'].forEach(info.nodes, function (esNode) {\n      if (!(0, _is_es_compatible_with_kibana2['default'])(esNode.version, kibanaVersion)) {\n        // Exit early to avoid collecting ES nodes with newer major versions in the `warningNodes`.\n        return incompatibleNodes.push(esNode);\n      }\n\n      // It's acceptable if ES and Kibana versions are not the same so long as\n      // they are not incompatible, but we should warn about it\n      if (esNode.version !== kibanaVersion) {\n        warningNodes.push(esNode);\n      }\n    });\n\n    function getHumanizedNodeNames(nodes) {\n      return nodes.map(function (node) {\n        return 'v' + node.version + ' @ ' + node.http.publish_address + ' (' + node.ip + ')';\n      });\n    }\n\n    if (warningNodes.length) {\n      var simplifiedNodes = warningNodes.map(function (node) {\n        return {\n          version: node.version,\n          http: {\n            publish_address: node.http.publish_address\n          },\n          ip: node.ip\n        };\n      });\n\n      // Don't show the same warning over and over again.\n      var warningNodeNames = getHumanizedNodeNames(simplifiedNodes).join(', ');\n      if (lastWarnedNodesForServer.get(server) !== warningNodeNames) {\n        lastWarnedNodesForServer.set(server, warningNodeNames);\n        server.log(['warning'], {\n          tmpl: 'You\\'re running Kibana ' + kibanaVersion + ' with some different versions of ' + 'Elasticsearch on a monitoring cluster. Update Kibana and Elasticsearch to the same version to prevent compatibility issues: ' + warningNodeNames,\n          kibanaVersion: kibanaVersion,\n          nodes: simplifiedNodes\n        });\n      }\n    }\n\n    if (incompatibleNodes.length) {\n      var incompatibleNodeNames = getHumanizedNodeNames(incompatibleNodes);\n      throw new Error('This version of Kibana requires Elasticsearch v' + (kibanaVersion + ' on all nodes of the monitoring cluster. I found ') + ('the following incompatible nodes in your cluster: ' + incompatibleNodeNames.join(',')));\n    }\n\n    return true;\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL21vbml0b3Jpbmcvc2VydmVyL2xpYi9lc19jbGllbnQvY2hlY2tfZXNfdmVyc2lvbi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7c0JBS2MsUUFBUTs7Ozs0Q0FDZSxnQ0FBZ0M7Ozs7Ozs7Ozs7OztBQVVyRSxJQUFNLHdCQUF3QixHQUFHLElBQUksT0FBTyxFQUFFLENBQUM7O0FBRS9DLE1BQU0sQ0FBQyxPQUFPLEdBQUcsU0FBUyxjQUFjLENBQUMsTUFBTSxFQUFFLGFBQWEsRUFBRTtBQUM5RCxRQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQyxFQUFFLGdDQUFnQyxDQUFDLENBQUM7O0FBRWxFLE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQzs7QUFFbkQsU0FBTyxNQUFNLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxDQUN6QixJQUFJLENBQUMsVUFBVSxJQUFJLEVBQUU7O0FBRXBCLFFBQU0saUJBQWlCLEdBQUcsRUFBRSxDQUFDOzs7QUFHN0IsUUFBTSxZQUFZLEdBQUcsRUFBRSxDQUFDOztBQUV4Qix3QkFBRSxPQUFPLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxVQUFBLE1BQU0sRUFBSTtBQUM5QixVQUFJLENBQUMsK0NBQXlCLE1BQU0sQ0FBQyxPQUFPLEVBQUUsYUFBYSxDQUFDLEVBQUU7O0FBRTVELGVBQU8saUJBQWlCLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFDO09BQ3ZDOzs7O0FBSUQsVUFBSSxNQUFNLENBQUMsT0FBTyxLQUFLLGFBQWEsRUFBRTtBQUNwQyxvQkFBWSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztPQUMzQjtLQUNGLENBQUMsQ0FBQzs7QUFFSCxhQUFTLHFCQUFxQixDQUFDLEtBQUssRUFBRTtBQUNwQyxhQUFPLEtBQUssQ0FBQyxHQUFHLENBQUMsVUFBQSxJQUFJLEVBQUk7QUFDdkIsZUFBTyxHQUFHLEdBQUcsSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxlQUFlLEdBQUcsSUFBSSxHQUFHLElBQUksQ0FBQyxFQUFFLEdBQUcsR0FBRyxDQUFDO09BQ3RGLENBQUMsQ0FBQztLQUNKOztBQUVELFFBQUksWUFBWSxDQUFDLE1BQU0sRUFBRTtBQUN2QixVQUFNLGVBQWUsR0FBRyxZQUFZLENBQUMsR0FBRyxDQUFDLFVBQUEsSUFBSTtlQUFLO0FBQ2hELGlCQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU87QUFDckIsY0FBSSxFQUFFO0FBQ0osMkJBQWUsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLGVBQWU7V0FDM0M7QUFDRCxZQUFFLEVBQUUsSUFBSSxDQUFDLEVBQUU7U0FDWjtPQUFDLENBQUMsQ0FBQzs7O0FBR0osVUFBTSxnQkFBZ0IsR0FBRyxxQkFBcUIsQ0FBQyxlQUFlLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDM0UsVUFBSSx3QkFBd0IsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEtBQUssZ0JBQWdCLEVBQUU7QUFDN0QsZ0NBQXdCLENBQUMsR0FBRyxDQUFDLE1BQU0sRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDO0FBQ3ZELGNBQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxTQUFTLENBQUMsRUFBRTtBQUN0QixjQUFJLEVBQ0YsNEJBQXlCLGFBQWEseUNBQ3RDLDhIQUE4SCxHQUM5SCxnQkFBZ0IsQUFDakI7QUFDRCx1QkFBYSxFQUFiLGFBQWE7QUFDYixlQUFLLEVBQUUsZUFBZTtTQUN2QixDQUFDLENBQUM7T0FDSjtLQUNGOztBQUVELFFBQUksaUJBQWlCLENBQUMsTUFBTSxFQUFFO0FBQzVCLFVBQU0scUJBQXFCLEdBQUcscUJBQXFCLENBQUMsaUJBQWlCLENBQUMsQ0FBQztBQUN2RSxZQUFNLElBQUksS0FBSyxDQUNiLHFEQUNHLGFBQWEsdURBQW1ELDJEQUNkLHFCQUFxQixDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBRSxDQUN2RixDQUFDO0tBQ0g7O0FBRUQsV0FBTyxJQUFJLENBQUM7R0FDYixDQUFDLENBQUM7Q0FDSixDQUFDIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL21vbml0b3Jpbmcvc2VydmVyL2xpYi9lc19jbGllbnQvY2hlY2tfZXNfdmVyc2lvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogRVMgYW5kIEtpYmFuYSB2ZXJzaW9ucyBhcmUgbG9ja2VkLCBzbyBLaWJhbmEgc2hvdWxkIHJlcXVpcmUgdGhhdCBFUyBoYXMgdGhlIHNhbWUgdmVyc2lvbiBhc1xuICogdGhhdCBkZWZpbmVkIGluIEtpYmFuYSdzIHBhY2thZ2UuanNvbi5cbiAqL1xuXG5pbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IGlzRXNDb21wYXRpYmxlV2l0aEtpYmFuYSBmcm9tICcuL2lzX2VzX2NvbXBhdGlibGVfd2l0aF9raWJhbmEnO1xuXG4vKipcbiAqICB0cmFja3MgdGhlIG5vZGUgZGVzY3JpcHRpb25zIHRoYXQgZ2V0IGxvZ2dlZCBpbiB3YXJuaW5ncyBzb1xuICogIHRoYXQgd2UgZG9uJ3Qgc3BhbSB0aGUgbG9nIHdpdGggdGhlIHNhbWUgbWVzc2FnZSBvdmVyIGFuZCBvdmVyLlxuICpcbiAqICBUaGVyZSBhcmUgc2l0dWF0aW9ucywgbGlrZSBpbiB0ZXN0aW5nIG9yIG11bHRpLXRlbmFuY3ksIHdoZXJlXG4gKiAgdGhlIHNlcnZlciBhcmd1bWVudCBjaGFuZ2VzLCBzbyB3ZSBtdXN0IHRyYWNrIHRoZSBwcmV2aW91c1xuICogIG5vZGUgd2FybmluZ3MgcGVyIHNlcnZlclxuICovXG5jb25zdCBsYXN0V2FybmVkTm9kZXNGb3JTZXJ2ZXIgPSBuZXcgV2Vha01hcCgpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIGNoZWNrRXNWZXJzaW9uKHNlcnZlciwga2liYW5hVmVyc2lvbikge1xuICBzZXJ2ZXIubG9nKFsncGx1Z2luJywgJ2RlYnVnJ10sICdDaGVja2luZyBFbGFzdGljc2VhcmNoIHZlcnNpb24nKTtcblxuICBjb25zdCBjbGllbnQgPSBzZXJ2ZXIucGx1Z2lucy5lbGFzdGljc2VhcmNoLmNsaWVudDtcblxuICByZXR1cm4gY2xpZW50Lm5vZGVzLmluZm8oKVxuICAudGhlbihmdW5jdGlvbiAoaW5mbykge1xuICAgIC8vIEFnZ3JlZ2F0ZSBpbmNvbXBhdGlibGUgRVMgbm9kZXMuXG4gICAgY29uc3QgaW5jb21wYXRpYmxlTm9kZXMgPSBbXTtcblxuICAgIC8vIEFnZ3JlZ2F0ZSBFUyBub2RlcyB3aGljaCBzaG91bGQgcHJvbXB0IGEgS2liYW5hIHVwZ3JhZGUuXG4gICAgY29uc3Qgd2FybmluZ05vZGVzID0gW107XG5cbiAgICBfLmZvckVhY2goaW5mby5ub2RlcywgZXNOb2RlID0+IHtcbiAgICAgIGlmICghaXNFc0NvbXBhdGlibGVXaXRoS2liYW5hKGVzTm9kZS52ZXJzaW9uLCBraWJhbmFWZXJzaW9uKSkge1xuICAgICAgICAvLyBFeGl0IGVhcmx5IHRvIGF2b2lkIGNvbGxlY3RpbmcgRVMgbm9kZXMgd2l0aCBuZXdlciBtYWpvciB2ZXJzaW9ucyBpbiB0aGUgYHdhcm5pbmdOb2Rlc2AuXG4gICAgICAgIHJldHVybiBpbmNvbXBhdGlibGVOb2Rlcy5wdXNoKGVzTm9kZSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEl0J3MgYWNjZXB0YWJsZSBpZiBFUyBhbmQgS2liYW5hIHZlcnNpb25zIGFyZSBub3QgdGhlIHNhbWUgc28gbG9uZyBhc1xuICAgICAgLy8gdGhleSBhcmUgbm90IGluY29tcGF0aWJsZSwgYnV0IHdlIHNob3VsZCB3YXJuIGFib3V0IGl0XG4gICAgICBpZiAoZXNOb2RlLnZlcnNpb24gIT09IGtpYmFuYVZlcnNpb24pIHtcbiAgICAgICAgd2FybmluZ05vZGVzLnB1c2goZXNOb2RlKTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIGdldEh1bWFuaXplZE5vZGVOYW1lcyhub2Rlcykge1xuICAgICAgcmV0dXJuIG5vZGVzLm1hcChub2RlID0+IHtcbiAgICAgICAgcmV0dXJuICd2JyArIG5vZGUudmVyc2lvbiArICcgQCAnICsgbm9kZS5odHRwLnB1Ymxpc2hfYWRkcmVzcyArICcgKCcgKyBub2RlLmlwICsgJyknO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKHdhcm5pbmdOb2Rlcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IHNpbXBsaWZpZWROb2RlcyA9IHdhcm5pbmdOb2Rlcy5tYXAobm9kZSA9PiAoe1xuICAgICAgICB2ZXJzaW9uOiBub2RlLnZlcnNpb24sXG4gICAgICAgIGh0dHA6IHtcbiAgICAgICAgICBwdWJsaXNoX2FkZHJlc3M6IG5vZGUuaHR0cC5wdWJsaXNoX2FkZHJlc3MsXG4gICAgICAgIH0sXG4gICAgICAgIGlwOiBub2RlLmlwLFxuICAgICAgfSkpO1xuXG4gICAgICAvLyBEb24ndCBzaG93IHRoZSBzYW1lIHdhcm5pbmcgb3ZlciBhbmQgb3ZlciBhZ2Fpbi5cbiAgICAgIGNvbnN0IHdhcm5pbmdOb2RlTmFtZXMgPSBnZXRIdW1hbml6ZWROb2RlTmFtZXMoc2ltcGxpZmllZE5vZGVzKS5qb2luKCcsICcpO1xuICAgICAgaWYgKGxhc3RXYXJuZWROb2Rlc0ZvclNlcnZlci5nZXQoc2VydmVyKSAhPT0gd2FybmluZ05vZGVOYW1lcykge1xuICAgICAgICBsYXN0V2FybmVkTm9kZXNGb3JTZXJ2ZXIuc2V0KHNlcnZlciwgd2FybmluZ05vZGVOYW1lcyk7XG4gICAgICAgIHNlcnZlci5sb2coWyd3YXJuaW5nJ10sIHtcbiAgICAgICAgICB0bXBsOiAoXG4gICAgICAgICAgICBgWW91J3JlIHJ1bm5pbmcgS2liYW5hICR7a2liYW5hVmVyc2lvbn0gd2l0aCBzb21lIGRpZmZlcmVudCB2ZXJzaW9ucyBvZiBgICtcbiAgICAgICAgICAgICdFbGFzdGljc2VhcmNoIG9uIGEgbW9uaXRvcmluZyBjbHVzdGVyLiBVcGRhdGUgS2liYW5hIGFuZCBFbGFzdGljc2VhcmNoIHRvIHRoZSBzYW1lIHZlcnNpb24gdG8gcHJldmVudCBjb21wYXRpYmlsaXR5IGlzc3VlczogJyArXG4gICAgICAgICAgICB3YXJuaW5nTm9kZU5hbWVzXG4gICAgICAgICAgKSxcbiAgICAgICAgICBraWJhbmFWZXJzaW9uLFxuICAgICAgICAgIG5vZGVzOiBzaW1wbGlmaWVkTm9kZXMsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpbmNvbXBhdGlibGVOb2Rlcy5sZW5ndGgpIHtcbiAgICAgIGNvbnN0IGluY29tcGF0aWJsZU5vZGVOYW1lcyA9IGdldEh1bWFuaXplZE5vZGVOYW1lcyhpbmNvbXBhdGlibGVOb2Rlcyk7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgIGBUaGlzIHZlcnNpb24gb2YgS2liYW5hIHJlcXVpcmVzIEVsYXN0aWNzZWFyY2ggdmAgK1xuICAgICAgICBgJHtraWJhbmFWZXJzaW9ufSBvbiBhbGwgbm9kZXMgb2YgdGhlIG1vbml0b3JpbmcgY2x1c3Rlci4gSSBmb3VuZCBgICtcbiAgICAgICAgYHRoZSBmb2xsb3dpbmcgaW5jb21wYXRpYmxlIG5vZGVzIGluIHlvdXIgY2x1c3RlcjogJHtpbmNvbXBhdGlibGVOb2RlTmFtZXMuam9pbignLCcpfWBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRydWU7XG4gIH0pO1xufTtcblxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/lib/es_client/check_es_version.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;sBAKc,QAAQ;;;;4CACe,gCAAgC;;;;;;;;;;;;AAUrE,IAAM,wBAAwB,GAAG,IAAI,OAAO,EAAE,CAAC;;AAE/C,MAAM,CAAC,OAAO,GAAG,SAAS,cAAc,CAAC,MAAM,EAAE,aAAa,EAAE;AAC9D,QAAM,CAAC,GAAG,CAAC,CAAC,QAAQ,EAAE,OAAO,CAAC,EAAE,gCAAgC,CAAC,CAAC;;AAElE,MAAM,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC;;AAEnD,SAAO,MAAM,CAAC,KAAK,CAAC,IAAI,EAAE,CACzB,IAAI,CAAC,UAAU,IAAI,EAAE;;AAEpB,QAAM,iBAAiB,GAAG,EAAE,CAAC;;;AAG7B,QAAM,YAAY,GAAG,EAAE,CAAC;;AAExB,wBAAE,OAAO,CAAC,IAAI,CAAC,KAAK,EAAE,UAAA,MAAM,EAAI;AAC9B,UAAI,CAAC,+CAAyB,MAAM,CAAC,OAAO,EAAE,aAAa,CAAC,EAAE;;AAE5D,eAAO,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;OACvC;;;;AAID,UAAI,MAAM,CAAC,OAAO,KAAK,aAAa,EAAE;AACpC,oBAAY,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;OAC3B;KACF,CAAC,CAAC;;AAEH,aAAS,qBAAqB,CAAC,KAAK,EAAE;AACpC,aAAO,KAAK,CAAC,GAAG,CAAC,UAAA,IAAI,EAAI;AACvB,eAAO,GAAG,GAAG,IAAI,CAAC,OAAO,GAAG,KAAK,GAAG,IAAI,CAAC,IAAI,CAAC,eAAe,GAAG,IAAI,GAAG,IAAI,CAAC,EAAE,GAAG,GAAG,CAAC;OACtF,CAAC,CAAC;KACJ;;AAED,QAAI,YAAY,CAAC,MAAM,EAAE;AACvB,UAAM,eAAe,GAAG,YAAY,CAAC,GAAG,CAAC,UAAA,IAAI;eAAK;AAChD,iBAAO,EAAE,IAAI,CAAC,OAAO;AACrB,cAAI,EAAE;AACJ,2BAAe,EAAE,IAAI,CAAC,IAAI,CAAC,eAAe;WAC3C;AACD,YAAE,EAAE,IAAI,CAAC,EAAE;SACZ;OAAC,CAAC,CAAC;;;AAGJ,UAAM,gBAAgB,GAAG,qBAAqB,CAAC,eAAe,CAAC,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AAC3E,UAAI,wBAAwB,CAAC,GAAG,CAAC,MAAM,CAAC,KAAK,gBAAgB,EAAE;AAC7D,gCAAwB,CAAC,GAAG,CAAC,MAAM,EAAE,gBAAgB,CAAC,CAAC;AACvD,cAAM,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC,EAAE;AACtB,cAAI,EACF,4BAAyB,aAAa,yCACtC,8HAA8H,GAC9H,gBAAgB,AACjB;AACD,uBAAa,EAAb,aAAa;AACb,eAAK,EAAE,eAAe;SACvB,CAAC,CAAC;OACJ;KACF;;AAED,QAAI,iBAAiB,CAAC,MAAM,EAAE;AAC5B,UAAM,qBAAqB,GAAG,qBAAqB,CAAC,iBAAiB,CAAC,CAAC;AACvE,YAAM,IAAI,KAAK,CACb,qDACG,aAAa,uDAAmD,2DACd,qBAAqB,CAAC,IAAI,CAAC,GAAG,CAAC,CAAE,CACvF,CAAC;KACH;;AAED,WAAO,IAAI,CAAC;GACb,CAAC,CAAC;CACJ,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/lib/es_client/check_es_version.js",
      "sourcesContent": [
        "/**\n * ES and Kibana versions are locked, so Kibana should require that ES has the same version as\n * that defined in Kibana's package.json.\n */\n\nimport _ from 'lodash';\nimport isEsCompatibleWithKibana from './is_es_compatible_with_kibana';\n\n/**\n *  tracks the node descriptions that get logged in warnings so\n *  that we don't spam the log with the same message over and over.\n *\n *  There are situations, like in testing or multi-tenancy, where\n *  the server argument changes, so we must track the previous\n *  node warnings per server\n */\nconst lastWarnedNodesForServer = new WeakMap();\n\nmodule.exports = function checkEsVersion(server, kibanaVersion) {\n  server.log(['plugin', 'debug'], 'Checking Elasticsearch version');\n\n  const client = server.plugins.elasticsearch.client;\n\n  return client.nodes.info()\n  .then(function (info) {\n    // Aggregate incompatible ES nodes.\n    const incompatibleNodes = [];\n\n    // Aggregate ES nodes which should prompt a Kibana upgrade.\n    const warningNodes = [];\n\n    _.forEach(info.nodes, esNode => {\n      if (!isEsCompatibleWithKibana(esNode.version, kibanaVersion)) {\n        // Exit early to avoid collecting ES nodes with newer major versions in the `warningNodes`.\n        return incompatibleNodes.push(esNode);\n      }\n\n      // It's acceptable if ES and Kibana versions are not the same so long as\n      // they are not incompatible, but we should warn about it\n      if (esNode.version !== kibanaVersion) {\n        warningNodes.push(esNode);\n      }\n    });\n\n    function getHumanizedNodeNames(nodes) {\n      return nodes.map(node => {\n        return 'v' + node.version + ' @ ' + node.http.publish_address + ' (' + node.ip + ')';\n      });\n    }\n\n    if (warningNodes.length) {\n      const simplifiedNodes = warningNodes.map(node => ({\n        version: node.version,\n        http: {\n          publish_address: node.http.publish_address,\n        },\n        ip: node.ip,\n      }));\n\n      // Don't show the same warning over and over again.\n      const warningNodeNames = getHumanizedNodeNames(simplifiedNodes).join(', ');\n      if (lastWarnedNodesForServer.get(server) !== warningNodeNames) {\n        lastWarnedNodesForServer.set(server, warningNodeNames);\n        server.log(['warning'], {\n          tmpl: (\n            `You're running Kibana ${kibanaVersion} with some different versions of ` +\n            'Elasticsearch on a monitoring cluster. Update Kibana and Elasticsearch to the same version to prevent compatibility issues: ' +\n            warningNodeNames\n          ),\n          kibanaVersion,\n          nodes: simplifiedNodes,\n        });\n      }\n    }\n\n    if (incompatibleNodes.length) {\n      const incompatibleNodeNames = getHumanizedNodeNames(incompatibleNodes);\n      throw new Error(\n        `This version of Kibana requires Elasticsearch v` +\n        `${kibanaVersion} on all nodes of the monitoring cluster. I found ` +\n        `the following incompatible nodes in your cluster: ${incompatibleNodeNames.join(',')}`\n      );\n    }\n\n    return true;\n  });\n};\n\n"
      ]
    },
    "mtime": 1485775624445
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/lib/es_client/is_es_compatible_with_kibana.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "semver",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "semver"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "isEsCompatibleWithKibana",
            "esVersion",
            "kibanaVersion"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "isEsCompatibleWithKibana",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "esVersion",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "kibanaVersion",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "/**\n * Let's weed out the ES versions that won't work with a given Kibana version.\n * 1. Major version differences will never work together.\n * 2. Older versions of ES won't work with newer versions of Kibana.\n */\n\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = isEsCompatibleWithKibana;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _semver = require('semver');\n\nvar _semver2 = _interopRequireDefault(_semver);\n\nfunction isEsCompatibleWithKibana(esVersion, kibanaVersion) {\n  var esVersionNumbers = {\n    major: _semver2['default'].major(esVersion),\n    minor: _semver2['default'].minor(esVersion),\n    patch: _semver2['default'].patch(esVersion)\n  };\n\n  var kibanaVersionNumbers = {\n    major: _semver2['default'].major(kibanaVersion),\n    minor: _semver2['default'].minor(kibanaVersion),\n    patch: _semver2['default'].patch(kibanaVersion)\n  };\n\n  // Reject mismatching major version numbers.\n  if (esVersionNumbers.major !== kibanaVersionNumbers.major) {\n    return false;\n  }\n\n  // Reject older minor versions of ES.\n  if (esVersionNumbers.minor < kibanaVersionNumbers.minor) {\n    return false;\n  }\n\n  return true;\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL21vbml0b3Jpbmcvc2VydmVyL2xpYi9lc19jbGllbnQvaXNfZXNfY29tcGF0aWJsZV93aXRoX2tpYmFuYS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7OztxQkFRd0Isd0JBQXdCOzs7O3NCQUY3QixRQUFROzs7O0FBRVosU0FBUyx3QkFBd0IsQ0FBQyxTQUFTLEVBQUUsYUFBYSxFQUFFO0FBQ3pFLE1BQU0sZ0JBQWdCLEdBQUc7QUFDdkIsU0FBSyxFQUFFLG9CQUFPLEtBQUssQ0FBQyxTQUFTLENBQUM7QUFDOUIsU0FBSyxFQUFFLG9CQUFPLEtBQUssQ0FBQyxTQUFTLENBQUM7QUFDOUIsU0FBSyxFQUFFLG9CQUFPLEtBQUssQ0FBQyxTQUFTLENBQUM7R0FDL0IsQ0FBQzs7QUFFRixNQUFNLG9CQUFvQixHQUFHO0FBQzNCLFNBQUssRUFBRSxvQkFBTyxLQUFLLENBQUMsYUFBYSxDQUFDO0FBQ2xDLFNBQUssRUFBRSxvQkFBTyxLQUFLLENBQUMsYUFBYSxDQUFDO0FBQ2xDLFNBQUssRUFBRSxvQkFBTyxLQUFLLENBQUMsYUFBYSxDQUFDO0dBQ25DLENBQUM7OztBQUdGLE1BQUksZ0JBQWdCLENBQUMsS0FBSyxLQUFLLG9CQUFvQixDQUFDLEtBQUssRUFBRTtBQUN6RCxXQUFPLEtBQUssQ0FBQztHQUNkOzs7QUFHRCxNQUFJLGdCQUFnQixDQUFDLEtBQUssR0FBRyxvQkFBb0IsQ0FBQyxLQUFLLEVBQUU7QUFDdkQsV0FBTyxLQUFLLENBQUM7R0FDZDs7QUFFRCxTQUFPLElBQUksQ0FBQztDQUNiIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL21vbml0b3Jpbmcvc2VydmVyL2xpYi9lc19jbGllbnQvaXNfZXNfY29tcGF0aWJsZV93aXRoX2tpYmFuYS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogTGV0J3Mgd2VlZCBvdXQgdGhlIEVTIHZlcnNpb25zIHRoYXQgd29uJ3Qgd29yayB3aXRoIGEgZ2l2ZW4gS2liYW5hIHZlcnNpb24uXG4gKiAxLiBNYWpvciB2ZXJzaW9uIGRpZmZlcmVuY2VzIHdpbGwgbmV2ZXIgd29yayB0b2dldGhlci5cbiAqIDIuIE9sZGVyIHZlcnNpb25zIG9mIEVTIHdvbid0IHdvcmsgd2l0aCBuZXdlciB2ZXJzaW9ucyBvZiBLaWJhbmEuXG4gKi9cblxuaW1wb3J0IHNlbXZlciBmcm9tICdzZW12ZXInO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpc0VzQ29tcGF0aWJsZVdpdGhLaWJhbmEoZXNWZXJzaW9uLCBraWJhbmFWZXJzaW9uKSB7XG4gIGNvbnN0IGVzVmVyc2lvbk51bWJlcnMgPSB7XG4gICAgbWFqb3I6IHNlbXZlci5tYWpvcihlc1ZlcnNpb24pLFxuICAgIG1pbm9yOiBzZW12ZXIubWlub3IoZXNWZXJzaW9uKSxcbiAgICBwYXRjaDogc2VtdmVyLnBhdGNoKGVzVmVyc2lvbiksXG4gIH07XG5cbiAgY29uc3Qga2liYW5hVmVyc2lvbk51bWJlcnMgPSB7XG4gICAgbWFqb3I6IHNlbXZlci5tYWpvcihraWJhbmFWZXJzaW9uKSxcbiAgICBtaW5vcjogc2VtdmVyLm1pbm9yKGtpYmFuYVZlcnNpb24pLFxuICAgIHBhdGNoOiBzZW12ZXIucGF0Y2goa2liYW5hVmVyc2lvbiksXG4gIH07XG5cbiAgLy8gUmVqZWN0IG1pc21hdGNoaW5nIG1ham9yIHZlcnNpb24gbnVtYmVycy5cbiAgaWYgKGVzVmVyc2lvbk51bWJlcnMubWFqb3IgIT09IGtpYmFuYVZlcnNpb25OdW1iZXJzLm1ham9yKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgLy8gUmVqZWN0IG9sZGVyIG1pbm9yIHZlcnNpb25zIG9mIEVTLlxuICBpZiAoZXNWZXJzaW9uTnVtYmVycy5taW5vciA8IGtpYmFuYVZlcnNpb25OdW1iZXJzLm1pbm9yKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/lib/es_client/is_es_compatible_with_kibana.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;qBAQwB,wBAAwB;;;;sBAF7B,QAAQ;;;;AAEZ,SAAS,wBAAwB,CAAC,SAAS,EAAE,aAAa,EAAE;AACzE,MAAM,gBAAgB,GAAG;AACvB,SAAK,EAAE,oBAAO,KAAK,CAAC,SAAS,CAAC;AAC9B,SAAK,EAAE,oBAAO,KAAK,CAAC,SAAS,CAAC;AAC9B,SAAK,EAAE,oBAAO,KAAK,CAAC,SAAS,CAAC;GAC/B,CAAC;;AAEF,MAAM,oBAAoB,GAAG;AAC3B,SAAK,EAAE,oBAAO,KAAK,CAAC,aAAa,CAAC;AAClC,SAAK,EAAE,oBAAO,KAAK,CAAC,aAAa,CAAC;AAClC,SAAK,EAAE,oBAAO,KAAK,CAAC,aAAa,CAAC;GACnC,CAAC;;;AAGF,MAAI,gBAAgB,CAAC,KAAK,KAAK,oBAAoB,CAAC,KAAK,EAAE;AACzD,WAAO,KAAK,CAAC;GACd;;;AAGD,MAAI,gBAAgB,CAAC,KAAK,GAAG,oBAAoB,CAAC,KAAK,EAAE;AACvD,WAAO,KAAK,CAAC;GACd;;AAED,SAAO,IAAI,CAAC;CACb",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/lib/es_client/is_es_compatible_with_kibana.js",
      "sourcesContent": [
        "/**\n * Let's weed out the ES versions that won't work with a given Kibana version.\n * 1. Major version differences will never work together.\n * 2. Older versions of ES won't work with newer versions of Kibana.\n */\n\nimport semver from 'semver';\n\nexport default function isEsCompatibleWithKibana(esVersion, kibanaVersion) {\n  const esVersionNumbers = {\n    major: semver.major(esVersion),\n    minor: semver.minor(esVersion),\n    patch: semver.patch(esVersion),\n  };\n\n  const kibanaVersionNumbers = {\n    major: semver.major(kibanaVersion),\n    minor: semver.minor(kibanaVersion),\n    patch: semver.patch(kibanaVersion),\n  };\n\n  // Reject mismatching major version numbers.\n  if (esVersionNumbers.major !== kibanaVersionNumbers.major) {\n    return false;\n  }\n\n  // Reject older minor versions of ES.\n  if (esVersionNumbers.minor < kibanaVersionNumbers.minor) {\n    return false;\n  }\n\n  return true;\n}\n"
      ]
    },
    "mtime": 1485775624445
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/lib/es_client/kibana_version.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "../../../../../package.json",
            "imported": [
              "version"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "version",
                "local": "kibanaVersion"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _packageJson = require('../../../../../package.json');\n\nexports['default'] = {\n  // Make the version stubbable to improve testability.\n  get: function get() {\n    return _packageJson.version;\n  }\n};\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL21vbml0b3Jpbmcvc2VydmVyL2xpYi9lc19jbGllbnQva2liYW5hX3ZlcnNpb24uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7OzJCQUVPLDZCQUE2Qjs7cUJBRXJCOztBQUViLEtBQUcsRUFBQSxlQUFHO0FBQ0osZ0NBQXFCO0dBQ3RCO0NBQ0YiLCJmaWxlIjoiL2hvbWUvdWJ1bnR1L3dvcmtzcGFjZS9raWJhbmEtNS4wLjItbGludXgteDg2XzY0L3BsdWdpbnMveC1wYWNrL3BsdWdpbnMvbW9uaXRvcmluZy9zZXJ2ZXIvbGliL2VzX2NsaWVudC9raWJhbmFfdmVyc2lvbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIHZlcnNpb24gYXMga2liYW5hVmVyc2lvbixcbn0gZnJvbSAnLi4vLi4vLi4vLi4vLi4vcGFja2FnZS5qc29uJztcblxuZXhwb3J0IGRlZmF1bHQge1xuICAvLyBNYWtlIHRoZSB2ZXJzaW9uIHN0dWJiYWJsZSB0byBpbXByb3ZlIHRlc3RhYmlsaXR5LlxuICBnZXQoKSB7XG4gICAgcmV0dXJuIGtpYmFuYVZlcnNpb247XG4gIH0sXG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/lib/es_client/kibana_version.js"
      ],
      "names": [],
      "mappings": ";;;;;;2BAEO,6BAA6B;;qBAErB;;AAEb,KAAG,EAAA,eAAG;AACJ,gCAAqB;GACtB;CACF",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/lib/es_client/kibana_version.js",
      "sourcesContent": [
        "import {\n  version as kibanaVersion,\n} from '../../../../../package.json';\n\nexport default {\n  // Make the version stubbable to improve testability.\n  get() {\n    return kibanaVersion;\n  },\n};\n"
      ]
    },
    "mtime": 1485775624445
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/lib/es_client/instantiate_client.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "once",
              "bindKey"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "once",
                "local": "once"
              },
              {
                "kind": "named",
                "imported": "bindKey",
                "local": "bindKey"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Promise"
              }
            ]
          },
          {
            "source": "./init_config",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "initConfig"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "exposeClient",
            "server",
            "elasticsearch"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "exposeClient",
              "exported": "exposeClient"
            },
            {
              "kind": "local",
              "local": "server",
              "exported": "server"
            },
            {
              "kind": "local",
              "local": "elasticsearch",
              "exported": "elasticsearch"
            }
          ]
        }
      },
      "usedHelpers": [
        "extends",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports.exposeClient = exposeClient;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _bluebird = require('bluebird');\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _init_config = require('./init_config');\n\nvar _init_config2 = _interopRequireDefault(_init_config);\n\n/* Provide a dedicated Elasticsearch client for Monitoring\n * The connection options can be customized for the Monitoring application\n * This allows the app to connect to a decidated monitoring cluster even if\n * Kibana itself is connected to a production cluster.\n */\n\nfunction exposeClient(server, elasticsearch) {\n  var config = server.config();\n  var callWithRequestFactory = server.plugins.elasticsearch.callWithRequestFactory;\n  var ElasticsearchClientLogging = server.plugins.elasticsearch.ElasticsearchClientLogging;\n  var loggingTag = config.get('xpack.monitoring.loggingTag');\n\n  function createClient(options, uri, ssl) {\n    var params = {\n      host: {\n        host: uri.hostname,\n        port: uri.port,\n        protocol: uri.protocol,\n        path: uri.pathname,\n        auth: uri.auth,\n        query: uri.query,\n        headers: config.get('xpack.monitoring.elasticsearch.customHeaders') // separate customHeaders config for separate monitoring connection\n      },\n      ssl: ssl,\n      plugins: options.plugins,\n      apiVersion: options.apiVersion,\n      keepAlive: options.keepAlive,\n      pingTimeout: options.pingTimeout,\n      requestTimeout: options.requestTimeout,\n      defer: function defer() {\n        return _bluebird2['default'].defer();\n      },\n      log: ElasticsearchClientLogging\n    };\n    return new elasticsearch.Client(params);\n  }\n\n  var _initConfig = (0, _init_config2['default'])(config);\n\n  var options = _initConfig.options;\n  var authUri = _initConfig.authUri;\n  var noAuthUri = _initConfig.noAuthUri;\n  var ssl = _initConfig.ssl;\n\n  // expose authorized client, used ONLY for internal health checks\n  var client = createClient(options, authUri, ssl);\n  server.on('close', (0, _lodash.bindKey)(client, 'close'));\n  server.expose('client', client);\n\n  // expose callWithRequest using unauthorized client, used for API requests\n  var noAuthOptions = _extends({}, options, {\n    auth: false\n  });\n  var noAuthClient = createClient(noAuthOptions, noAuthUri, ssl);\n  var callWithRequest = callWithRequestFactory(noAuthClient);\n  server.on('close', (0, _lodash.bindKey)(noAuthClient, 'close'));\n  server.expose('callWithRequest', callWithRequest);\n\n  server.log([loggingTag, 'es-client'], 'config sourced from: ' + options.configSource + ' cluster (' + noAuthUri.host + ')');\n}\n\nvar instantiateClient = (0, _lodash.once)(exposeClient);\n\nexports['default'] = instantiateClient;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL21vbml0b3Jpbmcvc2VydmVyL2xpYi9lc19jbGllbnQvaW5zdGFudGlhdGVfY2xpZW50LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7OztzQkFBOEIsUUFBUTs7d0JBQ2xCLFVBQVU7Ozs7MkJBQ1AsZUFBZTs7Ozs7Ozs7OztBQVEvQixTQUFTLFlBQVksQ0FBQyxNQUFNLEVBQUUsYUFBYSxFQUFFO0FBQ2xELE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUMvQixNQUFNLHNCQUFzQixHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLHNCQUFzQixDQUFDO0FBQ25GLE1BQU0sMEJBQTBCLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsMEJBQTBCLENBQUM7QUFDM0YsTUFBTSxVQUFVLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyw2QkFBNkIsQ0FBQyxDQUFDOztBQUU3RCxXQUFTLFlBQVksQ0FBQyxPQUFPLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRTtBQUN2QyxRQUFNLE1BQU0sR0FBRztBQUNiLFVBQUksRUFBRTtBQUNKLFlBQUksRUFBRSxHQUFHLENBQUMsUUFBUTtBQUNsQixZQUFJLEVBQUUsR0FBRyxDQUFDLElBQUk7QUFDZCxnQkFBUSxFQUFFLEdBQUcsQ0FBQyxRQUFRO0FBQ3RCLFlBQUksRUFBRSxHQUFHLENBQUMsUUFBUTtBQUNsQixZQUFJLEVBQUUsR0FBRyxDQUFDLElBQUk7QUFDZCxhQUFLLEVBQUUsR0FBRyxDQUFDLEtBQUs7QUFDaEIsZUFBTyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsOENBQThDLENBQUM7T0FDcEU7QUFDRCxTQUFHLEVBQUUsR0FBRztBQUNSLGFBQU8sRUFBRSxPQUFPLENBQUMsT0FBTztBQUN4QixnQkFBVSxFQUFFLE9BQU8sQ0FBQyxVQUFVO0FBQzlCLGVBQVMsRUFBRSxPQUFPLENBQUMsU0FBUztBQUM1QixpQkFBVyxFQUFFLE9BQU8sQ0FBQyxXQUFXO0FBQ2hDLG9CQUFjLEVBQUUsT0FBTyxDQUFDLGNBQWM7QUFDdEMsV0FBSyxFQUFFLGlCQUFZO0FBQ2pCLGVBQU8sc0JBQVEsS0FBSyxFQUFFLENBQUM7T0FDeEI7QUFDRCxTQUFHLEVBQUUsMEJBQTBCO0tBQ2hDLENBQUM7QUFDRixXQUFPLElBQUksYUFBYSxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztHQUN6Qzs7b0JBRTRDLDhCQUFXLE1BQU0sQ0FBQzs7TUFBdkQsT0FBTyxlQUFQLE9BQU87TUFBRSxPQUFPLGVBQVAsT0FBTztNQUFFLFNBQVMsZUFBVCxTQUFTO01BQUUsR0FBRyxlQUFILEdBQUc7OztBQUd4QyxNQUFNLE1BQU0sR0FBRyxZQUFZLENBQUMsT0FBTyxFQUFFLE9BQU8sRUFBRSxHQUFHLENBQUMsQ0FBQztBQUNuRCxRQUFNLENBQUMsRUFBRSxDQUFDLE9BQU8sRUFBRSxxQkFBUSxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztBQUM3QyxRQUFNLENBQUMsTUFBTSxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUMsQ0FBQzs7O0FBR2hDLE1BQU0sYUFBYSxnQkFDZCxPQUFPO0FBQ1YsUUFBSSxFQUFFLEtBQUs7SUFDWixDQUFDO0FBQ0YsTUFBTSxZQUFZLEdBQUcsWUFBWSxDQUFDLGFBQWEsRUFBRSxTQUFTLEVBQUUsR0FBRyxDQUFDLENBQUM7QUFDakUsTUFBTSxlQUFlLEdBQUcsc0JBQXNCLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDN0QsUUFBTSxDQUFDLEVBQUUsQ0FBQyxPQUFPLEVBQUUscUJBQVEsWUFBWSxFQUFFLE9BQU8sQ0FBQyxDQUFDLENBQUM7QUFDbkQsUUFBTSxDQUFDLE1BQU0sQ0FBQyxpQkFBaUIsRUFBRSxlQUFlLENBQUMsQ0FBQzs7QUFFbEQsUUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFVBQVUsRUFBRSxXQUFXLENBQUMsNEJBQTBCLE9BQU8sQ0FBQyxZQUFZLGtCQUFhLFNBQVMsQ0FBQyxJQUFJLE9BQUksQ0FBQztDQUNuSDs7QUFFRCxJQUFNLGlCQUFpQixHQUFHLGtCQUFLLFlBQVksQ0FBQyxDQUFDOztxQkFFOUIsaUJBQWlCIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL21vbml0b3Jpbmcvc2VydmVyL2xpYi9lc19jbGllbnQvaW5zdGFudGlhdGVfY2xpZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgb25jZSwgYmluZEtleSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgUHJvbWlzZSBmcm9tICdibHVlYmlyZCc7XG5pbXBvcnQgaW5pdENvbmZpZyBmcm9tICcuL2luaXRfY29uZmlnJztcblxuLyogUHJvdmlkZSBhIGRlZGljYXRlZCBFbGFzdGljc2VhcmNoIGNsaWVudCBmb3IgTW9uaXRvcmluZ1xuICogVGhlIGNvbm5lY3Rpb24gb3B0aW9ucyBjYW4gYmUgY3VzdG9taXplZCBmb3IgdGhlIE1vbml0b3JpbmcgYXBwbGljYXRpb25cbiAqIFRoaXMgYWxsb3dzIHRoZSBhcHAgdG8gY29ubmVjdCB0byBhIGRlY2lkYXRlZCBtb25pdG9yaW5nIGNsdXN0ZXIgZXZlbiBpZlxuICogS2liYW5hIGl0c2VsZiBpcyBjb25uZWN0ZWQgdG8gYSBwcm9kdWN0aW9uIGNsdXN0ZXIuXG4gKi9cblxuZXhwb3J0IGZ1bmN0aW9uIGV4cG9zZUNsaWVudChzZXJ2ZXIsIGVsYXN0aWNzZWFyY2gpIHtcbiAgY29uc3QgY29uZmlnID0gc2VydmVyLmNvbmZpZygpO1xuICBjb25zdCBjYWxsV2l0aFJlcXVlc3RGYWN0b3J5ID0gc2VydmVyLnBsdWdpbnMuZWxhc3RpY3NlYXJjaC5jYWxsV2l0aFJlcXVlc3RGYWN0b3J5O1xuICBjb25zdCBFbGFzdGljc2VhcmNoQ2xpZW50TG9nZ2luZyA9IHNlcnZlci5wbHVnaW5zLmVsYXN0aWNzZWFyY2guRWxhc3RpY3NlYXJjaENsaWVudExvZ2dpbmc7XG4gIGNvbnN0IGxvZ2dpbmdUYWcgPSBjb25maWcuZ2V0KCd4cGFjay5tb25pdG9yaW5nLmxvZ2dpbmdUYWcnKTtcblxuICBmdW5jdGlvbiBjcmVhdGVDbGllbnQob3B0aW9ucywgdXJpLCBzc2wpIHtcbiAgICBjb25zdCBwYXJhbXMgPSB7XG4gICAgICBob3N0OiB7XG4gICAgICAgIGhvc3Q6IHVyaS5ob3N0bmFtZSxcbiAgICAgICAgcG9ydDogdXJpLnBvcnQsXG4gICAgICAgIHByb3RvY29sOiB1cmkucHJvdG9jb2wsXG4gICAgICAgIHBhdGg6IHVyaS5wYXRobmFtZSxcbiAgICAgICAgYXV0aDogdXJpLmF1dGgsXG4gICAgICAgIHF1ZXJ5OiB1cmkucXVlcnksXG4gICAgICAgIGhlYWRlcnM6IGNvbmZpZy5nZXQoJ3hwYWNrLm1vbml0b3JpbmcuZWxhc3RpY3NlYXJjaC5jdXN0b21IZWFkZXJzJykgLy8gc2VwYXJhdGUgY3VzdG9tSGVhZGVycyBjb25maWcgZm9yIHNlcGFyYXRlIG1vbml0b3JpbmcgY29ubmVjdGlvblxuICAgICAgfSxcbiAgICAgIHNzbDogc3NsLFxuICAgICAgcGx1Z2luczogb3B0aW9ucy5wbHVnaW5zLFxuICAgICAgYXBpVmVyc2lvbjogb3B0aW9ucy5hcGlWZXJzaW9uLFxuICAgICAga2VlcEFsaXZlOiBvcHRpb25zLmtlZXBBbGl2ZSxcbiAgICAgIHBpbmdUaW1lb3V0OiBvcHRpb25zLnBpbmdUaW1lb3V0LFxuICAgICAgcmVxdWVzdFRpbWVvdXQ6IG9wdGlvbnMucmVxdWVzdFRpbWVvdXQsXG4gICAgICBkZWZlcjogZnVuY3Rpb24gKCkge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5kZWZlcigpO1xuICAgICAgfSxcbiAgICAgIGxvZzogRWxhc3RpY3NlYXJjaENsaWVudExvZ2dpbmdcbiAgICB9O1xuICAgIHJldHVybiBuZXcgZWxhc3RpY3NlYXJjaC5DbGllbnQocGFyYW1zKTtcbiAgfVxuXG4gIGNvbnN0IHsgb3B0aW9ucywgYXV0aFVyaSwgbm9BdXRoVXJpLCBzc2wgfSA9IGluaXRDb25maWcoY29uZmlnKTtcblxuICAvLyBleHBvc2UgYXV0aG9yaXplZCBjbGllbnQsIHVzZWQgT05MWSBmb3IgaW50ZXJuYWwgaGVhbHRoIGNoZWNrc1xuICBjb25zdCBjbGllbnQgPSBjcmVhdGVDbGllbnQob3B0aW9ucywgYXV0aFVyaSwgc3NsKTtcbiAgc2VydmVyLm9uKCdjbG9zZScsIGJpbmRLZXkoY2xpZW50LCAnY2xvc2UnKSk7XG4gIHNlcnZlci5leHBvc2UoJ2NsaWVudCcsIGNsaWVudCk7XG5cbiAgLy8gZXhwb3NlIGNhbGxXaXRoUmVxdWVzdCB1c2luZyB1bmF1dGhvcml6ZWQgY2xpZW50LCB1c2VkIGZvciBBUEkgcmVxdWVzdHNcbiAgY29uc3Qgbm9BdXRoT3B0aW9ucyA9IHtcbiAgICAuLi5vcHRpb25zLFxuICAgIGF1dGg6IGZhbHNlXG4gIH07XG4gIGNvbnN0IG5vQXV0aENsaWVudCA9IGNyZWF0ZUNsaWVudChub0F1dGhPcHRpb25zLCBub0F1dGhVcmksIHNzbCk7XG4gIGNvbnN0IGNhbGxXaXRoUmVxdWVzdCA9IGNhbGxXaXRoUmVxdWVzdEZhY3Rvcnkobm9BdXRoQ2xpZW50KTtcbiAgc2VydmVyLm9uKCdjbG9zZScsIGJpbmRLZXkobm9BdXRoQ2xpZW50LCAnY2xvc2UnKSk7XG4gIHNlcnZlci5leHBvc2UoJ2NhbGxXaXRoUmVxdWVzdCcsIGNhbGxXaXRoUmVxdWVzdCk7XG5cbiAgc2VydmVyLmxvZyhbbG9nZ2luZ1RhZywgJ2VzLWNsaWVudCddLCBgY29uZmlnIHNvdXJjZWQgZnJvbTogJHtvcHRpb25zLmNvbmZpZ1NvdXJjZX0gY2x1c3RlciAoJHtub0F1dGhVcmkuaG9zdH0pYCk7XG59XG5cbmNvbnN0IGluc3RhbnRpYXRlQ2xpZW50ID0gb25jZShleHBvc2VDbGllbnQpO1xuXG5leHBvcnQgZGVmYXVsdCBpbnN0YW50aWF0ZUNsaWVudDtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/lib/es_client/instantiate_client.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;;;sBAA8B,QAAQ;;wBAClB,UAAU;;;;2BACP,eAAe;;;;;;;;;;AAQ/B,SAAS,YAAY,CAAC,MAAM,EAAE,aAAa,EAAE;AAClD,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;AAC/B,MAAM,sBAAsB,GAAG,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,sBAAsB,CAAC;AACnF,MAAM,0BAA0B,GAAG,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,0BAA0B,CAAC;AAC3F,MAAM,UAAU,GAAG,MAAM,CAAC,GAAG,CAAC,6BAA6B,CAAC,CAAC;;AAE7D,WAAS,YAAY,CAAC,OAAO,EAAE,GAAG,EAAE,GAAG,EAAE;AACvC,QAAM,MAAM,GAAG;AACb,UAAI,EAAE;AACJ,YAAI,EAAE,GAAG,CAAC,QAAQ;AAClB,YAAI,EAAE,GAAG,CAAC,IAAI;AACd,gBAAQ,EAAE,GAAG,CAAC,QAAQ;AACtB,YAAI,EAAE,GAAG,CAAC,QAAQ;AAClB,YAAI,EAAE,GAAG,CAAC,IAAI;AACd,aAAK,EAAE,GAAG,CAAC,KAAK;AAChB,eAAO,EAAE,MAAM,CAAC,GAAG,CAAC,8CAA8C,CAAC;OACpE;AACD,SAAG,EAAE,GAAG;AACR,aAAO,EAAE,OAAO,CAAC,OAAO;AACxB,gBAAU,EAAE,OAAO,CAAC,UAAU;AAC9B,eAAS,EAAE,OAAO,CAAC,SAAS;AAC5B,iBAAW,EAAE,OAAO,CAAC,WAAW;AAChC,oBAAc,EAAE,OAAO,CAAC,cAAc;AACtC,WAAK,EAAE,iBAAY;AACjB,eAAO,sBAAQ,KAAK,EAAE,CAAC;OACxB;AACD,SAAG,EAAE,0BAA0B;KAChC,CAAC;AACF,WAAO,IAAI,aAAa,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;GACzC;;oBAE4C,8BAAW,MAAM,CAAC;;MAAvD,OAAO,eAAP,OAAO;MAAE,OAAO,eAAP,OAAO;MAAE,SAAS,eAAT,SAAS;MAAE,GAAG,eAAH,GAAG;;;AAGxC,MAAM,MAAM,GAAG,YAAY,CAAC,OAAO,EAAE,OAAO,EAAE,GAAG,CAAC,CAAC;AACnD,QAAM,CAAC,EAAE,CAAC,OAAO,EAAE,qBAAQ,MAAM,EAAE,OAAO,CAAC,CAAC,CAAC;AAC7C,QAAM,CAAC,MAAM,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;;;AAGhC,MAAM,aAAa,gBACd,OAAO;AACV,QAAI,EAAE,KAAK;IACZ,CAAC;AACF,MAAM,YAAY,GAAG,YAAY,CAAC,aAAa,EAAE,SAAS,EAAE,GAAG,CAAC,CAAC;AACjE,MAAM,eAAe,GAAG,sBAAsB,CAAC,YAAY,CAAC,CAAC;AAC7D,QAAM,CAAC,EAAE,CAAC,OAAO,EAAE,qBAAQ,YAAY,EAAE,OAAO,CAAC,CAAC,CAAC;AACnD,QAAM,CAAC,MAAM,CAAC,iBAAiB,EAAE,eAAe,CAAC,CAAC;;AAElD,QAAM,CAAC,GAAG,CAAC,CAAC,UAAU,EAAE,WAAW,CAAC,4BAA0B,OAAO,CAAC,YAAY,kBAAa,SAAS,CAAC,IAAI,OAAI,CAAC;CACnH;;AAED,IAAM,iBAAiB,GAAG,kBAAK,YAAY,CAAC,CAAC;;qBAE9B,iBAAiB",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/lib/es_client/instantiate_client.js",
      "sourcesContent": [
        "import { once, bindKey } from 'lodash';\nimport Promise from 'bluebird';\nimport initConfig from './init_config';\n\n/* Provide a dedicated Elasticsearch client for Monitoring\n * The connection options can be customized for the Monitoring application\n * This allows the app to connect to a decidated monitoring cluster even if\n * Kibana itself is connected to a production cluster.\n */\n\nexport function exposeClient(server, elasticsearch) {\n  const config = server.config();\n  const callWithRequestFactory = server.plugins.elasticsearch.callWithRequestFactory;\n  const ElasticsearchClientLogging = server.plugins.elasticsearch.ElasticsearchClientLogging;\n  const loggingTag = config.get('xpack.monitoring.loggingTag');\n\n  function createClient(options, uri, ssl) {\n    const params = {\n      host: {\n        host: uri.hostname,\n        port: uri.port,\n        protocol: uri.protocol,\n        path: uri.pathname,\n        auth: uri.auth,\n        query: uri.query,\n        headers: config.get('xpack.monitoring.elasticsearch.customHeaders') // separate customHeaders config for separate monitoring connection\n      },\n      ssl: ssl,\n      plugins: options.plugins,\n      apiVersion: options.apiVersion,\n      keepAlive: options.keepAlive,\n      pingTimeout: options.pingTimeout,\n      requestTimeout: options.requestTimeout,\n      defer: function () {\n        return Promise.defer();\n      },\n      log: ElasticsearchClientLogging\n    };\n    return new elasticsearch.Client(params);\n  }\n\n  const { options, authUri, noAuthUri, ssl } = initConfig(config);\n\n  // expose authorized client, used ONLY for internal health checks\n  const client = createClient(options, authUri, ssl);\n  server.on('close', bindKey(client, 'close'));\n  server.expose('client', client);\n\n  // expose callWithRequest using unauthorized client, used for API requests\n  const noAuthOptions = {\n    ...options,\n    auth: false\n  };\n  const noAuthClient = createClient(noAuthOptions, noAuthUri, ssl);\n  const callWithRequest = callWithRequestFactory(noAuthClient);\n  server.on('close', bindKey(noAuthClient, 'close'));\n  server.expose('callWithRequest', callWithRequest);\n\n  server.log([loggingTag, 'es-client'], `config sourced from: ${options.configSource} cluster (${noAuthUri.host})`);\n}\n\nconst instantiateClient = once(exposeClient);\n\nexport default instantiateClient;\n"
      ]
    },
    "mtime": 1485775624445
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/lib/es_client/init_config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "pick",
              "clone"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "pick",
                "local": "pick"
              },
              {
                "kind": "named",
                "imported": "clone",
                "local": "clone"
              }
            ]
          },
          {
            "source": "url",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "url"
              }
            ]
          },
          {
            "source": "fs",
            "imported": [
              "readFileSync"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "readFileSync",
                "local": "readFileSync"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "initConfig",
            "config"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "initConfig",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "config",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "extends",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nexports['default'] = initConfig;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _url = require('url');\n\nvar _url2 = _interopRequireDefault(_url);\n\nvar _fs = require('fs');\n\nvar readFile = function readFile(file) {\n  return (0, _fs.readFileSync)(file, 'utf8');\n};\n\nfunction getConfigObjects(config, useMonitoring) {\n  var monitoringConfig = config.get('xpack.monitoring.elasticsearch');\n  var configSource = useMonitoring ? monitoringConfig : config.get('elasticsearch');\n  var esConfig = (0, _lodash.pick)(configSource, 'url', 'username', 'password', 'ssl', 'customHeaders');\n\n  var options = _extends({}, (0, _lodash.pick)(monitoringConfig, 'apiVersion', 'pingTimeout', 'requestTimeout'), esConfig, {\n    configSource: useMonitoring ? 'monitoring' : 'production', // for logging and tests\n    keepAlive: true\n  });\n\n  var noAuthUri = _url2['default'].parse(options.url);\n  var authUri = (0, _lodash.clone)(noAuthUri);\n  if (options.username && options.password) {\n    authUri.auth = options.username + ':' + options.password;\n  }\n\n  var ssl = options.ssl;\n  ssl.rejectUnauthorized = ssl.verify;\n  if (ssl.cert && ssl.key) {\n    ssl.cert = readFile(ssl.cert);\n    ssl.key = readFile(ssl.key);\n  }\n  if (ssl.ca) {\n    ssl.ca = ssl.ca.map(readFile);\n  }\n\n  return { options: options, noAuthUri: noAuthUri, authUri: authUri, ssl: ssl };\n}\n\n/* If Monitoring cluster connection is configured, use that. Otherwise default\n * to the cluster connection config set for Kibana and copy all the Kibana\n* config values to monitoring. */\n\nfunction initConfig(config) {\n  var prefix = 'xpack.monitoring.elasticsearch';\n  var useMonitoring = Boolean(config.get(prefix + '.url'));\n  var configObjects = getConfigObjects(config, useMonitoring);\n\n  if (!useMonitoring) {\n    // copy calculated configs into monitoring\n    config.set(prefix, (0, _lodash.pick)(configObjects.options, 'url', 'username', 'password', 'customHeaders'));\n    config.set(prefix + '.ssl', (0, _lodash.pick)(configObjects.ssl, 'verify', 'cert', 'key', 'ca'));\n  }\n\n  delete configObjects.options.ssl;\n  delete configObjects.ssl.verify;\n\n  return _extends({}, configObjects, {\n    readFile: readFile // for tests\n  });\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL21vbml0b3Jpbmcvc2VydmVyL2xpYi9lc19jbGllbnQvaW5pdF9jb25maWcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7cUJBd0N3QixVQUFVOzs7O3NCQXhDTixRQUFROzttQkFDcEIsS0FBSzs7OztrQkFDUSxJQUFJOztBQUVqQyxJQUFNLFFBQVEsR0FBRyxTQUFYLFFBQVEsQ0FBRyxJQUFJO1NBQUksc0JBQWEsSUFBSSxFQUFFLE1BQU0sQ0FBQztDQUFBLENBQUM7O0FBRXBELFNBQVMsZ0JBQWdCLENBQUMsTUFBTSxFQUFFLGFBQWEsRUFBRTtBQUMvQyxNQUFNLGdCQUFnQixHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsZ0NBQWdDLENBQUMsQ0FBQztBQUN0RSxNQUFNLFlBQVksR0FBRyxhQUFhLEdBQUcsZ0JBQWdCLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUNwRixNQUFNLFFBQVEsR0FBRyxrQkFBSyxZQUFZLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUUsS0FBSyxFQUFFLGVBQWUsQ0FBQyxDQUFDOztBQUUzRixNQUFNLE9BQU8sZ0JBQ1Isa0JBQUssZ0JBQWdCLEVBQUUsWUFBWSxFQUFFLGFBQWEsRUFBRSxnQkFBZ0IsQ0FBQyxFQUNyRSxRQUFRO0FBQ1gsZ0JBQVksRUFBRSxhQUFhLEdBQUcsWUFBWSxHQUFHLFlBQVk7QUFDekQsYUFBUyxFQUFFLElBQUk7SUFDaEIsQ0FBQzs7QUFFRixNQUFNLFNBQVMsR0FBRyxpQkFBSSxLQUFLLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ3pDLE1BQU0sT0FBTyxHQUFHLG1CQUFNLFNBQVMsQ0FBQyxDQUFDO0FBQ2pDLE1BQUksT0FBTyxDQUFDLFFBQVEsSUFBSSxPQUFPLENBQUMsUUFBUSxFQUFFO0FBQ3hDLFdBQU8sQ0FBQyxJQUFJLEdBQU0sT0FBTyxDQUFDLFFBQVEsU0FBSSxPQUFPLENBQUMsUUFBUSxBQUFFLENBQUM7R0FDMUQ7O0FBRUQsTUFBTSxHQUFHLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQztBQUN4QixLQUFHLENBQUMsa0JBQWtCLEdBQUcsR0FBRyxDQUFDLE1BQU0sQ0FBQztBQUNwQyxNQUFJLEdBQUcsQ0FBQyxJQUFJLElBQUksR0FBRyxDQUFDLEdBQUcsRUFBRTtBQUN2QixPQUFHLENBQUMsSUFBSSxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDOUIsT0FBRyxDQUFDLEdBQUcsR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0dBQzdCO0FBQ0QsTUFBSSxHQUFHLENBQUMsRUFBRSxFQUFFO0FBQ1YsT0FBRyxDQUFDLEVBQUUsR0FBRyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxRQUFRLENBQUMsQ0FBQztHQUMvQjs7QUFFRCxTQUFPLEVBQUUsT0FBTyxFQUFQLE9BQU8sRUFBRSxTQUFTLEVBQVQsU0FBUyxFQUFFLE9BQU8sRUFBUCxPQUFPLEVBQUUsR0FBRyxFQUFILEdBQUcsRUFBRSxDQUFDO0NBQzdDOzs7Ozs7QUFLYyxTQUFTLFVBQVUsQ0FBQyxNQUFNLEVBQUU7QUFDekMsTUFBTSxNQUFNLEdBQUcsZ0NBQWdDLENBQUM7QUFDaEQsTUFBTSxhQUFhLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUksTUFBTSxVQUFPLENBQUMsQ0FBQztBQUMzRCxNQUFNLGFBQWEsR0FBRyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUUsYUFBYSxDQUFDLENBQUM7O0FBRTlELE1BQUksQ0FBQyxhQUFhLEVBQUU7O0FBRWxCLFVBQU0sQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLGtCQUFLLGFBQWEsQ0FBQyxPQUFPLEVBQUUsS0FBSyxFQUFFLFVBQVUsRUFBRSxVQUFVLEVBQUUsZUFBZSxDQUFDLENBQUMsQ0FBQztBQUNoRyxVQUFNLENBQUMsR0FBRyxDQUFJLE1BQU0sV0FBUSxrQkFBSyxhQUFhLENBQUMsR0FBRyxFQUFFLFFBQVEsRUFBRSxNQUFNLEVBQUUsS0FBSyxFQUFFLElBQUksQ0FBQyxDQUFDLENBQUM7R0FDckY7O0FBRUQsU0FBTyxhQUFhLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQztBQUNqQyxTQUFPLGFBQWEsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDOztBQUVoQyxzQkFDSyxhQUFhO0FBQ2hCLFlBQVEsRUFBUixRQUFRO0FBQUEsS0FDUjtDQUNIIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL21vbml0b3Jpbmcvc2VydmVyL2xpYi9lc19jbGllbnQvaW5pdF9jb25maWcuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBwaWNrLCBjbG9uZSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgdXJsIGZyb20gJ3VybCc7XG5pbXBvcnQgeyByZWFkRmlsZVN5bmMgfSBmcm9tICdmcyc7XG5cbmNvbnN0IHJlYWRGaWxlID0gZmlsZSA9PiByZWFkRmlsZVN5bmMoZmlsZSwgJ3V0ZjgnKTtcblxuZnVuY3Rpb24gZ2V0Q29uZmlnT2JqZWN0cyhjb25maWcsIHVzZU1vbml0b3JpbmcpIHtcbiAgY29uc3QgbW9uaXRvcmluZ0NvbmZpZyA9IGNvbmZpZy5nZXQoJ3hwYWNrLm1vbml0b3JpbmcuZWxhc3RpY3NlYXJjaCcpO1xuICBjb25zdCBjb25maWdTb3VyY2UgPSB1c2VNb25pdG9yaW5nID8gbW9uaXRvcmluZ0NvbmZpZyA6IGNvbmZpZy5nZXQoJ2VsYXN0aWNzZWFyY2gnKTtcbiAgY29uc3QgZXNDb25maWcgPSBwaWNrKGNvbmZpZ1NvdXJjZSwgJ3VybCcsICd1c2VybmFtZScsICdwYXNzd29yZCcsICdzc2wnLCAnY3VzdG9tSGVhZGVycycpO1xuXG4gIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgLi4ucGljayhtb25pdG9yaW5nQ29uZmlnLCAnYXBpVmVyc2lvbicsICdwaW5nVGltZW91dCcsICdyZXF1ZXN0VGltZW91dCcpLFxuICAgIC4uLmVzQ29uZmlnLFxuICAgIGNvbmZpZ1NvdXJjZTogdXNlTW9uaXRvcmluZyA/ICdtb25pdG9yaW5nJyA6ICdwcm9kdWN0aW9uJywgLy8gZm9yIGxvZ2dpbmcgYW5kIHRlc3RzXG4gICAga2VlcEFsaXZlOiB0cnVlXG4gIH07XG5cbiAgY29uc3Qgbm9BdXRoVXJpID0gdXJsLnBhcnNlKG9wdGlvbnMudXJsKTtcbiAgY29uc3QgYXV0aFVyaSA9IGNsb25lKG5vQXV0aFVyaSk7XG4gIGlmIChvcHRpb25zLnVzZXJuYW1lICYmIG9wdGlvbnMucGFzc3dvcmQpIHtcbiAgICBhdXRoVXJpLmF1dGggPSBgJHtvcHRpb25zLnVzZXJuYW1lfToke29wdGlvbnMucGFzc3dvcmR9YDtcbiAgfVxuXG4gIGNvbnN0IHNzbCA9IG9wdGlvbnMuc3NsO1xuICBzc2wucmVqZWN0VW5hdXRob3JpemVkID0gc3NsLnZlcmlmeTtcbiAgaWYgKHNzbC5jZXJ0ICYmIHNzbC5rZXkpIHtcbiAgICBzc2wuY2VydCA9IHJlYWRGaWxlKHNzbC5jZXJ0KTtcbiAgICBzc2wua2V5ID0gcmVhZEZpbGUoc3NsLmtleSk7XG4gIH1cbiAgaWYgKHNzbC5jYSkge1xuICAgIHNzbC5jYSA9IHNzbC5jYS5tYXAocmVhZEZpbGUpO1xuICB9XG5cbiAgcmV0dXJuIHsgb3B0aW9ucywgbm9BdXRoVXJpLCBhdXRoVXJpLCBzc2wgfTtcbn1cblxuLyogSWYgTW9uaXRvcmluZyBjbHVzdGVyIGNvbm5lY3Rpb24gaXMgY29uZmlndXJlZCwgdXNlIHRoYXQuIE90aGVyd2lzZSBkZWZhdWx0XG4gKiB0byB0aGUgY2x1c3RlciBjb25uZWN0aW9uIGNvbmZpZyBzZXQgZm9yIEtpYmFuYSBhbmQgY29weSBhbGwgdGhlIEtpYmFuYVxuKiBjb25maWcgdmFsdWVzIHRvIG1vbml0b3JpbmcuICovXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBpbml0Q29uZmlnKGNvbmZpZykge1xuICBjb25zdCBwcmVmaXggPSAneHBhY2subW9uaXRvcmluZy5lbGFzdGljc2VhcmNoJztcbiAgY29uc3QgdXNlTW9uaXRvcmluZyA9IEJvb2xlYW4oY29uZmlnLmdldChgJHtwcmVmaXh9LnVybGApKTtcbiAgY29uc3QgY29uZmlnT2JqZWN0cyA9IGdldENvbmZpZ09iamVjdHMoY29uZmlnLCB1c2VNb25pdG9yaW5nKTtcblxuICBpZiAoIXVzZU1vbml0b3JpbmcpIHtcbiAgICAvLyBjb3B5IGNhbGN1bGF0ZWQgY29uZmlncyBpbnRvIG1vbml0b3JpbmdcbiAgICBjb25maWcuc2V0KHByZWZpeCwgcGljayhjb25maWdPYmplY3RzLm9wdGlvbnMsICd1cmwnLCAndXNlcm5hbWUnLCAncGFzc3dvcmQnLCAnY3VzdG9tSGVhZGVycycpKTtcbiAgICBjb25maWcuc2V0KGAke3ByZWZpeH0uc3NsYCwgcGljayhjb25maWdPYmplY3RzLnNzbCwgJ3ZlcmlmeScsICdjZXJ0JywgJ2tleScsICdjYScpKTtcbiAgfVxuXG4gIGRlbGV0ZSBjb25maWdPYmplY3RzLm9wdGlvbnMuc3NsO1xuICBkZWxldGUgY29uZmlnT2JqZWN0cy5zc2wudmVyaWZ5O1xuXG4gIHJldHVybiB7XG4gICAgLi4uY29uZmlnT2JqZWN0cyxcbiAgICByZWFkRmlsZSAvLyBmb3IgdGVzdHNcbiAgfTtcbn1cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/lib/es_client/init_config.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;qBAwCwB,UAAU;;;;sBAxCN,QAAQ;;mBACpB,KAAK;;;;kBACQ,IAAI;;AAEjC,IAAM,QAAQ,GAAG,SAAX,QAAQ,CAAG,IAAI;SAAI,sBAAa,IAAI,EAAE,MAAM,CAAC;CAAA,CAAC;;AAEpD,SAAS,gBAAgB,CAAC,MAAM,EAAE,aAAa,EAAE;AAC/C,MAAM,gBAAgB,GAAG,MAAM,CAAC,GAAG,CAAC,gCAAgC,CAAC,CAAC;AACtE,MAAM,YAAY,GAAG,aAAa,GAAG,gBAAgB,GAAG,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC;AACpF,MAAM,QAAQ,GAAG,kBAAK,YAAY,EAAE,KAAK,EAAE,UAAU,EAAE,UAAU,EAAE,KAAK,EAAE,eAAe,CAAC,CAAC;;AAE3F,MAAM,OAAO,gBACR,kBAAK,gBAAgB,EAAE,YAAY,EAAE,aAAa,EAAE,gBAAgB,CAAC,EACrE,QAAQ;AACX,gBAAY,EAAE,aAAa,GAAG,YAAY,GAAG,YAAY;AACzD,aAAS,EAAE,IAAI;IAChB,CAAC;;AAEF,MAAM,SAAS,GAAG,iBAAI,KAAK,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC;AACzC,MAAM,OAAO,GAAG,mBAAM,SAAS,CAAC,CAAC;AACjC,MAAI,OAAO,CAAC,QAAQ,IAAI,OAAO,CAAC,QAAQ,EAAE;AACxC,WAAO,CAAC,IAAI,GAAM,OAAO,CAAC,QAAQ,SAAI,OAAO,CAAC,QAAQ,AAAE,CAAC;GAC1D;;AAED,MAAM,GAAG,GAAG,OAAO,CAAC,GAAG,CAAC;AACxB,KAAG,CAAC,kBAAkB,GAAG,GAAG,CAAC,MAAM,CAAC;AACpC,MAAI,GAAG,CAAC,IAAI,IAAI,GAAG,CAAC,GAAG,EAAE;AACvB,OAAG,CAAC,IAAI,GAAG,QAAQ,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;AAC9B,OAAG,CAAC,GAAG,GAAG,QAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;GAC7B;AACD,MAAI,GAAG,CAAC,EAAE,EAAE;AACV,OAAG,CAAC,EAAE,GAAG,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;GAC/B;;AAED,SAAO,EAAE,OAAO,EAAP,OAAO,EAAE,SAAS,EAAT,SAAS,EAAE,OAAO,EAAP,OAAO,EAAE,GAAG,EAAH,GAAG,EAAE,CAAC;CAC7C;;;;;;AAKc,SAAS,UAAU,CAAC,MAAM,EAAE;AACzC,MAAM,MAAM,GAAG,gCAAgC,CAAC;AAChD,MAAM,aAAa,GAAG,OAAO,CAAC,MAAM,CAAC,GAAG,CAAI,MAAM,UAAO,CAAC,CAAC;AAC3D,MAAM,aAAa,GAAG,gBAAgB,CAAC,MAAM,EAAE,aAAa,CAAC,CAAC;;AAE9D,MAAI,CAAC,aAAa,EAAE;;AAElB,UAAM,CAAC,GAAG,CAAC,MAAM,EAAE,kBAAK,aAAa,CAAC,OAAO,EAAE,KAAK,EAAE,UAAU,EAAE,UAAU,EAAE,eAAe,CAAC,CAAC,CAAC;AAChG,UAAM,CAAC,GAAG,CAAI,MAAM,WAAQ,kBAAK,aAAa,CAAC,GAAG,EAAE,QAAQ,EAAE,MAAM,EAAE,KAAK,EAAE,IAAI,CAAC,CAAC,CAAC;GACrF;;AAED,SAAO,aAAa,CAAC,OAAO,CAAC,GAAG,CAAC;AACjC,SAAO,aAAa,CAAC,GAAG,CAAC,MAAM,CAAC;;AAEhC,sBACK,aAAa;AAChB,YAAQ,EAAR,QAAQ;AAAA,KACR;CACH",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/lib/es_client/init_config.js",
      "sourcesContent": [
        "import { pick, clone } from 'lodash';\nimport url from 'url';\nimport { readFileSync } from 'fs';\n\nconst readFile = file => readFileSync(file, 'utf8');\n\nfunction getConfigObjects(config, useMonitoring) {\n  const monitoringConfig = config.get('xpack.monitoring.elasticsearch');\n  const configSource = useMonitoring ? monitoringConfig : config.get('elasticsearch');\n  const esConfig = pick(configSource, 'url', 'username', 'password', 'ssl', 'customHeaders');\n\n  const options = {\n    ...pick(monitoringConfig, 'apiVersion', 'pingTimeout', 'requestTimeout'),\n    ...esConfig,\n    configSource: useMonitoring ? 'monitoring' : 'production', // for logging and tests\n    keepAlive: true\n  };\n\n  const noAuthUri = url.parse(options.url);\n  const authUri = clone(noAuthUri);\n  if (options.username && options.password) {\n    authUri.auth = `${options.username}:${options.password}`;\n  }\n\n  const ssl = options.ssl;\n  ssl.rejectUnauthorized = ssl.verify;\n  if (ssl.cert && ssl.key) {\n    ssl.cert = readFile(ssl.cert);\n    ssl.key = readFile(ssl.key);\n  }\n  if (ssl.ca) {\n    ssl.ca = ssl.ca.map(readFile);\n  }\n\n  return { options, noAuthUri, authUri, ssl };\n}\n\n/* If Monitoring cluster connection is configured, use that. Otherwise default\n * to the cluster connection config set for Kibana and copy all the Kibana\n* config values to monitoring. */\nexport default function initConfig(config) {\n  const prefix = 'xpack.monitoring.elasticsearch';\n  const useMonitoring = Boolean(config.get(`${prefix}.url`));\n  const configObjects = getConfigObjects(config, useMonitoring);\n\n  if (!useMonitoring) {\n    // copy calculated configs into monitoring\n    config.set(prefix, pick(configObjects.options, 'url', 'username', 'password', 'customHeaders'));\n    config.set(`${prefix}.ssl`, pick(configObjects.ssl, 'verify', 'cert', 'key', 'ca'));\n  }\n\n  delete configObjects.options.ssl;\n  delete configObjects.ssl.verify;\n\n  return {\n    ...configObjects,\n    readFile // for tests\n  };\n}\n"
      ]
    },
    "mtime": 1485775624445
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/kibana_monitoring/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./lib/ops_buffer",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "opsBuffer"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _libOps_buffer = require('./lib/ops_buffer');\n\nvar _libOps_buffer2 = _interopRequireDefault(_libOps_buffer);\n\nexports['default'] = function (serverInfo, server) {\n  var config = server.config();\n  var xpackMainPlugin = server.plugins.xpack_main;\n  var isEnabledInEs = xpackMainPlugin.info.feature('monitoring').isEnabled();\n\n  if (isEnabledInEs && config.get('xpack.monitoring.kibana.collection.enabled')) {\n    (function () {\n      var onOps = function onOps(event) {\n        buffer.push(event);\n      };\n\n      var buffer = (0, _libOps_buffer2['default'])(serverInfo, server);\n      var monitor = server.plugins['even-better'].monitor;\n      var opsHandler = undefined;\n\n      server.plugins.elasticsearch.status.on('green', function () {\n        monitor.on('ops', onOps);\n        opsHandler = setInterval(function () {\n          return buffer.flush();\n        }, config.get('xpack.monitoring.kibana.collection.interval'));\n      });\n\n      server.plugins.elasticsearch.status.on('red', function () {\n        monitor.removeListener('ops', onOps);\n        clearInterval(opsHandler);\n      });\n    })();\n  }\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL21vbml0b3Jpbmcvc2VydmVyL2tpYmFuYV9tb25pdG9yaW5nL2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OzZCQUFzQixrQkFBa0I7Ozs7cUJBRXpCLFVBQVUsVUFBVSxFQUFFLE1BQU0sRUFBRTtBQUMzQyxNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDL0IsTUFBTSxlQUFlLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFDbEQsTUFBTSxhQUFhLEdBQUcsZUFBZSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUMsU0FBUyxFQUFFLENBQUM7O0FBRTdFLE1BQUksYUFBYSxJQUFJLE1BQU0sQ0FBQyxHQUFHLENBQUMsNENBQTRDLENBQUMsRUFBRTs7VUFLcEUsS0FBSyxHQUFkLFNBQVMsS0FBSyxDQUFDLEtBQUssRUFBRTtBQUNwQixjQUFNLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDO09BQ3BCOztBQU5ELFVBQU0sTUFBTSxHQUFHLGdDQUFVLFVBQVUsRUFBRSxNQUFNLENBQUMsQ0FBQztBQUM3QyxVQUFNLE9BQU8sR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxDQUFDLE9BQU8sQ0FBQztBQUN0RCxVQUFJLFVBQVUsWUFBQSxDQUFDOztBQU1mLFlBQU0sQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsT0FBTyxFQUFFLFlBQU07QUFDcEQsZUFBTyxDQUFDLEVBQUUsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDekIsa0JBQVUsR0FBRyxXQUFXLENBQUM7aUJBQU0sTUFBTSxDQUFDLEtBQUssRUFBRTtTQUFBLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyw2Q0FBNkMsQ0FBQyxDQUFDLENBQUM7T0FDM0csQ0FBQyxDQUFDOztBQUVILFlBQU0sQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLFlBQU07QUFDbEQsZUFBTyxDQUFDLGNBQWMsQ0FBQyxLQUFLLEVBQUUsS0FBSyxDQUFDLENBQUM7QUFDckMscUJBQWEsQ0FBQyxVQUFVLENBQUMsQ0FBQztPQUMzQixDQUFDLENBQUM7O0dBQ0o7Q0FDRiIsImZpbGUiOiIvaG9tZS91YnVudHUvd29ya3NwYWNlL2tpYmFuYS01LjAuMi1saW51eC14ODZfNjQvcGx1Z2lucy94LXBhY2svcGx1Z2lucy9tb25pdG9yaW5nL3NlcnZlci9raWJhbmFfbW9uaXRvcmluZy9pbmRleC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBvcHNCdWZmZXIgZnJvbSAnLi9saWIvb3BzX2J1ZmZlcic7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIChzZXJ2ZXJJbmZvLCBzZXJ2ZXIpIHtcbiAgY29uc3QgY29uZmlnID0gc2VydmVyLmNvbmZpZygpO1xuICBjb25zdCB4cGFja01haW5QbHVnaW4gPSBzZXJ2ZXIucGx1Z2lucy54cGFja19tYWluO1xuICBjb25zdCBpc0VuYWJsZWRJbkVzID0geHBhY2tNYWluUGx1Z2luLmluZm8uZmVhdHVyZSgnbW9uaXRvcmluZycpLmlzRW5hYmxlZCgpO1xuXG4gIGlmIChpc0VuYWJsZWRJbkVzICYmIGNvbmZpZy5nZXQoJ3hwYWNrLm1vbml0b3Jpbmcua2liYW5hLmNvbGxlY3Rpb24uZW5hYmxlZCcpKSB7XG4gICAgY29uc3QgYnVmZmVyID0gb3BzQnVmZmVyKHNlcnZlckluZm8sIHNlcnZlcik7XG4gICAgY29uc3QgbW9uaXRvciA9IHNlcnZlci5wbHVnaW5zWydldmVuLWJldHRlciddLm1vbml0b3I7XG4gICAgbGV0IG9wc0hhbmRsZXI7XG5cbiAgICBmdW5jdGlvbiBvbk9wcyhldmVudCkge1xuICAgICAgYnVmZmVyLnB1c2goZXZlbnQpO1xuICAgIH1cblxuICAgIHNlcnZlci5wbHVnaW5zLmVsYXN0aWNzZWFyY2guc3RhdHVzLm9uKCdncmVlbicsICgpID0+IHtcbiAgICAgIG1vbml0b3Iub24oJ29wcycsIG9uT3BzKTtcbiAgICAgIG9wc0hhbmRsZXIgPSBzZXRJbnRlcnZhbCgoKSA9PiBidWZmZXIuZmx1c2goKSwgY29uZmlnLmdldCgneHBhY2subW9uaXRvcmluZy5raWJhbmEuY29sbGVjdGlvbi5pbnRlcnZhbCcpKTtcbiAgICB9KTtcblxuICAgIHNlcnZlci5wbHVnaW5zLmVsYXN0aWNzZWFyY2guc3RhdHVzLm9uKCdyZWQnLCAoKSA9PiB7XG4gICAgICBtb25pdG9yLnJlbW92ZUxpc3RlbmVyKCdvcHMnLCBvbk9wcyk7XG4gICAgICBjbGVhckludGVydmFsKG9wc0hhbmRsZXIpO1xuICAgIH0pO1xuICB9XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/kibana_monitoring/index.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;6BAAsB,kBAAkB;;;;qBAEzB,UAAU,UAAU,EAAE,MAAM,EAAE;AAC3C,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;AAC/B,MAAM,eAAe,GAAG,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC;AAClD,MAAM,aAAa,GAAG,eAAe,CAAC,IAAI,CAAC,OAAO,CAAC,YAAY,CAAC,CAAC,SAAS,EAAE,CAAC;;AAE7E,MAAI,aAAa,IAAI,MAAM,CAAC,GAAG,CAAC,4CAA4C,CAAC,EAAE;;UAKpE,KAAK,GAAd,SAAS,KAAK,CAAC,KAAK,EAAE;AACpB,cAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;OACpB;;AAND,UAAM,MAAM,GAAG,gCAAU,UAAU,EAAE,MAAM,CAAC,CAAC;AAC7C,UAAM,OAAO,GAAG,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,CAAC,OAAO,CAAC;AACtD,UAAI,UAAU,YAAA,CAAC;;AAMf,YAAM,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,EAAE,YAAM;AACpD,eAAO,CAAC,EAAE,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;AACzB,kBAAU,GAAG,WAAW,CAAC;iBAAM,MAAM,CAAC,KAAK,EAAE;SAAA,EAAE,MAAM,CAAC,GAAG,CAAC,6CAA6C,CAAC,CAAC,CAAC;OAC3G,CAAC,CAAC;;AAEH,YAAM,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,CAAC,KAAK,EAAE,YAAM;AAClD,eAAO,CAAC,cAAc,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;AACrC,qBAAa,CAAC,UAAU,CAAC,CAAC;OAC3B,CAAC,CAAC;;GACJ;CACF",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/kibana_monitoring/index.js",
      "sourcesContent": [
        "import opsBuffer from './lib/ops_buffer';\n\nexport default function (serverInfo, server) {\n  const config = server.config();\n  const xpackMainPlugin = server.plugins.xpack_main;\n  const isEnabledInEs = xpackMainPlugin.info.feature('monitoring').isEnabled();\n\n  if (isEnabledInEs && config.get('xpack.monitoring.kibana.collection.enabled')) {\n    const buffer = opsBuffer(serverInfo, server);\n    const monitor = server.plugins['even-better'].monitor;\n    let opsHandler;\n\n    function onOps(event) {\n      buffer.push(event);\n    }\n\n    server.plugins.elasticsearch.status.on('green', () => {\n      monitor.on('ops', onOps);\n      opsHandler = setInterval(() => buffer.flush(), config.get('xpack.monitoring.kibana.collection.interval'));\n    });\n\n    server.plugins.elasticsearch.status.on('red', () => {\n      monitor.removeListener('ops', onOps);\n      clearInterval(opsHandler);\n    });\n  }\n}\n"
      ]
    },
    "mtime": 1485775596249
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/kibana_monitoring/lib/ops_buffer.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "../../../lib/constants",
            "imported": [
              "MONITORING_SYSTEM_API_VERSION",
              "KIBANA_SYSTEM_ID",
              "KIBANA_STATS_TYPE"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "MONITORING_SYSTEM_API_VERSION",
                "local": "MONITORING_SYSTEM_API_VERSION"
              },
              {
                "kind": "named",
                "imported": "KIBANA_SYSTEM_ID",
                "local": "KIBANA_SYSTEM_ID"
              },
              {
                "kind": "named",
                "imported": "KIBANA_STATS_TYPE",
                "local": "KIBANA_STATS_TYPE"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "./map_event",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mapEvent"
              }
            ]
          },
          {
            "source": "./monitoring_bulk",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "monitoringBulk"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "opsBuffer",
            "serverInfo",
            "server"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "opsBuffer",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "serverInfo",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "server",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = opsBuffer;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _libConstants = require('../../../lib/constants');\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _map_event = require('./map_event');\n\nvar _map_event2 = _interopRequireDefault(_map_event);\n\nvar _monitoring_bulk = require('./monitoring_bulk');\n\nvar _monitoring_bulk2 = _interopRequireDefault(_monitoring_bulk);\n\nfunction opsBuffer(serverInfo, server) {\n  var config = server.config();\n  var interval = config.get('xpack.monitoring.kibana.collection.interval') + 'ms';\n  var queue = [];\n  var client = server.plugins.elasticsearch.createClient({\n    plugins: [_monitoring_bulk2['default']]\n  });\n  return {\n    push: function push(event) {\n      var payload = (0, _map_event2['default'])(event, config, serverInfo);\n      return queue.push({ index: { _type: _libConstants.KIBANA_STATS_TYPE } }, payload);\n    },\n    flush: function flush() {\n      if (!queue.length) return;\n      var lastOp = queue[queue.length - 1];\n      var body = queue.splice(0);\n\n      //Push the latest ops data to .monitoring-data\n      body.push({\n        index: {\n          _index: '_data',\n          _type: _libConstants.KIBANA_SYSTEM_ID,\n          _id: _lodash2['default'].get(lastOp, 'kibana.uuid')\n        }\n      }, lastOp);\n      return client.monitoring.bulk({\n        system_id: _libConstants.KIBANA_SYSTEM_ID,\n        system_api_version: _libConstants.MONITORING_SYSTEM_API_VERSION,\n        interval: interval,\n        body: body\n      })['catch'](function (err) {\n        var monitoringTag = config.get('xpack.monitoring.loggingTag');\n        server.log(['error', monitoringTag], err);\n      });\n    }\n  };\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL21vbml0b3Jpbmcvc2VydmVyL2tpYmFuYV9tb25pdG9yaW5nL2xpYi9vcHNfYnVmZmVyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O3FCQU93QixTQUFTOzs7OzRCQUwxQix3QkFBd0I7O3NCQUNqQixRQUFROzs7O3lCQUNELGFBQWE7Ozs7K0JBQ1AsbUJBQW1COzs7O0FBRS9CLFNBQVMsU0FBUyxDQUFDLFVBQVUsRUFBRSxNQUFNLEVBQUU7QUFDcEQsTUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQy9CLE1BQU0sUUFBUSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsNkNBQTZDLENBQUMsR0FBRyxJQUFJLENBQUM7QUFDbEYsTUFBTSxLQUFLLEdBQUcsRUFBRSxDQUFDO0FBQ2pCLE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLFlBQVksQ0FBQztBQUN2RCxXQUFPLEVBQUUsOEJBQWdCO0dBQzFCLENBQUMsQ0FBQztBQUNILFNBQU87QUFDTCxRQUFJLEVBQUEsY0FBQyxLQUFLLEVBQUU7QUFDVixVQUFNLE9BQU8sR0FBRyw0QkFBUyxLQUFLLEVBQUUsTUFBTSxFQUFFLFVBQVUsQ0FBQyxDQUFDO0FBQ3BELGFBQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLEtBQUssRUFBRSxFQUFDLEtBQUssaUNBQW1CLEVBQUMsRUFBQyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0tBQ2xFO0FBQ0QsU0FBSyxFQUFBLGlCQUFHO0FBQ04sVUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsT0FBTztBQUMxQixVQUFNLE1BQU0sR0FBRyxLQUFLLENBQUMsS0FBSyxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQztBQUN2QyxVQUFNLElBQUksR0FBRyxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDOzs7QUFHN0IsVUFBSSxDQUFDLElBQUksQ0FBQztBQUNSLGFBQUssRUFBRTtBQUNMLGdCQUFNLEVBQUUsT0FBTztBQUNmLGVBQUssZ0NBQWtCO0FBQ3ZCLGFBQUcsRUFBRSxvQkFBRSxHQUFHLENBQUMsTUFBTSxFQUFFLGFBQWEsQ0FBQztTQUNsQztPQUNGLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDWCxhQUFPLE1BQU0sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDO0FBQzVCLGlCQUFTLGdDQUFrQjtBQUMzQiwwQkFBa0IsNkNBQStCO0FBQ2pELGdCQUFRLEVBQVIsUUFBUTtBQUNSLFlBQUksRUFBSixJQUFJO09BQ0wsQ0FBQyxTQUNJLENBQUMsVUFBQyxHQUFHLEVBQUs7QUFDZCxZQUFNLGFBQWEsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLDZCQUE2QixDQUFDLENBQUM7QUFDaEUsY0FBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLE9BQU8sRUFBRSxhQUFhLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQztPQUMzQyxDQUFDLENBQUM7S0FDSjtHQUNGLENBQUM7Q0FDSCIsImZpbGUiOiIvaG9tZS91YnVudHUvd29ya3NwYWNlL2tpYmFuYS01LjAuMi1saW51eC14ODZfNjQvcGx1Z2lucy94LXBhY2svcGx1Z2lucy9tb25pdG9yaW5nL3NlcnZlci9raWJhbmFfbW9uaXRvcmluZy9saWIvb3BzX2J1ZmZlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7XG4gIE1PTklUT1JJTkdfU1lTVEVNX0FQSV9WRVJTSU9OLCBLSUJBTkFfU1lTVEVNX0lELCBLSUJBTkFfU1RBVFNfVFlQRVxufSBmcm9tICcuLi8uLi8uLi9saWIvY29uc3RhbnRzJztcbmltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgbWFwRXZlbnQgZnJvbSAnLi9tYXBfZXZlbnQnO1xuaW1wb3J0IG1vbml0b3JpbmdCdWxrIGZyb20gJy4vbW9uaXRvcmluZ19idWxrJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gb3BzQnVmZmVyKHNlcnZlckluZm8sIHNlcnZlcikge1xuICBjb25zdCBjb25maWcgPSBzZXJ2ZXIuY29uZmlnKCk7XG4gIGNvbnN0IGludGVydmFsID0gY29uZmlnLmdldCgneHBhY2subW9uaXRvcmluZy5raWJhbmEuY29sbGVjdGlvbi5pbnRlcnZhbCcpICsgJ21zJztcbiAgY29uc3QgcXVldWUgPSBbXTtcbiAgY29uc3QgY2xpZW50ID0gc2VydmVyLnBsdWdpbnMuZWxhc3RpY3NlYXJjaC5jcmVhdGVDbGllbnQoe1xuICAgIHBsdWdpbnM6IFttb25pdG9yaW5nQnVsa11cbiAgfSk7XG4gIHJldHVybiB7XG4gICAgcHVzaChldmVudCkge1xuICAgICAgY29uc3QgcGF5bG9hZCA9IG1hcEV2ZW50KGV2ZW50LCBjb25maWcsIHNlcnZlckluZm8pO1xuICAgICAgcmV0dXJuIHF1ZXVlLnB1c2goeyBpbmRleDoge190eXBlOiBLSUJBTkFfU1RBVFNfVFlQRX19LCBwYXlsb2FkKTtcbiAgICB9LFxuICAgIGZsdXNoKCkge1xuICAgICAgaWYgKCFxdWV1ZS5sZW5ndGgpIHJldHVybjtcbiAgICAgIGNvbnN0IGxhc3RPcCA9IHF1ZXVlW3F1ZXVlLmxlbmd0aCAtIDFdO1xuICAgICAgY29uc3QgYm9keSA9IHF1ZXVlLnNwbGljZSgwKTtcblxuICAgICAgLy9QdXNoIHRoZSBsYXRlc3Qgb3BzIGRhdGEgdG8gLm1vbml0b3JpbmctZGF0YVxuICAgICAgYm9keS5wdXNoKHtcbiAgICAgICAgaW5kZXg6IHtcbiAgICAgICAgICBfaW5kZXg6ICdfZGF0YScsXG4gICAgICAgICAgX3R5cGU6IEtJQkFOQV9TWVNURU1fSUQsXG4gICAgICAgICAgX2lkOiBfLmdldChsYXN0T3AsICdraWJhbmEudXVpZCcpXG4gICAgICAgIH1cbiAgICAgIH0sIGxhc3RPcCk7XG4gICAgICByZXR1cm4gY2xpZW50Lm1vbml0b3JpbmcuYnVsayh7XG4gICAgICAgIHN5c3RlbV9pZDogS0lCQU5BX1NZU1RFTV9JRCxcbiAgICAgICAgc3lzdGVtX2FwaV92ZXJzaW9uOiBNT05JVE9SSU5HX1NZU1RFTV9BUElfVkVSU0lPTixcbiAgICAgICAgaW50ZXJ2YWwsXG4gICAgICAgIGJvZHlcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICBjb25zdCBtb25pdG9yaW5nVGFnID0gY29uZmlnLmdldCgneHBhY2subW9uaXRvcmluZy5sb2dnaW5nVGFnJyk7XG4gICAgICAgIHNlcnZlci5sb2coWydlcnJvcicsIG1vbml0b3JpbmdUYWddLCBlcnIpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xufVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/kibana_monitoring/lib/ops_buffer.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAOwB,SAAS;;;;4BAL1B,wBAAwB;;sBACjB,QAAQ;;;;yBACD,aAAa;;;;+BACP,mBAAmB;;;;AAE/B,SAAS,SAAS,CAAC,UAAU,EAAE,MAAM,EAAE;AACpD,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;AAC/B,MAAM,QAAQ,GAAG,MAAM,CAAC,GAAG,CAAC,6CAA6C,CAAC,GAAG,IAAI,CAAC;AAClF,MAAM,KAAK,GAAG,EAAE,CAAC;AACjB,MAAM,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,YAAY,CAAC;AACvD,WAAO,EAAE,8BAAgB;GAC1B,CAAC,CAAC;AACH,SAAO;AACL,QAAI,EAAA,cAAC,KAAK,EAAE;AACV,UAAM,OAAO,GAAG,4BAAS,KAAK,EAAE,MAAM,EAAE,UAAU,CAAC,CAAC;AACpD,aAAO,KAAK,CAAC,IAAI,CAAC,EAAE,KAAK,EAAE,EAAC,KAAK,iCAAmB,EAAC,EAAC,EAAE,OAAO,CAAC,CAAC;KAClE;AACD,SAAK,EAAA,iBAAG;AACN,UAAI,CAAC,KAAK,CAAC,MAAM,EAAE,OAAO;AAC1B,UAAM,MAAM,GAAG,KAAK,CAAC,KAAK,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;AACvC,UAAM,IAAI,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;;;AAG7B,UAAI,CAAC,IAAI,CAAC;AACR,aAAK,EAAE;AACL,gBAAM,EAAE,OAAO;AACf,eAAK,gCAAkB;AACvB,aAAG,EAAE,oBAAE,GAAG,CAAC,MAAM,EAAE,aAAa,CAAC;SAClC;OACF,EAAE,MAAM,CAAC,CAAC;AACX,aAAO,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC;AAC5B,iBAAS,gCAAkB;AAC3B,0BAAkB,6CAA+B;AACjD,gBAAQ,EAAR,QAAQ;AACR,YAAI,EAAJ,IAAI;OACL,CAAC,SACI,CAAC,UAAC,GAAG,EAAK;AACd,YAAM,aAAa,GAAG,MAAM,CAAC,GAAG,CAAC,6BAA6B,CAAC,CAAC;AAChE,cAAM,CAAC,GAAG,CAAC,CAAC,OAAO,EAAE,aAAa,CAAC,EAAE,GAAG,CAAC,CAAC;OAC3C,CAAC,CAAC;KACJ;GACF,CAAC;CACH",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/kibana_monitoring/lib/ops_buffer.js",
      "sourcesContent": [
        "import {\n  MONITORING_SYSTEM_API_VERSION, KIBANA_SYSTEM_ID, KIBANA_STATS_TYPE\n} from '../../../lib/constants';\nimport _ from 'lodash';\nimport mapEvent from './map_event';\nimport monitoringBulk from './monitoring_bulk';\n\nexport default function opsBuffer(serverInfo, server) {\n  const config = server.config();\n  const interval = config.get('xpack.monitoring.kibana.collection.interval') + 'ms';\n  const queue = [];\n  const client = server.plugins.elasticsearch.createClient({\n    plugins: [monitoringBulk]\n  });\n  return {\n    push(event) {\n      const payload = mapEvent(event, config, serverInfo);\n      return queue.push({ index: {_type: KIBANA_STATS_TYPE}}, payload);\n    },\n    flush() {\n      if (!queue.length) return;\n      const lastOp = queue[queue.length - 1];\n      const body = queue.splice(0);\n\n      //Push the latest ops data to .monitoring-data\n      body.push({\n        index: {\n          _index: '_data',\n          _type: KIBANA_SYSTEM_ID,\n          _id: _.get(lastOp, 'kibana.uuid')\n        }\n      }, lastOp);\n      return client.monitoring.bulk({\n        system_id: KIBANA_SYSTEM_ID,\n        system_api_version: MONITORING_SYSTEM_API_VERSION,\n        interval,\n        body\n      })\n      .catch((err) => {\n        const monitoringTag = config.get('xpack.monitoring.loggingTag');\n        server.log(['error', monitoringTag], err);\n      });\n    }\n  };\n}\n"
      ]
    },
    "mtime": 1485775624445
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/lib/constants.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "MONITORING_SYSTEM_API_VERSION",
            "KIBANA_SYSTEM_ID",
            "KIBANA_STATS_TYPE",
            "PHONE_HOME_FEATURE",
            "PHONE_HOME_NOTIFICATION_SEEN"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "MONITORING_SYSTEM_API_VERSION",
              "exported": "MONITORING_SYSTEM_API_VERSION"
            },
            {
              "kind": "local",
              "local": "KIBANA_SYSTEM_ID",
              "exported": "KIBANA_SYSTEM_ID"
            },
            {
              "kind": "local",
              "local": "KIBANA_STATS_TYPE",
              "exported": "KIBANA_STATS_TYPE"
            },
            {
              "kind": "local",
              "local": "PHONE_HOME_FEATURE",
              "exported": "PHONE_HOME_FEATURE"
            },
            {
              "kind": "local",
              "local": "PHONE_HOME_NOTIFICATION_SEEN",
              "exported": "PHONE_HOME_NOTIFICATION_SEEN"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "/**\n * The Monitoring API version is the expected API format that we export and expect to import.\n * @type {string}\n */\n'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar MONITORING_SYSTEM_API_VERSION = '2';\nexports.MONITORING_SYSTEM_API_VERSION = MONITORING_SYSTEM_API_VERSION;\n/**\n * The name of the Kibana System ID used to publish Kibana stats through the Monitoring system.\n * @type {string}\n */\nvar KIBANA_SYSTEM_ID = 'kibana';\nexports.KIBANA_SYSTEM_ID = KIBANA_SYSTEM_ID;\n/**\n * The type name used within the Monitoring index to publish Kibana stats.\n * @type {string}\n */\nvar KIBANA_STATS_TYPE = 'kibana_stats';\n\nexports.KIBANA_STATS_TYPE = KIBANA_STATS_TYPE;\n/*\n * name of the boolean feature flag for phone home in local storage\n */\nvar PHONE_HOME_FEATURE = 'report';\nexports.PHONE_HOME_FEATURE = PHONE_HOME_FEATURE;\n/*\n * name of the boolean for phone home if the notification has been dismissed\n */\nvar PHONE_HOME_NOTIFICATION_SEEN = 'report_notification_seen';\nexports.PHONE_HOME_NOTIFICATION_SEEN = PHONE_HOME_NOTIFICATION_SEEN;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL21vbml0b3JpbmcvbGliL2NvbnN0YW50cy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7QUFJTyxJQUFNLDZCQUE2QixHQUFHLEdBQUcsQ0FBQzs7Ozs7O0FBSzFDLElBQU0sZ0JBQWdCLEdBQUcsUUFBUSxDQUFDOzs7Ozs7QUFLbEMsSUFBTSxpQkFBaUIsR0FBRyxjQUFjLENBQUM7Ozs7OztBQUt6QyxJQUFNLGtCQUFrQixHQUFHLFFBQVEsQ0FBQzs7Ozs7QUFJcEMsSUFBTSw0QkFBNEIsR0FBRywwQkFBMEIsQ0FBQyIsImZpbGUiOiIvaG9tZS91YnVudHUvd29ya3NwYWNlL2tpYmFuYS01LjAuMi1saW51eC14ODZfNjQvcGx1Z2lucy94LXBhY2svcGx1Z2lucy9tb25pdG9yaW5nL2xpYi9jb25zdGFudHMuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRoZSBNb25pdG9yaW5nIEFQSSB2ZXJzaW9uIGlzIHRoZSBleHBlY3RlZCBBUEkgZm9ybWF0IHRoYXQgd2UgZXhwb3J0IGFuZCBleHBlY3QgdG8gaW1wb3J0LlxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IE1PTklUT1JJTkdfU1lTVEVNX0FQSV9WRVJTSU9OID0gJzInO1xuLyoqXG4gKiBUaGUgbmFtZSBvZiB0aGUgS2liYW5hIFN5c3RlbSBJRCB1c2VkIHRvIHB1Ymxpc2ggS2liYW5hIHN0YXRzIHRocm91Z2ggdGhlIE1vbml0b3Jpbmcgc3lzdGVtLlxuICogQHR5cGUge3N0cmluZ31cbiAqL1xuZXhwb3J0IGNvbnN0IEtJQkFOQV9TWVNURU1fSUQgPSAna2liYW5hJztcbi8qKlxuICogVGhlIHR5cGUgbmFtZSB1c2VkIHdpdGhpbiB0aGUgTW9uaXRvcmluZyBpbmRleCB0byBwdWJsaXNoIEtpYmFuYSBzdGF0cy5cbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cbmV4cG9ydCBjb25zdCBLSUJBTkFfU1RBVFNfVFlQRSA9ICdraWJhbmFfc3RhdHMnO1xuXG4vKlxuICogbmFtZSBvZiB0aGUgYm9vbGVhbiBmZWF0dXJlIGZsYWcgZm9yIHBob25lIGhvbWUgaW4gbG9jYWwgc3RvcmFnZVxuICovXG5leHBvcnQgY29uc3QgUEhPTkVfSE9NRV9GRUFUVVJFID0gJ3JlcG9ydCc7XG4vKlxuICogbmFtZSBvZiB0aGUgYm9vbGVhbiBmb3IgcGhvbmUgaG9tZSBpZiB0aGUgbm90aWZpY2F0aW9uIGhhcyBiZWVuIGRpc21pc3NlZFxuICovXG5leHBvcnQgY29uc3QgUEhPTkVfSE9NRV9OT1RJRklDQVRJT05fU0VFTiA9ICdyZXBvcnRfbm90aWZpY2F0aW9uX3NlZW4nO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/lib/constants.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;AAIO,IAAM,6BAA6B,GAAG,GAAG,CAAC;;;;;;AAK1C,IAAM,gBAAgB,GAAG,QAAQ,CAAC;;;;;;AAKlC,IAAM,iBAAiB,GAAG,cAAc,CAAC;;;;;;AAKzC,IAAM,kBAAkB,GAAG,QAAQ,CAAC;;;;;AAIpC,IAAM,4BAA4B,GAAG,0BAA0B,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/lib/constants.js",
      "sourcesContent": [
        "/**\n * The Monitoring API version is the expected API format that we export and expect to import.\n * @type {string}\n */\nexport const MONITORING_SYSTEM_API_VERSION = '2';\n/**\n * The name of the Kibana System ID used to publish Kibana stats through the Monitoring system.\n * @type {string}\n */\nexport const KIBANA_SYSTEM_ID = 'kibana';\n/**\n * The type name used within the Monitoring index to publish Kibana stats.\n * @type {string}\n */\nexport const KIBANA_STATS_TYPE = 'kibana_stats';\n\n/*\n * name of the boolean feature flag for phone home in local storage\n */\nexport const PHONE_HOME_FEATURE = 'report';\n/*\n * name of the boolean for phone home if the notification has been dismissed\n */\nexport const PHONE_HOME_NOTIFICATION_SEEN = 'report_notification_seen';\n"
      ]
    },
    "mtime": 1485775592461
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/kibana_monitoring/lib/map_event.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./map_requests",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mapRequests"
              }
            ]
          },
          {
            "source": "./map_plugins",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mapPlugins"
              }
            ]
          },
          {
            "source": "./map_response_times",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mapResponseTimes"
              }
            ]
          },
          {
            "source": "./map_concurrent_connections",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mapConcurrents"
              }
            ]
          },
          {
            "source": "v8",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "v8"
              }
            ]
          },
          {
            "source": "moment",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "moment"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "mapEvent",
            "event",
            "config",
            "serverInfo"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "mapEvent",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "event",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "config",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "serverInfo",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = mapEvent;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _map_requests = require('./map_requests');\n\nvar _map_requests2 = _interopRequireDefault(_map_requests);\n\nvar _map_plugins = require('./map_plugins');\n\nvar _map_plugins2 = _interopRequireDefault(_map_plugins);\n\nvar _map_response_times = require('./map_response_times');\n\nvar _map_response_times2 = _interopRequireDefault(_map_response_times);\n\nvar _map_concurrent_connections = require('./map_concurrent_connections');\n\nvar _map_concurrent_connections2 = _interopRequireDefault(_map_concurrent_connections);\n\nvar _v8 = require('v8');\n\nvar _v82 = _interopRequireDefault(_v8);\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction secondsToMilliseconds(seconds) {\n  return seconds * 1000;\n}\n\nvar snapshotRegex = /-snapshot/i;\n\nfunction mapEvent(event, config, serverInfo) {\n  var status = serverInfo.status.toJSON();\n  var heapStatistics = _v82['default'].getHeapStatistics();\n  var heapSizeLimit = heapStatistics.heap_size_limit;\n  return {\n    kibana: {\n      uuid: config.get('server.uuid'),\n      name: config.get('server.name'),\n      host: event.host,\n      transport_address: config.get('server.host') + ':' + config.get('server.port'),\n      version: serverInfo.version.replace(snapshotRegex, ''),\n      snapshot: snapshotRegex.test(serverInfo.version),\n      status: _lodash2['default'].get(status, 'overall.state'),\n      statuses: (0, _map_plugins2['default'])(status.statuses)\n    },\n    os: {\n      load: {\n        '1m': event.osload[0],\n        '5m': event.osload[1],\n        '15m': event.osload[2]\n      },\n      memory: {\n        total_in_bytes: event.osmem.total,\n        free_in_bytes: event.osmem.free,\n        used_in_bytes: event.osmem.total - event.osmem.free\n      },\n      uptime_in_millis: secondsToMilliseconds(event.osup)\n    },\n    process: {\n      memory: {\n        heap: {\n          total_in_bytes: event.psmem.heapTotal,\n          used_in_bytes: event.psmem.heapUsed,\n          size_limit: heapSizeLimit\n        },\n        resident_set_size_in_bytes: event.psmem.rss\n      },\n      event_loop_delay: event.psdelay,\n      uptime_in_millis: secondsToMilliseconds(event.psup)\n    },\n    sockets: event.sockets,\n    timestamp: _moment2['default'].utc().toISOString(),\n    requests: (0, _map_requests2['default'])(event.requests),\n    response_times: (0, _map_response_times2['default'])(event.responseTimes),\n    concurrent_connections: (0, _map_concurrent_connections2['default'])(event.concurrents)\n  };\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL21vbml0b3Jpbmcvc2VydmVyL2tpYmFuYV9tb25pdG9yaW5nL2xpYi9tYXBfZXZlbnQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7cUJBY3dCLFFBQVE7Ozs7NEJBZFIsZ0JBQWdCOzs7OzJCQUNqQixlQUFlOzs7O2tDQUNULHNCQUFzQjs7OzswQ0FDeEIsOEJBQThCOzs7O2tCQUMxQyxJQUFJOzs7O3NCQUVBLFFBQVE7Ozs7c0JBQ2IsUUFBUTs7OztBQUV0QixTQUFTLHFCQUFxQixDQUFDLE9BQU8sRUFBRTtBQUN0QyxTQUFPLE9BQU8sR0FBRyxJQUFJLENBQUM7Q0FDdkI7O0FBRUQsSUFBTSxhQUFhLEdBQUcsWUFBWSxDQUFDOztBQUNwQixTQUFTLFFBQVEsQ0FBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLFVBQVUsRUFBRTtBQUMxRCxNQUFNLE1BQU0sR0FBRyxVQUFVLENBQUMsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDO0FBQzFDLE1BQU0sY0FBYyxHQUFHLGdCQUFHLGlCQUFpQixFQUFFLENBQUM7QUFDOUMsTUFBTSxhQUFhLEdBQUcsY0FBYyxDQUFDLGVBQWUsQ0FBQztBQUNyRCxTQUFPO0FBQ0wsVUFBTSxFQUFFO0FBQ04sVUFBSSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsYUFBYSxDQUFDO0FBQy9CLFVBQUksRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQztBQUMvQixVQUFJLEVBQUUsS0FBSyxDQUFDLElBQUk7QUFDaEIsdUJBQWlCLEVBQUssTUFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUMsU0FBSSxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQyxBQUFFO0FBQzlFLGFBQU8sRUFBRSxVQUFVLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxhQUFhLEVBQUUsRUFBRSxDQUFDO0FBQ3RELGNBQVEsRUFBRSxhQUFhLENBQUMsSUFBSSxDQUFDLFVBQVUsQ0FBQyxPQUFPLENBQUM7QUFDaEQsWUFBTSxFQUFFLG9CQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsZUFBZSxDQUFDO0FBQ3RDLGNBQVEsRUFBRSw4QkFBVyxNQUFNLENBQUMsUUFBUSxDQUFDO0tBQ3RDO0FBQ0QsTUFBRSxFQUFFO0FBQ0YsVUFBSSxFQUFFO0FBQ0osWUFBSSxFQUFFLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUFDO0FBQ3JCLFlBQUksRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQztBQUNyQixhQUFLLEVBQUUsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUM7T0FDdkI7QUFDRCxZQUFNLEVBQUU7QUFDTixzQkFBYyxFQUFFLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSztBQUNqQyxxQkFBYSxFQUFFLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSTtBQUMvQixxQkFBYSxFQUFFLEtBQUssQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQyxLQUFLLENBQUMsSUFBSTtPQUNwRDtBQUNELHNCQUFnQixFQUFFLHFCQUFxQixDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUM7S0FDcEQ7QUFDRCxXQUFPLEVBQUU7QUFDUCxZQUFNLEVBQUU7QUFDTixZQUFJLEVBQUU7QUFDSix3QkFBYyxFQUFFLEtBQUssQ0FBQyxLQUFLLENBQUMsU0FBUztBQUNyQyx1QkFBYSxFQUFFLEtBQUssQ0FBQyxLQUFLLENBQUMsUUFBUTtBQUNuQyxvQkFBVSxFQUFFLGFBQWE7U0FDMUI7QUFDRCxrQ0FBMEIsRUFBRSxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUc7T0FDNUM7QUFDRCxzQkFBZ0IsRUFBRSxLQUFLLENBQUMsT0FBTztBQUMvQixzQkFBZ0IsRUFBRSxxQkFBcUIsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDO0tBQ3BEO0FBQ0QsV0FBTyxFQUFFLEtBQUssQ0FBQyxPQUFPO0FBQ3RCLGFBQVMsRUFBRSxvQkFBTyxHQUFHLEVBQUUsQ0FBQyxXQUFXLEVBQUU7QUFDckMsWUFBUSxFQUFFLCtCQUFZLEtBQUssQ0FBQyxRQUFRLENBQUM7QUFDckMsa0JBQWMsRUFBRSxxQ0FBaUIsS0FBSyxDQUFDLGFBQWEsQ0FBQztBQUNyRCwwQkFBc0IsRUFBRSw2Q0FBZSxLQUFLLENBQUMsV0FBVyxDQUFDO0dBQzFELENBQUM7Q0FDSCIsImZpbGUiOiIvaG9tZS91YnVudHUvd29ya3NwYWNlL2tpYmFuYS01LjAuMi1saW51eC14ODZfNjQvcGx1Z2lucy94LXBhY2svcGx1Z2lucy9tb25pdG9yaW5nL3NlcnZlci9raWJhbmFfbW9uaXRvcmluZy9saWIvbWFwX2V2ZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1hcFJlcXVlc3RzIGZyb20gJy4vbWFwX3JlcXVlc3RzJztcbmltcG9ydCBtYXBQbHVnaW5zIGZyb20gJy4vbWFwX3BsdWdpbnMnO1xuaW1wb3J0IG1hcFJlc3BvbnNlVGltZXMgZnJvbSAnLi9tYXBfcmVzcG9uc2VfdGltZXMnO1xuaW1wb3J0IG1hcENvbmN1cnJlbnRzIGZyb20gJy4vbWFwX2NvbmN1cnJlbnRfY29ubmVjdGlvbnMnO1xuaW1wb3J0IHY4IGZyb20gJ3Y4JztcblxuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxuZnVuY3Rpb24gc2Vjb25kc1RvTWlsbGlzZWNvbmRzKHNlY29uZHMpIHtcbiAgcmV0dXJuIHNlY29uZHMgKiAxMDAwO1xufVxuXG5jb25zdCBzbmFwc2hvdFJlZ2V4ID0gLy1zbmFwc2hvdC9pO1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWFwRXZlbnQoZXZlbnQsIGNvbmZpZywgc2VydmVySW5mbykge1xuICBjb25zdCBzdGF0dXMgPSBzZXJ2ZXJJbmZvLnN0YXR1cy50b0pTT04oKTtcbiAgY29uc3QgaGVhcFN0YXRpc3RpY3MgPSB2OC5nZXRIZWFwU3RhdGlzdGljcygpO1xuICBjb25zdCBoZWFwU2l6ZUxpbWl0ID0gaGVhcFN0YXRpc3RpY3MuaGVhcF9zaXplX2xpbWl0O1xuICByZXR1cm4ge1xuICAgIGtpYmFuYToge1xuICAgICAgdXVpZDogY29uZmlnLmdldCgnc2VydmVyLnV1aWQnKSxcbiAgICAgIG5hbWU6IGNvbmZpZy5nZXQoJ3NlcnZlci5uYW1lJyksXG4gICAgICBob3N0OiBldmVudC5ob3N0LFxuICAgICAgdHJhbnNwb3J0X2FkZHJlc3M6IGAke2NvbmZpZy5nZXQoJ3NlcnZlci5ob3N0Jyl9OiR7Y29uZmlnLmdldCgnc2VydmVyLnBvcnQnKX1gLFxuICAgICAgdmVyc2lvbjogc2VydmVySW5mby52ZXJzaW9uLnJlcGxhY2Uoc25hcHNob3RSZWdleCwgJycpLFxuICAgICAgc25hcHNob3Q6IHNuYXBzaG90UmVnZXgudGVzdChzZXJ2ZXJJbmZvLnZlcnNpb24pLFxuICAgICAgc3RhdHVzOiBfLmdldChzdGF0dXMsICdvdmVyYWxsLnN0YXRlJyksXG4gICAgICBzdGF0dXNlczogbWFwUGx1Z2lucyhzdGF0dXMuc3RhdHVzZXMpXG4gICAgfSxcbiAgICBvczoge1xuICAgICAgbG9hZDoge1xuICAgICAgICAnMW0nOiBldmVudC5vc2xvYWRbMF0sXG4gICAgICAgICc1bSc6IGV2ZW50Lm9zbG9hZFsxXSxcbiAgICAgICAgJzE1bSc6IGV2ZW50Lm9zbG9hZFsyXVxuICAgICAgfSxcbiAgICAgIG1lbW9yeToge1xuICAgICAgICB0b3RhbF9pbl9ieXRlczogZXZlbnQub3NtZW0udG90YWwsXG4gICAgICAgIGZyZWVfaW5fYnl0ZXM6IGV2ZW50Lm9zbWVtLmZyZWUsXG4gICAgICAgIHVzZWRfaW5fYnl0ZXM6IGV2ZW50Lm9zbWVtLnRvdGFsIC0gZXZlbnQub3NtZW0uZnJlZVxuICAgICAgfSxcbiAgICAgIHVwdGltZV9pbl9taWxsaXM6IHNlY29uZHNUb01pbGxpc2Vjb25kcyhldmVudC5vc3VwKVxuICAgIH0sXG4gICAgcHJvY2Vzczoge1xuICAgICAgbWVtb3J5OiB7XG4gICAgICAgIGhlYXA6IHtcbiAgICAgICAgICB0b3RhbF9pbl9ieXRlczogZXZlbnQucHNtZW0uaGVhcFRvdGFsLFxuICAgICAgICAgIHVzZWRfaW5fYnl0ZXM6IGV2ZW50LnBzbWVtLmhlYXBVc2VkLFxuICAgICAgICAgIHNpemVfbGltaXQ6IGhlYXBTaXplTGltaXRcbiAgICAgICAgfSxcbiAgICAgICAgcmVzaWRlbnRfc2V0X3NpemVfaW5fYnl0ZXM6IGV2ZW50LnBzbWVtLnJzc1xuICAgICAgfSxcbiAgICAgIGV2ZW50X2xvb3BfZGVsYXk6IGV2ZW50LnBzZGVsYXksXG4gICAgICB1cHRpbWVfaW5fbWlsbGlzOiBzZWNvbmRzVG9NaWxsaXNlY29uZHMoZXZlbnQucHN1cClcbiAgICB9LFxuICAgIHNvY2tldHM6IGV2ZW50LnNvY2tldHMsXG4gICAgdGltZXN0YW1wOiBtb21lbnQudXRjKCkudG9JU09TdHJpbmcoKSxcbiAgICByZXF1ZXN0czogbWFwUmVxdWVzdHMoZXZlbnQucmVxdWVzdHMpLFxuICAgIHJlc3BvbnNlX3RpbWVzOiBtYXBSZXNwb25zZVRpbWVzKGV2ZW50LnJlc3BvbnNlVGltZXMpLFxuICAgIGNvbmN1cnJlbnRfY29ubmVjdGlvbnM6IG1hcENvbmN1cnJlbnRzKGV2ZW50LmNvbmN1cnJlbnRzKVxuICB9O1xufVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/kibana_monitoring/lib/map_event.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAcwB,QAAQ;;;;4BAdR,gBAAgB;;;;2BACjB,eAAe;;;;kCACT,sBAAsB;;;;0CACxB,8BAA8B;;;;kBAC1C,IAAI;;;;sBAEA,QAAQ;;;;sBACb,QAAQ;;;;AAEtB,SAAS,qBAAqB,CAAC,OAAO,EAAE;AACtC,SAAO,OAAO,GAAG,IAAI,CAAC;CACvB;;AAED,IAAM,aAAa,GAAG,YAAY,CAAC;;AACpB,SAAS,QAAQ,CAAC,KAAK,EAAE,MAAM,EAAE,UAAU,EAAE;AAC1D,MAAM,MAAM,GAAG,UAAU,CAAC,MAAM,CAAC,MAAM,EAAE,CAAC;AAC1C,MAAM,cAAc,GAAG,gBAAG,iBAAiB,EAAE,CAAC;AAC9C,MAAM,aAAa,GAAG,cAAc,CAAC,eAAe,CAAC;AACrD,SAAO;AACL,UAAM,EAAE;AACN,UAAI,EAAE,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC;AAC/B,UAAI,EAAE,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC;AAC/B,UAAI,EAAE,KAAK,CAAC,IAAI;AAChB,uBAAiB,EAAK,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,SAAI,MAAM,CAAC,GAAG,CAAC,aAAa,CAAC,AAAE;AAC9E,aAAO,EAAE,UAAU,CAAC,OAAO,CAAC,OAAO,CAAC,aAAa,EAAE,EAAE,CAAC;AACtD,cAAQ,EAAE,aAAa,CAAC,IAAI,CAAC,UAAU,CAAC,OAAO,CAAC;AAChD,YAAM,EAAE,oBAAE,GAAG,CAAC,MAAM,EAAE,eAAe,CAAC;AACtC,cAAQ,EAAE,8BAAW,MAAM,CAAC,QAAQ,CAAC;KACtC;AACD,MAAE,EAAE;AACF,UAAI,EAAE;AACJ,YAAI,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;AACrB,YAAI,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;AACrB,aAAK,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;OACvB;AACD,YAAM,EAAE;AACN,sBAAc,EAAE,KAAK,CAAC,KAAK,CAAC,KAAK;AACjC,qBAAa,EAAE,KAAK,CAAC,KAAK,CAAC,IAAI;AAC/B,qBAAa,EAAE,KAAK,CAAC,KAAK,CAAC,KAAK,GAAG,KAAK,CAAC,KAAK,CAAC,IAAI;OACpD;AACD,sBAAgB,EAAE,qBAAqB,CAAC,KAAK,CAAC,IAAI,CAAC;KACpD;AACD,WAAO,EAAE;AACP,YAAM,EAAE;AACN,YAAI,EAAE;AACJ,wBAAc,EAAE,KAAK,CAAC,KAAK,CAAC,SAAS;AACrC,uBAAa,EAAE,KAAK,CAAC,KAAK,CAAC,QAAQ;AACnC,oBAAU,EAAE,aAAa;SAC1B;AACD,kCAA0B,EAAE,KAAK,CAAC,KAAK,CAAC,GAAG;OAC5C;AACD,sBAAgB,EAAE,KAAK,CAAC,OAAO;AAC/B,sBAAgB,EAAE,qBAAqB,CAAC,KAAK,CAAC,IAAI,CAAC;KACpD;AACD,WAAO,EAAE,KAAK,CAAC,OAAO;AACtB,aAAS,EAAE,oBAAO,GAAG,EAAE,CAAC,WAAW,EAAE;AACrC,YAAQ,EAAE,+BAAY,KAAK,CAAC,QAAQ,CAAC;AACrC,kBAAc,EAAE,qCAAiB,KAAK,CAAC,aAAa,CAAC;AACrD,0BAAsB,EAAE,6CAAe,KAAK,CAAC,WAAW,CAAC;GAC1D,CAAC;CACH",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/kibana_monitoring/lib/map_event.js",
      "sourcesContent": [
        "import mapRequests from './map_requests';\nimport mapPlugins from './map_plugins';\nimport mapResponseTimes from './map_response_times';\nimport mapConcurrents from './map_concurrent_connections';\nimport v8 from 'v8';\n\nimport moment from 'moment';\nimport _ from 'lodash';\n\nfunction secondsToMilliseconds(seconds) {\n  return seconds * 1000;\n}\n\nconst snapshotRegex = /-snapshot/i;\nexport default function mapEvent(event, config, serverInfo) {\n  const status = serverInfo.status.toJSON();\n  const heapStatistics = v8.getHeapStatistics();\n  const heapSizeLimit = heapStatistics.heap_size_limit;\n  return {\n    kibana: {\n      uuid: config.get('server.uuid'),\n      name: config.get('server.name'),\n      host: event.host,\n      transport_address: `${config.get('server.host')}:${config.get('server.port')}`,\n      version: serverInfo.version.replace(snapshotRegex, ''),\n      snapshot: snapshotRegex.test(serverInfo.version),\n      status: _.get(status, 'overall.state'),\n      statuses: mapPlugins(status.statuses)\n    },\n    os: {\n      load: {\n        '1m': event.osload[0],\n        '5m': event.osload[1],\n        '15m': event.osload[2]\n      },\n      memory: {\n        total_in_bytes: event.osmem.total,\n        free_in_bytes: event.osmem.free,\n        used_in_bytes: event.osmem.total - event.osmem.free\n      },\n      uptime_in_millis: secondsToMilliseconds(event.osup)\n    },\n    process: {\n      memory: {\n        heap: {\n          total_in_bytes: event.psmem.heapTotal,\n          used_in_bytes: event.psmem.heapUsed,\n          size_limit: heapSizeLimit\n        },\n        resident_set_size_in_bytes: event.psmem.rss\n      },\n      event_loop_delay: event.psdelay,\n      uptime_in_millis: secondsToMilliseconds(event.psup)\n    },\n    sockets: event.sockets,\n    timestamp: moment.utc().toISOString(),\n    requests: mapRequests(event.requests),\n    response_times: mapResponseTimes(event.responseTimes),\n    concurrent_connections: mapConcurrents(event.concurrents)\n  };\n}\n"
      ]
    },
    "mtime": 1485775624445
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/kibana_monitoring/lib/map_requests.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "mapRequests",
            "requests"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "mapRequests",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "requests",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = mapRequests;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction mapRequests(requests) {\n  return _lodash2['default'].reduce(_lodash2['default'].values(requests), function (result, value) {\n    _lodash2['default'].each(value.statusCodes, function (count, code) {\n      if (_lodash2['default'].isUndefined(_lodash2['default'].get(result, 'status_codes.' + code))) _lodash2['default'].set(result, 'status_codes.' + code, 0);\n      result.status_codes[code] += count;\n    });\n    result.total += value.total;\n    result.disconnects += value.disconnects;\n    return result;\n  }, { total: 0, disconnects: 0, status_codes: {} });\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL21vbml0b3Jpbmcvc2VydmVyL2tpYmFuYV9tb25pdG9yaW5nL2xpYi9tYXBfcmVxdWVzdHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7cUJBRXdCLFdBQVc7Ozs7c0JBRnJCLFFBQVE7Ozs7QUFFUCxTQUFTLFdBQVcsQ0FBQyxRQUFRLEVBQUU7QUFDNUMsU0FBTyxvQkFBRSxNQUFNLENBQUMsb0JBQUUsTUFBTSxDQUFDLFFBQVEsQ0FBQyxFQUFFLFVBQUMsTUFBTSxFQUFFLEtBQUssRUFBSztBQUNyRCx3QkFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLFdBQVcsRUFBRSxVQUFDLEtBQUssRUFBRSxJQUFJLEVBQUs7QUFDekMsVUFBSSxvQkFBRSxXQUFXLENBQUMsb0JBQUUsR0FBRyxDQUFDLE1BQU0sb0JBQWtCLElBQUksQ0FBRyxDQUFDLEVBQUUsb0JBQUUsR0FBRyxDQUFDLE1BQU0sb0JBQWtCLElBQUksRUFBSSxDQUFDLENBQUMsQ0FBQztBQUNuRyxZQUFNLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxJQUFJLEtBQUssQ0FBQztLQUNwQyxDQUFDLENBQUM7QUFDSCxVQUFNLENBQUMsS0FBSyxJQUFJLEtBQUssQ0FBQyxLQUFLLENBQUM7QUFDNUIsVUFBTSxDQUFDLFdBQVcsSUFBSSxLQUFLLENBQUMsV0FBVyxDQUFDO0FBQ3hDLFdBQU8sTUFBTSxDQUFDO0dBQ2YsRUFBRSxFQUFDLEtBQUssRUFBRSxDQUFDLEVBQUUsV0FBVyxFQUFFLENBQUMsRUFBRSxZQUFZLEVBQUUsRUFBRSxFQUFDLENBQUMsQ0FBQztDQUNsRCIsImZpbGUiOiIvaG9tZS91YnVudHUvd29ya3NwYWNlL2tpYmFuYS01LjAuMi1saW51eC14ODZfNjQvcGx1Z2lucy94LXBhY2svcGx1Z2lucy9tb25pdG9yaW5nL3NlcnZlci9raWJhbmFfbW9uaXRvcmluZy9saWIvbWFwX3JlcXVlc3RzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWFwUmVxdWVzdHMocmVxdWVzdHMpIHtcbiAgcmV0dXJuIF8ucmVkdWNlKF8udmFsdWVzKHJlcXVlc3RzKSwgKHJlc3VsdCwgdmFsdWUpID0+IHtcbiAgICBfLmVhY2godmFsdWUuc3RhdHVzQ29kZXMsIChjb3VudCwgY29kZSkgPT4ge1xuICAgICAgaWYgKF8uaXNVbmRlZmluZWQoXy5nZXQocmVzdWx0LCBgc3RhdHVzX2NvZGVzLiR7Y29kZX1gKSkpIF8uc2V0KHJlc3VsdCwgYHN0YXR1c19jb2Rlcy4ke2NvZGV9YCwgMCk7XG4gICAgICByZXN1bHQuc3RhdHVzX2NvZGVzW2NvZGVdICs9IGNvdW50O1xuICAgIH0pO1xuICAgIHJlc3VsdC50b3RhbCArPSB2YWx1ZS50b3RhbDtcbiAgICByZXN1bHQuZGlzY29ubmVjdHMgKz0gdmFsdWUuZGlzY29ubmVjdHM7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSwge3RvdGFsOiAwLCBkaXNjb25uZWN0czogMCwgc3RhdHVzX2NvZGVzOiB7fX0pO1xufVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/kibana_monitoring/lib/map_requests.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAEwB,WAAW;;;;sBAFrB,QAAQ;;;;AAEP,SAAS,WAAW,CAAC,QAAQ,EAAE;AAC5C,SAAO,oBAAE,MAAM,CAAC,oBAAE,MAAM,CAAC,QAAQ,CAAC,EAAE,UAAC,MAAM,EAAE,KAAK,EAAK;AACrD,wBAAE,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,UAAC,KAAK,EAAE,IAAI,EAAK;AACzC,UAAI,oBAAE,WAAW,CAAC,oBAAE,GAAG,CAAC,MAAM,oBAAkB,IAAI,CAAG,CAAC,EAAE,oBAAE,GAAG,CAAC,MAAM,oBAAkB,IAAI,EAAI,CAAC,CAAC,CAAC;AACnG,YAAM,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,KAAK,CAAC;KACpC,CAAC,CAAC;AACH,UAAM,CAAC,KAAK,IAAI,KAAK,CAAC,KAAK,CAAC;AAC5B,UAAM,CAAC,WAAW,IAAI,KAAK,CAAC,WAAW,CAAC;AACxC,WAAO,MAAM,CAAC;GACf,EAAE,EAAC,KAAK,EAAE,CAAC,EAAE,WAAW,EAAE,CAAC,EAAE,YAAY,EAAE,EAAE,EAAC,CAAC,CAAC;CAClD",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/kibana_monitoring/lib/map_requests.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\nexport default function mapRequests(requests) {\n  return _.reduce(_.values(requests), (result, value) => {\n    _.each(value.statusCodes, (count, code) => {\n      if (_.isUndefined(_.get(result, `status_codes.${code}`))) _.set(result, `status_codes.${code}`, 0);\n      result.status_codes[code] += count;\n    });\n    result.total += value.total;\n    result.disconnects += value.disconnects;\n    return result;\n  }, {total: 0, disconnects: 0, status_codes: {}});\n}\n"
      ]
    },
    "mtime": 1485775624445
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/kibana_monitoring/lib/map_plugins.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "mapPlugins",
            "plugins"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "mapPlugins",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "plugins",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = mapPlugins;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction mapPlugins(plugins) {\n  return _lodash2['default'].map(plugins, _lodash2['default'].partialRight(_lodash2['default'].pick, 'name', 'state'));\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL21vbml0b3Jpbmcvc2VydmVyL2tpYmFuYV9tb25pdG9yaW5nL2xpYi9tYXBfcGx1Z2lucy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztxQkFFd0IsVUFBVTs7OztzQkFGcEIsUUFBUTs7OztBQUVQLFNBQVMsVUFBVSxDQUFDLE9BQU8sRUFBRTtBQUMxQyxTQUFPLG9CQUFFLEdBQUcsQ0FBQyxPQUFPLEVBQUUsb0JBQUUsWUFBWSxDQUFDLG9CQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQztDQUNoRSIsImZpbGUiOiIvaG9tZS91YnVudHUvd29ya3NwYWNlL2tpYmFuYS01LjAuMi1saW51eC14ODZfNjQvcGx1Z2lucy94LXBhY2svcGx1Z2lucy9tb25pdG9yaW5nL3NlcnZlci9raWJhbmFfbW9uaXRvcmluZy9saWIvbWFwX3BsdWdpbnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBtYXBQbHVnaW5zKHBsdWdpbnMpIHtcbiAgcmV0dXJuIF8ubWFwKHBsdWdpbnMsIF8ucGFydGlhbFJpZ2h0KF8ucGljaywgJ25hbWUnLCAnc3RhdGUnKSk7XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/kibana_monitoring/lib/map_plugins.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAEwB,UAAU;;;;sBAFpB,QAAQ;;;;AAEP,SAAS,UAAU,CAAC,OAAO,EAAE;AAC1C,SAAO,oBAAE,GAAG,CAAC,OAAO,EAAE,oBAAE,YAAY,CAAC,oBAAE,IAAI,EAAE,MAAM,EAAE,OAAO,CAAC,CAAC,CAAC;CAChE",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/kibana_monitoring/lib/map_plugins.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\nexport default function mapPlugins(plugins) {\n  return _.map(plugins, _.partialRight(_.pick, 'name', 'state'));\n}\n"
      ]
    },
    "mtime": 1485775624445
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/kibana_monitoring/lib/map_response_times.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "mapResponseTimes",
            "times"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "mapResponseTimes",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "times",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = mapResponseTimes;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction mapResponseTimes(times) {\n  var responseTimes = _lodash2['default'].reduce(_lodash2['default'].values(times), function (result, value) {\n    if (value.avg) {\n      result.avg += value.avg;\n    }\n    result.max = Math.max(result.max, value.max);\n    return result;\n  }, { avg: null, max: 0 });\n  return {\n    average: responseTimes.avg === null ? null : responseTimes.avg / Math.max(_lodash2['default'].size(times), 1),\n    max: responseTimes.max\n  };\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL21vbml0b3Jpbmcvc2VydmVyL2tpYmFuYV9tb25pdG9yaW5nL2xpYi9tYXBfcmVzcG9uc2VfdGltZXMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7cUJBRXdCLGdCQUFnQjs7OztzQkFGMUIsUUFBUTs7OztBQUVQLFNBQVMsZ0JBQWdCLENBQUMsS0FBSyxFQUFFO0FBQzlDLE1BQU0sYUFBYSxHQUFHLG9CQUFFLE1BQU0sQ0FBQyxvQkFBRSxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsVUFBQyxNQUFNLEVBQUUsS0FBSyxFQUFLO0FBQ2pFLFFBQUksS0FBSyxDQUFDLEdBQUcsRUFBRTtBQUNiLFlBQU0sQ0FBQyxHQUFHLElBQUksS0FBSyxDQUFDLEdBQUcsQ0FBQztLQUN6QjtBQUNELFVBQU0sQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztBQUM3QyxXQUFPLE1BQU0sQ0FBQztHQUNmLEVBQUUsRUFBQyxHQUFHLEVBQUUsSUFBSSxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUMsQ0FBQyxDQUFDO0FBQ3hCLFNBQU87QUFDTCxXQUFPLEVBQUUsYUFBYSxDQUFDLEdBQUcsS0FBSyxJQUFJLEdBQUcsSUFBSSxHQUFHLGFBQWEsQ0FBQyxHQUFHLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxvQkFBRSxJQUFJLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxDQUFDO0FBQzNGLE9BQUcsRUFBRSxhQUFhLENBQUMsR0FBRztHQUN2QixDQUFDO0NBQ0giLCJmaWxlIjoiL2hvbWUvdWJ1bnR1L3dvcmtzcGFjZS9raWJhbmEtNS4wLjItbGludXgteDg2XzY0L3BsdWdpbnMveC1wYWNrL3BsdWdpbnMvbW9uaXRvcmluZy9zZXJ2ZXIva2liYW5hX21vbml0b3JpbmcvbGliL21hcF9yZXNwb25zZV90aW1lcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIG1hcFJlc3BvbnNlVGltZXModGltZXMpIHtcbiAgY29uc3QgcmVzcG9uc2VUaW1lcyA9IF8ucmVkdWNlKF8udmFsdWVzKHRpbWVzKSwgKHJlc3VsdCwgdmFsdWUpID0+IHtcbiAgICBpZiAodmFsdWUuYXZnKSB7XG4gICAgICByZXN1bHQuYXZnICs9IHZhbHVlLmF2ZztcbiAgICB9XG4gICAgcmVzdWx0Lm1heCA9IE1hdGgubWF4KHJlc3VsdC5tYXgsIHZhbHVlLm1heCk7XG4gICAgcmV0dXJuIHJlc3VsdDtcbiAgfSwge2F2ZzogbnVsbCwgbWF4OiAwfSk7XG4gIHJldHVybiB7XG4gICAgYXZlcmFnZTogcmVzcG9uc2VUaW1lcy5hdmcgPT09IG51bGwgPyBudWxsIDogcmVzcG9uc2VUaW1lcy5hdmcgLyBNYXRoLm1heChfLnNpemUodGltZXMpLCAxKSxcbiAgICBtYXg6IHJlc3BvbnNlVGltZXMubWF4XG4gIH07XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/kibana_monitoring/lib/map_response_times.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAEwB,gBAAgB;;;;sBAF1B,QAAQ;;;;AAEP,SAAS,gBAAgB,CAAC,KAAK,EAAE;AAC9C,MAAM,aAAa,GAAG,oBAAE,MAAM,CAAC,oBAAE,MAAM,CAAC,KAAK,CAAC,EAAE,UAAC,MAAM,EAAE,KAAK,EAAK;AACjE,QAAI,KAAK,CAAC,GAAG,EAAE;AACb,YAAM,CAAC,GAAG,IAAI,KAAK,CAAC,GAAG,CAAC;KACzB;AACD,UAAM,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,MAAM,CAAC,GAAG,EAAE,KAAK,CAAC,GAAG,CAAC,CAAC;AAC7C,WAAO,MAAM,CAAC;GACf,EAAE,EAAC,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,EAAC,CAAC,CAAC;AACxB,SAAO;AACL,WAAO,EAAE,aAAa,CAAC,GAAG,KAAK,IAAI,GAAG,IAAI,GAAG,aAAa,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,CAAC,oBAAE,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;AAC3F,OAAG,EAAE,aAAa,CAAC,GAAG;GACvB,CAAC;CACH",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/kibana_monitoring/lib/map_response_times.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\nexport default function mapResponseTimes(times) {\n  const responseTimes = _.reduce(_.values(times), (result, value) => {\n    if (value.avg) {\n      result.avg += value.avg;\n    }\n    result.max = Math.max(result.max, value.max);\n    return result;\n  }, {avg: null, max: 0});\n  return {\n    average: responseTimes.avg === null ? null : responseTimes.avg / Math.max(_.size(times), 1),\n    max: responseTimes.max\n  };\n}\n"
      ]
    },
    "mtime": 1485775624445
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/kibana_monitoring/lib/map_concurrent_connections.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "mapConcurrents",
            "concurrents"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "mapConcurrents",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "concurrents",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = mapConcurrents;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nfunction mapConcurrents(concurrents) {\n  return _lodash2['default'].reduce(_lodash2['default'].values(concurrents), function (result, value) {\n    return result + value;\n  }, 0);\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL21vbml0b3Jpbmcvc2VydmVyL2tpYmFuYV9tb25pdG9yaW5nL2xpYi9tYXBfY29uY3VycmVudF9jb25uZWN0aW9ucy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztxQkFFd0IsY0FBYzs7OztzQkFGeEIsUUFBUTs7OztBQUVQLFNBQVMsY0FBYyxDQUFDLFdBQVcsRUFBRTtBQUNsRCxTQUFPLG9CQUFFLE1BQU0sQ0FBQyxvQkFBRSxNQUFNLENBQUMsV0FBVyxDQUFDLEVBQUUsVUFBQyxNQUFNLEVBQUUsS0FBSyxFQUFLO0FBQ3hELFdBQU8sTUFBTSxHQUFHLEtBQUssQ0FBQztHQUN2QixFQUFFLENBQUMsQ0FBQyxDQUFDO0NBQ1AiLCJmaWxlIjoiL2hvbWUvdWJ1bnR1L3dvcmtzcGFjZS9raWJhbmEtNS4wLjItbGludXgteDg2XzY0L3BsdWdpbnMveC1wYWNrL3BsdWdpbnMvbW9uaXRvcmluZy9zZXJ2ZXIva2liYW5hX21vbml0b3JpbmcvbGliL21hcF9jb25jdXJyZW50X2Nvbm5lY3Rpb25zLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gbWFwQ29uY3VycmVudHMoY29uY3VycmVudHMpIHtcbiAgcmV0dXJuIF8ucmVkdWNlKF8udmFsdWVzKGNvbmN1cnJlbnRzKSwgKHJlc3VsdCwgdmFsdWUpID0+IHtcbiAgICByZXR1cm4gcmVzdWx0ICsgdmFsdWU7XG4gIH0sIDApO1xufVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/kibana_monitoring/lib/map_concurrent_connections.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAEwB,cAAc;;;;sBAFxB,QAAQ;;;;AAEP,SAAS,cAAc,CAAC,WAAW,EAAE;AAClD,SAAO,oBAAE,MAAM,CAAC,oBAAE,MAAM,CAAC,WAAW,CAAC,EAAE,UAAC,MAAM,EAAE,KAAK,EAAK;AACxD,WAAO,MAAM,GAAG,KAAK,CAAC;GACvB,EAAE,CAAC,CAAC,CAAC;CACP",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/kibana_monitoring/lib/map_concurrent_connections.js",
      "sourcesContent": [
        "import _ from 'lodash';\n\nexport default function mapConcurrents(concurrents) {\n  return _.reduce(_.values(concurrents), (result, value) => {\n    return result + value;\n  }, 0);\n}\n"
      ]
    },
    "mtime": 1485775624445
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/kibana_monitoring/lib/monitoring_bulk.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "addMonitoringApi",
            "Client",
            "_config",
            "components"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "addMonitoringApi",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "Client",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "_config",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "components",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = addMonitoringApi;\n\nfunction addMonitoringApi(Client, _config, components) {\n  var ca = components.clientAction.factory;\n  Client.prototype.monitoring = components.clientAction.namespaceFactory();\n  var monitoring = Client.prototype.monitoring.prototype;\n\n  /**\n   * Perform a [monitoring.bulk](http://www.elastic.co/guide/en/elasticsearch/reference/master/docs-bulk.html) request\n   *\n   * @param {Object} params - An object with parameters used to carry out this action\n   * @param {String} params.system_id - Reporting application id\n   * @param {String} params.system_api_version - Reporting application API version\n   * @param {Number} params.interval - Collection interval in string format (e.g., '10s' or '10000ms')\n   * @param {String} params.consistency - Explicit write consistency setting for the operation\n   * @param {Boolean} params.refresh - Refresh the index after performing the operation\n   * @param {String} params.routing - Specific routing value\n   * @param {Date, Number} params.timeout - Explicit operation timeout\n   * @param {String} params.type - Default document type for items which don't provide one\n   * @param {String, String[], Boolean} params.fields - Default comma-separated list of fields to return in the response for updates\n   */\n  monitoring.bulk = ca({\n    params: {\n      system_id: {\n        type: 'string'\n      },\n      system_api_version: {\n        type: 'string'\n      },\n      type: {\n        type: 'string'\n      },\n      interval: {\n        type: 'string'\n      }\n    },\n    urls: [{\n      fmt: '/_xpack/monitoring/<%=type%>/_bulk',\n      req: {\n        type: {\n          type: 'string'\n        }\n      }\n    }, {\n      fmt: '/_xpack/monitoring/_bulk'\n    }],\n    needBody: true,\n    bulkBody: true,\n    method: 'POST'\n  });\n}\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL21vbml0b3Jpbmcvc2VydmVyL2tpYmFuYV9tb25pdG9yaW5nL2xpYi9tb25pdG9yaW5nX2J1bGsuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7cUJBQXdCLGdCQUFnQjs7QUFBekIsU0FBUyxnQkFBZ0IsQ0FBQyxNQUFNLEVBQUUsT0FBTyxFQUFFLFVBQVUsRUFBRTtBQUNwRSxNQUFNLEVBQUUsR0FBRyxVQUFVLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQztBQUMzQyxRQUFNLENBQUMsU0FBUyxDQUFDLFVBQVUsR0FBRyxVQUFVLENBQUMsWUFBWSxDQUFDLGdCQUFnQixFQUFFLENBQUM7QUFDekUsTUFBSSxVQUFVLEdBQUcsTUFBTSxDQUFDLFNBQVMsQ0FBQyxVQUFVLENBQUMsU0FBUyxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7O0FBZ0J2RCxZQUFVLENBQUMsSUFBSSxHQUFHLEVBQUUsQ0FBQztBQUNuQixVQUFNLEVBQUU7QUFDTixlQUFTLEVBQUU7QUFDVCxZQUFJLEVBQUUsUUFBUTtPQUNmO0FBQ0Qsd0JBQWtCLEVBQUU7QUFDbEIsWUFBSSxFQUFFLFFBQVE7T0FDZjtBQUNELFVBQUksRUFBRTtBQUNKLFlBQUksRUFBRSxRQUFRO09BQ2Y7QUFDRCxjQUFRLEVBQUU7QUFDUixZQUFJLEVBQUUsUUFBUTtPQUNmO0tBQ0Y7QUFDRCxRQUFJLEVBQUUsQ0FBQztBQUNMLFNBQUcsRUFBRSxvQ0FBb0M7QUFDekMsU0FBRyxFQUFFO0FBQ0gsWUFBSSxFQUFFO0FBQ0osY0FBSSxFQUFFLFFBQVE7U0FDZjtPQUNGO0tBQ0YsRUFBRTtBQUNELFNBQUcsRUFBRSwwQkFBMEI7S0FDaEMsQ0FBQztBQUNGLFlBQVEsRUFBRSxJQUFJO0FBQ2QsWUFBUSxFQUFFLElBQUk7QUFDZCxVQUFNLEVBQUUsTUFBTTtHQUNmLENBQUMsQ0FBQztDQUVKOztBQUFBLENBQUMiLCJmaWxlIjoiL2hvbWUvdWJ1bnR1L3dvcmtzcGFjZS9raWJhbmEtNS4wLjItbGludXgteDg2XzY0L3BsdWdpbnMveC1wYWNrL3BsdWdpbnMvbW9uaXRvcmluZy9zZXJ2ZXIva2liYW5hX21vbml0b3JpbmcvbGliL21vbml0b3JpbmdfYnVsay5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGFkZE1vbml0b3JpbmdBcGkoQ2xpZW50LCBfY29uZmlnLCBjb21wb25lbnRzKSB7XG4gIGNvbnN0IGNhID0gY29tcG9uZW50cy5jbGllbnRBY3Rpb24uZmFjdG9yeTtcbiAgQ2xpZW50LnByb3RvdHlwZS5tb25pdG9yaW5nID0gY29tcG9uZW50cy5jbGllbnRBY3Rpb24ubmFtZXNwYWNlRmFjdG9yeSgpO1xuICBsZXQgbW9uaXRvcmluZyA9IENsaWVudC5wcm90b3R5cGUubW9uaXRvcmluZy5wcm90b3R5cGU7XG5cbiAvKipcbiAgKiBQZXJmb3JtIGEgW21vbml0b3JpbmcuYnVsa10oaHR0cDovL3d3dy5lbGFzdGljLmNvL2d1aWRlL2VuL2VsYXN0aWNzZWFyY2gvcmVmZXJlbmNlL21hc3Rlci9kb2NzLWJ1bGsuaHRtbCkgcmVxdWVzdFxuICAqXG4gICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIHBhcmFtZXRlcnMgdXNlZCB0byBjYXJyeSBvdXQgdGhpcyBhY3Rpb25cbiAgKiBAcGFyYW0ge1N0cmluZ30gcGFyYW1zLnN5c3RlbV9pZCAtIFJlcG9ydGluZyBhcHBsaWNhdGlvbiBpZFxuICAqIEBwYXJhbSB7U3RyaW5nfSBwYXJhbXMuc3lzdGVtX2FwaV92ZXJzaW9uIC0gUmVwb3J0aW5nIGFwcGxpY2F0aW9uIEFQSSB2ZXJzaW9uXG4gICogQHBhcmFtIHtOdW1iZXJ9IHBhcmFtcy5pbnRlcnZhbCAtIENvbGxlY3Rpb24gaW50ZXJ2YWwgaW4gc3RyaW5nIGZvcm1hdCAoZS5nLiwgJzEwcycgb3IgJzEwMDAwbXMnKVxuICAqIEBwYXJhbSB7U3RyaW5nfSBwYXJhbXMuY29uc2lzdGVuY3kgLSBFeHBsaWNpdCB3cml0ZSBjb25zaXN0ZW5jeSBzZXR0aW5nIGZvciB0aGUgb3BlcmF0aW9uXG4gICogQHBhcmFtIHtCb29sZWFufSBwYXJhbXMucmVmcmVzaCAtIFJlZnJlc2ggdGhlIGluZGV4IGFmdGVyIHBlcmZvcm1pbmcgdGhlIG9wZXJhdGlvblxuICAqIEBwYXJhbSB7U3RyaW5nfSBwYXJhbXMucm91dGluZyAtIFNwZWNpZmljIHJvdXRpbmcgdmFsdWVcbiAgKiBAcGFyYW0ge0RhdGUsIE51bWJlcn0gcGFyYW1zLnRpbWVvdXQgLSBFeHBsaWNpdCBvcGVyYXRpb24gdGltZW91dFxuICAqIEBwYXJhbSB7U3RyaW5nfSBwYXJhbXMudHlwZSAtIERlZmF1bHQgZG9jdW1lbnQgdHlwZSBmb3IgaXRlbXMgd2hpY2ggZG9uJ3QgcHJvdmlkZSBvbmVcbiAgKiBAcGFyYW0ge1N0cmluZywgU3RyaW5nW10sIEJvb2xlYW59IHBhcmFtcy5maWVsZHMgLSBEZWZhdWx0IGNvbW1hLXNlcGFyYXRlZCBsaXN0IG9mIGZpZWxkcyB0byByZXR1cm4gaW4gdGhlIHJlc3BvbnNlIGZvciB1cGRhdGVzXG4gICovXG4gIG1vbml0b3JpbmcuYnVsayA9IGNhKHtcbiAgICBwYXJhbXM6IHtcbiAgICAgIHN5c3RlbV9pZDoge1xuICAgICAgICB0eXBlOiAnc3RyaW5nJ1xuICAgICAgfSxcbiAgICAgIHN5c3RlbV9hcGlfdmVyc2lvbjoge1xuICAgICAgICB0eXBlOiAnc3RyaW5nJ1xuICAgICAgfSxcbiAgICAgIHR5cGU6IHtcbiAgICAgICAgdHlwZTogJ3N0cmluZydcbiAgICAgIH0sXG4gICAgICBpbnRlcnZhbDoge1xuICAgICAgICB0eXBlOiAnc3RyaW5nJ1xuICAgICAgfVxuICAgIH0sXG4gICAgdXJsczogW3tcbiAgICAgIGZtdDogJy9feHBhY2svbW9uaXRvcmluZy88JT10eXBlJT4vX2J1bGsnLFxuICAgICAgcmVxOiB7XG4gICAgICAgIHR5cGU6IHtcbiAgICAgICAgICB0eXBlOiAnc3RyaW5nJ1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSwge1xuICAgICAgZm10OiAnL194cGFjay9tb25pdG9yaW5nL19idWxrJ1xuICAgIH1dLFxuICAgIG5lZWRCb2R5OiB0cnVlLFxuICAgIGJ1bGtCb2R5OiB0cnVlLFxuICAgIG1ldGhvZDogJ1BPU1QnXG4gIH0pO1xuXG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/kibana_monitoring/lib/monitoring_bulk.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAAwB,gBAAgB;;AAAzB,SAAS,gBAAgB,CAAC,MAAM,EAAE,OAAO,EAAE,UAAU,EAAE;AACpE,MAAM,EAAE,GAAG,UAAU,CAAC,YAAY,CAAC,OAAO,CAAC;AAC3C,QAAM,CAAC,SAAS,CAAC,UAAU,GAAG,UAAU,CAAC,YAAY,CAAC,gBAAgB,EAAE,CAAC;AACzE,MAAI,UAAU,GAAG,MAAM,CAAC,SAAS,CAAC,UAAU,CAAC,SAAS,CAAC;;;;;;;;;;;;;;;;AAgBvD,YAAU,CAAC,IAAI,GAAG,EAAE,CAAC;AACnB,UAAM,EAAE;AACN,eAAS,EAAE;AACT,YAAI,EAAE,QAAQ;OACf;AACD,wBAAkB,EAAE;AAClB,YAAI,EAAE,QAAQ;OACf;AACD,UAAI,EAAE;AACJ,YAAI,EAAE,QAAQ;OACf;AACD,cAAQ,EAAE;AACR,YAAI,EAAE,QAAQ;OACf;KACF;AACD,QAAI,EAAE,CAAC;AACL,SAAG,EAAE,oCAAoC;AACzC,SAAG,EAAE;AACH,YAAI,EAAE;AACJ,cAAI,EAAE,QAAQ;SACf;OACF;KACF,EAAE;AACD,SAAG,EAAE,0BAA0B;KAChC,CAAC;AACF,YAAQ,EAAE,IAAI;AACd,YAAQ,EAAE,IAAI;AACd,UAAM,EAAE,MAAM;GACf,CAAC,CAAC;CAEJ;;AAAA,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/monitoring/server/kibana_monitoring/lib/monitoring_bulk.js",
      "sourcesContent": [
        "export default function addMonitoringApi(Client, _config, components) {\n  const ca = components.clientAction.factory;\n  Client.prototype.monitoring = components.clientAction.namespaceFactory();\n  let monitoring = Client.prototype.monitoring.prototype;\n\n /**\n  * Perform a [monitoring.bulk](http://www.elastic.co/guide/en/elasticsearch/reference/master/docs-bulk.html) request\n  *\n  * @param {Object} params - An object with parameters used to carry out this action\n  * @param {String} params.system_id - Reporting application id\n  * @param {String} params.system_api_version - Reporting application API version\n  * @param {Number} params.interval - Collection interval in string format (e.g., '10s' or '10000ms')\n  * @param {String} params.consistency - Explicit write consistency setting for the operation\n  * @param {Boolean} params.refresh - Refresh the index after performing the operation\n  * @param {String} params.routing - Specific routing value\n  * @param {Date, Number} params.timeout - Explicit operation timeout\n  * @param {String} params.type - Default document type for items which don't provide one\n  * @param {String, String[], Boolean} params.fields - Default comma-separated list of fields to return in the response for updates\n  */\n  monitoring.bulk = ca({\n    params: {\n      system_id: {\n        type: 'string'\n      },\n      system_api_version: {\n        type: 'string'\n      },\n      type: {\n        type: 'string'\n      },\n      interval: {\n        type: 'string'\n      }\n    },\n    urls: [{\n      fmt: '/_xpack/monitoring/<%=type%>/_bulk',\n      req: {\n        type: {\n          type: 'string'\n        }\n      }\n    }, {\n      fmt: '/_xpack/monitoring/_bulk'\n    }],\n    needBody: true,\n    bulkBody: true,\n    method: 'POST'\n  });\n\n};\n"
      ]
    },
    "mtime": 1485775624445
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "path",
            "imported": [
              "resolve"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              }
            ]
          },
          {
            "source": "../../server/lib/mirror_plugin_status",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mirrorPluginStatus"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _path = require('path');\n\nvar _serverLibMirror_plugin_status = require('../../server/lib/mirror_plugin_status');\n\nvar _serverLibMirror_plugin_status2 = _interopRequireDefault(_serverLibMirror_plugin_status);\n\nvar publicRoutes = require('./server/routes/public');\nvar fileRoutes = require('./server/routes/file');\nvar jobRoutes = require('./server/routes/jobs');\n\nvar phantom = require('./server/lib/phantom');\nvar createQueue = require('./server/lib/create_queue');\nvar appConfig = require('./server/config/config');\nvar checkLicense = require('./server/lib/check_license');\nvar validateConfig = require('./server/lib/validate_config');\n\nmodule.exports = function (kibana) {\n  return new kibana.Plugin({\n    id: 'reporting',\n    configPrefix: 'xpack.reporting',\n    publicDir: (0, _path.resolve)(__dirname, 'public'),\n    require: ['kibana', 'elasticsearch', 'xpack_main'],\n\n    uiExports: {\n      navbarExtensions: ['plugins/reporting/controls/discover', 'plugins/reporting/controls/visualize', 'plugins/reporting/controls/dashboard'],\n      hacks: ['plugins/reporting/hacks/job_completion_notifier'],\n      managementSections: ['plugins/reporting/views/management']\n    },\n\n    config: function config(Joi) {\n      return Joi.object({\n        enabled: Joi.boolean()['default'](true),\n        kibanaApp: Joi.string().regex(/^\\//)['default']('/app/kibana'),\n        kibanaServer: Joi.object({\n          protocol: Joi.string().valid(['http', 'https']),\n          hostname: Joi.string(),\n          port: Joi.number().integer()\n        })['default'](),\n        queue: Joi.object({\n          indexInterval: Joi.string()['default']('week'),\n          pollInterval: Joi.number().integer()['default'](3000),\n          timeout: Joi.number().integer()['default'](30000),\n          syncSocketTimeout: Joi.number().integer()\n        })['default'](),\n        generate: Joi.object({\n          socketTimeout: Joi.number().integer()['default'](300000)\n        })['default'](),\n        capture: Joi.object({\n          zoom: Joi.number().integer()['default'](1),\n          viewport: Joi.object({\n            width: Joi.number().integer()['default'](1320),\n            height: Joi.number().integer()['default'](640)\n          })['default'](),\n          timeout: Joi.number().integer()['default'](6000),\n          loadDelay: Joi.number().integer()['default'](3000),\n          concurrency: Joi.number().integer()['default'](appConfig.concurrency)\n        })['default'](),\n        encryptionKey: Joi.string()\n      })['default']();\n    },\n\n    init: function init(server) {\n      var thisPlugin = this;\n      var config = server.config();\n      validateConfig(config, function (message) {\n        return server.log(['reporting', 'warning'], message);\n      });\n\n      var xpackMainPlugin = server.plugins.xpack_main;\n      (0, _serverLibMirror_plugin_status2['default'])(xpackMainPlugin, thisPlugin);\n      xpackMainPlugin.status.once('green', function () {\n        // Register a function that is called whenever the xpack info changes,\n        // to re-compute the license check results for this plugin\n        xpackMainPlugin.info.feature(thisPlugin.id).registerLicenseCheckResultsGenerator(checkLicense);\n      });\n\n      function setup() {\n        // prepare phantom binary\n        return phantom.install(config.get('path.data')).then(function (phantomPackage) {\n          server.log(['reporting', 'debug'], 'Phantom installed at ' + phantomPackage.binary);\n\n          // intialize and register application components\n          server.expose('phantom', phantomPackage);\n          server.expose('queue', createQueue(server));\n\n          // Reporting routes\n          publicRoutes(server);\n          fileRoutes(server);\n          jobRoutes(server);\n        })['catch'](function (err) {\n          return thisPlugin.status.red(err.message);\n        });\n      }\n\n      return setup();\n    }\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9pbmRleC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7O29CQUF3QixNQUFNOzs2Q0FDQyx1Q0FBdUM7Ozs7QUFDdEUsSUFBTSxZQUFZLEdBQUcsT0FBTyxDQUFDLHdCQUF3QixDQUFDLENBQUM7QUFDdkQsSUFBTSxVQUFVLEdBQUcsT0FBTyxDQUFDLHNCQUFzQixDQUFDLENBQUM7QUFDbkQsSUFBTSxTQUFTLEdBQUcsT0FBTyxDQUFDLHNCQUFzQixDQUFDLENBQUM7O0FBRWxELElBQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDO0FBQ2hELElBQU0sV0FBVyxHQUFHLE9BQU8sQ0FBQywyQkFBMkIsQ0FBQyxDQUFDO0FBQ3pELElBQU0sU0FBUyxHQUFHLE9BQU8sQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDO0FBQ3BELElBQU0sWUFBWSxHQUFHLE9BQU8sQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO0FBQzNELElBQU0sY0FBYyxHQUFHLE9BQU8sQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDOztBQUUvRCxNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsTUFBTSxFQUFFO0FBQ2pDLFNBQU8sSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDO0FBQ3ZCLE1BQUUsRUFBRSxXQUFXO0FBQ2YsZ0JBQVksRUFBRSxpQkFBaUI7QUFDL0IsYUFBUyxFQUFFLG1CQUFRLFNBQVMsRUFBRSxRQUFRLENBQUM7QUFDdkMsV0FBTyxFQUFFLENBQUMsUUFBUSxFQUFFLGVBQWUsRUFBRSxZQUFZLENBQUM7O0FBRWxELGFBQVMsRUFBRTtBQUNULHNCQUFnQixFQUFFLENBQ2hCLHFDQUFxQyxFQUNyQyxzQ0FBc0MsRUFDdEMsc0NBQXNDLENBQ3ZDO0FBQ0QsV0FBSyxFQUFFLENBQUUsaURBQWlELENBQUM7QUFDM0Qsd0JBQWtCLEVB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QUFtQixlQUFlLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDaEQscUJBQWUsQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLE9BQU8sRUFBRSxZQUFNOzs7QUFHekMsdUJBQWUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxvQ0FBb0MsQ0FBQyxZQUFZLENBQUMsQ0FBQztPQUNoRyxDQUFDLENBQUM7O0FBRUgsZUFBUyxLQUFLLEdBQUc7O0FBRWYsZUFBTyxPQUFPLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FDOUMsSUFBSSxDQUFDLFVBQVUsY0FBYyxFQUFFO0FBQzlCLGdCQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsV0FBVyxFQUFFLE9BQU8sQ0FBQyw0QkFBMEIsY0FBYyxDQUFDLE1BQU0sQ0FBRyxDQUFDOzs7QUFHcEYsZ0JBQU0sQ0FBQyxNQUFNLENBQUMsU0FBUyxFQUFFLGNBQWMsQ0FBQyxDQUFDO0FBQ3pDLGdCQUFNLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxXQUFXLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQzs7O0FBRzVDLHNCQUFZLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDckIsb0JBQVUsQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUNuQixtQkFBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1NBQ25CLENBQUMsU0FDSSxDQUFDLFVBQVUsR0FBRyxFQUFFO0FBQ3BCLGlCQUFPLFVBQVUsQ0FBQyxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQztTQUMzQyxDQUFDLENBQUM7T0FDSjs7QUFFRCxhQUFPLEtBQUssRUFBRSxDQUFDO0tBQ2hCO0dBQ0YsQ0FBQyxDQUFDO0NBQ0osQ0FBQyIsImZpbGUiOiIvaG9tZS91YnVudHUvd29ya3NwYWNlL2tpYmFuYS01LjAuMi1saW51eC14ODZfNjQvcGx1Z2lucy94LXBhY2svcGx1Z2lucy9yZXBvcnRpbmcvaW5kZXguanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyByZXNvbHZlIH0gZnJvbSAncGF0aCc7XG5pbXBvcnQgbWlycm9yUGx1Z2luU3RhdHVzIGZyb20gJy4uLy4uL3NlcnZlci9saWIvbWlycm9yX3BsdWdpbl9zdGF0dXMnO1xuY29uc3QgcHVibGljUm91dGVzID0gcmVxdWlyZSgnLi9zZXJ2ZXIvcm91dGVzL3B1YmxpYycpO1xuY29uc3QgZmlsZVJvdXRlcyA9IHJlcXVpcmUoJy4vc2VydmVyL3JvdXRlcy9maWxlJyk7XG5jb25zdCBqb2JSb3V0ZXMgPSByZXF1aXJlKCcuL3NlcnZlci9yb3V0ZXMvam9icycpO1xuXG5jb25zdCBwaGFudG9tID0gcmVxdWlyZSgnLi9zZXJ2ZXIvbGliL3BoYW50b20nKTtcbmNvbnN0IGNyZWF0ZVF1ZXVlID0gcmVxdWlyZSgnLi9zZXJ2ZXIvbGliL2NyZWF0ZV9xdWV1ZScpO1xuY29uc3QgYXBwQ29uZmlnID0gcmVxdWlyZSgnLi9zZXJ2ZXIvY29uZmlnL2NvbmZpZycpO1xuY29uc3QgY2hlY2tMaWNlbnNlID0gcmVxdWlyZSgnLi9zZXJ2ZXIvbGliL2NoZWNrX2xpY2Vuc2UnKTtcbmNvbnN0IHZhbGlkYXRlQ29uZmlnID0gcmVxdWlyZSgnLi9zZXJ2ZXIvbGliL3ZhbGlkYXRlX2NvbmZpZycpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChraWJhbmEpIHtcbiAgcmV0dXJuIG5ldyBraWJhbmEuUGx1Z2luKHtcbiAgICBpZDogJ3JlcG9ydGluZycsXG4gICAgY29uZmlnUHJlZml4OiAneHBhY2sucmVwb3J0aW5nJyxcbiAgICBwdWJsaWNEaXI6IHJlc29sdmUoX19kaXJuYW1lLCAncHVibGljJyksXG4gICAgcmVxdWlyZTogWydraWJhbmEnLCAnZWxhc3RpY3NlYXJjaCcsICd4cGFja19tYWluJ10sXG5cbiAgICB1aUV4cG9ydHM6IHtcbiAgICAgIG5hdmJhckV4dGVuc2lvbnM6IFtcbiAgICAgICAgJ3BsdWdpbnMvcmVwb3J0aW5nL2NvbnRyb2xzL2Rpc2NvdmVyJyxcbiAgICAgICAgJ3BsdWdpbnMvcmVwb3J0aW5nL2NvbnRyb2xzL3Zpc3VhbGl6ZScsXG4gICAgICAgICdwbHVnaW5zL3JlcG9ydGluZy9jb250cm9scy9kYXNoYm9hcmQnLFxuICAgICAgXSxcbiAgICAgIGhhY2tzOiBbICdwbHVnaW5zL3JlcG9ydGluZy9oYWNrcy9qb2JfY29tcGxldGlvbl9ub3RpZmllciddLFxuICAgICAgbWFuYWdlbWVudFNlY3Rpb25zOiBbJ3BsdWdpbnMvcmVwb3J0aW5nL3ZpZXdzL21hbmFnZW1lbnQnXSxcbiAgICB9LFxuXG4gICAgY29uZmlnOiBmdW5jdGlvbiAoSm9pKSB7XG4gICAgICByZXR1cm4gSm9pLm9iamVjdCh7XG4gICAgICAgIGVuYWJsZWQ6IEpvaS5ib29sZWFuKCkuZGVmYXVsdCh0cnVlKSxcbiAgICAgICAga2liYW5hQXBwOiBKb2kuc3RyaW5nKCkucmVnZXgoL15cXC8vKS5kZWZhdWx0KCcvYXBwL2tpYmFuYScpLFxuICAgICAgICBraWJhbmFTZXJ2ZXI6IEpvaS5vYmplY3Qoe1xuICAgICAgICAgIHByb3RvY29sOiBKb2kuc3RyaW5nKCkudmFsaWQoWydodHRwJywgJ2h0dHBzJ10pLFxuICAgICAgICAgIGhvc3RuYW1lOiBKb2kuc3RyaW5nKCksXG4gICAgICAgICAgcG9ydDogSm9pLm51bWJlcigpLmludGVnZXIoKVxuICAgICAgICB9KS5kZWZhdWx0KCksXG4gICAgICAgIHF1ZXVlOiBKb2kub2JqZWN0KHtcbiAgICAgICAgICBpbmRleEludGVydmFsOiBKb2kuc3RyaW5nKCkuZGVmYXVsdCgnd2VlaycpLFxuICAgICAgICAgIHBvbGxJbnRlcnZhbDogSm9pLm51bWJlcigpLmludGVnZXIoKS5kZWZhdWx0KDMwMDApLFxuICAgICAgICAgIHRpbWVvdXQ6IEpvaS5udW1iZXIoKS5pbnRlZ2VyKCkuZGVmYXVsdCgzMDAwMCksXG4gICAgICAgICAgc3luY1NvY2tldFRpbWVvdXQ6IEpvaS5udW1iZXIoKS5pbnRlZ2VyKCksXG4gICAgICAgIH0pLmRlZmF1bHQoKSxcbiAgICAgICAgZ2VuZXJhdGU6IEpvaS5vYmplY3Qoe1xuICAgICAgICAgIHNvY2tldFRpbWVvdXQ6IEpvaS5udW1iZXIoKS5pbnRlZ2VyKCkuZGVmYXVsdCgzMDAwMDApLFxuICAgICAgICB9KS5kZWZhdWx0KCksXG4gICAgICAgIGNhcHR1cmU6IEpvaS5vYmplY3Qoe1xuICAgICAgICAgIHpvb206IEpvaS5udW1iZXIoKS5pbnRlZ2VyKCkuZGVmYXVsdCgxKSxcbiAgICAgICAgICB2aWV3cG9ydDogSm9pLm9iamVjdCh7XG4gICAgICAgICAgICB3aWR0aDogSm9pLm51bWJlcigpLmludGVnZXIoKS5kZWZhdWx0KDEzMjApLFxuICAgICAgICAgICAgaGVpZ2h0OiBKb2kubnVtYmVyKCkuaW50ZWdlcigpLmRlZmF1bHQoNjQwKVxuICAgICAgICAgIH0pLmRlZmF1bHQoKSxcbiAgICAgICAgICB0aW1lb3V0OiBKb2kubnVtYmVyKCkuaW50ZWdlcigpLmRlZmF1bHQoNjAwMCksXG4gICAgICAgICAgbG9hZERlbGF5OiBKb2kubnVtYmVyKCkuaW50ZWdlcigpLmRlZmF1bHQoMzAwMCksXG4gICAgICAgICAgY29uY3VycmVuY3k6IEpvaS5udW1iZXIoKS5pbnRlZ2VyKCkuZGVmYXVsdChhcHBDb25maWcuY29uY3VycmVuY3kpLFxuICAgICAgICB9KS5kZWZhdWx0KCksXG4gICAgICAgIGVuY3J5cHRpb25LZXk6IEpvaS5zdHJpbmcoKVxuICAgICAgfSkuZGVmYXVsdCgpO1xuICAgIH0sXG5cbiAgICBpbml0OiBmdW5jdGlvbiAoc2VydmVyKSB7XG4gICAgICBjb25zdCB0aGlzUGx1Z2luID0gdGhpcztcbiAgICAgIGNvbnN0IGNvbmZpZyA9IHNlcnZlci5jb25maWcoKTtcbiAgICAgIHZhbGlkYXRlQ29uZmlnKGNvbmZpZywgbWVzc2FnZSA9PiBzZXJ2ZXIubG9nKFsncmVwb3J0aW5nJywgJ3dhcm5pbmcnXSwgbWVzc2FnZSkpO1xuXG4gICAgICBjb25zdCB4cGFja01haW5QbHVnaW4gPSBzZXJ2ZXIucGx1Z2lucy54cGFja19tYWluO1xuICAgICAgbWlycm9yUGx1Z2luU3RhdHVzKHhwYWNrTWFpblBsdWdpbiwgdGhpc1BsdWdpbik7XG4gICAgICB4cGFja01haW5QbHVnaW4uc3RhdHVzLm9uY2UoJ2dyZWVuJywgKCkgPT4ge1xuICAgICAgICAvLyBSZWdpc3RlciBhIGZ1bmN0aW9uIHRoYXQgaXMgY2FsbGVkIHdoZW5ldmVyIHRoZSB4cGFjayBpbmZvIGNoYW5nZXMsXG4gICAgICAgIC8vIHRvIHJlLWNvbXB1dGUgdGhlIGxpY2Vuc2UgY2hlY2sgcmVzdWx0cyBmb3IgdGhpcyBwbHVnaW5cbiAgICAgICAgeHBhY2tNYWluUGx1Z2luLmluZm8uZmVhdHVyZSh0aGlzUGx1Z2luLmlkKS5yZWdpc3RlckxpY2Vuc2VDaGVja1Jlc3VsdHNHZW5lcmF0b3IoY2hlY2tMaWNlbnNlKTtcbiAgICAgIH0pO1xuXG4gICAgICBmdW5jdGlvbiBzZXR1cCgpIHtcbiAgICAgICAgLy8gcHJlcGFyZSBwaGFudG9tIGJpbmFyeVxuICAgICAgICByZXR1cm4gcGhhbnRvbS5pbnN0YWxsKGNvbmZpZy5nZXQoJ3BhdGguZGF0YScpKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAocGhhbnRvbVBhY2thZ2UpIHtcbiAgICAgICAgICBzZXJ2ZXIubG9nKFsncmVwb3J0aW5nJywgJ2RlYnVnJ10sIGBQaGFudG9tIGluc3RhbGxlZCBhdCAke3BoYW50b21QYWNrYWdlLmJpbmFyeX1gKTtcblxuICAgICAgICAgIC8vIGludGlhbGl6ZSBhbmQgcmVnaXN0ZXIgYXBwbGljYXRpb24gY29tcG9uZW50c1xuICAgICAgICAgIHNlcnZlci5leHBvc2UoJ3BoYW50b20nLCBwaGFudG9tUGFja2FnZSk7XG4gICAgICAgICAgc2VydmVyLmV4cG9zZSgncXVldWUnLCBjcmVhdGVRdWV1ZShzZXJ2ZXIpKTtcblxuICAgICAgICAgIC8vIFJlcG9ydGluZyByb3V0ZXNcbiAgICAgICAgICBwdWJsaWNSb3V0ZXMoc2VydmVyKTtcbiAgICAgICAgICBmaWxlUm91dGVzKHNlcnZlcik7XG4gICAgICAgICAgam9iUm91dGVzKHNlcnZlcik7XG4gICAgICAgIH0pXG4gICAgICAgIC5jYXRjaChmdW5jdGlvbiAoZXJyKSB7XG4gICAgICAgICAgcmV0dXJuIHRoaXNQbHVnaW4uc3RhdHVzLnJlZChlcnIubWVzc2FnZSk7XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gc2V0dXAoKTtcbiAgICB9XG4gIH0pO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/index.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/index.js",
      "sourcesContent": [
        "import { resolve } from 'path';\nimport mirrorPluginStatus from '../../server/lib/mirror_plugin_status';\nconst publicRoutes = require('./server/routes/public');\nconst fileRoutes = require('./server/routes/file');\nconst jobRoutes = require('./server/routes/jobs');\n\nconst phantom = require('./server/lib/phantom');\nconst createQueue = require('./server/lib/create_queue');\nconst appConfig = require('./server/config/config');\nconst checkLicense = require('./server/lib/check_license');\nconst validateConfig = require('./server/lib/validate_config');\n\nmodule.exports = function (kibana) {\n  return new kibana.Plugin({\n    id: 'reporting',\n    configPrefix: 'xpack.reporting',\n    publicDir: resolve(__dirname, 'public'),\n    require: ['kibana', 'elasticsearch', 'xpack_main'],\n\n    uiExports: {\n      navbarExtensions: [\n        'plugins/reporting/controls/discover',\n        'plugins/reporting/controls/visualize',\n        'plugins/reporting/controls/dashboard',\n      ],\n      hacks: [ 'plugins/reporting/hacks/job_completion_notifier'],\n      managementSections: ['plugins/reporting/views/management'],\n    },\n\n    config: function (Joi) {\n      return Joi.object({\n        enabled: Joi.boolean().default(true),\n        kibanaApp: Joi.string().regex(/^\\//).default('/app/kibana'),\n        kibanaServer: Joi.object({\n          protocol: Joi.string().valid(['http', 'https']),\n          hostname: Joi.string(),\n          port: Joi.number().integer()\n        }).default(),\n        queue: Joi.object({\n          indexInterval: Joi.string().default('week'),\n          pollInterval: Joi.number().integer().default(3000),\n          timeout: Joi.number().integer().default(30000),\n          syncSocketTimeout: Joi.number().integer(),\n        }).default(),\n        generate: Joi.object({\n          socketTimeout: Joi.number().integer().default(300000),\n        }).default(),\n        capture: Joi.object({\n          zoom: Joi.number().integer().default(1),\n          viewport: Joi.object({\n            width: Joi.number().integer().default(1320),\n            height: Joi.number().integer().default(640)\n          }).default(),\n          timeout: Joi.number().integer().default(6000),\n          loadDelay: Joi.number().integer().default(3000),\n          concurrency: Joi.number().integer().default(appConfig.concurrency),\n        }).default(),\n        encryptionKey: Joi.string()\n      }).default();\n    },\n\n    init: function (server) {\n      const thisPlugin = this;\n      const config = server.config();\n      validateConfig(config, message => server.log(['reporting', 'warning'], message));\n\n      const xpackMainPlugin = server.plugins.xpack_main;\n      mirrorPluginStatus(xpackMainPlugin, thisPlugin);\n      xpackMainPlugin.status.once('green', () => {\n        // Register a function that is called whenever the xpack info changes,\n        // to re-compute the license check results for this plugin\n        xpackMainPlugin.info.feature(thisPlugin.id).registerLicenseCheckResultsGenerator(checkLicense);\n      });\n\n      function setup() {\n        // prepare phantom binary\n        return phantom.install(config.get('path.data'))\n        .then(function (phantomPackage) {\n          server.log(['reporting', 'debug'], `Phantom installed at ${phantomPackage.binary}`);\n\n          // intialize and register application components\n          server.expose('phantom', phantomPackage);\n          server.expose('queue', createQueue(server));\n\n          // Reporting routes\n          publicRoutes(server);\n          fileRoutes(server);\n          jobRoutes(server);\n        })\n        .catch(function (err) {\n          return thisPlugin.status.red(err.message);\n        });\n      }\n\n      return setup();\n    }\n  });\n};\n"
      ]
    },
    "mtime": 1485775588029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/routes/public.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar boom = require('boom');\n\nvar _require = require('lodash');\n\nvar has = _require.has;\n\nvar _require2 = require('../lib/constants');\n\nvar API_BASE_URL = _require2.API_BASE_URL;\n\nvar createDocumentJobFactory = require('../lib/create_document_job');\n\nvar _require3 = require('../lib/constants');\n\nvar JOBTYPES = _require3.JOBTYPES;\n\nvar licensePreFactory = require('../lib/license_pre_routing');\nvar userPreRoutingFactory = require('../lib/user_pre_routing');\nvar syncJobHandlerFactory = require('../lib/sync_job_handler');\n\nvar mainEntry = API_BASE_URL + '/generate';\nvar API_TAG = 'api';\n\nmodule.exports = function (server) {\n  var socketTimeout = server.config().get('xpack.reporting.generate.socketTimeout');\n  var esErrors = server.plugins.elasticsearch.errors;\n  var createDocumentJob = createDocumentJobFactory(server);\n  var licensePre = licensePreFactory(server);\n  var userPreRouting = userPreRoutingFactory(server);\n  var syncJobHandler = syncJobHandlerFactory(server);\n\n  function getConfig() {\n    return {\n      timeout: { socket: socketTimeout },\n      tags: [API_TAG],\n      pre: [userPreRouting, licensePre]\n    };\n  };\n\n  // show error about method to user\n  server.route({\n    path: mainEntry + '/{p*}',\n    method: 'GET',\n    handler: function handler(request, reply) {\n      var err = boom.methodNotAllowed('GET is not allowed');\n      err.output.headers.allow = 'POST';\n      reply(err);\n    },\n    config: getConfig()\n  });\n\n  // defined the public routes\n  server.route({\n    path: mainEntry + '/visualization/{savedId}',\n    method: 'POST',\n    handler: function handler(request, reply) {\n      return pdfHandler('visualization', request, reply);\n    },\n    config: getConfig()\n  });\n\n  server.route({\n    path: mainEntry + '/search/{savedId}',\n    method: 'POST',\n    handler: function handler(request, reply) {\n      return pdfHandler('search', request, reply);\n    },\n    config: getConfig()\n  });\n\n  server.route({\n    path: mainEntry + '/dashboard/{savedId}',\n    method: 'POST',\n    handler: function handler(request, reply) {\n      return pdfHandler('dashboard', request, reply);\n    },\n    config: getConfig()\n  });\n\n  function pdfHandler(objectType, request, reply) {\n    var jobType = JOBTYPES.PRINTABLE_PDF;\n    var createJob = createDocumentJob[jobType];\n    var syncResponse = has(request.query, 'sync');\n\n    return createJob(objectType, request).then(function (job) {\n      if (syncResponse) {\n        syncJobHandler(job.id, jobType, request, reply);\n      } else {\n        // return the queue's job information\n        var response = reply(job.toJSON());\n        response.type('application/json');\n      }\n    })['catch'](function (err) {\n      if (err instanceof esErrors['401']) return reply(boom.unauthorized());\n      if (err instanceof esErrors['403']) return reply(boom.forbidden('Sorry, you are not authorized to create reports'));\n      if (err instanceof esErrors['404']) return reply(boom.wrap(err, 404));\n      reply(err);\n    });\n  }\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvcm91dGVzL3B1YmxpYy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQzs7ZUFDYixPQUFPLENBQUMsUUFBUSxDQUFDOztJQUF6QixHQUFHLFlBQUgsR0FBRzs7Z0JBQ2MsT0FBTyxDQUFDLGtCQUFrQixDQUFDOztJQUE1QyxZQUFZLGFBQVosWUFBWTs7QUFDcEIsSUFBTSx3QkFBd0IsR0FBRyxPQUFPLENBQUMsNEJBQTRCLENBQUMsQ0FBQzs7Z0JBQ2xELE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQzs7SUFBeEMsUUFBUSxhQUFSLFFBQVE7O0FBQ2hCLElBQU0saUJBQWlCLEdBQUcsT0FBTyxDQUFFLDRCQUE0QixDQUFDLENBQUM7QUFDakUsSUFBTSxxQkFBcUIsR0FBRyxPQUFPLENBQUMseUJBQXlCLENBQUMsQ0FBQztBQUNqRSxJQUFNLHFCQUFxQixHQUFHLE9BQU8sQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDOztBQUVqRSxJQUFNLFNBQVMsR0FBTSxZQUFZLGNBQVcsQ0FBQztBQUM3QyxJQUFNLE9BQU8sR0FBRyxLQUFLLENBQUM7O0FBRXRCLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxNQUFNLEVBQUU7QUFDakMsTUFBTSxhQUFhLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyx3Q0FBd0MsQ0FBQyxDQUFDO0FBQ3BGLE1BQU0sUUFBUSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsYUFBYSxDQUFDLE1BQU0sQ0FBQztBQUNyRCxNQUFNLGlCQUFpQixHQUFHLHdCQUF3QixDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzNELE1BQU0sVUFBVSxHQUFHLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0FB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SSxHQUFHLFlBQVksUUFBUSxDQUFDLEtBQUssQ0FBQyxFQUFFLE9BQU8sS0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsaURBQWlELENBQUMsQ0FBQyxDQUFDO0FBQ3BILFVBQUksR0FBRyxZQUFZLFFBQVEsQ0FBQyxLQUFLLENBQUMsRUFBRSxPQUFPLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO0FBQ3RFLFdBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQztLQUNaLENBQUMsQ0FBQztHQUNKO0NBQ0YsQ0FBQyIsImZpbGUiOiIvaG9tZS91YnVudHUvd29ya3NwYWNlL2tpYmFuYS01LjAuMi1saW51eC14ODZfNjQvcGx1Z2lucy94LXBhY2svcGx1Z2lucy9yZXBvcnRpbmcvc2VydmVyL3JvdXRlcy9wdWJsaWMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBib29tID0gcmVxdWlyZSgnYm9vbScpO1xuY29uc3QgeyBoYXMgfSA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuY29uc3QgeyBBUElfQkFTRV9VUkwgfSA9IHJlcXVpcmUoJy4uL2xpYi9jb25zdGFudHMnKTtcbmNvbnN0IGNyZWF0ZURvY3VtZW50Sm9iRmFjdG9yeSA9IHJlcXVpcmUoJy4uL2xpYi9jcmVhdGVfZG9jdW1lbnRfam9iJyk7XG5jb25zdCB7IEpPQlRZUEVTIH0gPSByZXF1aXJlKCcuLi9saWIvY29uc3RhbnRzJyk7XG5jb25zdCBsaWNlbnNlUHJlRmFjdG9yeSA9IHJlcXVpcmUgKCcuLi9saWIvbGljZW5zZV9wcmVfcm91dGluZycpO1xuY29uc3QgdXNlclByZVJvdXRpbmdGYWN0b3J5ID0gcmVxdWlyZSgnLi4vbGliL3VzZXJfcHJlX3JvdXRpbmcnKTtcbmNvbnN0IHN5bmNKb2JIYW5kbGVyRmFjdG9yeSA9IHJlcXVpcmUoJy4uL2xpYi9zeW5jX2pvYl9oYW5kbGVyJyk7XG5cbmNvbnN0IG1haW5FbnRyeSA9IGAke0FQSV9CQVNFX1VSTH0vZ2VuZXJhdGVgO1xuY29uc3QgQVBJX1RBRyA9ICdhcGknO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChzZXJ2ZXIpIHtcbiAgY29uc3Qgc29ja2V0VGltZW91dCA9IHNlcnZlci5jb25maWcoKS5nZXQoJ3hwYWNrLnJlcG9ydGluZy5nZW5lcmF0ZS5zb2NrZXRUaW1lb3V0Jyk7XG4gIGNvbnN0IGVzRXJyb3JzID0gc2VydmVyLnBsdWdpbnMuZWxhc3RpY3NlYXJjaC5lcnJvcnM7XG4gIGNvbnN0IGNyZWF0ZURvY3VtZW50Sm9iID0gY3JlYXRlRG9jdW1lbnRKb2JGYWN0b3J5KHNlcnZlcik7XG4gIGNvbnN0IGxpY2Vuc2VQcmUgPSBsaWNlbnNlUHJlRmFjdG9yeShzZXJ2ZXIpO1xuICBjb25zdCB1c2VyUHJlUm91dGluZyA9IHVzZXJQcmVSb3V0aW5nRmFjdG9yeShzZXJ2ZXIpO1xuICBjb25zdCBzeW5jSm9iSGFuZGxlciA9IHN5bmNKb2JIYW5kbGVyRmFjdG9yeShzZXJ2ZXIpO1xuXG4gIGZ1bmN0aW9uIGdldENvbmZpZygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgdGltZW91dDogeyBzb2NrZXQ6IHNvY2tldFRpbWVvdXQgfSxcbiAgICAgIHRhZ3M6IFtBUElfVEFHXSxcbiAgICAgIHByZTogWyB1c2VyUHJlUm91dGluZywgbGljZW5zZVByZSBdLFxuICAgIH07XG4gIH07XG5cbiAgLy8gc2hvdyBlcnJvciBhYm91dCBtZXRob2QgdG8gdXNlclxuICBzZXJ2ZXIucm91dGUoe1xuICAgIHBhdGg6IGAke21haW5FbnRyeX0ve3AqfWAsXG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBoYW5kbGVyOiAocmVxdWVzdCwgcmVwbHkpID0+IHtcbiAgICAgIGNvbnN0IGVyciA9IGJvb20ubWV0aG9kTm90QWxsb3dlZCgnR0VUIGlzIG5vdCBhbGxvd2VkJyk7XG4gICAgICBlcnIub3V0cHV0LmhlYWRlcnMuYWxsb3cgPSAnUE9TVCc7XG4gICAgICByZXBseShlcnIpO1xuICAgIH0sXG4gICAgY29uZmlnOiBnZXRDb25maWcoKSxcbiAgfSk7XG5cbiAgLy8gZGVmaW5lZCB0aGUgcHVibGljIHJvdXRlc1xuICBzZXJ2ZXIucm91dGUoe1xuICAgIHBhdGg6IGAke21haW5FbnRyeX0vdmlzdWFsaXphdGlvbi97c2F2ZWRJZH1gLFxuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGhhbmRsZXI6IChyZXF1ZXN0LCByZXBseSkgPT4gcGRmSGFuZGxlcigndmlzdWFsaXphdGlvbicsIHJlcXVlc3QsIHJlcGx5KSxcbiAgICBjb25maWc6IGdldENvbmZpZygpLFxuICB9KTtcblxuICBzZXJ2ZXIucm91dGUoe1xuICAgIHBhdGg6IGAke21haW5FbnRyeX0vc2VhcmNoL3tzYXZlZElkfWAsXG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgaGFuZGxlcjogKHJlcXVlc3QsIHJlcGx5KSA9PiBwZGZIYW5kbGVyKCdzZWFyY2gnLCByZXF1ZXN0LCByZXBseSksXG4gICAgY29uZmlnOiBnZXRDb25maWcoKSxcbiAgfSk7XG5cbiAgc2VydmVyLnJvdXRlKHtcbiAgICBwYXRoOiBgJHttYWluRW50cnl9L2Rhc2hib2FyZC97c2F2ZWRJZH1gLFxuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIGhhbmRsZXI6IChyZXF1ZXN0LCByZXBseSkgPT4gcGRmSGFuZGxlcignZGFzaGJvYXJkJywgcmVxdWVzdCwgcmVwbHkpLFxuICAgIGNvbmZpZzogZ2V0Q29uZmlnKCksXG4gIH0pO1xuXG4gIGZ1bmN0aW9uIHBkZkhhbmRsZXIob2JqZWN0VHlwZSwgcmVxdWVzdCwgcmVwbHkpIHtcbiAgICBjb25zdCBqb2JUeXBlID0gSk9CVFlQRVMuUFJJTlRBQkxFX1BERjtcbiAgICBjb25zdCBjcmVhdGVKb2IgPSBjcmVhdGVEb2N1bWVudEpvYltqb2JUeXBlXTtcbiAgICBjb25zdCBzeW5jUmVzcG9uc2UgPSBoYXMocmVxdWVzdC5xdWVyeSwgJ3N5bmMnKTtcblxuICAgIHJldHVybiBjcmVhdGVKb2Iob2JqZWN0VHlwZSwgcmVxdWVzdClcbiAgICAudGhlbigoam9iKSA9PiB7XG4gICAgICBpZiAoc3luY1Jlc3BvbnNlKSB7XG4gICAgICAgIHN5bmNKb2JIYW5kbGVyKGpvYi5pZCwgam9iVHlwZSwgcmVxdWVzdCwgcmVwbHkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gcmV0dXJuIHRoZSBxdWV1ZSdzIGpvYiBpbmZvcm1hdGlvblxuICAgICAgICBjb25zdCByZXNwb25zZSA9IHJlcGx5KGpvYi50b0pTT04oKSk7XG4gICAgICAgIHJlc3BvbnNlLnR5cGUoJ2FwcGxpY2F0aW9uL2pzb24nKTtcbiAgICAgIH1cbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBpZiAoZXJyIGluc3RhbmNlb2YgZXNFcnJvcnNbJzQwMSddKSByZXR1cm4gcmVwbHkoYm9vbS51bmF1dGhvcml6ZWQoKSk7XG4gICAgICBpZiAoZXJyIGluc3RhbmNlb2YgZXNFcnJvcnNbJzQwMyddKSByZXR1cm4gcmVwbHkoYm9vbS5mb3JiaWRkZW4oJ1NvcnJ5LCB5b3UgYXJlIG5vdCBhdXRob3JpemVkIHRvIGNyZWF0ZSByZXBvcnRzJykpO1xuICAgICAgaWYgKGVyciBpbnN0YW5jZW9mIGVzRXJyb3JzWyc0MDQnXSkgcmV0dXJuIHJlcGx5KGJvb20ud3JhcChlcnIsIDQwNCkpO1xuICAgICAgcmVwbHkoZXJyKTtcbiAgICB9KTtcbiAgfVxufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/routes/public.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/routes/public.js",
      "sourcesContent": [
        "const boom = require('boom');\nconst { has } = require('lodash');\nconst { API_BASE_URL } = require('../lib/constants');\nconst createDocumentJobFactory = require('../lib/create_document_job');\nconst { JOBTYPES } = require('../lib/constants');\nconst licensePreFactory = require ('../lib/license_pre_routing');\nconst userPreRoutingFactory = require('../lib/user_pre_routing');\nconst syncJobHandlerFactory = require('../lib/sync_job_handler');\n\nconst mainEntry = `${API_BASE_URL}/generate`;\nconst API_TAG = 'api';\n\nmodule.exports = function (server) {\n  const socketTimeout = server.config().get('xpack.reporting.generate.socketTimeout');\n  const esErrors = server.plugins.elasticsearch.errors;\n  const createDocumentJob = createDocumentJobFactory(server);\n  const licensePre = licensePreFactory(server);\n  const userPreRouting = userPreRoutingFactory(server);\n  const syncJobHandler = syncJobHandlerFactory(server);\n\n  function getConfig() {\n    return {\n      timeout: { socket: socketTimeout },\n      tags: [API_TAG],\n      pre: [ userPreRouting, licensePre ],\n    };\n  };\n\n  // show error about method to user\n  server.route({\n    path: `${mainEntry}/{p*}`,\n    method: 'GET',\n    handler: (request, reply) => {\n      const err = boom.methodNotAllowed('GET is not allowed');\n      err.output.headers.allow = 'POST';\n      reply(err);\n    },\n    config: getConfig(),\n  });\n\n  // defined the public routes\n  server.route({\n    path: `${mainEntry}/visualization/{savedId}`,\n    method: 'POST',\n    handler: (request, reply) => pdfHandler('visualization', request, reply),\n    config: getConfig(),\n  });\n\n  server.route({\n    path: `${mainEntry}/search/{savedId}`,\n    method: 'POST',\n    handler: (request, reply) => pdfHandler('search', request, reply),\n    config: getConfig(),\n  });\n\n  server.route({\n    path: `${mainEntry}/dashboard/{savedId}`,\n    method: 'POST',\n    handler: (request, reply) => pdfHandler('dashboard', request, reply),\n    config: getConfig(),\n  });\n\n  function pdfHandler(objectType, request, reply) {\n    const jobType = JOBTYPES.PRINTABLE_PDF;\n    const createJob = createDocumentJob[jobType];\n    const syncResponse = has(request.query, 'sync');\n\n    return createJob(objectType, request)\n    .then((job) => {\n      if (syncResponse) {\n        syncJobHandler(job.id, jobType, request, reply);\n      } else {\n        // return the queue's job information\n        const response = reply(job.toJSON());\n        response.type('application/json');\n      }\n    })\n    .catch((err) => {\n      if (err instanceof esErrors['401']) return reply(boom.unauthorized());\n      if (err instanceof esErrors['403']) return reply(boom.forbidden('Sorry, you are not authorized to create reports'));\n      if (err instanceof esErrors['404']) return reply(boom.wrap(err, 404));\n      reply(err);\n    });\n  }\n};\n"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/constants.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nmodule.exports = {\n  QUEUE_INDEX: '.reporting',\n  QUEUE_DOCTYPE: 'esqueue',\n\n  JOBTYPES: {\n    PRINTABLE_PDF: 'printable_pdf'\n  },\n\n  JOB_COMPLETION_CHECK_FREQUENCY_IN_MS: 10000,\n  JOB_COMPLETION_STORAGE_KEY_LAST_CHECK: 'xpack.reporting.jobCompletionLastCheckedOn',\n\n  API_BASE_URL: '/api/reporting'\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL2NvbnN0YW50cy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLE1BQU0sQ0FBQyxPQUFPLEdBQUc7QUFDZixhQUFXLEVBQUUsWUFBWTtBQUN6QixlQUFhLEVBQUUsU0FBUzs7QUFFeEIsVUFBUSxFQUFFO0FBQ1IsaUJBQWEsRUFBRSxlQUFlO0dBQy9COztBQUVELHNDQUFvQyxFQUFFLEtBQUs7QUFDM0MsdUNBQXFDLEVBQUUsNENBQTRDOztBQUVuRixjQUFZLEVBQUUsZ0JBQWdCO0NBQy9CLENBQUMiLCJmaWxlIjoiL2hvbWUvdWJ1bnR1L3dvcmtzcGFjZS9raWJhbmEtNS4wLjItbGludXgteDg2XzY0L3BsdWdpbnMveC1wYWNrL3BsdWdpbnMvcmVwb3J0aW5nL3NlcnZlci9saWIvY29uc3RhbnRzLmpzIiwic291cmNlc0NvbnRlbnQiOlsibW9kdWxlLmV4cG9ydHMgPSB7XG4gIFFVRVVFX0lOREVYOiAnLnJlcG9ydGluZycsXG4gIFFVRVVFX0RPQ1RZUEU6ICdlc3F1ZXVlJyxcblxuICBKT0JUWVBFUzoge1xuICAgIFBSSU5UQUJMRV9QREY6ICdwcmludGFibGVfcGRmJyxcbiAgfSxcblxuICBKT0JfQ09NUExFVElPTl9DSEVDS19GUkVRVUVOQ1lfSU5fTVM6IDEwMDAwLFxuICBKT0JfQ09NUExFVElPTl9TVE9SQUdFX0tFWV9MQVNUX0NIRUNLOiAneHBhY2sucmVwb3J0aW5nLmpvYkNvbXBsZXRpb25MYXN0Q2hlY2tlZE9uJyxcblxuICBBUElfQkFTRV9VUkw6ICcvYXBpL3JlcG9ydGluZydcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/constants.js"
      ],
      "names": [],
      "mappings": ";;AAAA,MAAM,CAAC,OAAO,GAAG;AACf,aAAW,EAAE,YAAY;AACzB,eAAa,EAAE,SAAS;;AAExB,UAAQ,EAAE;AACR,iBAAa,EAAE,eAAe;GAC/B;;AAED,sCAAoC,EAAE,KAAK;AAC3C,uCAAqC,EAAE,4CAA4C;;AAEnF,cAAY,EAAE,gBAAgB;CAC/B,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/constants.js",
      "sourcesContent": [
        "module.exports = {\n  QUEUE_INDEX: '.reporting',\n  QUEUE_DOCTYPE: 'esqueue',\n\n  JOBTYPES: {\n    PRINTABLE_PDF: 'printable_pdf',\n  },\n\n  JOB_COMPLETION_CHECK_FREQUENCY_IN_MS: 10000,\n  JOB_COMPLETION_STORAGE_KEY_LAST_CHECK: 'xpack.reporting.jobCompletionLastCheckedOn',\n\n  API_BASE_URL: '/api/reporting'\n};\n"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/create_document_job.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar moment = require('moment');\n\nvar _require = require('lodash');\n\nvar get = _require.get;\n\nvar esqueueEvents = require('esqueue/lib/constants/events');\nvar constants = require('./constants');\nvar getUserFactory = require('./get_user');\nvar getObjectQueueFactory = require('./get_object_queue');\nvar cryptoFactory = require('./crypto');\nvar oncePerServer = require('./once_per_server');\n\nfunction createDocumentJobFactory(server) {\n  var jobQueue = server.plugins.reporting.queue;\n  var filterHeaders = server.plugins.elasticsearch.filterHeaders;\n  var queueConfig = server.config().get('xpack.reporting.queue');\n  var whitelistHeaders = server.config().get('elasticsearch.requestHeadersWhitelist');\n\n  var getObjectQueue = getObjectQueueFactory(server);\n  var getUser = getUserFactory(server);\n  var crypto = cryptoFactory(server);\n\n  var JOBTYPES = constants.JOBTYPES;\n\n  var jobTypes = {};\n\n  jobTypes[JOBTYPES.PRINTABLE_PDF] = function callee$1$0(objectType, request) {\n    var date, objId, query, headers, serializedEncryptedHeaders;\n    return regeneratorRuntime.async(function callee$1$0$(context$2$0) {\n      while (1) switch (context$2$0.prev = context$2$0.next) {\n        case 0:\n          date = moment().toISOString();\n          objId = request.params.savedId;\n          query = request.query;\n          headers = get(request, 'headers');\n          context$2$0.next = 6;\n          return regeneratorRuntime.awrap(crypto.encrypt(headers));\n\n        case 6:\n          serializedEncryptedHeaders = context$2$0.sent;\n          return context$2$0.abrupt('return', getUser(request).then(function (user) {\n            // get resulting kibana saved object documents\n            return getObjectQueue(request, objectType, objId).then(function (objectQueue) {\n              server.log(['reporting', 'debug'], objectQueue.objects.length + ' saved object(s) to process');\n\n              var savedObjects = objectQueue.objects.map(function (savedObj) {\n                return savedObj.toJSON(query);\n              });\n\n              var payload = {\n                id: objectQueue.id,\n                title: objectQueue.title,\n                description: objectQueue.description,\n                type: objectQueue.type,\n                objects: savedObjects,\n                date: date,\n                query: query,\n                headers: serializedEncryptedHeaders\n              };\n\n              var options = {\n                timeout: queueConfig.timeout * objectQueue.objects.length,\n                created_by: get(user, 'username', false),\n                headers: filterHeaders(headers, whitelistHeaders)\n              };\n\n              return { payload: payload, options: options };\n            }).then(function (params) {\n              var payload = params.payload;\n              var options = params.options;\n\n              return new Promise(function (resolve, reject) {\n                var job = jobQueue.addJob(JOBTYPES.PRINTABLE_PDF, payload, options);\n                job.on(esqueueEvents.EVENT_JOB_CREATED, function () {\n                  return resolve(job);\n                });\n                job.on(esqueueEvents.EVENT_JOB_CREATE_ERROR, reject);\n              });\n            });\n          }));\n\n        case 8:\n        case 'end':\n          return context$2$0.stop();\n      }\n    }, null, this);\n  };\n\n  return jobTypes;\n}\n\nmodule.exports = oncePerServer(createDocumentJobFactory);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL2NyZWF0ZV9kb2N1bWVudF9qb2IuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7O2VBQ2pCLE9BQU8sQ0FBQyxRQUFRLENBQUM7O0lBQXpCLEdBQUcsWUFBSCxHQUFHOztBQUNYLElBQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDO0FBQzlELElBQU0sU0FBUyxHQUFHLE9BQU8sQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUN6QyxJQUFNLGNBQWMsR0FBRyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDN0MsSUFBTSxxQkFBcUIsR0FBRyxPQUFPLENBQUMsb0JBQW9CLENBQUMsQ0FBQztBQUM1RCxJQUFNLGFBQWEsR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDMUMsSUFBTSxhQUFhLEdBQUcsT0FBTyxDQUFDLG1CQUFtQixDQUFDLENBQUM7O0FBRW5ELFNBQVMsd0JBQXdCLENBQUMsTUFBTSxFQUFFO0FBQ3hDLE1BQU0sUUFBUSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQztBQUNoRCxNQUFNLGFBQWEsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUM7QUFDakUsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDO0FBQ2pFLE1BQU0sZ0JBQWdCLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyx1Q0FBdUMsQ0FBQyxDQUFDOztBQUV0RixNQUFNLGNBQWMsR0FBRyxxQkFBcUIsQ0FBQyxNQUFNLENBQUMsQ0FBQztB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Q0FBQzs7QUFFRixTQUFPLFFBQVEsQ0FBQztDQUNqQjs7QUFFRCxNQUFNLENBQUMsT0FBTyxHQUFHLGFBQWEsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL2NyZWF0ZV9kb2N1bWVudF9qb2IuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBtb21lbnQgPSByZXF1aXJlKCdtb21lbnQnKTtcbmNvbnN0IHsgZ2V0IH0gPSByZXF1aXJlKCdsb2Rhc2gnKTtcbmNvbnN0IGVzcXVldWVFdmVudHMgPSByZXF1aXJlKCdlc3F1ZXVlL2xpYi9jb25zdGFudHMvZXZlbnRzJyk7XG5jb25zdCBjb25zdGFudHMgPSByZXF1aXJlKCcuL2NvbnN0YW50cycpO1xuY29uc3QgZ2V0VXNlckZhY3RvcnkgPSByZXF1aXJlKCcuL2dldF91c2VyJyk7XG5jb25zdCBnZXRPYmplY3RRdWV1ZUZhY3RvcnkgPSByZXF1aXJlKCcuL2dldF9vYmplY3RfcXVldWUnKTtcbmNvbnN0IGNyeXB0b0ZhY3RvcnkgPSByZXF1aXJlKCcuL2NyeXB0bycpO1xuY29uc3Qgb25jZVBlclNlcnZlciA9IHJlcXVpcmUoJy4vb25jZV9wZXJfc2VydmVyJyk7XG5cbmZ1bmN0aW9uIGNyZWF0ZURvY3VtZW50Sm9iRmFjdG9yeShzZXJ2ZXIpIHtcbiAgY29uc3Qgam9iUXVldWUgPSBzZXJ2ZXIucGx1Z2lucy5yZXBvcnRpbmcucXVldWU7XG4gIGNvbnN0IGZpbHRlckhlYWRlcnMgPSBzZXJ2ZXIucGx1Z2lucy5lbGFzdGljc2VhcmNoLmZpbHRlckhlYWRlcnM7XG4gIGNvbnN0IHF1ZXVlQ29uZmlnID0gc2VydmVyLmNvbmZpZygpLmdldCgneHBhY2sucmVwb3J0aW5nLnF1ZXVlJyk7XG4gIGNvbnN0IHdoaXRlbGlzdEhlYWRlcnMgPSBzZXJ2ZXIuY29uZmlnKCkuZ2V0KCdlbGFzdGljc2VhcmNoLnJlcXVlc3RIZWFkZXJzV2hpdGVsaXN0Jyk7XG5cbiAgY29uc3QgZ2V0T2JqZWN0UXVldWUgPSBnZXRPYmplY3RRdWV1ZUZhY3Rvcnkoc2VydmVyKTtcbiAgY29uc3QgZ2V0VXNlciA9IGdldFVzZXJGYWN0b3J5KHNlcnZlcik7XG4gIGNvbnN0IGNyeXB0byA9IGNyeXB0b0ZhY3Rvcnkoc2VydmVyKTtcblxuICBjb25zdCB7IEpPQlRZUEVTIH0gPSBjb25zdGFudHM7XG4gIGNvbnN0IGpvYlR5cGVzID0ge307XG5cbiAgam9iVHlwZXNbSk9CVFlQRVMuUFJJTlRBQkxFX1BERl0gPSBhc3luYyBmdW5jdGlvbiAob2JqZWN0VHlwZSwgcmVxdWVzdCkge1xuICAgIGNvbnN0IGRhdGUgPSBtb21lbnQoKS50b0lTT1N0cmluZygpO1xuICAgIGNvbnN0IG9iaklkID0gcmVxdWVzdC5wYXJhbXMuc2F2ZWRJZDtcbiAgICBjb25zdCBxdWVyeSA9IHJlcXVlc3QucXVlcnk7XG5cbiAgICBjb25zdCBoZWFkZXJzID0gZ2V0KHJlcXVlc3QsICdoZWFkZXJzJyk7XG4gICAgY29uc3Qgc2VyaWFsaXplZEVuY3J5cHRlZEhlYWRlcnMgPSBhd2FpdCBjcnlwdG8uZW5jcnlwdChoZWFkZXJzKTtcblxuICAgIHJldHVybiBnZXRVc2VyKHJlcXVlc3QpXG4gICAgLnRoZW4oKHVzZXIpID0+IHtcbiAgICAgIC8vIGdldCByZXN1bHRpbmcga2liYW5hIHNhdmVkIG9iamVjdCBkb2N1bWVudHNcbiAgICAgIHJldHVybiBnZXRPYmplY3RRdWV1ZShyZXF1ZXN0LCBvYmplY3RUeXBlLCBvYmpJZClcbiAgICAgIC50aGVuKGZ1bmN0aW9uIChvYmplY3RRdWV1ZSkge1xuICAgICAgICBzZXJ2ZXIubG9nKFsncmVwb3J0aW5nJywgJ2RlYnVnJ10sIGAke29iamVjdFF1ZXVlLm9iamVjdHMubGVuZ3RofSBzYXZlZCBvYmplY3QocykgdG8gcHJvY2Vzc2ApO1xuXG4gICAgICAgIGNvbnN0IHNhdmVkT2JqZWN0cyA9IG9iamVjdFF1ZXVlLm9iamVjdHMubWFwKChzYXZlZE9iaikgPT4gc2F2ZWRPYmoudG9KU09OKHF1ZXJ5KSk7XG5cbiAgICAgICAgY29uc3QgcGF5bG9hZCA9IHtcbiAgICAgICAgICBpZDogb2JqZWN0UXVldWUuaWQsXG4gICAgICAgICAgdGl0bGU6IG9iamVjdFF1ZXVlLnRpdGxlLFxuICAgICAgICAgIGRlc2NyaXB0aW9uOiBvYmplY3RRdWV1ZS5kZXNjcmlwdGlvbixcbiAgICAgICAgICB0eXBlOiBvYmplY3RRdWV1ZS50eXBlLFxuICAgICAgICAgIG9iamVjdHM6IHNhdmVkT2JqZWN0cyxcbiAgICAgICAgICBkYXRlLFxuICAgICAgICAgIHF1ZXJ5LFxuICAgICAgICAgIGhlYWRlcnM6IHNlcmlhbGl6ZWRFbmNyeXB0ZWRIZWFkZXJzLFxuICAgICAgICB9O1xuXG4gICAgICAgIGNvbnN0IG9wdGlvbnMgPSB7XG4gICAgICAgICAgdGltZW91dDogcXVldWVDb25maWcudGltZW91dCAqIG9iamVjdFF1ZXVlLm9iamVjdHMubGVuZ3RoLFxuICAgICAgICAgIGNyZWF0ZWRfYnk6IGdldCh1c2VyLCAndXNlcm5hbWUnLCBmYWxzZSksXG4gICAgICAgICAgaGVhZGVyczogZmlsdGVySGVhZGVycyhoZWFkZXJzLCB3aGl0ZWxpc3RIZWFkZXJzKSxcbiAgICAgICAgfTtcblxuICAgICAgICByZXR1cm4geyBwYXlsb2FkLCBvcHRpb25zIH07XG4gICAgICB9KVxuICAgICAgLnRoZW4ocGFyYW1zID0+IHtcbiAgICAgICAgY29uc3QgeyBwYXlsb2FkLCBvcHRpb25zIH0gPSBwYXJhbXM7XG5cbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgICBjb25zdCBqb2IgPSBqb2JRdWV1ZS5hZGRKb2IoSk9CVFlQRVMuUFJJTlRBQkxFX1BERiwgcGF5bG9hZCwgb3B0aW9ucyk7XG4gICAgICAgICAgam9iLm9uKGVzcXVldWVFdmVudHMuRVZFTlRfSk9CX0NSRUFURUQsICgpID0+IHJlc29sdmUoam9iKSk7XG4gICAgICAgICAgam9iLm9uKGVzcXVldWVFdmVudHMuRVZFTlRfSk9CX0NSRUFURV9FUlJPUiwgcmVqZWN0KTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcblxuICByZXR1cm4gam9iVHlwZXM7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gb25jZVBlclNlcnZlcihjcmVhdGVEb2N1bWVudEpvYkZhY3RvcnkpO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/create_document_job.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/create_document_job.js",
      "sourcesContent": [
        "const moment = require('moment');\nconst { get } = require('lodash');\nconst esqueueEvents = require('esqueue/lib/constants/events');\nconst constants = require('./constants');\nconst getUserFactory = require('./get_user');\nconst getObjectQueueFactory = require('./get_object_queue');\nconst cryptoFactory = require('./crypto');\nconst oncePerServer = require('./once_per_server');\n\nfunction createDocumentJobFactory(server) {\n  const jobQueue = server.plugins.reporting.queue;\n  const filterHeaders = server.plugins.elasticsearch.filterHeaders;\n  const queueConfig = server.config().get('xpack.reporting.queue');\n  const whitelistHeaders = server.config().get('elasticsearch.requestHeadersWhitelist');\n\n  const getObjectQueue = getObjectQueueFactory(server);\n  const getUser = getUserFactory(server);\n  const crypto = cryptoFactory(server);\n\n  const { JOBTYPES } = constants;\n  const jobTypes = {};\n\n  jobTypes[JOBTYPES.PRINTABLE_PDF] = async function (objectType, request) {\n    const date = moment().toISOString();\n    const objId = request.params.savedId;\n    const query = request.query;\n\n    const headers = get(request, 'headers');\n    const serializedEncryptedHeaders = await crypto.encrypt(headers);\n\n    return getUser(request)\n    .then((user) => {\n      // get resulting kibana saved object documents\n      return getObjectQueue(request, objectType, objId)\n      .then(function (objectQueue) {\n        server.log(['reporting', 'debug'], `${objectQueue.objects.length} saved object(s) to process`);\n\n        const savedObjects = objectQueue.objects.map((savedObj) => savedObj.toJSON(query));\n\n        const payload = {\n          id: objectQueue.id,\n          title: objectQueue.title,\n          description: objectQueue.description,\n          type: objectQueue.type,\n          objects: savedObjects,\n          date,\n          query,\n          headers: serializedEncryptedHeaders,\n        };\n\n        const options = {\n          timeout: queueConfig.timeout * objectQueue.objects.length,\n          created_by: get(user, 'username', false),\n          headers: filterHeaders(headers, whitelistHeaders),\n        };\n\n        return { payload, options };\n      })\n      .then(params => {\n        const { payload, options } = params;\n\n        return new Promise((resolve, reject) => {\n          const job = jobQueue.addJob(JOBTYPES.PRINTABLE_PDF, payload, options);\n          job.on(esqueueEvents.EVENT_JOB_CREATED, () => resolve(job));\n          job.on(esqueueEvents.EVENT_JOB_CREATE_ERROR, reject);\n        });\n      });\n    });\n  };\n\n  return jobTypes;\n}\n\nmodule.exports = oncePerServer(createDocumentJobFactory);\n"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/get_user.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _require = require('lodash');\n\nvar get = _require.get;\nvar noop = _require.noop;\n\nvar oncePerServer = require('./once_per_server');\n\nfunction getUserFactory(server) {\n  return function (request) {\n    var getUser = get(server.plugins, 'security.getUser', noop);\n    return Promise.resolve(getUser(request));\n  };\n}\n\nmodule.exports = oncePerServer(getUserFactory);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL2dldF91c2VyLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O2VBQXNCLE9BQU8sQ0FBQyxRQUFRLENBQUM7O0lBQS9CLEdBQUcsWUFBSCxHQUFHO0lBQUUsSUFBSSxZQUFKLElBQUk7O0FBQ2pCLElBQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDOztBQUVuRCxTQUFTLGNBQWMsQ0FBQyxNQUFNLEVBQUU7QUFDOUIsU0FBTyxVQUFDLE9BQU8sRUFBSztBQUNsQixRQUFNLE9BQU8sR0FBRyxHQUFHLENBQUMsTUFBTSxDQUFDLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUM5RCxXQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLENBQUM7R0FDMUMsQ0FBQztDQUNIOztBQUVELE1BQU0sQ0FBQyxPQUFPLEdBQUcsYUFBYSxDQUFDLGNBQWMsQ0FBQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL2dldF91c2VyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBnZXQsIG5vb3AgfSA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuY29uc3Qgb25jZVBlclNlcnZlciA9IHJlcXVpcmUoJy4vb25jZV9wZXJfc2VydmVyJyk7XG5cbmZ1bmN0aW9uIGdldFVzZXJGYWN0b3J5KHNlcnZlcikge1xuICByZXR1cm4gKHJlcXVlc3QpID0+IHtcbiAgICBjb25zdCBnZXRVc2VyID0gZ2V0KHNlcnZlci5wbHVnaW5zLCAnc2VjdXJpdHkuZ2V0VXNlcicsIG5vb3ApO1xuICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUoZ2V0VXNlcihyZXF1ZXN0KSk7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gb25jZVBlclNlcnZlcihnZXRVc2VyRmFjdG9yeSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/get_user.js"
      ],
      "names": [],
      "mappings": ";;eAAsB,OAAO,CAAC,QAAQ,CAAC;;IAA/B,GAAG,YAAH,GAAG;IAAE,IAAI,YAAJ,IAAI;;AACjB,IAAM,aAAa,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC;;AAEnD,SAAS,cAAc,CAAC,MAAM,EAAE;AAC9B,SAAO,UAAC,OAAO,EAAK;AAClB,QAAM,OAAO,GAAG,GAAG,CAAC,MAAM,CAAC,OAAO,EAAE,kBAAkB,EAAE,IAAI,CAAC,CAAC;AAC9D,WAAO,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;GAC1C,CAAC;CACH;;AAED,MAAM,CAAC,OAAO,GAAG,aAAa,CAAC,cAAc,CAAC,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/get_user.js",
      "sourcesContent": [
        "const { get, noop } = require('lodash');\nconst oncePerServer = require('./once_per_server');\n\nfunction getUserFactory(server) {\n  return (request) => {\n    const getUser = get(server.plugins, 'security.getUser', noop);\n    return Promise.resolve(getUser(request));\n  };\n}\n\nmodule.exports = oncePerServer(getUserFactory);\n"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/once_per_server.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _require = require('lodash');\n\nvar memoize = _require.memoize;\n\n/**\n * allow this function to be called multiple times, but\n * ensure that it only received one argument, the server,\n * and cache the return value so that subsequent calls get\n * the exact same value.\n *\n * This is intended to be used by service factories like getObjectQueueFactory\n *\n * @param  {Function} fn - the factory function\n * @return {any}\n */\nmodule.exports = function (fn) {\n  var memoized = memoize(function (server) {\n    if (arguments.length !== 1) {\n      throw new TypeError('This function expects to be called with a single argument');\n    }\n\n    if (!server || typeof server.expose !== 'function') {\n      throw new TypeError('This function expects to be passed the server');\n    }\n\n    return fn.call(this, server);\n  });\n\n  // use a weak map a the cache so that:\n  //  1. return values mapped to the actual server instance\n  //  2. return value lifecycle matches that of the server\n  memoized.cache = new WeakMap();\n\n  return memoized;\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL29uY2VfcGVyX3NlcnZlci5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztlQUFvQixPQUFPLENBQUMsUUFBUSxDQUFDOztJQUE3QixPQUFPLFlBQVAsT0FBTzs7Ozs7Ozs7Ozs7OztBQWFmLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxFQUFFLEVBQUU7QUFDN0IsTUFBTSxRQUFRLEdBQUcsT0FBTyxDQUFDLFVBQVUsTUFBTSxFQUFFO0FBQ3pDLFFBQUksU0FBUyxDQUFDLE1BQU0sS0FBSyxDQUFDLEVBQUU7QUFDMUIsWUFBTSxJQUFJLFNBQVMsQ0FBQywyREFBMkQsQ0FBQyxDQUFDO0tBQ2xGOztBQUVELFFBQUksQ0FBQyxNQUFNLElBQUksT0FBTyxNQUFNLENBQUMsTUFBTSxLQUFLLFVBQVUsRUFBRTtBQUNsRCxZQUFNLElBQUksU0FBUyxDQUFDLCtDQUErQyxDQUFDLENBQUM7S0FDdEU7O0FBRUQsV0FBTyxFQUFFLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQztHQUM5QixDQUFDLENBQUM7Ozs7O0FBS0gsVUFBUSxDQUFDLEtBQUssR0FBRyxJQUFJLE9BQU8sRUFBQSxDQUFDOztBQUU3QixTQUFPLFFBQVEsQ0FBQztDQUNqQixDQUFDIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL29uY2VfcGVyX3NlcnZlci5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgbWVtb2l6ZSB9ID0gcmVxdWlyZSgnbG9kYXNoJyk7XG5cbi8qKlxuICogYWxsb3cgdGhpcyBmdW5jdGlvbiB0byBiZSBjYWxsZWQgbXVsdGlwbGUgdGltZXMsIGJ1dFxuICogZW5zdXJlIHRoYXQgaXQgb25seSByZWNlaXZlZCBvbmUgYXJndW1lbnQsIHRoZSBzZXJ2ZXIsXG4gKiBhbmQgY2FjaGUgdGhlIHJldHVybiB2YWx1ZSBzbyB0aGF0IHN1YnNlcXVlbnQgY2FsbHMgZ2V0XG4gKiB0aGUgZXhhY3Qgc2FtZSB2YWx1ZS5cbiAqXG4gKiBUaGlzIGlzIGludGVuZGVkIHRvIGJlIHVzZWQgYnkgc2VydmljZSBmYWN0b3JpZXMgbGlrZSBnZXRPYmplY3RRdWV1ZUZhY3RvcnlcbiAqXG4gKiBAcGFyYW0gIHtGdW5jdGlvbn0gZm4gLSB0aGUgZmFjdG9yeSBmdW5jdGlvblxuICogQHJldHVybiB7YW55fVxuICovXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChmbikge1xuICBjb25zdCBtZW1vaXplZCA9IG1lbW9pemUoZnVuY3Rpb24gKHNlcnZlcikge1xuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoICE9PSAxKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGlzIGZ1bmN0aW9uIGV4cGVjdHMgdG8gYmUgY2FsbGVkIHdpdGggYSBzaW5nbGUgYXJndW1lbnQnKTtcbiAgICB9XG5cbiAgICBpZiAoIXNlcnZlciB8fCB0eXBlb2Ygc2VydmVyLmV4cG9zZSAhPT0gJ2Z1bmN0aW9uJykge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVGhpcyBmdW5jdGlvbiBleHBlY3RzIHRvIGJlIHBhc3NlZCB0aGUgc2VydmVyJyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZuLmNhbGwodGhpcywgc2VydmVyKTtcbiAgfSk7XG5cbiAgLy8gdXNlIGEgd2VhayBtYXAgYSB0aGUgY2FjaGUgc28gdGhhdDpcbiAgLy8gIDEuIHJldHVybiB2YWx1ZXMgbWFwcGVkIHRvIHRoZSBhY3R1YWwgc2VydmVyIGluc3RhbmNlXG4gIC8vICAyLiByZXR1cm4gdmFsdWUgbGlmZWN5Y2xlIG1hdGNoZXMgdGhhdCBvZiB0aGUgc2VydmVyXG4gIG1lbW9pemVkLmNhY2hlID0gbmV3IFdlYWtNYXA7XG5cbiAgcmV0dXJuIG1lbW9pemVkO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/once_per_server.js"
      ],
      "names": [],
      "mappings": ";;eAAoB,OAAO,CAAC,QAAQ,CAAC;;IAA7B,OAAO,YAAP,OAAO;;;;;;;;;;;;;AAaf,MAAM,CAAC,OAAO,GAAG,UAAU,EAAE,EAAE;AAC7B,MAAM,QAAQ,GAAG,OAAO,CAAC,UAAU,MAAM,EAAE;AACzC,QAAI,SAAS,CAAC,MAAM,KAAK,CAAC,EAAE;AAC1B,YAAM,IAAI,SAAS,CAAC,2DAA2D,CAAC,CAAC;KAClF;;AAED,QAAI,CAAC,MAAM,IAAI,OAAO,MAAM,CAAC,MAAM,KAAK,UAAU,EAAE;AAClD,YAAM,IAAI,SAAS,CAAC,+CAA+C,CAAC,CAAC;KACtE;;AAED,WAAO,EAAE,CAAC,IAAI,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;GAC9B,CAAC,CAAC;;;;;AAKH,UAAQ,CAAC,KAAK,GAAG,IAAI,OAAO,EAAA,CAAC;;AAE7B,SAAO,QAAQ,CAAC;CACjB,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/once_per_server.js",
      "sourcesContent": [
        "const { memoize } = require('lodash');\n\n/**\n * allow this function to be called multiple times, but\n * ensure that it only received one argument, the server,\n * and cache the return value so that subsequent calls get\n * the exact same value.\n *\n * This is intended to be used by service factories like getObjectQueueFactory\n *\n * @param  {Function} fn - the factory function\n * @return {any}\n */\nmodule.exports = function (fn) {\n  const memoized = memoize(function (server) {\n    if (arguments.length !== 1) {\n      throw new TypeError('This function expects to be called with a single argument');\n    }\n\n    if (!server || typeof server.expose !== 'function') {\n      throw new TypeError('This function expects to be passed the server');\n    }\n\n    return fn.call(this, server);\n  });\n\n  // use a weak map a the cache so that:\n  //  1. return values mapped to the actual server instance\n  //  2. return value lifecycle matches that of the server\n  memoized.cache = new WeakMap;\n\n  return memoized;\n};\n"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/get_object_queue.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nvar savedObjectsFactory = require('../lib/saved_objects');\nvar oncePerServer = require('./once_per_server');\n\nfunction getObjectQueueFactory(server) {\n  var callWithRequest = server.plugins.elasticsearch.callWithRequest;\n  var config = server.config();\n  var requestConfig = _.defaults(config.get('xpack.reporting.kibanaServer'), {\n    'kibanaApp': config.get('server.basePath') + config.get('xpack.reporting.kibanaApp'),\n    'kibanaIndex': config.get('kibana.index'),\n    'protocol': server.info.protocol,\n    'hostname': config.get('server.host'),\n    'port': config.get('server.port')\n  });\n\n  var savedObjects = savedObjectsFactory(callWithRequest, requestConfig);\n\n  function formatObject(parent, objects) {\n    return Object.assign({\n      id: parent.id,\n      title: parent.title,\n      description: parent.description,\n      type: parent.type,\n      objects: objects\n    });\n  }\n\n  function getDashboardPanels(request, savedObj) {\n    try {\n      var panels = JSON.parse(savedObj.panelsJSON);\n      return panels.map(function (panel) {\n        return savedObjects.get(request, panel.type, panel.id).then(function (obj) {\n          obj.panelIndex = panel.panelIndex;\n          return obj;\n        });\n      });\n    } catch (e) {\n      throw new Error('Failed to retrieve Panels from Saved Dashboard: ' + e.message);\n    }\n  }\n\n  return function getObjectQueue(request, type, objId) {\n    if (type === 'dashboard') {\n      return savedObjects.get(request, type, objId, ['panelsJSON']).then(function (savedObj) {\n        var panelObjects = getDashboardPanels(request, savedObj);\n\n        return Promise.all(panelObjects).then(function (objs) {\n          return formatObject(savedObj, objs);\n        });\n      });\n    }\n\n    return Promise.resolve(savedObjects.get(request, type, objId)).then(function (savedObj) {\n      return formatObject(savedObj, [savedObj]);\n    });\n  };\n}\n\nmodule.exports = oncePerServer(getObjectQueueFactory);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL2dldF9vYmplY3RfcXVldWUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNLENBQUMsR0FBRyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUM7QUFDNUIsSUFBTSxtQkFBbUIsR0FBRyxPQUFPLENBQUMsc0JBQXNCLENBQUMsQ0FBQztBQUM1RCxJQUFNLGFBQWEsR0FBRyxPQUFPLENBQUMsbUJBQW1CLENBQUMsQ0FBQzs7QUFFbkQsU0FBUyxxQkFBcUIsQ0FBQyxNQUFNLEVBQUU7QUFDckMsTUFBTSxlQUFlLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsZUFBZSxDQUFDO0FBQ3JFLE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUMvQixNQUFNLGFBQWEsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLE1BQU0sQ0FBQyxHQUFHLENBQUMsOEJBQThCLENBQUMsRUFBRTtBQUMzRSxlQUFXLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsMkJBQTJCLENBQUM7QUFDcEYsaUJBQWEsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLGNBQWMsQ0FBQztBQUN6QyxjQUFVLEVBQUUsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRO0FBQ2hDLGNBQVUsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLGFBQWEsQ0FBQztBQUNyQyxVQUFNLEVBQUUsTUFBTSxDQUFDLEdBQUcsQ0FBQyxhQUFhLENBQUM7R0FDbEMsQ0FBQyxDQUFDOztBQUVILE1BQU0sWUFBWSxHQUFHLG1CQUFtQixDQUFDLGVBQWUsRUFBRSxhQUFhLENBQUMsQ0FBQzs7QUFFekUsV0FBUyxZQUFZLENBQUMsTUFBTSxFQUFFLE9BQU8sRUFBRTtBQUNyQyxXQUFPLE1BQU0sQ0FBQyxNQUFNLENBQUM7QUFDbkIsUUFBRSxFQUFFLE1BQU0sQ0FBQyxFQUFFO0FBQ2IsV0FBSyxFQUFFLE1BQU0sQ0FBQyxLQUFLO0FBQ25CLGlCQUFXLEVBQUUsTUFBTSxDQUFDLFdBQVc7QUFDL0IsVUFBSSxFQUFFLE1BQU0sQ0FBQyxJQUFJO0FBQ2pCLGFBQU8sRUFBUCxPQUFPO0tBQ1IsQ0FBQyxDQUFDO0dBQ0o7O0FBRUQsV0FBUyxrQkFBa0IsQ0FBQyxPQUFPLEVBQUUsUUFBUSxFQUFFO0FBQzdDLFFBQUk7QUFDRixVQUFNLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUMvQyxhQUFPLE1BQU0sQ0FBQyxHQUFHLENBQUMsVUFBQyxLQUFLLEVBQUs7QUFDM0IsZUFBTyxZQUFZLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxLQUFLLENBQUMsSUFBSSxFQUFFLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FDckQsSUFBSSxDQUFDLFVBQVUsR0FBRyxFQUFFO0FBQ25CLGFBQUcsQ0FBQyxVQUFVLEdBQUcsS0FBSyxDQUFDLFVBQVUsQ0FBQztBQUNsQyxpQkFBTyxHQUFHLENBQUM7U0FDWixDQUFDLENBQUM7T0FDSixDQUFDLENBQUM7S0FDSixDQUFDLE9BQU8sQ0FBQyxFQUFFO0FBQ1YsWUFBTSxJQUFJLEtBQUssQ0FBQyxrREFBa0QsR0FBRyxDQUFDLENBQUMsT0FBTyxDQUFDLENBQUM7S0FDakY7R0FDRjs7QUFFRCxTQUFPLFNBQVMsY0FBYyxDQUFDLE9BQU8sRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFO0FBQ25ELFFBQUksSUFBSSxLQUFLLFdBQVcsRUFBRTtBQUN4QixhQUFPLFlBQVksQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLElBQUksRUFBRSxLQUFLLEVBQUUsQ0FBRSxZQUFZLENBQUMsQ0FBQyxDQUM3RCxJQUFJLENBQUMsVUFBVSxRQUFRLEVBQUU7QUFDeEIsWUFBTSxZQUFZLEdBQUcsa0JBQWtCLENBQUMsT0FBTyxFQUFFLFFBQVEsQ0FBQyxDQUFDOztBQUUzRCxlQUFPLE9BQU8sQ0FBQyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQy9CLElBQUksQ0FBQyxVQUFDLElBQUk7aUJBQUssWUFBWSxDQUFDLFFBQVEsRUFBRSxJQUFJLENBQUM7U0FBQSxDQUFDLENBQUM7T0FDL0MsQ0FBQyxDQUFDO0tBQ0o7O0FBRUQsV0FBTyxPQUFPLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxHQUFHLENBQUMsT0FBTyxFQUFFLElBQUksRUFBRSxLQUFLLENBQUMsQ0FBQyxDQUM3RCxJQUFJLENBQUMsVUFBQyxRQUFRO2FBQUssWUFBWSxDQUFDLFFBQVEsRUFBRSxDQUFFLFFBQVEsQ0FBRSxDQUFDO0tBQUEsQ0FBQyxDQUFDO0dBQzNELENBQUM7Q0FDSDs7QUFFRCxNQUFNLENBQUMsT0FBTyxHQUFHLGFBQWEsQ0FBQyxxQkFBcUIsQ0FBQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL2dldF9vYmplY3RfcXVldWUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBfID0gcmVxdWlyZSgnbG9kYXNoJyk7XG5jb25zdCBzYXZlZE9iamVjdHNGYWN0b3J5ID0gcmVxdWlyZSgnLi4vbGliL3NhdmVkX29iamVjdHMnKTtcbmNvbnN0IG9uY2VQZXJTZXJ2ZXIgPSByZXF1aXJlKCcuL29uY2VfcGVyX3NlcnZlcicpO1xuXG5mdW5jdGlvbiBnZXRPYmplY3RRdWV1ZUZhY3Rvcnkoc2VydmVyKSB7XG4gIGNvbnN0IGNhbGxXaXRoUmVxdWVzdCA9IHNlcnZlci5wbHVnaW5zLmVsYXN0aWNzZWFyY2guY2FsbFdpdGhSZXF1ZXN0O1xuICBjb25zdCBjb25maWcgPSBzZXJ2ZXIuY29uZmlnKCk7XG4gIGNvbnN0IHJlcXVlc3RDb25maWcgPSBfLmRlZmF1bHRzKGNvbmZpZy5nZXQoJ3hwYWNrLnJlcG9ydGluZy5raWJhbmFTZXJ2ZXInKSwge1xuICAgICdraWJhbmFBcHAnOiBjb25maWcuZ2V0KCdzZXJ2ZXIuYmFzZVBhdGgnKSArIGNvbmZpZy5nZXQoJ3hwYWNrLnJlcG9ydGluZy5raWJhbmFBcHAnKSxcbiAgICAna2liYW5hSW5kZXgnOiBjb25maWcuZ2V0KCdraWJhbmEuaW5kZXgnKSxcbiAgICAncHJvdG9jb2wnOiBzZXJ2ZXIuaW5mby5wcm90b2NvbCxcbiAgICAnaG9zdG5hbWUnOiBjb25maWcuZ2V0KCdzZXJ2ZXIuaG9zdCcpLFxuICAgICdwb3J0JzogY29uZmlnLmdldCgnc2VydmVyLnBvcnQnKSxcbiAgfSk7XG5cbiAgY29uc3Qgc2F2ZWRPYmplY3RzID0gc2F2ZWRPYmplY3RzRmFjdG9yeShjYWxsV2l0aFJlcXVlc3QsIHJlcXVlc3RDb25maWcpO1xuXG4gIGZ1bmN0aW9uIGZvcm1hdE9iamVjdChwYXJlbnQsIG9iamVjdHMpIHtcbiAgICByZXR1cm4gT2JqZWN0LmFzc2lnbih7XG4gICAgICBpZDogcGFyZW50LmlkLFxuICAgICAgdGl0bGU6IHBhcmVudC50aXRsZSxcbiAgICAgIGRlc2NyaXB0aW9uOiBwYXJlbnQuZGVzY3JpcHRpb24sXG4gICAgICB0eXBlOiBwYXJlbnQudHlwZSxcbiAgICAgIG9iamVjdHNcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldERhc2hib2FyZFBhbmVscyhyZXF1ZXN0LCBzYXZlZE9iaikge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBwYW5lbHMgPSBKU09OLnBhcnNlKHNhdmVkT2JqLnBhbmVsc0pTT04pO1xuICAgICAgcmV0dXJuIHBhbmVscy5tYXAoKHBhbmVsKSA9PiB7XG4gICAgICAgIHJldHVybiBzYXZlZE9iamVjdHMuZ2V0KHJlcXVlc3QsIHBhbmVsLnR5cGUsIHBhbmVsLmlkKVxuICAgICAgICAudGhlbihmdW5jdGlvbiAob2JqKSB7XG4gICAgICAgICAgb2JqLnBhbmVsSW5kZXggPSBwYW5lbC5wYW5lbEluZGV4O1xuICAgICAgICAgIHJldHVybiBvYmo7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gcmV0cmlldmUgUGFuZWxzIGZyb20gU2F2ZWQgRGFzaGJvYXJkOiAnICsgZS5tZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZnVuY3Rpb24gZ2V0T2JqZWN0UXVldWUocmVxdWVzdCwgdHlwZSwgb2JqSWQpIHtcbiAgICBpZiAodHlwZSA9PT0gJ2Rhc2hib2FyZCcpIHtcbiAgICAgIHJldHVybiBzYXZlZE9iamVjdHMuZ2V0KHJlcXVlc3QsIHR5cGUsIG9iaklkLCBbICdwYW5lbHNKU09OJ10pXG4gICAgICAudGhlbihmdW5jdGlvbiAoc2F2ZWRPYmopIHtcbiAgICAgICAgY29uc3QgcGFuZWxPYmplY3RzID0gZ2V0RGFzaGJvYXJkUGFuZWxzKHJlcXVlc3QsIHNhdmVkT2JqKTtcblxuICAgICAgICByZXR1cm4gUHJvbWlzZS5hbGwocGFuZWxPYmplY3RzKVxuICAgICAgICAudGhlbigob2JqcykgPT4gZm9ybWF0T2JqZWN0KHNhdmVkT2JqLCBvYmpzKSk7XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHNhdmVkT2JqZWN0cy5nZXQocmVxdWVzdCwgdHlwZSwgb2JqSWQpKVxuICAgIC50aGVuKChzYXZlZE9iaikgPT4gZm9ybWF0T2JqZWN0KHNhdmVkT2JqLCBbIHNhdmVkT2JqIF0pKTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBvbmNlUGVyU2VydmVyKGdldE9iamVjdFF1ZXVlRmFjdG9yeSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/get_object_queue.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/get_object_queue.js",
      "sourcesContent": [
        "const _ = require('lodash');\nconst savedObjectsFactory = require('../lib/saved_objects');\nconst oncePerServer = require('./once_per_server');\n\nfunction getObjectQueueFactory(server) {\n  const callWithRequest = server.plugins.elasticsearch.callWithRequest;\n  const config = server.config();\n  const requestConfig = _.defaults(config.get('xpack.reporting.kibanaServer'), {\n    'kibanaApp': config.get('server.basePath') + config.get('xpack.reporting.kibanaApp'),\n    'kibanaIndex': config.get('kibana.index'),\n    'protocol': server.info.protocol,\n    'hostname': config.get('server.host'),\n    'port': config.get('server.port'),\n  });\n\n  const savedObjects = savedObjectsFactory(callWithRequest, requestConfig);\n\n  function formatObject(parent, objects) {\n    return Object.assign({\n      id: parent.id,\n      title: parent.title,\n      description: parent.description,\n      type: parent.type,\n      objects\n    });\n  }\n\n  function getDashboardPanels(request, savedObj) {\n    try {\n      const panels = JSON.parse(savedObj.panelsJSON);\n      return panels.map((panel) => {\n        return savedObjects.get(request, panel.type, panel.id)\n        .then(function (obj) {\n          obj.panelIndex = panel.panelIndex;\n          return obj;\n        });\n      });\n    } catch (e) {\n      throw new Error('Failed to retrieve Panels from Saved Dashboard: ' + e.message);\n    }\n  }\n\n  return function getObjectQueue(request, type, objId) {\n    if (type === 'dashboard') {\n      return savedObjects.get(request, type, objId, [ 'panelsJSON'])\n      .then(function (savedObj) {\n        const panelObjects = getDashboardPanels(request, savedObj);\n\n        return Promise.all(panelObjects)\n        .then((objs) => formatObject(savedObj, objs));\n      });\n    }\n\n    return Promise.resolve(savedObjects.get(request, type, objId))\n    .then((savedObj) => formatObject(savedObj, [ savedObj ]));\n  };\n}\n\nmodule.exports = oncePerServer(getObjectQueueFactory);\n"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/saved_objects.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar url = require('url');\nvar _ = require('lodash');\nvar Joi = require('joi');\nvar parseKibanaState = require('../../../../server/lib/kibana_state');\nvar uriEncode = require('./uri_encode');\nvar getAbsoluteTime = require('./get_absolute_time');\n\nmodule.exports = function (callWithRequest, config) {\n  var schema = Joi.object().keys({\n    kibanaApp: Joi.string().required(),\n    kibanaIndex: Joi.string().required(),\n    protocol: Joi.string().valid(['http', 'https'])['default']('http'),\n    hostname: Joi.string()['default']('localhost'),\n    port: Joi.number().integer()['default'](5601)\n  });\n\n  var result = Joi.validate(config, schema);\n\n  if (result.error) throw result.error;\n  var opts = result.value;\n\n  var appTypes = {\n    dashboard: {\n      getUrlParams: function getUrlParams(id) {\n        return {\n          pathname: opts.kibanaApp,\n          hash: '/dashboard/' + uriEncode.string(id, true)\n        };\n      },\n      searchSourceIndex: 'kibanaSavedObjectMeta.searchSourceJSON',\n      stateIndex: 'uiStateJSON'\n    },\n    visualization: {\n      getUrlParams: function getUrlParams(id) {\n        return {\n          pathname: opts.kibanaApp,\n          hash: '/visualize/edit/' + uriEncode.string(id, true)\n        };\n      },\n      searchSourceIndex: 'kibanaSavedObjectMeta.searchSourceJSON',\n      stateIndex: 'uiStateJSON'\n    },\n    search: {\n      getUrlParams: function getUrlParams(id) {\n        return {\n          pathname: opts.kibanaApp,\n          hash: '/discover/' + uriEncode.string(id, true)\n        };\n      },\n      searchSourceIndex: 'kibanaSavedObjectMeta.searchSourceJSON',\n      stateIndex: 'uiStateJSON'\n    }\n  };\n\n  function getIndexPatternObject(request, indexPattern) {\n    var body = {\n      index: opts.kibanaIndex,\n      type: 'index-pattern',\n      id: indexPattern\n    };\n\n    return callWithRequest(request, 'get', body).then(function (response) {\n      return response._source;\n    });\n  }\n\n  function hasTimeBasedIndexPattern(request, savedObjSearchSourceIndex) {\n    var indexPattern, indexPatternObj;\n    return regeneratorRuntime.async(function hasTimeBasedIndexPattern$(context$2$0) {\n      while (1) switch (context$2$0.prev = context$2$0.next) {\n        case 0:\n          indexPattern = savedObjSearchSourceIndex.index;\n\n          if (indexPattern) {\n            context$2$0.next = 3;\n            break;\n          }\n\n          return context$2$0.abrupt('return', Promise.resolve(false));\n\n        case 3:\n          context$2$0.next = 5;\n          return regeneratorRuntime.awrap(getIndexPatternObject(request, indexPattern));\n\n        case 5:\n          indexPatternObj = context$2$0.sent;\n          return context$2$0.abrupt('return', !!indexPatternObj.timeFieldName);\n\n        case 7:\n        case 'end':\n          return context$2$0.stop();\n      }\n    }, null, this);\n  }\n\n  function getObject(request, type, id) {\n    var fields = arguments.length <= 3 || arguments[3] === undefined ? [] : arguments[3];\n\n    fields = ['title', 'description'].concat(fields);\n    validateType(type);\n    var body = {\n      index: opts.kibanaIndex,\n      type: type,\n      id: id\n    };\n\n    function parseJsonObjects(source) {\n      var searchSourceJson = _.get(source, appTypes[type].searchSourceIndex, '{}');\n      var uiStateJson = _.get(source, appTypes[type].stateIndex, '{}');\n      var searchSource = undefined;\n      var uiState = undefined;\n\n      try {\n        searchSource = JSON.parse(searchSourceJson);\n      } catch (e) {\n        searchSource = {};\n      }\n\n      try {\n        uiState = JSON.parse(uiStateJson);\n      } catch (e) {\n        uiState = {};\n      }\n\n      return { searchSource: searchSource, uiState: uiState };\n    }\n\n    return callWithRequest(request, 'get', body).then(function _getRecord(response) {\n      return response._source;\n    }).then(function _buildObject(source) {\n      var _parseJsonObjects, searchSource, uiState, isUsingTimeBasedIndexPattern, obj;\n\n      return regeneratorRuntime.async(function _buildObject$(context$3$0) {\n        while (1) switch (context$3$0.prev = context$3$0.next) {\n          case 0:\n            _parseJsonObjects = parseJsonObjects(source);\n            searchSource = _parseJsonObjects.searchSource;\n            uiState = _parseJsonObjects.uiState;\n            context$3$0.next = 5;\n            return regeneratorRuntime.awrap(hasTimeBasedIndexPattern(request, searchSource));\n\n          case 5:\n            isUsingTimeBasedIndexPattern = context$3$0.sent;\n            obj = _.assign(_.pick(source, fields), {\n              id: body.id,\n              type: type,\n              searchSource: searchSource,\n              uiState: uiState,\n              isUsingTimeBasedIndexPattern: isUsingTimeBasedIndexPattern,\n              getUrl: function getAppUrl() {\n                var query = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n                var urlOptions = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n                var options = _.assign({\n                  useAbsoluteTime: true\n                }, urlOptions);\n                var app = appTypes[this.type];\n                if (!app) throw new Error('Unexpected app type: ' + this.type);\n\n                // map panel state to panel from app state part of the query\n                var cleanQuery = this.getState(query);\n\n                // modify the global state in the query\n                var globalState = parseKibanaState(query, 'global');\n                if (globalState.exists) {\n                  globalState.removeProps('refreshInterval');\n\n                  // transform to absolute time based on option\n                  if (options.useAbsoluteTime) {\n                    globalState.set('time', getAbsoluteTime(globalState.get('time')));\n                  }\n\n                  _.assign(cleanQuery, globalState.toQuery());\n                }\n\n                var urlParams = _.assign({\n                  protocol: opts.protocol,\n                  hostname: opts.hostname,\n                  port: opts.port\n                }, app.getUrlParams(this.id));\n\n                // Kibana appends querystrings to the hash, and parses them as such,\n                // so we'll do the same internally so kibana understands what we want\n                // const encoder = (str) => str;\n                // const unencodedQueryString = qs.stringify(cleanQuery, null, null, { encodeURIComponent: encoder });\n                var unencodedQueryString = uriEncode.stringify(cleanQuery);\n                urlParams.hash += '?' + unencodedQueryString;\n\n                return url.format(urlParams);\n              },\n              getState: function mergeQueryState() {\n                var query = arguments.length <= 0 || arguments[0] === undefined ? {} : arguments[0];\n\n                var appState = parseKibanaState(query, 'app');\n                if (!appState.exists || !this.panelIndex) return query;\n\n                appState.removeProps(['uiState', 'panels', 'vis']);\n                var panel = _.find(appState.get('panels', []), { panelIndex: this.panelIndex });\n                var panelState = appState.get(['uiState', 'P-' + this.panelIndex]);\n\n                // if uiState doesn't match panel, simply strip uiState\n                if (panel && panelState) {\n                  appState.set('uiState', _.merge({}, this.uiState, panelState));\n                }\n\n                return _.assign({}, query, appState.toQuery());\n              },\n              toJSON: function toJSON(query, urlOptions) {\n                var _this = this;\n\n                var savedObj = {\n                  id: this.id,\n                  type: this.type,\n                  searchSource: this.searchSource,\n                  uiState: this.uiState,\n                  isUsingTimeBasedIndexPattern: isUsingTimeBasedIndexPattern,\n                  url: this.getUrl(query, urlOptions)\n                };\n\n                fields.forEach(function (field) {\n                  savedObj[field] = _this[field];\n                });\n\n                return savedObj;\n              }\n            });\n            return context$3$0.abrupt('return', obj);\n\n          case 8:\n          case 'end':\n            return context$3$0.stop();\n        }\n      }, null, this);\n    })['catch'](function () {\n      var isMissing = true;\n      var savedObj = {\n        id: id,\n        type: type,\n        isMissing: isMissing,\n        toJSON: function toJSON() {\n          return {\n            id: id,\n            type: type,\n            isMissing: isMissing\n          };\n        }\n      };\n      return savedObj;\n    });\n  }\n\n  function validateType(type) {\n    var app = appTypes[type];\n    if (!app) throw new Error('Invalid object type: ' + type);\n  }\n\n  // exported methods\n  return {\n    get: getObject\n  };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL3NhdmVkX29iamVjdHMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNLEdBQUcsR0FBRyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7QUFDM0IsSUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzVCLElBQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUMzQixJQUFNLGdCQUFnQixHQUFHLE9BQU8sQ0FBQyxxQ0FBcUMsQ0FBQyxDQUFDO0FBQ3hFLElBQU0sU0FBUyxHQUFHLE9BQU8sQ0FBQyxjQUFjLENBQUMsQ0FBQztBQUMxQyxJQUFNLGVBQWUsR0FBRyxPQUFPLENBQUMscUJBQXFCLENBQUMsQ0FBQzs7QUFFdkQsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLGVBQWUsRUFBRSxNQUFNLEVBQUU7QUFDbEQsTUFBTSxNQUFNLEdBQUcsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLElBQUksQ0FBQztBQUMvQixhQUFTLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLFFBQVEsRUFBRTtBQUNsQyxlQUFXLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLFFBQVEsRUFBRTtBQUNwQyxZQUFRLEVBQUUsR0FBRyxDQUFDLE1BQU0sRUFBRSxDQUFDLEtBQUssQ0FBQyxDQUFDLE1BQU0sRUFBRSxPQUFPLENBQUMsQ0FBQyxXQUFRLENBQUMsTUFBTSxDQUFDO0FBQy9ELFlBQVEsRUFBRSxHQUFHLENBQUMsTUFBTSxFQUFFLFdBQVEsQ0FBQyxXQUFXLENBQUM7QUFDM0MsUUFBSSxFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsQ0FBQyxPQUFPLEVBQUUsV0FBUSxDQUFDLElBQUksQ0FBQztHQUMzQyxDQUFDLENBQUM7O0FB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UUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQzNCLFFBQUksQ0FBQyxHQUFHLEVBQUUsTUFBTSxJQUFJLEtBQUssQ0FBQyx1QkFBdUIsR0FBRyxJQUFJLENBQUMsQ0FBQztHQUMzRDs7O0FBR0QsU0FBTztBQUNMLE9BQUcsRUFBRSxTQUFTO0dBQ2YsQ0FBQztDQUNILENBQUMiLCJmaWxlIjoiL2hvbWUvdWJ1bnR1L3dvcmtzcGFjZS9raWJhbmEtNS4wLjItbGludXgteDg2XzY0L3BsdWdpbnMveC1wYWNrL3BsdWdpbnMvcmVwb3J0aW5nL3NlcnZlci9saWIvc2F2ZWRfb2JqZWN0cy5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHVybCA9IHJlcXVpcmUoJ3VybCcpO1xuY29uc3QgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuY29uc3QgSm9pID0gcmVxdWlyZSgnam9pJyk7XG5jb25zdCBwYXJzZUtpYmFuYVN0YXRlID0gcmVxdWlyZSgnLi4vLi4vLi4vLi4vc2VydmVyL2xpYi9raWJhbmFfc3RhdGUnKTtcbmNvbnN0IHVyaUVuY29kZSA9IHJlcXVpcmUoJy4vdXJpX2VuY29kZScpO1xuY29uc3QgZ2V0QWJzb2x1dGVUaW1lID0gcmVxdWlyZSgnLi9nZXRfYWJzb2x1dGVfdGltZScpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIChjYWxsV2l0aFJlcXVlc3QsIGNvbmZpZykge1xuICBjb25zdCBzY2hlbWEgPSBKb2kub2JqZWN0KCkua2V5cyh7XG4gICAga2liYW5hQXBwOiBKb2kuc3RyaW5nKCkucmVxdWlyZWQoKSxcbiAgICBraWJhbmFJbmRleDogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gICAgcHJvdG9jb2w6IEpvaS5zdHJpbmcoKS52YWxpZChbJ2h0dHAnLCAnaHR0cHMnXSkuZGVmYXVsdCgnaHR0cCcpLFxuICAgIGhvc3RuYW1lOiBKb2kuc3RyaW5nKCkuZGVmYXVsdCgnbG9jYWxob3N0JyksXG4gICAgcG9ydDogSm9pLm51bWJlcigpLmludGVnZXIoKS5kZWZhdWx0KDU2MDEpLFxuICB9KTtcblxuICBjb25zdCByZXN1bHQgPSBKb2kudmFsaWRhdGUoY29uZmlnLCBzY2hlbWEpO1xuXG4gIGlmIChyZXN1bHQuZXJyb3IpIHRocm93IHJlc3VsdC5lcnJvcjtcbiAgY29uc3Qgb3B0cyA9IHJlc3VsdC52YWx1ZTtcblxuICBjb25zdCBhcHBUeXBlcyA9IHtcbiAgICBkYXNoYm9hcmQ6IHtcbiAgICAgIGdldFVybFBhcmFtczogZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcGF0aG5hbWU6IG9wdHMua2liYW5hQXBwLFxuICAgICAgICAgIGhhc2g6ICcvZGFzaGJvYXJkLycgKyB1cmlFbmNvZGUuc3RyaW5nKGlkLCB0cnVlKSxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICBzZWFyY2hTb3VyY2VJbmRleDogJ2tpYmFuYVNhdmVkT2JqZWN0TWV0YS5zZWFyY2hTb3VyY2VKU09OJyxcbiAgICAgIHN0YXRlSW5kZXg6ICd1aVN0YXRlSlNPTicsXG4gICAgfSxcbiAgICB2aXN1YWxpemF0aW9uOiB7XG4gICAgICBnZXRVcmxQYXJhbXM6IGZ1bmN0aW9uIChpZCkge1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIHBhdGhuYW1lOiBvcHRzLmtpYmFuYUFwcCxcbiAgICAgICAgICBoYXNoOiAnL3Zpc3VhbGl6ZS9lZGl0LycgKyB1cmlFbmNvZGUuc3RyaW5nKGlkLCB0cnVlKSxcbiAgICAgICAgfTtcbiAgICAgIH0sXG4gICAgICBzZWFyY2hTb3VyY2VJbmRleDogJ2tpYmFuYVNhdmVkT2JqZWN0TWV0YS5zZWFyY2hTb3VyY2VKU09OJyxcbiAgICAgIHN0YXRlSW5kZXg6ICd1aVN0YXRlSlNPTicsXG4gICAgfSxcbiAgICBzZWFyY2g6IHtcbiAgICAgIGdldFVybFBhcmFtczogZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgcGF0aG5hbWU6IG9wdHMua2liYW5hQXBwLFxuICAgICAgICAgIGhhc2g6ICcvZGlzY292ZXIvJyArIHVyaUVuY29kZS5zdHJpbmcoaWQsIHRydWUpLFxuICAgICAgICB9O1xuICAgICAgfSxcbiAgICAgIHNlYXJjaFNvdXJjZUluZGV4OiAna2liYW5hU2F2ZWRPYmplY3RNZXRhLnNlYXJjaFNvdXJjZUpTT04nLFxuICAgICAgc3RhdGVJbmRleDogJ3VpU3RhdGVKU09OJyxcbiAgICB9XG4gIH07XG5cbiAgZnVuY3Rpb24gZ2V0SW5kZXhQYXR0ZXJuT2JqZWN0KHJlcXVlc3QsIGluZGV4UGF0dGVybikge1xuICAgIGNvbnN0IGJvZHkgPSB7XG4gICAgICBpbmRleDogb3B0cy5raWJhbmFJbmRleCxcbiAgICAgIHR5cGU6ICdpbmRleC1wYXR0ZXJuJyxcbiAgICAgIGlkOiBpbmRleFBhdHRlcm5cbiAgICB9O1xuXG4gICAgcmV0dXJuIGNhbGxXaXRoUmVxdWVzdChyZXF1ZXN0LCAnZ2V0JywgYm9keSkudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS5fc291cmNlKTtcbiAgfVxuXG4gIGFzeW5jIGZ1bmN0aW9uIGhhc1RpbWVCYXNlZEluZGV4UGF0dGVybihyZXF1ZXN0LCBzYXZlZE9ialNlYXJjaFNvdXJjZUluZGV4KSB7XG4gICAgY29uc3QgaW5kZXhQYXR0ZXJuID0gc2F2ZWRPYmpTZWFyY2hTb3VyY2VJbmRleC5pbmRleDtcbiAgICBpZiAoIWluZGV4UGF0dGVybikge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShmYWxzZSk7XG4gICAgfVxuXG4gICAgY29uc3QgaW5kZXhQYXR0ZXJuT2JqID0gYXdhaXQgZ2V0SW5kZXhQYXR0ZXJuT2JqZWN0KHJlcXVlc3QsIGluZGV4UGF0dGVybik7XG4gICAgcmV0dXJuICEhaW5kZXhQYXR0ZXJuT2JqLnRpbWVGaWVsZE5hbWU7XG4gIH1cblxuICBmdW5jdGlvbiBnZXRPYmplY3QocmVxdWVzdCwgdHlwZSwgaWQsIGZpZWxkcyA9IFtdKSB7XG4gICAgZmllbGRzID0gWyd0aXRsZScsICdkZXNjcmlwdGlvbiddLmNvbmNhdChmaWVsZHMpO1xuICAgIHZhbGlkYXRlVHlwZSh0eXBlKTtcbiAgICBjb25zdCBib2R5ID0ge1xuICAgICAgaW5kZXg6IG9wdHMua2liYW5hSW5kZXgsXG4gICAgICB0eXBlOiB0eXBlLFxuICAgICAgaWQ6IGlkXG4gICAgfTtcblxuICAgIGZ1bmN0aW9uIHBhcnNlSnNvbk9iamVjdHMoc291cmNlKSB7XG4gICAgICBjb25zdCBzZWFyY2hTb3VyY2VKc29uID0gXy5nZXQoc291cmNlLCBhcHBUeXBlc1t0eXBlXS5zZWFyY2hTb3VyY2VJbmRleCwgJ3t9Jyk7XG4gICAgICBjb25zdCB1aVN0YXRlSnNvbiA9IF8uZ2V0KHNvdXJjZSwgYXBwVHlwZXNbdHlwZV0uc3RhdGVJbmRleCwgJ3t9Jyk7XG4gICAgICBsZXQgc2VhcmNoU291cmNlO1xuICAgICAgbGV0IHVpU3RhdGU7XG5cbiAgICAgIHRyeSB7XG4gICAgICAgIHNlYXJjaFNvdXJjZSA9IEpTT04ucGFyc2Uoc2VhcmNoU291cmNlSnNvbik7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHNlYXJjaFNvdXJjZSA9IHt9O1xuICAgICAgfVxuXG4gICAgICB0cnkge1xuICAgICAgICB1aVN0YXRlID0gSlNPTi5wYXJzZSh1aVN0YXRlSnNvbik7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHVpU3RhdGUgPSB7fTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHsgc2VhcmNoU291cmNlLCB1aVN0YXRlIH07XG4gICAgfVxuXG4gICAgcmV0dXJuIGNhbGxXaXRoUmVxdWVzdChyZXF1ZXN0LCAnZ2V0JywgYm9keSlcbiAgICAudGhlbihmdW5jdGlvbiBfZ2V0UmVjb3JkKHJlc3BvbnNlKSB7XG4gICAgICByZXR1cm4gcmVzcG9uc2UuX3NvdXJjZTtcbiAgICB9KVxuICAgIC50aGVuKGFzeW5jIGZ1bmN0aW9uIF9idWlsZE9iamVjdChzb3VyY2UpIHtcbiAgICAgIGNvbnN0IHsgc2VhcmNoU291cmNlLCB1aVN0YXRlIH0gPSBwYXJzZUpzb25PYmplY3RzKHNvdXJjZSk7XG5cbiAgICAgIGNvbnN0IGlzVXNpbmdUaW1lQmFzZWRJbmRleFBhdHRlcm4gPSBhd2FpdCBoYXNUaW1lQmFzZWRJbmRleFBhdHRlcm4ocmVxdWVzdCwgc2VhcmNoU291cmNlKTtcblxuICAgICAgY29uc3Qgb2JqID0gXy5hc3NpZ24oXy5waWNrKHNvdXJjZSwgZmllbGRzKSwge1xuICAgICAgICBpZDogYm9keS5pZCxcbiAgICAgICAgdHlwZTogdHlwZSxcbiAgICAgICAgc2VhcmNoU291cmNlOiBzZWFyY2hTb3VyY2UsXG4gICAgICAgIHVpU3RhdGU6IHVpU3RhdGUsXG4gICAgICAgIGlzVXNpbmdUaW1lQmFzZWRJbmRleFBhdHRlcm4sXG4gICAgICAgIGdldFVybDogZnVuY3Rpb24gZ2V0QXBwVXJsKHF1ZXJ5ID0ge30sIHVybE9wdGlvbnMgPSB7fSkge1xuICAgICAgICAgIGNvbnN0IG9wdGlvbnMgPSBfLmFzc2lnbih7XG4gICAgICAgICAgICB1c2VBYnNvbHV0ZVRpbWU6IHRydWVcbiAgICAgICAgICB9LCB1cmxPcHRpb25zKTtcbiAgICAgICAgICBjb25zdCBhcHAgPSBhcHBUeXBlc1t0aGlzLnR5cGVdO1xuICAgICAgICAgIGlmICghYXBwKSB0aHJvdyBuZXcgRXJyb3IoJ1VuZXhwZWN0ZWQgYXBwIHR5cGU6ICcgKyB0aGlzLnR5cGUpO1xuXG4gICAgICAgICAgLy8gbWFwIHBhbmVsIHN0YXRlIHRvIHBhbmVsIGZyb20gYXBwIHN0YXRlIHBhcnQgb2YgdGhlIHF1ZXJ5XG4gICAgICAgICAgY29uc3QgY2xlYW5RdWVyeSA9IHRoaXMuZ2V0U3RhdGUocXVlcnkpO1xuXG4gICAgICAgICAgLy8gbW9kaWZ5IHRoZSBnbG9iYWwgc3RhdGUgaW4gdGhlIHF1ZXJ5XG4gICAgICAgICAgY29uc3QgZ2xvYmFsU3RhdGUgPSBwYXJzZUtpYmFuYVN0YXRlKHF1ZXJ5LCAnZ2xvYmFsJyk7XG4gICAgICAgICAgaWYgKGdsb2JhbFN0YXRlLmV4aXN0cykge1xuICAgICAgICAgICAgZ2xvYmFsU3RhdGUucmVtb3ZlUHJvcHMoJ3JlZnJlc2hJbnRlcnZhbCcpO1xuXG4gICAgICAgICAgICAvLyB0cmFuc2Zvcm0gdG8gYWJzb2x1dGUgdGltZSBiYXNlZCBvbiBvcHRpb25cbiAgICAgICAgICAgIGlmIChvcHRpb25zLnVzZUFic29sdXRlVGltZSkge1xuICAgICAgICAgICAgICBnbG9iYWxTdGF0ZS5zZXQoJ3RpbWUnLCBnZXRBYnNvbHV0ZVRpbWUoZ2xvYmFsU3RhdGUuZ2V0KCd0aW1lJykpKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgXy5hc3NpZ24oY2xlYW5RdWVyeSwgZ2xvYmFsU3RhdGUudG9RdWVyeSgpKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb25zdCB1cmxQYXJhbXMgPSBfLmFzc2lnbih7XG4gICAgICAgICAgICBwcm90b2NvbDogb3B0cy5wcm90b2NvbCxcbiAgICAgICAgICAgIGhvc3RuYW1lOiBvcHRzLmhvc3RuYW1lLFxuICAgICAgICAgICAgcG9ydDogb3B0cy5wb3J0LFxuICAgICAgICAgIH0sIGFwcC5nZXRVcmxQYXJhbXModGhpcy5pZCkpO1xuXG4gICAgICAgICAgLy8gS2liYW5hIGFwcGVuZHMgcXVlcnlzdHJpbmdzIHRvIHRoZSBoYXNoLCBhbmQgcGFyc2VzIHRoZW0gYXMgc3VjaCxcbiAgICAgICAgICAvLyBzbyB3ZSdsbCBkbyB0aGUgc2FtZSBpbnRlcm5hbGx5IHNvIGtpYmFuYSB1bmRlcnN0YW5kcyB3aGF0IHdlIHdhbnRcbiAgICAgICAgICAvLyBjb25zdCBlbmNvZGVyID0gKHN0cikgPT4gc3RyO1xuICAgICAgICAgIC8vIGNvbnN0IHVuZW5jb2RlZFF1ZXJ5U3RyaW5nID0gcXMuc3RyaW5naWZ5KGNsZWFuUXVlcnksIG51bGwsIG51bGwsIHsgZW5jb2RlVVJJQ29tcG9uZW50OiBlbmNvZGVyIH0pO1xuICAgICAgICAgIGNvbnN0IHVuZW5jb2RlZFF1ZXJ5U3RyaW5nID0gdXJpRW5jb2RlLnN0cmluZ2lmeShjbGVhblF1ZXJ5KTtcbiAgICAgICAgICB1cmxQYXJhbXMuaGFzaCArPSAnPycgKyB1bmVuY29kZWRRdWVyeVN0cmluZztcblxuICAgICAgICAgIHJldHVybiB1cmwuZm9ybWF0KHVybFBhcmFtcyk7XG4gICAgICAgIH0sXG4gICAgICAgIGdldFN0YXRlOiBmdW5jdGlvbiBtZXJnZVF1ZXJ5U3RhdGUocXVlcnkgPSB7fSkge1xuICAgICAgICAgIGNvbnN0IGFwcFN0YXRlID0gcGFyc2VLaWJhbmFTdGF0ZShxdWVyeSwgJ2FwcCcpO1xuICAgICAgICAgIGlmICghYXBwU3RhdGUuZXhpc3RzIHx8ICF0aGlzLnBhbmVsSW5kZXgpIHJldHVybiBxdWVyeTtcblxuICAgICAgICAgIGFwcFN0YXRlLnJlbW92ZVByb3BzKFsndWlTdGF0ZScsICdwYW5lbHMnLCAndmlzJ10pO1xuICAgICAgICAgIGNvbnN0IHBhbmVsID0gXy5maW5kKGFwcFN0YXRlLmdldCgncGFuZWxzJywgW10pLCB7IHBhbmVsSW5kZXg6IHRoaXMucGFuZWxJbmRleCB9KTtcbiAgICAgICAgICBjb25zdCBwYW5lbFN0YXRlID0gYXBwU3RhdGUuZ2V0KFsndWlTdGF0ZScsIGBQLSR7dGhpcy5wYW5lbEluZGV4fWBdKTtcblxuICAgICAgICAgIC8vIGlmIHVpU3RhdGUgZG9lc24ndCBtYXRjaCBwYW5lbCwgc2ltcGx5IHN0cmlwIHVpU3RhdGVcbiAgICAgICAgICBpZiAocGFuZWwgJiYgcGFuZWxTdGF0ZSkge1xuICAgICAgICAgICAgYXBwU3RhdGUuc2V0KCd1aVN0YXRlJywgXy5tZXJnZSh7fSwgdGhpcy51aVN0YXRlLCBwYW5lbFN0YXRlKSk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgcmV0dXJuIF8uYXNzaWduKHt9LCBxdWVyeSwgYXBwU3RhdGUudG9RdWVyeSgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgdG9KU09OOiBmdW5jdGlvbiAocXVlcnksIHVybE9wdGlvbnMpIHtcbiAgICAgICAgICBjb25zdCBzYXZlZE9iaiA9IHtcbiAgICAgICAgICAgIGlkOiB0aGlzLmlkLFxuICAgICAgICAgICAgdHlwZTogdGhpcy50eXBlLFxuICAgICAgICAgICAgc2VhcmNoU291cmNlOiB0aGlzLnNlYXJjaFNvdXJjZSxcbiAgICAgICAgICAgIHVpU3RhdGU6IHRoaXMudWlTdGF0ZSxcbiAgICAgICAgICAgIGlzVXNpbmdUaW1lQmFzZWRJbmRleFBhdHRlcm4sXG4gICAgICAgICAgICB1cmw6IHRoaXMuZ2V0VXJsKHF1ZXJ5LCB1cmxPcHRpb25zKVxuICAgICAgICAgIH07XG5cbiAgICAgICAgICBmaWVsZHMuZm9yRWFjaCgoZmllbGQpID0+IHtcbiAgICAgICAgICAgIHNhdmVkT2JqW2ZpZWxkXSA9IHRoaXNbZmllbGRdO1xuICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgcmV0dXJuIHNhdmVkT2JqO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIG9iajtcbiAgICB9KVxuICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICBjb25zdCBpc01pc3NpbmcgPSB0cnVlO1xuICAgICAgY29uc3Qgc2F2ZWRPYmogPSB7XG4gICAgICAgIGlkLFxuICAgICAgICB0eXBlLFxuICAgICAgICBpc01pc3NpbmcsXG4gICAgICAgIHRvSlNPTigpIHtcbiAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgaWQsXG4gICAgICAgICAgICB0eXBlLFxuICAgICAgICAgICAgaXNNaXNzaW5nXG4gICAgICAgICAgfTtcbiAgICAgICAgfVxuICAgICAgfTtcbiAgICAgIHJldHVybiBzYXZlZE9iajtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIHZhbGlkYXRlVHlwZSh0eXBlKSB7XG4gICAgY29uc3QgYXBwID0gYXBwVHlwZXNbdHlwZV07XG4gICAgaWYgKCFhcHApIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBvYmplY3QgdHlwZTogJyArIHR5cGUpO1xuICB9XG5cbiAgLy8gZXhwb3J0ZWQgbWV0aG9kc1xuICByZXR1cm4ge1xuICAgIGdldDogZ2V0T2JqZWN0XG4gIH07XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/saved_objects.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/saved_objects.js",
      "sourcesContent": [
        "const url = require('url');\nconst _ = require('lodash');\nconst Joi = require('joi');\nconst parseKibanaState = require('../../../../server/lib/kibana_state');\nconst uriEncode = require('./uri_encode');\nconst getAbsoluteTime = require('./get_absolute_time');\n\nmodule.exports = function (callWithRequest, config) {\n  const schema = Joi.object().keys({\n    kibanaApp: Joi.string().required(),\n    kibanaIndex: Joi.string().required(),\n    protocol: Joi.string().valid(['http', 'https']).default('http'),\n    hostname: Joi.string().default('localhost'),\n    port: Joi.number().integer().default(5601),\n  });\n\n  const result = Joi.validate(config, schema);\n\n  if (result.error) throw result.error;\n  const opts = result.value;\n\n  const appTypes = {\n    dashboard: {\n      getUrlParams: function (id) {\n        return {\n          pathname: opts.kibanaApp,\n          hash: '/dashboard/' + uriEncode.string(id, true),\n        };\n      },\n      searchSourceIndex: 'kibanaSavedObjectMeta.searchSourceJSON',\n      stateIndex: 'uiStateJSON',\n    },\n    visualization: {\n      getUrlParams: function (id) {\n        return {\n          pathname: opts.kibanaApp,\n          hash: '/visualize/edit/' + uriEncode.string(id, true),\n        };\n      },\n      searchSourceIndex: 'kibanaSavedObjectMeta.searchSourceJSON',\n      stateIndex: 'uiStateJSON',\n    },\n    search: {\n      getUrlParams: function (id) {\n        return {\n          pathname: opts.kibanaApp,\n          hash: '/discover/' + uriEncode.string(id, true),\n        };\n      },\n      searchSourceIndex: 'kibanaSavedObjectMeta.searchSourceJSON',\n      stateIndex: 'uiStateJSON',\n    }\n  };\n\n  function getIndexPatternObject(request, indexPattern) {\n    const body = {\n      index: opts.kibanaIndex,\n      type: 'index-pattern',\n      id: indexPattern\n    };\n\n    return callWithRequest(request, 'get', body).then(response => response._source);\n  }\n\n  async function hasTimeBasedIndexPattern(request, savedObjSearchSourceIndex) {\n    const indexPattern = savedObjSearchSourceIndex.index;\n    if (!indexPattern) {\n      return Promise.resolve(false);\n    }\n\n    const indexPatternObj = await getIndexPatternObject(request, indexPattern);\n    return !!indexPatternObj.timeFieldName;\n  }\n\n  function getObject(request, type, id, fields = []) {\n    fields = ['title', 'description'].concat(fields);\n    validateType(type);\n    const body = {\n      index: opts.kibanaIndex,\n      type: type,\n      id: id\n    };\n\n    function parseJsonObjects(source) {\n      const searchSourceJson = _.get(source, appTypes[type].searchSourceIndex, '{}');\n      const uiStateJson = _.get(source, appTypes[type].stateIndex, '{}');\n      let searchSource;\n      let uiState;\n\n      try {\n        searchSource = JSON.parse(searchSourceJson);\n      } catch (e) {\n        searchSource = {};\n      }\n\n      try {\n        uiState = JSON.parse(uiStateJson);\n      } catch (e) {\n        uiState = {};\n      }\n\n      return { searchSource, uiState };\n    }\n\n    return callWithRequest(request, 'get', body)\n    .then(function _getRecord(response) {\n      return response._source;\n    })\n    .then(async function _buildObject(source) {\n      const { searchSource, uiState } = parseJsonObjects(source);\n\n      const isUsingTimeBasedIndexPattern = await hasTimeBasedIndexPattern(request, searchSource);\n\n      const obj = _.assign(_.pick(source, fields), {\n        id: body.id,\n        type: type,\n        searchSource: searchSource,\n        uiState: uiState,\n        isUsingTimeBasedIndexPattern,\n        getUrl: function getAppUrl(query = {}, urlOptions = {}) {\n          const options = _.assign({\n            useAbsoluteTime: true\n          }, urlOptions);\n          const app = appTypes[this.type];\n          if (!app) throw new Error('Unexpected app type: ' + this.type);\n\n          // map panel state to panel from app state part of the query\n          const cleanQuery = this.getState(query);\n\n          // modify the global state in the query\n          const globalState = parseKibanaState(query, 'global');\n          if (globalState.exists) {\n            globalState.removeProps('refreshInterval');\n\n            // transform to absolute time based on option\n            if (options.useAbsoluteTime) {\n              globalState.set('time', getAbsoluteTime(globalState.get('time')));\n            }\n\n            _.assign(cleanQuery, globalState.toQuery());\n          }\n\n          const urlParams = _.assign({\n            protocol: opts.protocol,\n            hostname: opts.hostname,\n            port: opts.port,\n          }, app.getUrlParams(this.id));\n\n          // Kibana appends querystrings to the hash, and parses them as such,\n          // so we'll do the same internally so kibana understands what we want\n          // const encoder = (str) => str;\n          // const unencodedQueryString = qs.stringify(cleanQuery, null, null, { encodeURIComponent: encoder });\n          const unencodedQueryString = uriEncode.stringify(cleanQuery);\n          urlParams.hash += '?' + unencodedQueryString;\n\n          return url.format(urlParams);\n        },\n        getState: function mergeQueryState(query = {}) {\n          const appState = parseKibanaState(query, 'app');\n          if (!appState.exists || !this.panelIndex) return query;\n\n          appState.removeProps(['uiState', 'panels', 'vis']);\n          const panel = _.find(appState.get('panels', []), { panelIndex: this.panelIndex });\n          const panelState = appState.get(['uiState', `P-${this.panelIndex}`]);\n\n          // if uiState doesn't match panel, simply strip uiState\n          if (panel && panelState) {\n            appState.set('uiState', _.merge({}, this.uiState, panelState));\n          }\n\n          return _.assign({}, query, appState.toQuery());\n        },\n        toJSON: function (query, urlOptions) {\n          const savedObj = {\n            id: this.id,\n            type: this.type,\n            searchSource: this.searchSource,\n            uiState: this.uiState,\n            isUsingTimeBasedIndexPattern,\n            url: this.getUrl(query, urlOptions)\n          };\n\n          fields.forEach((field) => {\n            savedObj[field] = this[field];\n          });\n\n          return savedObj;\n        }\n      });\n\n      return obj;\n    })\n    .catch(() => {\n      const isMissing = true;\n      const savedObj = {\n        id,\n        type,\n        isMissing,\n        toJSON() {\n          return {\n            id,\n            type,\n            isMissing\n          };\n        }\n      };\n      return savedObj;\n    });\n  }\n\n  function validateType(type) {\n    const app = appTypes[type];\n    if (!app) throw new Error('Invalid object type: ' + type);\n  }\n\n  // exported methods\n  return {\n    get: getObject\n  };\n};\n"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/server/lib/kibana_state.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "isPlainObject",
              "omit",
              "get",
              "set"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "isPlainObject",
                "local": "isPlainObject"
              },
              {
                "kind": "named",
                "imported": "omit",
                "local": "omit"
              },
              {
                "kind": "named",
                "imported": "get",
                "local": "get"
              },
              {
                "kind": "named",
                "imported": "set",
                "local": "set"
              }
            ]
          },
          {
            "source": "rison-node",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "rison"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "parseState",
            "query",
            "type"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "parseState",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "query",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "type",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check",
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nexports['default'] = parseState;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar _lodash = require('lodash');\n\nvar _risonNode = require('rison-node');\n\nvar _risonNode2 = _interopRequireDefault(_risonNode);\n\nvar stateTypeKeys = {\n  'global': '_g',\n  'app': '_a'\n};\n\nvar KibanaState = (function () {\n  function KibanaState(query) {\n    var type = arguments.length <= 1 || arguments[1] === undefined ? 'global' : arguments[1];\n\n    _classCallCheck(this, KibanaState);\n\n    var propId = stateTypeKeys[type];\n    if (!(0, _lodash.isPlainObject)(query)) throw new TypeError('Query parameter must be an object');\n    if (!propId) throw new TypeError('Unknown state type: \\'' + type + '\\'');\n\n    var queryValue = query[propId];\n\n    this.exists = Boolean(queryValue);\n    this.state = queryValue ? _risonNode2['default'].decode(queryValue) : {};\n    this.type = type;\n  }\n\n  _createClass(KibanaState, [{\n    key: 'removeProps',\n    value: function removeProps(props) {\n      this.state = (0, _lodash.omit)(this.state, props);\n    }\n  }, {\n    key: 'get',\n    value: function get(prop, defVal) {\n      return (0, _lodash.get)(this.state, prop, defVal);\n    }\n  }, {\n    key: 'set',\n    value: function set(prop, val) {\n      return (0, _lodash.set)(this.state, prop, val);\n    }\n  }, {\n    key: 'toString',\n    value: function toString() {\n      return _risonNode2['default'].encode(this.state);\n    }\n  }, {\n    key: 'toQuery',\n    value: function toQuery() {\n      var index = stateTypeKeys[this.type];\n      var output = {};\n      output[index] = this.toString();\n      return output;\n    }\n  }]);\n\n  return KibanaState;\n})();\n\nfunction parseState(query, type) {\n  return new KibanaState(query, type);\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9zZXJ2ZXIvbGliL2tpYmFuYV9zdGF0ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OztxQkE2Q3dCLFVBQVU7Ozs7OztzQkE3Q1ksUUFBUTs7eUJBQ3BDLFlBQVk7Ozs7QUFFOUIsSUFBTSxhQUFhLEdBQUc7QUFDcEIsVUFBUSxFQUFFLElBQUk7QUFDZCxPQUFLLEVBQUUsSUFBSTtDQUNaLENBQUM7O0lBRUksV0FBVztBQUNKLFdBRFAsV0FBVyxDQUNILEtBQUssRUFBbUI7UUFBakIsSUFBSSx5REFBRyxRQUFROzswQkFEOUIsV0FBVzs7QUFFYixRQUFNLE1BQU0sR0FBRyxhQUFhLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDbkMsUUFBSSxDQUFDLDJCQUFjLEtBQUssQ0FBQyxFQUFFLE1BQU0sSUFBSSxTQUFTLENBQUMsbUNBQW1DLENBQUMsQ0FBQztBQUNwRixRQUFJLENBQUMsTUFBTSxFQUFFLE1BQU0sSUFBSSxTQUFTLDRCQUF5QixJQUFJLFFBQUksQ0FBQzs7QUFFbEUsUUFBTSxVQUFVLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDOztBQUVqQyxRQUFJLENBQUMsTUFBTSxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNsQyxRQUFJLENBQUMsS0FBSyxHQUFHLEFBQUMsVUFBVSxHQUFJLHVCQUFNLE1BQU0sQ0FBQyxVQUFVLENBQUMsR0FBRyxFQUFFLENBQUM7QUFDMUQsUUFBSSxDQUFDLElBQUksR0FBRyxJQUFJLENBQUM7R0FDbEI7O2VBWEcsV0FBVzs7V0FhSixxQkFBQyxLQUFLLEVBQUU7QUFDakIsVUFBSSxDQUFDLEtBQUssR0FBRyxrQkFBSyxJQUFJLENBQUMsS0FBSyxFQUFFLEtBQUssQ0FBQyxDQUFDO0tBQ3RDOzs7V0FFRSxhQUFDLElBQUksRUFBRSxNQUFNLEVBQUU7QUFDaEIsYUFBTyxpQkFBSSxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxNQUFNLENBQUMsQ0FBQztLQUN0Qzs7O1dBRUUsYUFBQyxJQUFJLEVBQUUsR0FBRyxFQUFFO0FBQ2IsYUFBTyxpQkFBSSxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQztLQUNuQzs7O1dBRU8sb0JBQUc7QUFDVCxhQUFPLHVCQUFNLE1BQU0sQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDakM7OztXQUVNLG1CQUFHO0FBQ1IsVUFBTSxLQUFLLEdBQUcsYUFBYSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN2QyxVQUFNLE1BQU0sR0FBRyxFQUFFLENBQUM7QUFDbEIsWUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLElBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztBQUNoQyxhQUFPLE1BQU0sQ0FBQztLQUNmOzs7U0FsQ0csV0FBVzs7O0FBcUNGLFNBQVMsVUFBVSxDQUFDLEtBQUssRUFBRSxJQUFJLEVBQUU7QUFDOUMsU0FBTyxJQUFJLFdBQVcsQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQUM7Q0FDckMiLCJmaWxlIjoiL2hvbWUvdWJ1bnR1L3dvcmtzcGFjZS9raWJhbmEtNS4wLjItbGludXgteDg2XzY0L3BsdWdpbnMveC1wYWNrL3NlcnZlci9saWIva2liYW5hX3N0YXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgaXNQbGFpbk9iamVjdCwgb21pdCwgZ2V0LCBzZXQgfSBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IHJpc29uIGZyb20gJ3Jpc29uLW5vZGUnO1xuXG5jb25zdCBzdGF0ZVR5cGVLZXlzID0ge1xuICAnZ2xvYmFsJzogJ19nJyxcbiAgJ2FwcCc6ICdfYScsXG59O1xuXG5jbGFzcyBLaWJhbmFTdGF0ZSB7XG4gIGNvbnN0cnVjdG9yKHF1ZXJ5LCB0eXBlID0gJ2dsb2JhbCcpIHtcbiAgICBjb25zdCBwcm9wSWQgPSBzdGF0ZVR5cGVLZXlzW3R5cGVdO1xuICAgIGlmICghaXNQbGFpbk9iamVjdChxdWVyeSkpIHRocm93IG5ldyBUeXBlRXJyb3IoJ1F1ZXJ5IHBhcmFtZXRlciBtdXN0IGJlIGFuIG9iamVjdCcpO1xuICAgIGlmICghcHJvcElkKSB0aHJvdyBuZXcgVHlwZUVycm9yKGBVbmtub3duIHN0YXRlIHR5cGU6ICcke3R5cGV9J2ApO1xuXG4gICAgY29uc3QgcXVlcnlWYWx1ZSA9IHF1ZXJ5W3Byb3BJZF07XG5cbiAgICB0aGlzLmV4aXN0cyA9IEJvb2xlYW4ocXVlcnlWYWx1ZSk7XG4gICAgdGhpcy5zdGF0ZSA9IChxdWVyeVZhbHVlKSA/IHJpc29uLmRlY29kZShxdWVyeVZhbHVlKSA6IHt9O1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gIH1cblxuICByZW1vdmVQcm9wcyhwcm9wcykge1xuICAgIHRoaXMuc3RhdGUgPSBvbWl0KHRoaXMuc3RhdGUsIHByb3BzKTtcbiAgfVxuXG4gIGdldChwcm9wLCBkZWZWYWwpIHtcbiAgICByZXR1cm4gZ2V0KHRoaXMuc3RhdGUsIHByb3AsIGRlZlZhbCk7XG4gIH1cblxuICBzZXQocHJvcCwgdmFsKSB7XG4gICAgcmV0dXJuIHNldCh0aGlzLnN0YXRlLCBwcm9wLCB2YWwpO1xuICB9XG5cbiAgdG9TdHJpbmcoKSB7XG4gICAgcmV0dXJuIHJpc29uLmVuY29kZSh0aGlzLnN0YXRlKTtcbiAgfVxuXG4gIHRvUXVlcnkoKSB7XG4gICAgY29uc3QgaW5kZXggPSBzdGF0ZVR5cGVLZXlzW3RoaXMudHlwZV07XG4gICAgY29uc3Qgb3V0cHV0ID0ge307XG4gICAgb3V0cHV0W2luZGV4XSA9IHRoaXMudG9TdHJpbmcoKTtcbiAgICByZXR1cm4gb3V0cHV0O1xuICB9XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHBhcnNlU3RhdGUocXVlcnksIHR5cGUpIHtcbiAgcmV0dXJuIG5ldyBLaWJhbmFTdGF0ZShxdWVyeSwgdHlwZSk7XG59Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/server/lib/kibana_state.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;qBA6CwB,UAAU;;;;;;sBA7CY,QAAQ;;yBACpC,YAAY;;;;AAE9B,IAAM,aAAa,GAAG;AACpB,UAAQ,EAAE,IAAI;AACd,OAAK,EAAE,IAAI;CACZ,CAAC;;IAEI,WAAW;AACJ,WADP,WAAW,CACH,KAAK,EAAmB;QAAjB,IAAI,yDAAG,QAAQ;;0BAD9B,WAAW;;AAEb,QAAM,MAAM,GAAG,aAAa,CAAC,IAAI,CAAC,CAAC;AACnC,QAAI,CAAC,2BAAc,KAAK,CAAC,EAAE,MAAM,IAAI,SAAS,CAAC,mCAAmC,CAAC,CAAC;AACpF,QAAI,CAAC,MAAM,EAAE,MAAM,IAAI,SAAS,4BAAyB,IAAI,QAAI,CAAC;;AAElE,QAAM,UAAU,GAAG,KAAK,CAAC,MAAM,CAAC,CAAC;;AAEjC,QAAI,CAAC,MAAM,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AAClC,QAAI,CAAC,KAAK,GAAG,AAAC,UAAU,GAAI,uBAAM,MAAM,CAAC,UAAU,CAAC,GAAG,EAAE,CAAC;AAC1D,QAAI,CAAC,IAAI,GAAG,IAAI,CAAC;GAClB;;eAXG,WAAW;;WAaJ,qBAAC,KAAK,EAAE;AACjB,UAAI,CAAC,KAAK,GAAG,kBAAK,IAAI,CAAC,KAAK,EAAE,KAAK,CAAC,CAAC;KACtC;;;WAEE,aAAC,IAAI,EAAE,MAAM,EAAE;AAChB,aAAO,iBAAI,IAAI,CAAC,KAAK,EAAE,IAAI,EAAE,MAAM,CAAC,CAAC;KACtC;;;WAEE,aAAC,IAAI,EAAE,GAAG,EAAE;AACb,aAAO,iBAAI,IAAI,CAAC,KAAK,EAAE,IAAI,EAAE,GAAG,CAAC,CAAC;KACnC;;;WAEO,oBAAG;AACT,aAAO,uBAAM,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;KACjC;;;WAEM,mBAAG;AACR,UAAM,KAAK,GAAG,aAAa,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;AACvC,UAAM,MAAM,GAAG,EAAE,CAAC;AAClB,YAAM,CAAC,KAAK,CAAC,GAAG,IAAI,CAAC,QAAQ,EAAE,CAAC;AAChC,aAAO,MAAM,CAAC;KACf;;;SAlCG,WAAW;;;AAqCF,SAAS,UAAU,CAAC,KAAK,EAAE,IAAI,EAAE;AAC9C,SAAO,IAAI,WAAW,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;CACrC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/server/lib/kibana_state.js",
      "sourcesContent": [
        "import { isPlainObject, omit, get, set } from 'lodash';\nimport rison from 'rison-node';\n\nconst stateTypeKeys = {\n  'global': '_g',\n  'app': '_a',\n};\n\nclass KibanaState {\n  constructor(query, type = 'global') {\n    const propId = stateTypeKeys[type];\n    if (!isPlainObject(query)) throw new TypeError('Query parameter must be an object');\n    if (!propId) throw new TypeError(`Unknown state type: '${type}'`);\n\n    const queryValue = query[propId];\n\n    this.exists = Boolean(queryValue);\n    this.state = (queryValue) ? rison.decode(queryValue) : {};\n    this.type = type;\n  }\n\n  removeProps(props) {\n    this.state = omit(this.state, props);\n  }\n\n  get(prop, defVal) {\n    return get(this.state, prop, defVal);\n  }\n\n  set(prop, val) {\n    return set(this.state, prop, val);\n  }\n\n  toString() {\n    return rison.encode(this.state);\n  }\n\n  toQuery() {\n    const index = stateTypeKeys[this.type];\n    const output = {};\n    output[index] = this.toString();\n    return output;\n  }\n}\n\nexport default function parseState(query, type) {\n  return new KibanaState(query, type);\n}"
      ]
    },
    "mtime": 1485775588029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/uri_encode.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "// Stolen from Angular, used to get reliable encoded URIs\n'use strict';\n\nvar _ = require('lodash');\n\nfunction encodeUriQuery(val, pctEncodeSpaces) {\n  return encodeURIComponent(val).replace(/%40/gi, '@').replace(/%3A/gi, ':').replace(/%24/g, '$').replace(/%2C/gi, ',').replace(/%3B/gi, ';').replace(/%20/g, pctEncodeSpaces ? '%20' : '+');\n};\n\nfunction toKeyValue(obj) {\n  var parts = [];\n  _.forEach(obj, function (value, key) {\n    if (_.isArray(value)) {\n      _.forEach(value, function (arrayValue) {\n        var keyStr = encodeUriQuery(key, true);\n        var valStr = arrayValue === true ? '' : '=' + encodeUriQuery(arrayValue, true);\n        parts.push(keyStr + valStr);\n      });\n    } else {\n      var keyStr = encodeUriQuery(key, true);\n      var valStr = value === true ? '' : '=' + encodeUriQuery(value, true);\n      parts.push(keyStr + valStr);\n    }\n  });\n  return parts.length ? parts.join('&') : '';\n};\n\nmodule.exports = {\n  stringify: toKeyValue,\n  string: encodeUriQuery\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL3VyaV9lbmNvZGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQ0EsSUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDOztBQUU1QixTQUFTLGNBQWMsQ0FBQyxHQUFHLEVBQUUsZUFBZSxFQUFFO0FBQzVDLFNBQU8sa0JBQWtCLENBQUMsR0FBRyxDQUFDLENBQzdCLE9BQU8sQ0FBQyxPQUFPLEVBQUUsR0FBRyxDQUFDLENBQ3JCLE9BQU8sQ0FBQyxPQUFPLEVBQUUsR0FBRyxDQUFDLENBQ3JCLE9BQU8sQ0FBQyxNQUFNLEVBQUUsR0FBRyxDQUFDLENBQ3BCLE9BQU8sQ0FBQyxPQUFPLEVBQUUsR0FBRyxDQUFDLENBQ3JCLE9BQU8sQ0FBQyxPQUFPLEVBQUUsR0FBRyxDQUFDLENBQ3JCLE9BQU8sQ0FBQyxNQUFNLEVBQUcsZUFBZSxHQUFHLEtBQUssR0FBRyxHQUFHLENBQUUsQ0FBQztDQUNuRCxDQUFDOztBQUVGLFNBQVMsVUFBVSxDQUFDLEdBQUcsRUFBRTtBQUN2QixNQUFJLEtBQUssR0FBRyxFQUFFLENBQUM7QUFDZixHQUFDLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxVQUFVLEtBQUssRUFBRSxHQUFHLEVBQUU7QUFDbkMsUUFBSSxDQUFDLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxFQUFFO0FBQ3BCLE9BQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLFVBQVUsVUFBVSxFQUFFO0FBQ3JDLFlBQU0sTUFBTSxHQUFHLGNBQWMsQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDekMsWUFBTSxNQUFNLEdBQUksVUFBVSxLQUFLLElBQUksR0FBRyxFQUFFLEdBQUcsR0FBRyxHQUFHLGNBQWMsQ0FBQyxVQUFVLEVBQUUsSUFBSSxDQUFDLEFBQUMsQ0FBQztBQUNuRixhQUFLLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUMsQ0FBQztPQUM3QixDQUFDLENBQUM7S0FDSixNQUFNO0FBQ0wsVUFBTSxNQUFNLEdBQUcsY0FBYyxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsQ0FBQztBQUN6QyxVQUFNLE1BQU0sR0FBSSxLQUFLLEtBQUssSUFBSSxHQUFHLEVBQUUsR0FBRyxHQUFHLEdBQUcsY0FBYyxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsQUFBQyxDQUFDO0FBQ3pFLFdBQUssQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxDQUFDO0tBQzdCO0dBQ0YsQ0FBQyxDQUFDO0FBQ0gsU0FBTyxLQUFLLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO0NBQzVDLENBQUM7O0FBRUYsTUFBTSxDQUFDLE9BQU8sR0FBRztBQUNmLFdBQVMsRUFBRSxVQUFVO0FBQ3JCLFFBQU0sRUFBRSxjQUFjO0NBQ3ZCLENBQUMiLCJmaWxlIjoiL2hvbWUvdWJ1bnR1L3dvcmtzcGFjZS9raWJhbmEtNS4wLjItbGludXgteDg2XzY0L3BsdWdpbnMveC1wYWNrL3BsdWdpbnMvcmVwb3J0aW5nL3NlcnZlci9saWIvdXJpX2VuY29kZS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIFN0b2xlbiBmcm9tIEFuZ3VsYXIsIHVzZWQgdG8gZ2V0IHJlbGlhYmxlIGVuY29kZWQgVVJJc1xuY29uc3QgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuXG5mdW5jdGlvbiBlbmNvZGVVcmlRdWVyeSh2YWwsIHBjdEVuY29kZVNwYWNlcykge1xuICByZXR1cm4gZW5jb2RlVVJJQ29tcG9uZW50KHZhbClcbiAgLnJlcGxhY2UoLyU0MC9naSwgJ0AnKVxuICAucmVwbGFjZSgvJTNBL2dpLCAnOicpXG4gIC5yZXBsYWNlKC8lMjQvZywgJyQnKVxuICAucmVwbGFjZSgvJTJDL2dpLCAnLCcpXG4gIC5yZXBsYWNlKC8lM0IvZ2ksICc7JylcbiAgLnJlcGxhY2UoLyUyMC9nLCAocGN0RW5jb2RlU3BhY2VzID8gJyUyMCcgOiAnKycpKTtcbn07XG5cbmZ1bmN0aW9uIHRvS2V5VmFsdWUob2JqKSB7XG4gIHZhciBwYXJ0cyA9IFtdO1xuICBfLmZvckVhY2gob2JqLCBmdW5jdGlvbiAodmFsdWUsIGtleSkge1xuICAgIGlmIChfLmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICBfLmZvckVhY2godmFsdWUsIGZ1bmN0aW9uIChhcnJheVZhbHVlKSB7XG4gICAgICAgIGNvbnN0IGtleVN0ciA9IGVuY29kZVVyaVF1ZXJ5KGtleSwgdHJ1ZSk7XG4gICAgICAgIGNvbnN0IHZhbFN0ciA9IChhcnJheVZhbHVlID09PSB0cnVlID8gJycgOiAnPScgKyBlbmNvZGVVcmlRdWVyeShhcnJheVZhbHVlLCB0cnVlKSk7XG4gICAgICAgIHBhcnRzLnB1c2goa2V5U3RyICsgdmFsU3RyKTtcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCBrZXlTdHIgPSBlbmNvZGVVcmlRdWVyeShrZXksIHRydWUpO1xuICAgICAgY29uc3QgdmFsU3RyID0gKHZhbHVlID09PSB0cnVlID8gJycgOiAnPScgKyBlbmNvZGVVcmlRdWVyeSh2YWx1ZSwgdHJ1ZSkpO1xuICAgICAgcGFydHMucHVzaChrZXlTdHIgKyB2YWxTdHIpO1xuICAgIH1cbiAgfSk7XG4gIHJldHVybiBwYXJ0cy5sZW5ndGggPyBwYXJ0cy5qb2luKCcmJykgOiAnJztcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBzdHJpbmdpZnk6IHRvS2V5VmFsdWUsXG4gIHN0cmluZzogZW5jb2RlVXJpUXVlcnksXG59OyJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/uri_encode.js"
      ],
      "names": [],
      "mappings": ";;;AACA,IAAM,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAE5B,SAAS,cAAc,CAAC,GAAG,EAAE,eAAe,EAAE;AAC5C,SAAO,kBAAkB,CAAC,GAAG,CAAC,CAC7B,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC,CACrB,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC,CACrB,OAAO,CAAC,MAAM,EAAE,GAAG,CAAC,CACpB,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC,CACrB,OAAO,CAAC,OAAO,EAAE,GAAG,CAAC,CACrB,OAAO,CAAC,MAAM,EAAG,eAAe,GAAG,KAAK,GAAG,GAAG,CAAE,CAAC;CACnD,CAAC;;AAEF,SAAS,UAAU,CAAC,GAAG,EAAE;AACvB,MAAI,KAAK,GAAG,EAAE,CAAC;AACf,GAAC,CAAC,OAAO,CAAC,GAAG,EAAE,UAAU,KAAK,EAAE,GAAG,EAAE;AACnC,QAAI,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,EAAE;AACpB,OAAC,CAAC,OAAO,CAAC,KAAK,EAAE,UAAU,UAAU,EAAE;AACrC,YAAM,MAAM,GAAG,cAAc,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;AACzC,YAAM,MAAM,GAAI,UAAU,KAAK,IAAI,GAAG,EAAE,GAAG,GAAG,GAAG,cAAc,CAAC,UAAU,EAAE,IAAI,CAAC,AAAC,CAAC;AACnF,aAAK,CAAC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,CAAC;OAC7B,CAAC,CAAC;KACJ,MAAM;AACL,UAAM,MAAM,GAAG,cAAc,CAAC,GAAG,EAAE,IAAI,CAAC,CAAC;AACzC,UAAM,MAAM,GAAI,KAAK,KAAK,IAAI,GAAG,EAAE,GAAG,GAAG,GAAG,cAAc,CAAC,KAAK,EAAE,IAAI,CAAC,AAAC,CAAC;AACzE,WAAK,CAAC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC,CAAC;KAC7B;GACF,CAAC,CAAC;AACH,SAAO,KAAK,CAAC,MAAM,GAAG,KAAK,CAAC,IAAI,CAAC,GAAG,CAAC,GAAG,EAAE,CAAC;CAC5C,CAAC;;AAEF,MAAM,CAAC,OAAO,GAAG;AACf,WAAS,EAAE,UAAU;AACrB,QAAM,EAAE,cAAc;CACvB,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/uri_encode.js",
      "sourcesContent": [
        "// Stolen from Angular, used to get reliable encoded URIs\nconst _ = require('lodash');\n\nfunction encodeUriQuery(val, pctEncodeSpaces) {\n  return encodeURIComponent(val)\n  .replace(/%40/gi, '@')\n  .replace(/%3A/gi, ':')\n  .replace(/%24/g, '$')\n  .replace(/%2C/gi, ',')\n  .replace(/%3B/gi, ';')\n  .replace(/%20/g, (pctEncodeSpaces ? '%20' : '+'));\n};\n\nfunction toKeyValue(obj) {\n  var parts = [];\n  _.forEach(obj, function (value, key) {\n    if (_.isArray(value)) {\n      _.forEach(value, function (arrayValue) {\n        const keyStr = encodeUriQuery(key, true);\n        const valStr = (arrayValue === true ? '' : '=' + encodeUriQuery(arrayValue, true));\n        parts.push(keyStr + valStr);\n      });\n    } else {\n      const keyStr = encodeUriQuery(key, true);\n      const valStr = (value === true ? '' : '=' + encodeUriQuery(value, true));\n      parts.push(keyStr + valStr);\n    }\n  });\n  return parts.length ? parts.join('&') : '';\n};\n\nmodule.exports = {\n  stringify: toKeyValue,\n  string: encodeUriQuery,\n};"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/get_absolute_time.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _ = require('lodash');\nvar datemath = require('@elastic/datemath');\n\nfunction getAbsoluteTime(time) {\n  var mode = _.get(time, 'mode');\n  var timeFrom = _.get(time, 'from');\n  var timeTo = _.get(time, 'to');\n  var roundToEnd = true;\n\n  if (!mode || !timeFrom || !timeTo) return time;\n  if (mode === 'absolute') return time;\n\n  var output = { mode: 'absolute' };\n  output.from = datemath.parse(timeFrom);\n  output.to = datemath.parse(timeTo, roundToEnd);\n  return output;\n}\n\nmodule.exports = getAbsoluteTime;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL2dldF9hYnNvbHV0ZV90aW1lLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzVCLElBQU0sUUFBUSxHQUFHLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDOztBQUU5QyxTQUFTLGVBQWUsQ0FBQyxJQUFJLEVBQUU7QUFDN0IsTUFBTSxJQUFJLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDakMsTUFBTSxRQUFRLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsTUFBTSxDQUFDLENBQUM7QUFDckMsTUFBTSxNQUFNLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxJQUFJLEVBQUUsSUFBSSxDQUFDLENBQUM7QUFDakMsTUFBTSxVQUFVLEdBQUcsSUFBSSxDQUFDOztBQUV4QixNQUFJLENBQUMsSUFBSSxJQUFJLENBQUMsUUFBUSxJQUFJLENBQUMsTUFBTSxFQUFFLE9BQU8sSUFBSSxDQUFDO0FBQy9DLE1BQUksSUFBSSxLQUFLLFVBQVUsRUFBRSxPQUFPLElBQUksQ0FBQzs7QUFFckMsTUFBTSxNQUFNLEdBQUcsRUFBRSxJQUFJLEVBQUUsVUFBVSxFQUFFLENBQUM7QUFDcEMsUUFBTSxDQUFDLElBQUksR0FBRyxRQUFRLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ3ZDLFFBQU0sQ0FBQyxFQUFFLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsVUFBVSxDQUFDLENBQUM7QUFDL0MsU0FBTyxNQUFNLENBQUM7Q0FDZjs7QUFFRCxNQUFNLENBQUMsT0FBTyxHQUFHLGVBQWUsQ0FBQyIsImZpbGUiOiIvaG9tZS91YnVudHUvd29ya3NwYWNlL2tpYmFuYS01LjAuMi1saW51eC14ODZfNjQvcGx1Z2lucy94LXBhY2svcGx1Z2lucy9yZXBvcnRpbmcvc2VydmVyL2xpYi9nZXRfYWJzb2x1dGVfdGltZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcbmNvbnN0IGRhdGVtYXRoID0gcmVxdWlyZSgnQGVsYXN0aWMvZGF0ZW1hdGgnKTtcblxuZnVuY3Rpb24gZ2V0QWJzb2x1dGVUaW1lKHRpbWUpIHtcbiAgY29uc3QgbW9kZSA9IF8uZ2V0KHRpbWUsICdtb2RlJyk7XG4gIGNvbnN0IHRpbWVGcm9tID0gXy5nZXQodGltZSwgJ2Zyb20nKTtcbiAgY29uc3QgdGltZVRvID0gXy5nZXQodGltZSwgJ3RvJyk7XG4gIGNvbnN0IHJvdW5kVG9FbmQgPSB0cnVlO1xuXG4gIGlmICghbW9kZSB8fCAhdGltZUZyb20gfHwgIXRpbWVUbykgcmV0dXJuIHRpbWU7XG4gIGlmIChtb2RlID09PSAnYWJzb2x1dGUnKSByZXR1cm4gdGltZTtcblxuICBjb25zdCBvdXRwdXQgPSB7IG1vZGU6ICdhYnNvbHV0ZScgfTtcbiAgb3V0cHV0LmZyb20gPSBkYXRlbWF0aC5wYXJzZSh0aW1lRnJvbSk7XG4gIG91dHB1dC50byA9IGRhdGVtYXRoLnBhcnNlKHRpbWVUbywgcm91bmRUb0VuZCk7XG4gIHJldHVybiBvdXRwdXQ7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gZ2V0QWJzb2x1dGVUaW1lOyJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/get_absolute_time.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAM,CAAC,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;AAC5B,IAAM,QAAQ,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC;;AAE9C,SAAS,eAAe,CAAC,IAAI,EAAE;AAC7B,MAAM,IAAI,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;AACjC,MAAM,QAAQ,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;AACrC,MAAM,MAAM,GAAG,CAAC,CAAC,GAAG,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;AACjC,MAAM,UAAU,GAAG,IAAI,CAAC;;AAExB,MAAI,CAAC,IAAI,IAAI,CAAC,QAAQ,IAAI,CAAC,MAAM,EAAE,OAAO,IAAI,CAAC;AAC/C,MAAI,IAAI,KAAK,UAAU,EAAE,OAAO,IAAI,CAAC;;AAErC,MAAM,MAAM,GAAG,EAAE,IAAI,EAAE,UAAU,EAAE,CAAC;AACpC,QAAM,CAAC,IAAI,GAAG,QAAQ,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;AACvC,QAAM,CAAC,EAAE,GAAG,QAAQ,CAAC,KAAK,CAAC,MAAM,EAAE,UAAU,CAAC,CAAC;AAC/C,SAAO,MAAM,CAAC;CACf;;AAED,MAAM,CAAC,OAAO,GAAG,eAAe,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/get_absolute_time.js",
      "sourcesContent": [
        "const _ = require('lodash');\nconst datemath = require('@elastic/datemath');\n\nfunction getAbsoluteTime(time) {\n  const mode = _.get(time, 'mode');\n  const timeFrom = _.get(time, 'from');\n  const timeTo = _.get(time, 'to');\n  const roundToEnd = true;\n\n  if (!mode || !timeFrom || !timeTo) return time;\n  if (mode === 'absolute') return time;\n\n  const output = { mode: 'absolute' };\n  output.from = datemath.parse(timeFrom);\n  output.to = datemath.parse(timeTo, roundToEnd);\n  return output;\n}\n\nmodule.exports = getAbsoluteTime;"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/crypto.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./once_per_server",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "oncePerServer"
              }
            ]
          },
          {
            "source": "@elastic/node-crypto",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "nodeCrypto"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _once_per_server = require('./once_per_server');\n\nvar _once_per_server2 = _interopRequireDefault(_once_per_server);\n\nvar _elasticNodeCrypto = require('@elastic/node-crypto');\n\nvar _elasticNodeCrypto2 = _interopRequireDefault(_elasticNodeCrypto);\n\nfunction cryptoFactory(server) {\n  var encryptionKey = server.config().get('xpack.reporting.encryptionKey');\n  return (0, _elasticNodeCrypto2['default'])({ encryptionKey: encryptionKey });\n}\n\nmodule.exports = (0, _once_per_server2['default'])(cryptoFactory);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL2NyeXB0by5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OytCQUEwQixtQkFBbUI7Ozs7aUNBQ3RCLHNCQUFzQjs7OztBQUU3QyxTQUFTLGFBQWEsQ0FBQyxNQUFNLEVBQUU7QUFDN0IsTUFBTSxhQUFhLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQywrQkFBK0IsQ0FBQyxDQUFDO0FBQzNFLFNBQU8sb0NBQVcsRUFBRSxhQUFhLEVBQWIsYUFBYSxFQUFFLENBQUMsQ0FBQztDQUN0Qzs7QUFFRCxNQUFNLENBQUMsT0FBTyxHQUFHLGtDQUFjLGFBQWEsQ0FBQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL2NyeXB0by5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBvbmNlUGVyU2VydmVyIGZyb20gJy4vb25jZV9wZXJfc2VydmVyJztcbmltcG9ydCBub2RlQ3J5cHRvIGZyb20gJ0BlbGFzdGljL25vZGUtY3J5cHRvJztcblxuZnVuY3Rpb24gY3J5cHRvRmFjdG9yeShzZXJ2ZXIpIHtcbiAgY29uc3QgZW5jcnlwdGlvbktleSA9IHNlcnZlci5jb25maWcoKS5nZXQoJ3hwYWNrLnJlcG9ydGluZy5lbmNyeXB0aW9uS2V5Jyk7XG4gIHJldHVybiBub2RlQ3J5cHRvKHsgZW5jcnlwdGlvbktleSB9KTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBvbmNlUGVyU2VydmVyKGNyeXB0b0ZhY3RvcnkpO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/crypto.js"
      ],
      "names": [],
      "mappings": ";;;;+BAA0B,mBAAmB;;;;iCACtB,sBAAsB;;;;AAE7C,SAAS,aAAa,CAAC,MAAM,EAAE;AAC7B,MAAM,aAAa,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,+BAA+B,CAAC,CAAC;AAC3E,SAAO,oCAAW,EAAE,aAAa,EAAb,aAAa,EAAE,CAAC,CAAC;CACtC;;AAED,MAAM,CAAC,OAAO,GAAG,kCAAc,aAAa,CAAC,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/crypto.js",
      "sourcesContent": [
        "import oncePerServer from './once_per_server';\nimport nodeCrypto from '@elastic/node-crypto';\n\nfunction cryptoFactory(server) {\n  const encryptionKey = server.config().get('xpack.reporting.encryptionKey');\n  return nodeCrypto({ encryptionKey });\n}\n\nmodule.exports = oncePerServer(cryptoFactory);\n"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/license_pre_routing.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar Boom = require('boom');\nvar oncePerServer = require('./once_per_server');\n\nfunction LicensePreRoutingFactory(server) {\n  var xpackMainPlugin = server.plugins.xpack_main;\n  var pluginId = 'reporting';\n\n  // License checking and enable/disable logic\n  function forbidApiAccess(request, reply) {\n    var licenseCheckResults = xpackMainPlugin.info.feature(pluginId).getLicenseCheckResults();\n    if (!licenseCheckResults.showLinks || !licenseCheckResults.enableLinks) {\n      reply(Boom.forbidden(licenseCheckResults.message));\n    } else {\n      reply();\n    }\n  };\n\n  return forbidApiAccess;\n}\n\nmodule.exports = oncePerServer(LicensePreRoutingFactory);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL2xpY2Vuc2VfcHJlX3JvdXRpbmcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDN0IsSUFBTSxhQUFhLEdBQUcsT0FBTyxDQUFDLG1CQUFtQixDQUFDLENBQUM7O0FBRW5ELFNBQVMsd0JBQXdCLENBQUMsTUFBTSxFQUFFO0FBQ3hDLE1BQU0sZUFBZSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDO0FBQ2xELE1BQU0sUUFBUSxHQUFHLFdBQVcsQ0FBQzs7O0FBRzdCLFdBQVMsZUFBZSxDQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUU7QUFDdkMsUUFBTSxtQkFBbUIsR0FBRyxlQUFlLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO0FBQzVGLFFBQUksQ0FBQyxtQkFBbUIsQ0FBQyxTQUFTLElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxXQUFXLEVBQUU7QUFDdEUsV0FBSyxDQUFDLElBQUksQ0FBQyxTQUFTLENBQUMsbUJBQW1CLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztLQUNwRCxNQUFNO0FBQ0wsV0FBSyxFQUFFLENBQUM7S0FDVDtHQUNGLENBQUM7O0FBRUYsU0FBTyxlQUFlLENBQUM7Q0FDeEI7O0FBRUQsTUFBTSxDQUFDLE9BQU8sR0FBRyxhQUFhLENBQUMsd0JBQXdCLENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS91YnVudHUvd29ya3NwYWNlL2tpYmFuYS01LjAuMi1saW51eC14ODZfNjQvcGx1Z2lucy94LXBhY2svcGx1Z2lucy9yZXBvcnRpbmcvc2VydmVyL2xpYi9saWNlbnNlX3ByZV9yb3V0aW5nLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgQm9vbSA9IHJlcXVpcmUoJ2Jvb20nKTtcbmNvbnN0IG9uY2VQZXJTZXJ2ZXIgPSByZXF1aXJlKCcuL29uY2VfcGVyX3NlcnZlcicpO1xuXG5mdW5jdGlvbiBMaWNlbnNlUHJlUm91dGluZ0ZhY3Rvcnkoc2VydmVyKSB7XG4gIGNvbnN0IHhwYWNrTWFpblBsdWdpbiA9IHNlcnZlci5wbHVnaW5zLnhwYWNrX21haW47XG4gIGNvbnN0IHBsdWdpbklkID0gJ3JlcG9ydGluZyc7XG5cbiAgLy8gTGljZW5zZSBjaGVja2luZyBhbmQgZW5hYmxlL2Rpc2FibGUgbG9naWNcbiAgZnVuY3Rpb24gZm9yYmlkQXBpQWNjZXNzKHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgY29uc3QgbGljZW5zZUNoZWNrUmVzdWx0cyA9IHhwYWNrTWFpblBsdWdpbi5pbmZvLmZlYXR1cmUocGx1Z2luSWQpLmdldExpY2Vuc2VDaGVja1Jlc3VsdHMoKTtcbiAgICBpZiAoIWxpY2Vuc2VDaGVja1Jlc3VsdHMuc2hvd0xpbmtzIHx8ICFsaWNlbnNlQ2hlY2tSZXN1bHRzLmVuYWJsZUxpbmtzKSB7XG4gICAgICByZXBseShCb29tLmZvcmJpZGRlbihsaWNlbnNlQ2hlY2tSZXN1bHRzLm1lc3NhZ2UpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVwbHkoKTtcbiAgICB9XG4gIH07XG5cbiAgcmV0dXJuIGZvcmJpZEFwaUFjY2Vzcztcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBvbmNlUGVyU2VydmVyKExpY2Vuc2VQcmVSb3V0aW5nRmFjdG9yeSk7XG5cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/license_pre_routing.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAM,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAC7B,IAAM,aAAa,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC;;AAEnD,SAAS,wBAAwB,CAAC,MAAM,EAAE;AACxC,MAAM,eAAe,GAAG,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC;AAClD,MAAM,QAAQ,GAAG,WAAW,CAAC;;;AAG7B,WAAS,eAAe,CAAC,OAAO,EAAE,KAAK,EAAE;AACvC,QAAM,mBAAmB,GAAG,eAAe,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,sBAAsB,EAAE,CAAC;AAC5F,QAAI,CAAC,mBAAmB,CAAC,SAAS,IAAI,CAAC,mBAAmB,CAAC,WAAW,EAAE;AACtE,WAAK,CAAC,IAAI,CAAC,SAAS,CAAC,mBAAmB,CAAC,OAAO,CAAC,CAAC,CAAC;KACpD,MAAM;AACL,WAAK,EAAE,CAAC;KACT;GACF,CAAC;;AAEF,SAAO,eAAe,CAAC;CACxB;;AAED,MAAM,CAAC,OAAO,GAAG,aAAa,CAAC,wBAAwB,CAAC,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/license_pre_routing.js",
      "sourcesContent": [
        "const Boom = require('boom');\nconst oncePerServer = require('./once_per_server');\n\nfunction LicensePreRoutingFactory(server) {\n  const xpackMainPlugin = server.plugins.xpack_main;\n  const pluginId = 'reporting';\n\n  // License checking and enable/disable logic\n  function forbidApiAccess(request, reply) {\n    const licenseCheckResults = xpackMainPlugin.info.feature(pluginId).getLicenseCheckResults();\n    if (!licenseCheckResults.showLinks || !licenseCheckResults.enableLinks) {\n      reply(Boom.forbidden(licenseCheckResults.message));\n    } else {\n      reply();\n    }\n  };\n\n  return forbidApiAccess;\n}\n\nmodule.exports = oncePerServer(LicensePreRoutingFactory);\n\n"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/user_pre_routing.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar getUserFactory = require('./get_user');\nvar oncePerServer = require('./once_per_server');\n\nfunction userPreRoutingFactory(server) {\n  var getUser = getUserFactory(server);\n\n  return function userPreRouting(request, reply) {\n    reply(getUser(request));\n  };\n}\n\nmodule.exports = oncePerServer(userPreRoutingFactory);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL3VzZXJfcHJlX3JvdXRpbmcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNLGNBQWMsR0FBRyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDN0MsSUFBTSxhQUFhLEdBQUcsT0FBTyxDQUFDLG1CQUFtQixDQUFDLENBQUM7O0FBRW5ELFNBQVMscUJBQXFCLENBQUMsTUFBTSxFQUFFO0FBQ3JDLE1BQU0sT0FBTyxHQUFHLGNBQWMsQ0FBQyxNQUFNLENBQUMsQ0FBQzs7QUFFdkMsU0FBTyxTQUFTLGNBQWMsQ0FBQyxPQUFPLEVBQUUsS0FBSyxFQUFFO0FBQzdDLFNBQUssQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztHQUN6QixDQUFDO0NBQ0g7O0FBRUQsTUFBTSxDQUFDLE9BQU8sR0FBRyxhQUFhLENBQUMscUJBQXFCLENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS91YnVudHUvd29ya3NwYWNlL2tpYmFuYS01LjAuMi1saW51eC14ODZfNjQvcGx1Z2lucy94LXBhY2svcGx1Z2lucy9yZXBvcnRpbmcvc2VydmVyL2xpYi91c2VyX3ByZV9yb3V0aW5nLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZ2V0VXNlckZhY3RvcnkgPSByZXF1aXJlKCcuL2dldF91c2VyJyk7XG5jb25zdCBvbmNlUGVyU2VydmVyID0gcmVxdWlyZSgnLi9vbmNlX3Blcl9zZXJ2ZXInKTtcblxuZnVuY3Rpb24gdXNlclByZVJvdXRpbmdGYWN0b3J5KHNlcnZlcikge1xuICBjb25zdCBnZXRVc2VyID0gZ2V0VXNlckZhY3Rvcnkoc2VydmVyKTtcblxuICByZXR1cm4gZnVuY3Rpb24gdXNlclByZVJvdXRpbmcocmVxdWVzdCwgcmVwbHkpIHtcbiAgICByZXBseShnZXRVc2VyKHJlcXVlc3QpKTtcbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBvbmNlUGVyU2VydmVyKHVzZXJQcmVSb3V0aW5nRmFjdG9yeSk7XG5cbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/user_pre_routing.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAM,cAAc,GAAG,OAAO,CAAC,YAAY,CAAC,CAAC;AAC7C,IAAM,aAAa,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC;;AAEnD,SAAS,qBAAqB,CAAC,MAAM,EAAE;AACrC,MAAM,OAAO,GAAG,cAAc,CAAC,MAAM,CAAC,CAAC;;AAEvC,SAAO,SAAS,cAAc,CAAC,OAAO,EAAE,KAAK,EAAE;AAC7C,SAAK,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,CAAC;GACzB,CAAC;CACH;;AAED,MAAM,CAAC,OAAO,GAAG,aAAa,CAAC,qBAAqB,CAAC,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/user_pre_routing.js",
      "sourcesContent": [
        "const getUserFactory = require('./get_user');\nconst oncePerServer = require('./once_per_server');\n\nfunction userPreRoutingFactory(server) {\n  const getUser = getUserFactory(server);\n\n  return function userPreRouting(request, reply) {\n    reply(getUser(request));\n  };\n}\n\nmodule.exports = oncePerServer(userPreRoutingFactory);\n\n"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/sync_job_handler.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "boom",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "boom"
              }
            ]
          },
          {
            "source": "./once_per_server",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "oncePerServer"
              }
            ]
          },
          {
            "source": "./jobs_query",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "jobsQueryFactory"
              }
            ]
          },
          {
            "source": "./get_document_payload",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "getJobPayloadFactory"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _boom = require('boom');\n\nvar _boom2 = _interopRequireDefault(_boom);\n\nvar _once_per_server = require('./once_per_server');\n\nvar _once_per_server2 = _interopRequireDefault(_once_per_server);\n\nvar _jobs_query = require('./jobs_query');\n\nvar _jobs_query2 = _interopRequireDefault(_jobs_query);\n\nvar _get_document_payload = require('./get_document_payload');\n\nvar _get_document_payload2 = _interopRequireDefault(_get_document_payload);\n\nfunction syncJobHandlerFactory(server) {\n  var jobsQuery = (0, _jobs_query2['default'])(server);\n  var getJobPayload = (0, _get_document_payload2['default'])(server);\n\n  return function syncJobHandler(jobId, jobType, request, reply) {\n    jobsQuery.get(request, jobId, true).then(function (doc) {\n      if (!doc) return reply(_boom2['default'].notFound());\n\n      return getJobPayload(doc, jobType).then(function (output) {\n        var response = reply(output.content);\n        response.type(output.contentType);\n      })['catch'](function (err) {\n        if (err.statusCode === 204) return reply().code(err.statusCode);\n        if (err.statusCode === 504) return reply(_boom2['default'].gatewayTimeout('Report generation failed: ' + err.content));\n        reply(_boom2['default'].badImplementation());\n      });\n    });\n  };\n}\n\nexports['default'] = (0, _once_per_server2['default'])(syncJobHandlerFactory);\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL3N5bmNfam9iX2hhbmRsZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7b0JBQWlCLE1BQU07Ozs7K0JBQ0csbUJBQW1COzs7OzBCQUNoQixjQUFjOzs7O29DQUNWLHdCQUF3Qjs7OztBQUV6RCxTQUFTLHFCQUFxQixDQUFDLE1BQU0sRUFBRTtBQUNyQyxNQUFNLFNBQVMsR0FBRyw2QkFBaUIsTUFBTSxDQUFDLENBQUM7QUFDM0MsTUFBTSxhQUFhLEdBQUcsdUNBQXFCLE1BQU0sQ0FBQyxDQUFDOztBQUVuRCxTQUFPLFNBQVMsY0FBYyxDQUFDLEtBQUssRUFBRSxPQUFPLEVBQUUsT0FBTyxFQUFFLEtBQUssRUFBRTtBQUM3RCxhQUFTLENBQUMsR0FBRyxDQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUUsSUFBSSxDQUFDLENBQ2xDLElBQUksQ0FBQyxVQUFDLEdBQUcsRUFBSztBQUNiLFVBQUksQ0FBQyxHQUFHLEVBQUUsT0FBTyxLQUFLLENBQUMsa0JBQUssUUFBUSxFQUFFLENBQUMsQ0FBQzs7QUFFeEMsYUFBTyxhQUFhLENBQUMsR0FBRyxFQUFFLE9BQU8sQ0FBQyxDQUNqQyxJQUFJLENBQUMsVUFBQyxNQUFNLEVBQUs7QUFDaEIsWUFBTSxRQUFRLEdBQUcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUN2QyxnQkFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsV0FBVyxDQUFDLENBQUM7T0FDbkMsQ0FBQyxTQUNJLENBQUMsVUFBQyxHQUFHLEVBQUs7QUFDZCxZQUFJLEdBQUcsQ0FBQyxVQUFVLEtBQUssR0FBRyxFQUFFLE9BQU8sS0FBSyxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNoRSxZQUFJLEdBQUcsQ0FBQyxVQUFVLEtBQUssR0FBRyxFQUFFLE9BQU8sS0FBSyxDQUFDLGtCQUFLLGNBQWMsZ0NBQThCLEdBQUcsQ0FBQyxPQUFPLENBQUcsQ0FBQyxDQUFDO0FBQzFHLGFBQUssQ0FBQyxrQkFBSyxpQkFBaUIsRUFBRSxDQUFDLENBQUM7T0FDakMsQ0FBQyxDQUFDO0tBQ0osQ0FBQyxDQUFDO0dBQ0osQ0FBQztDQUNIOztxQkFFYyxrQ0FBYyxxQkFBcUIsQ0FBQyIsImZpbGUiOiIvaG9tZS91YnVudHUvd29ya3NwYWNlL2tpYmFuYS01LjAuMi1saW51eC14ODZfNjQvcGx1Z2lucy94LXBhY2svcGx1Z2lucy9yZXBvcnRpbmcvc2VydmVyL2xpYi9zeW5jX2pvYl9oYW5kbGVyLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGJvb20gZnJvbSAnYm9vbSc7XG5pbXBvcnQgb25jZVBlclNlcnZlciBmcm9tICcuL29uY2VfcGVyX3NlcnZlcic7XG5pbXBvcnQgam9ic1F1ZXJ5RmFjdG9yeSBmcm9tICcuL2pvYnNfcXVlcnknO1xuaW1wb3J0IGdldEpvYlBheWxvYWRGYWN0b3J5IGZyb20gJy4vZ2V0X2RvY3VtZW50X3BheWxvYWQnO1xuXG5mdW5jdGlvbiBzeW5jSm9iSGFuZGxlckZhY3Rvcnkoc2VydmVyKSB7XG4gIGNvbnN0IGpvYnNRdWVyeSA9IGpvYnNRdWVyeUZhY3Rvcnkoc2VydmVyKTtcbiAgY29uc3QgZ2V0Sm9iUGF5bG9hZCA9IGdldEpvYlBheWxvYWRGYWN0b3J5KHNlcnZlcik7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIHN5bmNKb2JIYW5kbGVyKGpvYklkLCBqb2JUeXBlLCByZXF1ZXN0LCByZXBseSkge1xuICAgIGpvYnNRdWVyeS5nZXQocmVxdWVzdCwgam9iSWQsIHRydWUpXG4gICAgLnRoZW4oKGRvYykgPT4ge1xuICAgICAgaWYgKCFkb2MpIHJldHVybiByZXBseShib29tLm5vdEZvdW5kKCkpO1xuXG4gICAgICByZXR1cm4gZ2V0Sm9iUGF5bG9hZChkb2MsIGpvYlR5cGUpXG4gICAgICAudGhlbigob3V0cHV0KSA9PiB7XG4gICAgICAgIGNvbnN0IHJlc3BvbnNlID0gcmVwbHkob3V0cHV0LmNvbnRlbnQpO1xuICAgICAgICByZXNwb25zZS50eXBlKG91dHB1dC5jb250ZW50VHlwZSk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgaWYgKGVyci5zdGF0dXNDb2RlID09PSAyMDQpIHJldHVybiByZXBseSgpLmNvZGUoZXJyLnN0YXR1c0NvZGUpO1xuICAgICAgICBpZiAoZXJyLnN0YXR1c0NvZGUgPT09IDUwNCkgcmV0dXJuIHJlcGx5KGJvb20uZ2F0ZXdheVRpbWVvdXQoYFJlcG9ydCBnZW5lcmF0aW9uIGZhaWxlZDogJHtlcnIuY29udGVudH1gKSk7XG4gICAgICAgIHJlcGx5KGJvb20uYmFkSW1wbGVtZW50YXRpb24oKSk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgb25jZVBlclNlcnZlcihzeW5jSm9iSGFuZGxlckZhY3RvcnkpO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/sync_job_handler.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;oBAAiB,MAAM;;;;+BACG,mBAAmB;;;;0BAChB,cAAc;;;;oCACV,wBAAwB;;;;AAEzD,SAAS,qBAAqB,CAAC,MAAM,EAAE;AACrC,MAAM,SAAS,GAAG,6BAAiB,MAAM,CAAC,CAAC;AAC3C,MAAM,aAAa,GAAG,uCAAqB,MAAM,CAAC,CAAC;;AAEnD,SAAO,SAAS,cAAc,CAAC,KAAK,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK,EAAE;AAC7D,aAAS,CAAC,GAAG,CAAC,OAAO,EAAE,KAAK,EAAE,IAAI,CAAC,CAClC,IAAI,CAAC,UAAC,GAAG,EAAK;AACb,UAAI,CAAC,GAAG,EAAE,OAAO,KAAK,CAAC,kBAAK,QAAQ,EAAE,CAAC,CAAC;;AAExC,aAAO,aAAa,CAAC,GAAG,EAAE,OAAO,CAAC,CACjC,IAAI,CAAC,UAAC,MAAM,EAAK;AAChB,YAAM,QAAQ,GAAG,KAAK,CAAC,MAAM,CAAC,OAAO,CAAC,CAAC;AACvC,gBAAQ,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,CAAC;OACnC,CAAC,SACI,CAAC,UAAC,GAAG,EAAK;AACd,YAAI,GAAG,CAAC,UAAU,KAAK,GAAG,EAAE,OAAO,KAAK,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,UAAU,CAAC,CAAC;AAChE,YAAI,GAAG,CAAC,UAAU,KAAK,GAAG,EAAE,OAAO,KAAK,CAAC,kBAAK,cAAc,gCAA8B,GAAG,CAAC,OAAO,CAAG,CAAC,CAAC;AAC1G,aAAK,CAAC,kBAAK,iBAAiB,EAAE,CAAC,CAAC;OACjC,CAAC,CAAC;KACJ,CAAC,CAAC;GACJ,CAAC;CACH;;qBAEc,kCAAc,qBAAqB,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/sync_job_handler.js",
      "sourcesContent": [
        "import boom from 'boom';\nimport oncePerServer from './once_per_server';\nimport jobsQueryFactory from './jobs_query';\nimport getJobPayloadFactory from './get_document_payload';\n\nfunction syncJobHandlerFactory(server) {\n  const jobsQuery = jobsQueryFactory(server);\n  const getJobPayload = getJobPayloadFactory(server);\n\n  return function syncJobHandler(jobId, jobType, request, reply) {\n    jobsQuery.get(request, jobId, true)\n    .then((doc) => {\n      if (!doc) return reply(boom.notFound());\n\n      return getJobPayload(doc, jobType)\n      .then((output) => {\n        const response = reply(output.content);\n        response.type(output.contentType);\n      })\n      .catch((err) => {\n        if (err.statusCode === 204) return reply().code(err.statusCode);\n        if (err.statusCode === 504) return reply(boom.gatewayTimeout(`Report generation failed: ${err.content}`));\n        reply(boom.badImplementation());\n      });\n    });\n  };\n}\n\nexport default oncePerServer(syncJobHandlerFactory);\n"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/jobs_query.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _require = require('lodash');\n\nvar get = _require.get;\nvar set = _require.set;\n\nvar _require2 = require('boom');\n\nvar badRequest = _require2.badRequest;\n\nvar oncePerServer = require('./once_per_server');\n\nvar _require3 = require('./constants');\n\nvar QUEUE_INDEX = _require3.QUEUE_INDEX;\nvar QUEUE_DOCTYPE = _require3.QUEUE_DOCTYPE;\n\nvar getUserFactory = require('./get_user');\nvar defaultSize = 10;\n\nfunction jobsQueryFactory(server) {\n  var getUser = getUserFactory(server);\n  var esErrors = server.plugins.elasticsearch.errors;\n  var callWithRequest = server.plugins.elasticsearch.callWithRequest;\n\n  function execQuery(type, body, request) {\n    var defaultBody = {\n      search: {\n        _source: {\n          excludes: ['output.content']\n        },\n        sort: [{ created_at: { order: 'desc' } }],\n        size: defaultSize\n      }\n    };\n\n    var query = {\n      index: QUEUE_INDEX + '-*',\n      type: QUEUE_DOCTYPE,\n      body: Object.assign(defaultBody[type] || {}, body)\n    };\n\n    return callWithRequest(request, type, query)['catch'](function (err) {\n      if (err instanceof esErrors['401']) return;\n      if (err instanceof esErrors['403']) return;\n      if (err instanceof esErrors['404']) return;\n      throw err;\n    });\n  }\n\n  function getHits(query) {\n    return query.then(function (res) {\n      return get(res, 'hits.hits', []);\n    });\n  }\n\n  return {\n    list: function list(request) {\n      var page = arguments.length <= 1 || arguments[1] === undefined ? 0 : arguments[1];\n      var size = arguments.length <= 2 || arguments[2] === undefined ? defaultSize : arguments[2];\n\n      var showAll = get(request, 'query.all', false);\n\n      return getUser(request).then(function (user) {\n        var body = {\n          size: size,\n          from: size * page\n        };\n\n        if (!showAll && !user) {\n          throw badRequest('Failed to get the current user\\'s reports because there is no user associated with this request');\n        }\n\n        if (!showAll) {\n          var username = get(user, 'username');\n\n          set(body, 'query', {\n            constant_score: {\n              filter: {\n                bool: {\n                  must: [{ term: { created_by: username } }]\n                }\n              }\n            }\n          });\n        }\n\n        return getHits(execQuery('search', body, request));\n      });\n    },\n\n    listCompletedSince: function listCompletedSince(request, size, sinceInMs) {\n      if (size === undefined) size = defaultSize;\n\n      return getUser(request).then(function (user) {\n        var filters = [{ range: { completed_at: { gt: sinceInMs, format: 'epoch_millis' } } }];\n        if (user) {\n          var username = get(user, 'username');\n          filters.push({ term: { created_by: username } });\n        }\n\n        var body = {\n          size: size,\n          sort: { completed_at: 'asc' },\n          query: {\n            constant_score: {\n              filter: {\n                bool: {\n                  must: filters\n                }\n              }\n            }\n          }\n        };\n\n        return getHits(execQuery('search', body, request));\n      });\n    },\n\n    count: function count(request) {\n      var showAll = get(request, 'query.all', false);\n\n      return getUser(request).then(function (user) {\n        var body = {};\n\n        if (!showAll) {\n          var username = get(user, 'username');\n          body.query = {\n            constant_score: {\n              filter: {\n                bool: {\n                  must: [{ term: { created_by: username } }]\n                }\n              }\n            }\n          };\n        };\n\n        return execQuery('count', body, request).then(function (doc) {\n          if (!doc) return 0;\n          return doc.count;\n        });\n      });\n    },\n\n    get: function get(request, id) {\n      var includeContent = arguments.length <= 2 || arguments[2] === undefined ? false : arguments[2];\n\n      if (!id) return Promise.resolve();\n\n      return getUser(request).then(function () {\n        if (!id) return;\n\n        var body = {\n          query: {\n            constant_score: {\n              filter: {\n                bool: {\n                  filter: [{ term: { _id: id } }]\n                }\n              }\n            }\n          },\n          size: 1\n        };\n\n        if (includeContent) {\n          body._source = {\n            excludes: []\n          };\n        }\n\n        return getHits(execQuery('search', body, request)).then(function (hits) {\n          if (hits.length !== 1) return;\n          return hits[0];\n        });\n      });\n    }\n  };\n}\n\nmodule.exports = oncePerServer(jobsQueryFactory);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL2pvYnNfcXVlcnkuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7ZUFBcUIsT0FBTyxDQUFDLFFBQVEsQ0FBQzs7SUFBOUIsR0FBRyxZQUFILEdBQUc7SUFBRSxHQUFHLFlBQUgsR0FBRzs7Z0JBQ08sT0FBTyxDQUFDLE1BQU0sQ0FBQzs7SUFBOUIsVUFBVSxhQUFWLFVBQVU7O0FBRWxCLElBQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDOztnQkFDWixPQUFPLENBQUMsYUFBYSxDQUFDOztJQUFyRCxXQUFXLGFBQVgsV0FBVztJQUFFLGFBQWEsYUFBYixhQUFhOztBQUNsQyxJQUFNLGNBQWMsR0FBRyxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUM7QUFDN0MsSUFBTSxXQUFXLEdBQUcsRUFBRSxDQUFDOztBQUV2QixTQUFTLGdCQUFnQixDQUFDLE1BQU0sRUFBRTtBQUNoQyxNQUFNLE9BQU8sR0FBRyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDdkMsTUFBTSxRQUFRLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDO01BQzdDLGVBQWUsR0FBSyxNQUFNLENBQUMsT0FBTyxDQUFDLGFBQWEsQ0FBaEQsZUFBZTs7QUFFdkIsV0FBUyxTQUFTLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxPQUFPLEVBQUU7QUFDdEMsUUFBTSxXQUFXLEdBQUc7QUFDbEIsWUFBTSxFQUFFO0FBQ04sZUFBTyxFQUFHO0FBQ1Isa0JBQVEsRUFBRSxDQUFFLGdCQUFnQixDQUFFO1NBQy9CO0FBQ0QsWUFBSSxFQUFFLENBQ0osRUFBRSxVQUFVLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLEVBQUMsQ0FDakM7QUFDRCxZQUFJLEVBQUUsV0FBVztP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LGFBQUMsT0FBTyxFQUFFLEVBQUUsRUFBMEI7VUFBeEIsY0FBYyx5REFBRyxLQUFLOztBQUNyQyxVQUFJLENBQUMsRUFBRSxFQUFFLE9BQU8sT0FBTyxDQUFDLE9BQU8sRUFBRSxDQUFDOztBQUVsQyxhQUFPLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FDdEIsSUFBSSxDQUFDLFlBQU07QUFDVixZQUFJLENBQUMsRUFBRSxFQUFFLE9BQU87O0FBRWhCLFlBQU0sSUFBSSxHQUFHO0FBQ1gsZUFBSyxFQUFFO0FBQ0wsMEJBQWMsRUFBRTtBQUNkLG9CQUFNLEVBQUU7QUFDTixvQkFBSSxFQUFFO0FBQ0osd0JBQU0sRUFBRSxDQUNOLEVBQUUsSUFBSSxFQUFFLEVBQUUsR0FBRyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQ3RCO2lCQUNGO2VBQ0Y7YUFDRjtXQUNGO0FBQ0QsY0FBSSxFQUFFLENBQUM7U0FDUixDQUFDOztBQUVGLFlBQUksY0FBYyxFQUFFO0FBQ2xCLGNBQUksQ0FBQyxPQUFPLEdBQUc7QUFDYixvQkFBUSxFQUFFLEVBQUU7V0FDYixDQUFDO1NBQ0g7O0FBRUQsZUFBTyxPQUFPLENBQUMsU0FBUyxDQUFDLFFBQVEsRUFBRSxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUMsQ0FDakQsSUFBSSxDQUFDLFVBQUMsSUFBSSxFQUFLO0FBQ2QsY0FBSSxJQUFJLENBQUMsTUFBTSxLQUFLLENBQUMsRUFBRSxPQUFPO0FBQzlCLGlCQUFPLElBQUksQ0FBQyxDQUFDLENBQUMsQ0FBQztTQUNoQixDQUFDLENBQUM7T0FDSixDQUFDLENBQUM7S0FDSjtHQUNGLENBQUM7Q0FDSDs7QUFFRCxNQUFNLENBQUMsT0FBTyxHQUFHLGFBQWEsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL2pvYnNfcXVlcnkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCB7IGdldCwgc2V0IH0gPSByZXF1aXJlKCdsb2Rhc2gnKTtcbmNvbnN0IHsgYmFkUmVxdWVzdCB9ID0gcmVxdWlyZSgnYm9vbScpO1xuXG5jb25zdCBvbmNlUGVyU2VydmVyID0gcmVxdWlyZSgnLi9vbmNlX3Blcl9zZXJ2ZXInKTtcbmNvbnN0IHsgUVVFVUVfSU5ERVgsIFFVRVVFX0RPQ1RZUEUgfSA9IHJlcXVpcmUoJy4vY29uc3RhbnRzJyk7XG5jb25zdCBnZXRVc2VyRmFjdG9yeSA9IHJlcXVpcmUoJy4vZ2V0X3VzZXInKTtcbmNvbnN0IGRlZmF1bHRTaXplID0gMTA7XG5cbmZ1bmN0aW9uIGpvYnNRdWVyeUZhY3Rvcnkoc2VydmVyKSB7XG4gIGNvbnN0IGdldFVzZXIgPSBnZXRVc2VyRmFjdG9yeShzZXJ2ZXIpO1xuICBjb25zdCBlc0Vycm9ycyA9IHNlcnZlci5wbHVnaW5zLmVsYXN0aWNzZWFyY2guZXJyb3JzO1xuICBjb25zdCB7IGNhbGxXaXRoUmVxdWVzdCB9ID0gc2VydmVyLnBsdWdpbnMuZWxhc3RpY3NlYXJjaDtcblxuICBmdW5jdGlvbiBleGVjUXVlcnkodHlwZSwgYm9keSwgcmVxdWVzdCkge1xuICAgIGNvbnN0IGRlZmF1bHRCb2R5ID0ge1xuICAgICAgc2VhcmNoOiB7XG4gICAgICAgIF9zb3VyY2UgOiB7XG4gICAgICAgICAgZXhjbHVkZXM6IFsgJ291dHB1dC5jb250ZW50JyBdXG4gICAgICAgIH0sXG4gICAgICAgIHNvcnQ6IFtcbiAgICAgICAgICB7IGNyZWF0ZWRfYXQ6IHsgb3JkZXI6ICdkZXNjJyB9fVxuICAgICAgICBdLFxuICAgICAgICBzaXplOiBkZWZhdWx0U2l6ZSxcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgY29uc3QgcXVlcnkgPSB7XG4gICAgICBpbmRleDogYCR7UVVFVUVfSU5ERVh9LSpgLFxuICAgICAgdHlwZTogUVVFVUVfRE9DVFlQRSxcbiAgICAgIGJvZHk6IE9iamVjdC5hc3NpZ24oZGVmYXVsdEJvZHlbdHlwZV0gfHwge30sIGJvZHkpXG4gICAgfTtcblxuICAgIHJldHVybiBjYWxsV2l0aFJlcXVlc3QocmVxdWVzdCwgdHlwZSwgcXVlcnkpXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBlc0Vycm9yc1snNDAxJ10pIHJldHVybjtcbiAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBlc0Vycm9yc1snNDAzJ10pIHJldHVybjtcbiAgICAgIGlmIChlcnIgaW5zdGFuY2VvZiBlc0Vycm9yc1snNDA0J10pIHJldHVybjtcbiAgICAgIHRocm93IGVycjtcbiAgICB9KTtcbiAgfVxuXG4gIGZ1bmN0aW9uIGdldEhpdHMocXVlcnkpIHtcbiAgICByZXR1cm4gcXVlcnkudGhlbigocmVzKSA9PiBnZXQocmVzLCAnaGl0cy5oaXRzJywgW10pKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgbGlzdChyZXF1ZXN0LCBwYWdlID0gMCwgc2l6ZSA9IGRlZmF1bHRTaXplKSB7XG4gICAgICBjb25zdCBzaG93QWxsID0gZ2V0KHJlcXVlc3QsICdxdWVyeS5hbGwnLCBmYWxzZSk7XG5cbiAgICAgIHJldHVybiBnZXRVc2VyKHJlcXVlc3QpXG4gICAgICAudGhlbigodXNlcikgPT4ge1xuICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgIHNpemUsXG4gICAgICAgICAgZnJvbTogc2l6ZSAqIHBhZ2UsXG4gICAgICAgIH07XG5cbiAgICAgICAgaWYgKCFzaG93QWxsICYmICF1c2VyKSB7XG4gICAgICAgICAgdGhyb3cgYmFkUmVxdWVzdChcbiAgICAgICAgICAgIGBGYWlsZWQgdG8gZ2V0IHRoZSBjdXJyZW50IHVzZXIncyByZXBvcnRzIGJlY2F1c2UgdGhlcmUgaXMgbm8gdXNlciBhc3NvY2lhdGVkIHdpdGggdGhpcyByZXF1ZXN0YFxuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXNob3dBbGwpIHtcbiAgICAgICAgICBjb25zdCB1c2VybmFtZSA9IGdldCh1c2VyLCAndXNlcm5hbWUnKTtcblxuICAgICAgICAgIHNldChib2R5LCAncXVlcnknLCB7XG4gICAgICAgICAgICBjb25zdGFudF9zY29yZToge1xuICAgICAgICAgICAgICBmaWx0ZXI6IHtcbiAgICAgICAgICAgICAgICBib29sOiB7XG4gICAgICAgICAgICAgICAgICBtdXN0OiBbXG4gICAgICAgICAgICAgICAgICAgIHsgdGVybTogeyBjcmVhdGVkX2J5OiB1c2VybmFtZSB9IH0sXG4gICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZ2V0SGl0cyhleGVjUXVlcnkoJ3NlYXJjaCcsIGJvZHksIHJlcXVlc3QpKTtcbiAgICAgIH0pO1xuICAgIH0sXG5cbiAgICBsaXN0Q29tcGxldGVkU2luY2UocmVxdWVzdCwgc2l6ZSA9IGRlZmF1bHRTaXplLCBzaW5jZUluTXMpIHtcbiAgICAgIHJldHVybiBnZXRVc2VyKHJlcXVlc3QpXG4gICAgICAudGhlbigodXNlcikgPT4ge1xuICAgICAgICBjb25zdCBmaWx0ZXJzID0gW1xuICAgICAgICAgIHsgcmFuZ2U6IHsgY29tcGxldGVkX2F0OiB7IGd0OiBzaW5jZUluTXMsIGZvcm1hdDogJ2Vwb2NoX21pbGxpcycgfSB9IH1cbiAgICAgICAgXTtcbiAgICAgICAgaWYgKHVzZXIpIHtcbiAgICAgICAgICBjb25zdCB1c2VybmFtZSA9IGdldCh1c2VyLCAndXNlcm5hbWUnKTtcbiAgICAgICAgICBmaWx0ZXJzLnB1c2goeyB0ZXJtOiB7IGNyZWF0ZWRfYnk6IHVzZXJuYW1lIH0gfSk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBib2R5ID0ge1xuICAgICAgICAgIHNpemUsXG4gICAgICAgICAgc29ydDogeyBjb21wbGV0ZWRfYXQ6ICdhc2MnIH0sXG4gICAgICAgICAgcXVlcnk6IHtcbiAgICAgICAgICAgIGNvbnN0YW50X3Njb3JlOiB7XG4gICAgICAgICAgICAgIGZpbHRlcjoge1xuICAgICAgICAgICAgICAgIGJvb2w6IHtcbiAgICAgICAgICAgICAgICAgIG11c3Q6IGZpbHRlcnNcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICB9O1xuXG4gICAgICAgIHJldHVybiBnZXRIaXRzKGV4ZWNRdWVyeSgnc2VhcmNoJywgYm9keSwgcmVxdWVzdCkpO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIGNvdW50KHJlcXVlc3QpIHtcbiAgICAgIGNvbnN0IHNob3dBbGwgPSBnZXQocmVxdWVzdCwgJ3F1ZXJ5LmFsbCcsIGZhbHNlKTtcblxuICAgICAgcmV0dXJuIGdldFVzZXIocmVxdWVzdClcbiAgICAgIC50aGVuKCh1c2VyKSA9PiB7XG4gICAgICAgIGNvbnN0IGJvZHkgPSB7fTtcblxuICAgICAgICBpZiAoIXNob3dBbGwpIHtcbiAgICAgICAgICBjb25zdCB1c2VybmFtZSA9IGdldCh1c2VyLCAndXNlcm5hbWUnKTtcbiAgICAgICAgICBib2R5LnF1ZXJ5ID0ge1xuICAgICAgICAgICAgY29uc3RhbnRfc2NvcmU6IHtcbiAgICAgICAgICAgICAgZmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgYm9vbDoge1xuICAgICAgICAgICAgICAgICAgbXVzdDogW1xuICAgICAgICAgICAgICAgICAgICB7IHRlcm06IHsgY3JlYXRlZF9ieTogdXNlcm5hbWUgfSB9LFxuICAgICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH07XG4gICAgICAgIH07XG5cbiAgICAgICAgcmV0dXJuIGV4ZWNRdWVyeSgnY291bnQnLCBib2R5LCByZXF1ZXN0KVxuICAgICAgICAudGhlbigoZG9jKSA9PiB7XG4gICAgICAgICAgaWYgKCFkb2MpIHJldHVybiAwO1xuICAgICAgICAgIHJldHVybiBkb2MuY291bnQ7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfSxcblxuICAgIGdldChyZXF1ZXN0LCBpZCwgaW5jbHVkZUNvbnRlbnQgPSBmYWxzZSkge1xuICAgICAgaWYgKCFpZCkgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpO1xuXG4gICAgICByZXR1cm4gZ2V0VXNlcihyZXF1ZXN0KVxuICAgICAgLnRoZW4oKCkgPT4ge1xuICAgICAgICBpZiAoIWlkKSByZXR1cm47XG5cbiAgICAgICAgY29uc3QgYm9keSA9IHtcbiAgICAgICAgICBxdWVyeToge1xuICAgICAgICAgICAgY29uc3RhbnRfc2NvcmU6IHtcbiAgICAgICAgICAgICAgZmlsdGVyOiB7XG4gICAgICAgICAgICAgICAgYm9vbDoge1xuICAgICAgICAgICAgICAgICAgZmlsdGVyOiBbXG4gICAgICAgICAgICAgICAgICAgIHsgdGVybTogeyBfaWQ6IGlkIH0gfSxcbiAgICAgICAgICAgICAgICAgIF0sXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfSxcbiAgICAgICAgICBzaXplOiAxLFxuICAgICAgICB9O1xuXG4gICAgICAgIGlmIChpbmNsdWRlQ29udGVudCkge1xuICAgICAgICAgIGJvZHkuX3NvdXJjZSA9IHtcbiAgICAgICAgICAgIGV4Y2x1ZGVzOiBbXVxuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gZ2V0SGl0cyhleGVjUXVlcnkoJ3NlYXJjaCcsIGJvZHksIHJlcXVlc3QpKVxuICAgICAgICAudGhlbigoaGl0cykgPT4ge1xuICAgICAgICAgIGlmIChoaXRzLmxlbmd0aCAhPT0gMSkgcmV0dXJuO1xuICAgICAgICAgIHJldHVybiBoaXRzWzBdO1xuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cbiAgfTtcbn1cblxubW9kdWxlLmV4cG9ydHMgPSBvbmNlUGVyU2VydmVyKGpvYnNRdWVyeUZhY3RvcnkpO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/jobs_query.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/jobs_query.js",
      "sourcesContent": [
        "const { get, set } = require('lodash');\nconst { badRequest } = require('boom');\n\nconst oncePerServer = require('./once_per_server');\nconst { QUEUE_INDEX, QUEUE_DOCTYPE } = require('./constants');\nconst getUserFactory = require('./get_user');\nconst defaultSize = 10;\n\nfunction jobsQueryFactory(server) {\n  const getUser = getUserFactory(server);\n  const esErrors = server.plugins.elasticsearch.errors;\n  const { callWithRequest } = server.plugins.elasticsearch;\n\n  function execQuery(type, body, request) {\n    const defaultBody = {\n      search: {\n        _source : {\n          excludes: [ 'output.content' ]\n        },\n        sort: [\n          { created_at: { order: 'desc' }}\n        ],\n        size: defaultSize,\n      }\n    };\n\n    const query = {\n      index: `${QUEUE_INDEX}-*`,\n      type: QUEUE_DOCTYPE,\n      body: Object.assign(defaultBody[type] || {}, body)\n    };\n\n    return callWithRequest(request, type, query)\n    .catch((err) => {\n      if (err instanceof esErrors['401']) return;\n      if (err instanceof esErrors['403']) return;\n      if (err instanceof esErrors['404']) return;\n      throw err;\n    });\n  }\n\n  function getHits(query) {\n    return query.then((res) => get(res, 'hits.hits', []));\n  }\n\n  return {\n    list(request, page = 0, size = defaultSize) {\n      const showAll = get(request, 'query.all', false);\n\n      return getUser(request)\n      .then((user) => {\n        const body = {\n          size,\n          from: size * page,\n        };\n\n        if (!showAll && !user) {\n          throw badRequest(\n            `Failed to get the current user's reports because there is no user associated with this request`\n          );\n        }\n\n        if (!showAll) {\n          const username = get(user, 'username');\n\n          set(body, 'query', {\n            constant_score: {\n              filter: {\n                bool: {\n                  must: [\n                    { term: { created_by: username } },\n                  ]\n                }\n              }\n            }\n          });\n        }\n\n        return getHits(execQuery('search', body, request));\n      });\n    },\n\n    listCompletedSince(request, size = defaultSize, sinceInMs) {\n      return getUser(request)\n      .then((user) => {\n        const filters = [\n          { range: { completed_at: { gt: sinceInMs, format: 'epoch_millis' } } }\n        ];\n        if (user) {\n          const username = get(user, 'username');\n          filters.push({ term: { created_by: username } });\n        }\n\n        const body = {\n          size,\n          sort: { completed_at: 'asc' },\n          query: {\n            constant_score: {\n              filter: {\n                bool: {\n                  must: filters\n                }\n              }\n            }\n          },\n        };\n\n        return getHits(execQuery('search', body, request));\n      });\n    },\n\n    count(request) {\n      const showAll = get(request, 'query.all', false);\n\n      return getUser(request)\n      .then((user) => {\n        const body = {};\n\n        if (!showAll) {\n          const username = get(user, 'username');\n          body.query = {\n            constant_score: {\n              filter: {\n                bool: {\n                  must: [\n                    { term: { created_by: username } },\n                  ]\n                }\n              }\n            }\n          };\n        };\n\n        return execQuery('count', body, request)\n        .then((doc) => {\n          if (!doc) return 0;\n          return doc.count;\n        });\n      });\n    },\n\n    get(request, id, includeContent = false) {\n      if (!id) return Promise.resolve();\n\n      return getUser(request)\n      .then(() => {\n        if (!id) return;\n\n        const body = {\n          query: {\n            constant_score: {\n              filter: {\n                bool: {\n                  filter: [\n                    { term: { _id: id } },\n                  ],\n                }\n              }\n            }\n          },\n          size: 1,\n        };\n\n        if (includeContent) {\n          body._source = {\n            excludes: []\n          };\n        }\n\n        return getHits(execQuery('search', body, request))\n        .then((hits) => {\n          if (hits.length !== 1) return;\n          return hits[0];\n        });\n      });\n    }\n  };\n}\n\nmodule.exports = oncePerServer(jobsQueryFactory);\n"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/get_document_payload.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "esqueue/lib/constants/events",
            "imported": [
              "EVENT_WORKER_COMPLETE",
              "EVENT_WORKER_JOB_FAIL"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "EVENT_WORKER_COMPLETE",
                "local": "EVENT_WORKER_COMPLETE"
              },
              {
                "kind": "named",
                "imported": "EVENT_WORKER_JOB_FAIL",
                "local": "EVENT_WORKER_JOB_FAIL"
              }
            ]
          },
          {
            "source": "./once_per_server",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "oncePerServer"
              }
            ]
          },
          {
            "source": "./workers",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "workersFactory"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _esqueueLibConstantsEvents = require('esqueue/lib/constants/events');\n\nvar _once_per_server = require('./once_per_server');\n\nvar _once_per_server2 = _interopRequireDefault(_once_per_server);\n\nvar _workers = require('./workers');\n\nvar _workers2 = _interopRequireDefault(_workers);\n\nfunction getDocumentPayloadFactory(server) {\n  var jobQueue = server.plugins.reporting.queue;\n  var workers = (0, _workers2['default'])(server);\n\n  function encodeContent(content, jobType) {\n    if (!jobType) {\n      return content;\n    }\n\n    var worker = workers[jobType];\n    switch (worker.encoding) {\n      case 'base64':\n        return new Buffer(content, 'base64');\n      default:\n        return content;\n    }\n  }\n\n  function formatJobOutput(output, statusCode, jobType) {\n    var content = encodeContent(output.content, jobType);\n    var contentType = output.content_type;\n    return { content: content, statusCode: statusCode, contentType: contentType };\n  }\n\n  function getDocumentPayload(doc, jobType) {\n    var _doc$_source = doc._source;\n    var status = _doc$_source.status;\n    var output = _doc$_source.output;\n\n    return new Promise(function (resolve, reject) {\n      if (status === 'completed') {\n        resolve(formatJobOutput(output, 200, jobType));\n      }\n\n      if (status === 'failed') {\n        reject(formatJobOutput(output, 204));\n      }\n\n      // wait for the job to be completed\n      function sendPayload(completed) {\n        // if the completed job matches this job\n        if (completed.job.id === doc._id) {\n          // remove event listener\n          cleanupListeners();\n          resolve(formatJobOutput(completed.output, 200, jobType));\n        }\n      };\n\n      function errorHandler(err) {\n        // remove event listener\n        cleanupListeners();\n        reject(formatJobOutput(err.output, 504));\n      };\n\n      function cleanupListeners() {\n        jobQueue.removeListener(_esqueueLibConstantsEvents.EVENT_WORKER_COMPLETE, sendPayload);\n        jobQueue.removeListener(_esqueueLibConstantsEvents.EVENT_WORKER_JOB_FAIL, errorHandler);\n      }\n\n      jobQueue.on(_esqueueLibConstantsEvents.EVENT_WORKER_COMPLETE, sendPayload);\n      jobQueue.on(_esqueueLibConstantsEvents.EVENT_WORKER_JOB_FAIL, errorHandler);\n    });\n  };\n\n  return getDocumentPayload;\n}\n\nexports['default'] = (0, _once_per_server2['default'])(getDocumentPayloadFactory);\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL2dldF9kb2N1bWVudF9wYXlsb2FkLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O3lDQUE2RCw4QkFBOEI7OytCQUNqRSxtQkFBbUI7Ozs7dUJBQ2xCLFdBQVc7Ozs7QUFFdEMsU0FBUyx5QkFBeUIsQ0FBQyxNQUFNLEVBQUU7QUFDekMsTUFBTSxRQUFRLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDO0FBQ2hELE1BQU0sT0FBTyxHQUFHLDBCQUFlLE1BQU0sQ0FBQyxDQUFDOztBQUV2QyxXQUFTLGFBQWEsQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFO0FBQ3ZDLFFBQUksQ0FBQyxPQUFPLEVBQUU7QUFDWixhQUFPLE9BQU8sQ0FBQztLQUNoQjs7QUFFRCxRQUFNLE1BQU0sR0FBRyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7QUFDaEMsWUFBUSxNQUFNLENBQUMsUUFBUTtBQUNyQixXQUFLLFFBQVE7QUFDWCxlQUFPLElBQUksTUFBTSxDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUMsQ0FBQztBQUFBLEFBQ3ZDO0FBQ0UsZUFBTyxPQUFPLENBQUM7QUFBQSxLQUNsQjtHQUNGOztBQUVELFdBQVMsZUFBZSxDQUFDLE1BQU0sRUFBRSxVQUFVLEVBQUUsT0FBTyxFQUFFO0FBQ3BELFFBQU0sT0FBTyxHQUFHLGFBQWEsQ0FBQyxNQUFNLENBQUMsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDO0FBQ3ZELFFBQU0sV0FBVyxHQUFHLE1BQU0sQ0FBQyxZQUFZLENBQUM7QUFDeEMsV0FBTyxFQUFFLE9BQU8sRUFBUCxPQUFPLEVBQUUsVUFBVSxFQUFWLFVBQVUsRUFBRSxXQUFXLEVBQVgsV0FBVyxFQUFFLENBQUM7R0FDN0M7O0FBRUQsV0FBUyxrQkFBa0IsQ0FBQyxHQUFHLEVBQUUsT0FBTyxFQUFFO3VCQUNiLEdBQUcsQ0FBQyxPQUFPO1FBQTlCLE1BQU0sZ0JBQU4sTUFBTTtRQUFFLE1BQU0sZ0JBQU4sTUFBTTs7QUFFdEIsV0FBTyxJQUFJLE9BQU8sQ0FBQyxVQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUs7QUFDdEMsVUFBSSxNQUFNLEtBQUssV0FBVyxFQUFFO0FBQzFCLGVBQU8sQ0FBQyxlQUFlLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO09BQ2hEOztBQUVELFVBQUksTUFBTSxLQUFLLFFBQVEsRUFBRTtBQUN2QixjQUFNLENBQUMsZUFBZSxDQUFDLE1BQU0sRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDO09BQ3RDOzs7QUFHRCxlQUFTLFdBQVcsQ0FBQyxTQUFTLEVBQUU7O0FBRTlCLFlBQUksU0FBUyxDQUFDLEdBQUcsQ0FBQyxFQUFFLEtBQUssR0FBRyxDQUFDLEdBQUcsRUFBRTs7QUFFaEMsMEJBQWdCLEVBQUUsQ0FBQztBQUNuQixpQkFBTyxDQUFDLGVBQWUsQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLEdBQUcsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDO1NBQzFEO09BQ0YsQ0FBQzs7QUFFRixlQUFTLFlBQVksQ0FBQyxHQUFHLEVBQUU7O0FBRXpCLHdCQUFnQixFQUFFLENBQUM7QUFDbkIsY0FBTSxDQUFDLGVBQWUsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7T0FDMUMsQ0FBQzs7QUFFRixlQUFTLGdCQUFnQixHQUFHO0FBQzFCLGdCQUFRLENBQUMsY0FBYyxtREFBd0IsV0FBVyxDQUFDLENBQUM7QUFDNUQsZ0JBQVEsQ0FBQyxjQUFjLG1EQUF3QixZQUFZLENBQUMsQ0FBQztPQUM5RDs7QUFFRCxjQUFRLENBQUMsRUFBRSxtREFBd0IsV0FBVyxDQUFDLENBQUM7QUFDaEQsY0FBUSxDQUFDLEVBQUUsbURBQXdCLFlBQVksQ0FBQyxDQUFDO0tBQ2xELENBQUMsQ0FBQztHQUNKLENBQUM7O0FBRUYsU0FBTyxrQkFBa0IsQ0FBQztDQUMzQjs7cUJBRWMsa0NBQWMseUJBQXlCLENBQUMiLCJmaWxlIjoiL2hvbWUvdWJ1bnR1L3dvcmtzcGFjZS9raWJhbmEtNS4wLjItbGludXgteDg2XzY0L3BsdWdpbnMveC1wYWNrL3BsdWdpbnMvcmVwb3J0aW5nL3NlcnZlci9saWIvZ2V0X2RvY3VtZW50X3BheWxvYWQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFVkVOVF9XT1JLRVJfQ09NUExFVEUsIEVWRU5UX1dPUktFUl9KT0JfRkFJTCB9IGZyb20gJ2VzcXVldWUvbGliL2NvbnN0YW50cy9ldmVudHMnO1xuaW1wb3J0IG9uY2VQZXJTZXJ2ZXIgZnJvbSAnLi9vbmNlX3Blcl9zZXJ2ZXInO1xuaW1wb3J0IHdvcmtlcnNGYWN0b3J5IGZyb20gJy4vd29ya2Vycyc7XG5cbmZ1bmN0aW9uIGdldERvY3VtZW50UGF5bG9hZEZhY3Rvcnkoc2VydmVyKSB7XG4gIGNvbnN0IGpvYlF1ZXVlID0gc2VydmVyLnBsdWdpbnMucmVwb3J0aW5nLnF1ZXVlO1xuICBjb25zdCB3b3JrZXJzID0gd29ya2Vyc0ZhY3Rvcnkoc2VydmVyKTtcblxuICBmdW5jdGlvbiBlbmNvZGVDb250ZW50KGNvbnRlbnQsIGpvYlR5cGUpIHtcbiAgICBpZiAoIWpvYlR5cGUpIHtcbiAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH1cblxuICAgIGNvbnN0IHdvcmtlciA9IHdvcmtlcnNbam9iVHlwZV07XG4gICAgc3dpdGNoICh3b3JrZXIuZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgICAgIHJldHVybiBuZXcgQnVmZmVyKGNvbnRlbnQsICdiYXNlNjQnKTtcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHJldHVybiBjb250ZW50O1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIGZvcm1hdEpvYk91dHB1dChvdXRwdXQsIHN0YXR1c0NvZGUsIGpvYlR5cGUpIHtcbiAgICBjb25zdCBjb250ZW50ID0gZW5jb2RlQ29udGVudChvdXRwdXQuY29udGVudCwgam9iVHlwZSk7XG4gICAgY29uc3QgY29udGVudFR5cGUgPSBvdXRwdXQuY29udGVudF90eXBlO1xuICAgIHJldHVybiB7IGNvbnRlbnQsIHN0YXR1c0NvZGUsIGNvbnRlbnRUeXBlIH07XG4gIH1cblxuICBmdW5jdGlvbiBnZXREb2N1bWVudFBheWxvYWQoZG9jLCBqb2JUeXBlKSB7XG4gICAgY29uc3QgeyBzdGF0dXMsIG91dHB1dCB9ID0gZG9jLl9zb3VyY2U7XG5cbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgaWYgKHN0YXR1cyA9PT0gJ2NvbXBsZXRlZCcpIHtcbiAgICAgICAgcmVzb2x2ZShmb3JtYXRKb2JPdXRwdXQob3V0cHV0LCAyMDAsIGpvYlR5cGUpKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHN0YXR1cyA9PT0gJ2ZhaWxlZCcpIHtcbiAgICAgICAgcmVqZWN0KGZvcm1hdEpvYk91dHB1dChvdXRwdXQsIDIwNCkpO1xuICAgICAgfVxuXG4gICAgICAvLyB3YWl0IGZvciB0aGUgam9iIHRvIGJlIGNvbXBsZXRlZFxuICAgICAgZnVuY3Rpb24gc2VuZFBheWxvYWQoY29tcGxldGVkKSB7XG4gICAgICAgIC8vIGlmIHRoZSBjb21wbGV0ZWQgam9iIG1hdGNoZXMgdGhpcyBqb2JcbiAgICAgICAgaWYgKGNvbXBsZXRlZC5qb2IuaWQgPT09IGRvYy5faWQpIHtcbiAgICAgICAgICAvLyByZW1vdmUgZXZlbnQgbGlzdGVuZXJcbiAgICAgICAgICBjbGVhbnVwTGlzdGVuZXJzKCk7XG4gICAgICAgICAgcmVzb2x2ZShmb3JtYXRKb2JPdXRwdXQoY29tcGxldGVkLm91dHB1dCwgMjAwLCBqb2JUeXBlKSk7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIGZ1bmN0aW9uIGVycm9ySGFuZGxlcihlcnIpIHtcbiAgICAgICAgLy8gcmVtb3ZlIGV2ZW50IGxpc3RlbmVyXG4gICAgICAgIGNsZWFudXBMaXN0ZW5lcnMoKTtcbiAgICAgICAgcmVqZWN0KGZvcm1hdEpvYk91dHB1dChlcnIub3V0cHV0LCA1MDQpKTtcbiAgICAgIH07XG5cbiAgICAgIGZ1bmN0aW9uIGNsZWFudXBMaXN0ZW5lcnMoKSB7XG4gICAgICAgIGpvYlF1ZXVlLnJlbW92ZUxpc3RlbmVyKEVWRU5UX1dPUktFUl9DT01QTEVURSwgc2VuZFBheWxvYWQpO1xuICAgICAgICBqb2JRdWV1ZS5yZW1vdmVMaXN0ZW5lcihFVkVOVF9XT1JLRVJfSk9CX0ZBSUwsIGVycm9ySGFuZGxlcik7XG4gICAgICB9XG5cbiAgICAgIGpvYlF1ZXVlLm9uKEVWRU5UX1dPUktFUl9DT01QTEVURSwgc2VuZFBheWxvYWQpO1xuICAgICAgam9iUXVldWUub24oRVZFTlRfV09SS0VSX0pPQl9GQUlMLCBlcnJvckhhbmRsZXIpO1xuICAgIH0pO1xuICB9O1xuXG4gIHJldHVybiBnZXREb2N1bWVudFBheWxvYWQ7XG59XG5cbmV4cG9ydCBkZWZhdWx0IG9uY2VQZXJTZXJ2ZXIoZ2V0RG9jdW1lbnRQYXlsb2FkRmFjdG9yeSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/get_document_payload.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;yCAA6D,8BAA8B;;+BACjE,mBAAmB;;;;uBAClB,WAAW;;;;AAEtC,SAAS,yBAAyB,CAAC,MAAM,EAAE;AACzC,MAAM,QAAQ,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,KAAK,CAAC;AAChD,MAAM,OAAO,GAAG,0BAAe,MAAM,CAAC,CAAC;;AAEvC,WAAS,aAAa,CAAC,OAAO,EAAE,OAAO,EAAE;AACvC,QAAI,CAAC,OAAO,EAAE;AACZ,aAAO,OAAO,CAAC;KAChB;;AAED,QAAM,MAAM,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;AAChC,YAAQ,MAAM,CAAC,QAAQ;AACrB,WAAK,QAAQ;AACX,eAAO,IAAI,MAAM,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;AAAA,AACvC;AACE,eAAO,OAAO,CAAC;AAAA,KAClB;GACF;;AAED,WAAS,eAAe,CAAC,MAAM,EAAE,UAAU,EAAE,OAAO,EAAE;AACpD,QAAM,OAAO,GAAG,aAAa,CAAC,MAAM,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;AACvD,QAAM,WAAW,GAAG,MAAM,CAAC,YAAY,CAAC;AACxC,WAAO,EAAE,OAAO,EAAP,OAAO,EAAE,UAAU,EAAV,UAAU,EAAE,WAAW,EAAX,WAAW,EAAE,CAAC;GAC7C;;AAED,WAAS,kBAAkB,CAAC,GAAG,EAAE,OAAO,EAAE;uBACb,GAAG,CAAC,OAAO;QAA9B,MAAM,gBAAN,MAAM;QAAE,MAAM,gBAAN,MAAM;;AAEtB,WAAO,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM,EAAK;AACtC,UAAI,MAAM,KAAK,WAAW,EAAE;AAC1B,eAAO,CAAC,eAAe,CAAC,MAAM,EAAE,GAAG,EAAE,OAAO,CAAC,CAAC,CAAC;OAChD;;AAED,UAAI,MAAM,KAAK,QAAQ,EAAE;AACvB,cAAM,CAAC,eAAe,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC;OACtC;;;AAGD,eAAS,WAAW,CAAC,SAAS,EAAE;;AAE9B,YAAI,SAAS,CAAC,GAAG,CAAC,EAAE,KAAK,GAAG,CAAC,GAAG,EAAE;;AAEhC,0BAAgB,EAAE,CAAC;AACnB,iBAAO,CAAC,eAAe,CAAC,SAAS,CAAC,MAAM,EAAE,GAAG,EAAE,OAAO,CAAC,CAAC,CAAC;SAC1D;OACF,CAAC;;AAEF,eAAS,YAAY,CAAC,GAAG,EAAE;;AAEzB,wBAAgB,EAAE,CAAC;AACnB,cAAM,CAAC,eAAe,CAAC,GAAG,CAAC,MAAM,EAAE,GAAG,CAAC,CAAC,CAAC;OAC1C,CAAC;;AAEF,eAAS,gBAAgB,GAAG;AAC1B,gBAAQ,CAAC,cAAc,mDAAwB,WAAW,CAAC,CAAC;AAC5D,gBAAQ,CAAC,cAAc,mDAAwB,YAAY,CAAC,CAAC;OAC9D;;AAED,cAAQ,CAAC,EAAE,mDAAwB,WAAW,CAAC,CAAC;AAChD,cAAQ,CAAC,EAAE,mDAAwB,YAAY,CAAC,CAAC;KAClD,CAAC,CAAC;GACJ,CAAC;;AAEF,SAAO,kBAAkB,CAAC;CAC3B;;qBAEc,kCAAc,yBAAyB,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/get_document_payload.js",
      "sourcesContent": [
        "import { EVENT_WORKER_COMPLETE, EVENT_WORKER_JOB_FAIL } from 'esqueue/lib/constants/events';\nimport oncePerServer from './once_per_server';\nimport workersFactory from './workers';\n\nfunction getDocumentPayloadFactory(server) {\n  const jobQueue = server.plugins.reporting.queue;\n  const workers = workersFactory(server);\n\n  function encodeContent(content, jobType) {\n    if (!jobType) {\n      return content;\n    }\n\n    const worker = workers[jobType];\n    switch (worker.encoding) {\n      case 'base64':\n        return new Buffer(content, 'base64');\n      default:\n        return content;\n    }\n  }\n\n  function formatJobOutput(output, statusCode, jobType) {\n    const content = encodeContent(output.content, jobType);\n    const contentType = output.content_type;\n    return { content, statusCode, contentType };\n  }\n\n  function getDocumentPayload(doc, jobType) {\n    const { status, output } = doc._source;\n\n    return new Promise((resolve, reject) => {\n      if (status === 'completed') {\n        resolve(formatJobOutput(output, 200, jobType));\n      }\n\n      if (status === 'failed') {\n        reject(formatJobOutput(output, 204));\n      }\n\n      // wait for the job to be completed\n      function sendPayload(completed) {\n        // if the completed job matches this job\n        if (completed.job.id === doc._id) {\n          // remove event listener\n          cleanupListeners();\n          resolve(formatJobOutput(completed.output, 200, jobType));\n        }\n      };\n\n      function errorHandler(err) {\n        // remove event listener\n        cleanupListeners();\n        reject(formatJobOutput(err.output, 504));\n      };\n\n      function cleanupListeners() {\n        jobQueue.removeListener(EVENT_WORKER_COMPLETE, sendPayload);\n        jobQueue.removeListener(EVENT_WORKER_JOB_FAIL, errorHandler);\n      }\n\n      jobQueue.on(EVENT_WORKER_COMPLETE, sendPayload);\n      jobQueue.on(EVENT_WORKER_JOB_FAIL, errorHandler);\n    });\n  };\n\n  return getDocumentPayload;\n}\n\nexport default oncePerServer(getDocumentPayloadFactory);\n"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/workers.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _require = require('./constants');\n\nvar JOBTYPES = _require.JOBTYPES;\n\nvar oncePerServer = require('./once_per_server');\nvar docJobProcessFactory = require('./doc_job_process');\n\nfunction workersFactory(server) {\n  var docJobProcess = docJobProcessFactory(server);\n\n  var workers = {};\n\n  // printable PDFs\n  workers[JOBTYPES.PRINTABLE_PDF] = function callee$1$0(payload) {\n    var workerType, _ref, contentType, buffer;\n\n    return regeneratorRuntime.async(function callee$1$0$(context$2$0) {\n      while (1) switch (context$2$0.prev = context$2$0.next) {\n        case 0:\n          workerType = JOBTYPES.PRINTABLE_PDF;\n\n          server.log(['reporting', 'worker', 'debug'], 'Converting ' + payload.objects.length + ' saved object(s) to ' + workerType);\n          context$2$0.next = 4;\n          return regeneratorRuntime.awrap(docJobProcess(payload));\n\n        case 4:\n          _ref = context$2$0.sent;\n          contentType = _ref.contentType;\n          buffer = _ref.buffer;\n          return context$2$0.abrupt('return', {\n            content_type: contentType,\n            content: buffer.toString('base64')\n          });\n\n        case 8:\n        case 'end':\n          return context$2$0.stop();\n      }\n    }, null, this);\n  };\n  workers[JOBTYPES.PRINTABLE_PDF].encoding = 'base64';\n  workers[JOBTYPES.PRINTABLE_PDF].contentType = docJobProcess.contentType;\n\n  return workers;\n};\n\nmodule.exports = oncePerServer(workersFactory);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL3dvcmtlcnMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7ZUFBcUIsT0FBTyxDQUFDLGFBQWEsQ0FBQzs7SUFBbkMsUUFBUSxZQUFSLFFBQVE7O0FBQ2hCLElBQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0FBQ25ELElBQU0sb0JBQW9CLEdBQUcsT0FBTyxDQUFDLG1CQUFtQixDQUFDLENBQUM7O0FBRTFELFNBQVMsY0FBYyxDQUFDLE1BQU0sRUFBRTtBQUM5QixNQUFNLGFBQWEsR0FBRyxvQkFBb0IsQ0FBQyxNQUFNLENBQUMsQ0FBQzs7QUFFbkQsTUFBTSxPQUFPLEdBQUcsRUFBRSxDQUFDOzs7QUFHbkIsU0FBTyxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsR0FBRyxvQkFBZ0IsT0FBTztRQUNqRCxVQUFVLFFBR1IsV0FBVyxFQUFFLE1BQU07Ozs7O0FBSHJCLG9CQUFVLEdBQUcsUUFBUSxDQUFDLGFBQWE7O0FBRXpDLGdCQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsV0FBVyxFQUFFLFFBQVEsRUFBRSxPQUFPLENBQUMsa0JBQWdCLE9BQU8sQ0FBQyxPQUFPLENBQUMsTUFBTSw0QkFBdUIsVUFBVSxDQUFHLENBQUM7OzBDQUNoRixhQUFhLENBQUMsT0FBTyxDQUFDOzs7O0FBQXBELHFCQUFXLFFBQVgsV0FBVztBQUFFLGdCQUFNLFFBQU4sTUFBTTs4Q0FFcEI7QUFDTCx3QkFBWSxFQUFFLFdBQVc7QUFDekIsbUJBQU8sRUFBRSxNQUFNLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQztXQUNuQzs7Ozs7OztHQUNGLENBQUM7QUFDRixTQUFPLENBQUMsUUFBUSxDQUFDLGFBQWEsQ0FBQyxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUM7QUFDcEQsU0FBTyxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQUMsQ0FBQyxXQUFXLEdBQUcsYUFBYSxDQUFDLFdBQVcsQ0FBQzs7QUFFeEUsU0FBTyxPQUFPLENBQUM7Q0FDaEIsQ0FBQzs7QUFFRixNQUFNLENBQUMsT0FBTyxHQUFHLGFBQWEsQ0FBQyxjQUFjLENBQUMsQ0FBQyIsImZpbGUiOiIvaG9tZS91YnVudHUvd29ya3NwYWNlL2tpYmFuYS01LjAuMi1saW51eC14ODZfNjQvcGx1Z2lucy94LXBhY2svcGx1Z2lucy9yZXBvcnRpbmcvc2VydmVyL2xpYi93b3JrZXJzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyBKT0JUWVBFUyB9ID0gcmVxdWlyZSgnLi9jb25zdGFudHMnKTtcbmNvbnN0IG9uY2VQZXJTZXJ2ZXIgPSByZXF1aXJlKCcuL29uY2VfcGVyX3NlcnZlcicpO1xuY29uc3QgZG9jSm9iUHJvY2Vzc0ZhY3RvcnkgPSByZXF1aXJlKCcuL2RvY19qb2JfcHJvY2VzcycpO1xuXG5mdW5jdGlvbiB3b3JrZXJzRmFjdG9yeShzZXJ2ZXIpIHtcbiAgY29uc3QgZG9jSm9iUHJvY2VzcyA9IGRvY0pvYlByb2Nlc3NGYWN0b3J5KHNlcnZlcik7XG5cbiAgY29uc3Qgd29ya2VycyA9IHt9O1xuXG4gIC8vIHByaW50YWJsZSBQREZzXG4gIHdvcmtlcnNbSk9CVFlQRVMuUFJJTlRBQkxFX1BERl0gPSBhc3luYyBmdW5jdGlvbiAocGF5bG9hZCkge1xuICAgIGNvbnN0IHdvcmtlclR5cGUgPSBKT0JUWVBFUy5QUklOVEFCTEVfUERGO1xuXG4gICAgc2VydmVyLmxvZyhbJ3JlcG9ydGluZycsICd3b3JrZXInLCAnZGVidWcnXSwgYENvbnZlcnRpbmcgJHtwYXlsb2FkLm9iamVjdHMubGVuZ3RofSBzYXZlZCBvYmplY3QocykgdG8gJHt3b3JrZXJUeXBlfWApO1xuICAgIGNvbnN0IHsgY29udGVudFR5cGUsIGJ1ZmZlciB9ID0gYXdhaXQgZG9jSm9iUHJvY2VzcyhwYXlsb2FkKTtcblxuICAgIHJldHVybiB7XG4gICAgICBjb250ZW50X3R5cGU6IGNvbnRlbnRUeXBlLFxuICAgICAgY29udGVudDogYnVmZmVyLnRvU3RyaW5nKCdiYXNlNjQnKVxuICAgIH07XG4gIH07XG4gIHdvcmtlcnNbSk9CVFlQRVMuUFJJTlRBQkxFX1BERl0uZW5jb2RpbmcgPSAnYmFzZTY0JztcbiAgd29ya2Vyc1tKT0JUWVBFUy5QUklOVEFCTEVfUERGXS5jb250ZW50VHlwZSA9IGRvY0pvYlByb2Nlc3MuY29udGVudFR5cGU7XG5cbiAgcmV0dXJuIHdvcmtlcnM7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IG9uY2VQZXJTZXJ2ZXIod29ya2Vyc0ZhY3RvcnkpOyJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/workers.js"
      ],
      "names": [],
      "mappings": ";;eAAqB,OAAO,CAAC,aAAa,CAAC;;IAAnC,QAAQ,YAAR,QAAQ;;AAChB,IAAM,aAAa,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC;AACnD,IAAM,oBAAoB,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC;;AAE1D,SAAS,cAAc,CAAC,MAAM,EAAE;AAC9B,MAAM,aAAa,GAAG,oBAAoB,CAAC,MAAM,CAAC,CAAC;;AAEnD,MAAM,OAAO,GAAG,EAAE,CAAC;;;AAGnB,SAAO,CAAC,QAAQ,CAAC,aAAa,CAAC,GAAG,oBAAgB,OAAO;QACjD,UAAU,QAGR,WAAW,EAAE,MAAM;;;;;AAHrB,oBAAU,GAAG,QAAQ,CAAC,aAAa;;AAEzC,gBAAM,CAAC,GAAG,CAAC,CAAC,WAAW,EAAE,QAAQ,EAAE,OAAO,CAAC,kBAAgB,OAAO,CAAC,OAAO,CAAC,MAAM,4BAAuB,UAAU,CAAG,CAAC;;0CAChF,aAAa,CAAC,OAAO,CAAC;;;;AAApD,qBAAW,QAAX,WAAW;AAAE,gBAAM,QAAN,MAAM;8CAEpB;AACL,wBAAY,EAAE,WAAW;AACzB,mBAAO,EAAE,MAAM,CAAC,QAAQ,CAAC,QAAQ,CAAC;WACnC;;;;;;;GACF,CAAC;AACF,SAAO,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,QAAQ,GAAG,QAAQ,CAAC;AACpD,SAAO,CAAC,QAAQ,CAAC,aAAa,CAAC,CAAC,WAAW,GAAG,aAAa,CAAC,WAAW,CAAC;;AAExE,SAAO,OAAO,CAAC;CAChB,CAAC;;AAEF,MAAM,CAAC,OAAO,GAAG,aAAa,CAAC,cAAc,CAAC,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/workers.js",
      "sourcesContent": [
        "const { JOBTYPES } = require('./constants');\nconst oncePerServer = require('./once_per_server');\nconst docJobProcessFactory = require('./doc_job_process');\n\nfunction workersFactory(server) {\n  const docJobProcess = docJobProcessFactory(server);\n\n  const workers = {};\n\n  // printable PDFs\n  workers[JOBTYPES.PRINTABLE_PDF] = async function (payload) {\n    const workerType = JOBTYPES.PRINTABLE_PDF;\n\n    server.log(['reporting', 'worker', 'debug'], `Converting ${payload.objects.length} saved object(s) to ${workerType}`);\n    const { contentType, buffer } = await docJobProcess(payload);\n\n    return {\n      content_type: contentType,\n      content: buffer.toString('base64')\n    };\n  };\n  workers[JOBTYPES.PRINTABLE_PDF].encoding = 'base64';\n  workers[JOBTYPES.PRINTABLE_PDF].contentType = docJobProcess.contentType;\n\n  return workers;\n};\n\nmodule.exports = oncePerServer(workersFactory);"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/doc_job_process.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar oncePerServer = require('./once_per_server');\nvar generateDocumentFactory = require('./generate_document');\nvar cryptoFactory = require('./crypto');\n\nvar _require = require('lodash');\n\nvar omit = _require.omit;\n\nvar KBN_SCREENSHOT_HEADER_BLACKLIST = ['accept-encoding', 'content-length', 'content-type'];\n\nfunction docJobProcessFactory(server) {\n  var _generateDocumentFactory = generateDocumentFactory(server);\n\n  var printablePdf = _generateDocumentFactory.printablePdf;\n\n  var crypto = cryptoFactory(server);\n\n  return function docJobProcess(job) {\n    var title, objects, query, serializedEncryptedHeaders, decryptedHeaders, headers, pdfDoc;\n    return regeneratorRuntime.async(function docJobProcess$(context$2$0) {\n      while (1) switch (context$2$0.prev = context$2$0.next) {\n        case 0:\n          title = job.title;\n          objects = job.objects;\n          query = job.query;\n          serializedEncryptedHeaders = job.headers;\n          decryptedHeaders = undefined;\n          context$2$0.prev = 5;\n          context$2$0.next = 8;\n          return regeneratorRuntime.awrap(crypto.decrypt(serializedEncryptedHeaders));\n\n        case 8:\n          decryptedHeaders = context$2$0.sent;\n          context$2$0.next = 14;\n          break;\n\n        case 11:\n          context$2$0.prev = 11;\n          context$2$0.t0 = context$2$0['catch'](5);\n          throw new Error('Failed to decrypt report job data. Please re-generate this report.');\n\n        case 14:\n          ;\n\n          headers = omit(decryptedHeaders, KBN_SCREENSHOT_HEADER_BLACKLIST);\n          context$2$0.next = 18;\n          return regeneratorRuntime.awrap(printablePdf(title, objects, query, headers));\n\n        case 18:\n          pdfDoc = context$2$0.sent;\n          context$2$0.next = 21;\n          return regeneratorRuntime.awrap(pdfDoc.getBuffer());\n\n        case 21:\n          context$2$0.t1 = context$2$0.sent;\n          return context$2$0.abrupt('return', {\n            contentType: 'application/pdf',\n            buffer: context$2$0.t1\n          });\n\n        case 23:\n        case 'end':\n          return context$2$0.stop();\n      }\n    }, null, this, [[5, 11]]);\n  };\n}\n\nmodule.exports = oncePerServer(docJobProcessFactory);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL2RvY19qb2JfcHJvY2Vzcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUNBLElBQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0FBQ25ELElBQU0sdUJBQXVCLEdBQUcsT0FBTyxDQUFDLHFCQUFxQixDQUFDLENBQUM7QUFDL0QsSUFBTSxhQUFhLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDOztlQUN6QixPQUFPLENBQUMsUUFBUSxDQUFDOztJQUExQixJQUFJLFlBQUosSUFBSTs7QUFFWixJQUFNLCtCQUErQixHQUFHLENBQ3RDLGlCQUFpQixFQUNqQixnQkFBZ0IsRUFDaEIsY0FBYyxDQUNmLENBQUM7O0FBRUYsU0FBUyxvQkFBb0IsQ0FBQyxNQUFNLEVBQUU7aUNBQ1gsdUJBQXVCLENBQUMsTUFBTSxDQUFDOztNQUFoRCxZQUFZLDRCQUFaLFlBQVk7O0FBQ3BCLE1BQU0sTUFBTSxHQUFHLGFBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQzs7QUFFckMsU0FBTyxTQUFlLGFBQWEsQ0FBQyxHQUFHO1FBQzdCLEtBQUssRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFVLDBCQUEwQixFQUM3RCxnQkFBZ0IsRUFRZCxPQUFPLEVBQ1AsTUFBTTs7OztBQVZKLGVBQUssR0FBeUQsR0FBRyxDQUFqRSxLQUFLO0FBQUUsaUJBQU8sR0FBZ0QsR0FBRyxDQUExRCxPQUFPO0FBQUUsZUFBSyxHQUF5QyxHQUFHLENBQWpELEtBQUs7QUFBVSxvQ0FBMEIsR0FBSyxHQUFHLENBQTFDLE9BQU87QUFDbEMsMEJBQWdCOzs7MENBR08sTUFBTSxDQUFDLE9BQU8sQ0FBQywwQkFBMEIsQ0FBQzs7O0FBQW5FLDBCQUFnQjs7Ozs7OztnQkFFVixJQUFJLEtBQUssQ0FBQyxvRUFBb0UsQ0FBQzs7O0FBQ3RGLFdBQUM7O0FBRUksaUJBQU8sR0FBRyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsK0JBQStCLENBQUM7OzBDQUNsRCxZQUFZLENBQUMsS0FBSyxFQUFFLE9BQU8sRUFBRSxLQUFLLEVBQUUsT0FBTyxDQUFDOzs7QUFBM0QsZ0JBQU07OzBDQUdJLE1BQU0sQ0FBQyxTQUFTLEVBQUU7Ozs7O0FBRGhDLHVCQUFXLEVBQUUsaUJBQWlCO0FBQzlCLGtCQUFNOzs7Ozs7OztHQUVULENBQUM7Q0FDSDs7QUFFRCxNQUFNLENBQUMsT0FBTyxHQUFHLGFBQWEsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL2RvY19qb2JfcHJvY2Vzcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIlxuY29uc3Qgb25jZVBlclNlcnZlciA9IHJlcXVpcmUoJy4vb25jZV9wZXJfc2VydmVyJyk7XG5jb25zdCBnZW5lcmF0ZURvY3VtZW50RmFjdG9yeSA9IHJlcXVpcmUoJy4vZ2VuZXJhdGVfZG9jdW1lbnQnKTtcbmNvbnN0IGNyeXB0b0ZhY3RvcnkgPSByZXF1aXJlKCcuL2NyeXB0bycpO1xuY29uc3QgeyBvbWl0IH0gPSByZXF1aXJlKCdsb2Rhc2gnKTtcblxuY29uc3QgS0JOX1NDUkVFTlNIT1RfSEVBREVSX0JMQUNLTElTVCA9IFtcbiAgJ2FjY2VwdC1lbmNvZGluZycsXG4gICdjb250ZW50LWxlbmd0aCcsXG4gICdjb250ZW50LXR5cGUnXG5dO1xuXG5mdW5jdGlvbiBkb2NKb2JQcm9jZXNzRmFjdG9yeShzZXJ2ZXIpIHtcbiAgY29uc3QgeyBwcmludGFibGVQZGYgfSA9IGdlbmVyYXRlRG9jdW1lbnRGYWN0b3J5KHNlcnZlcik7XG4gIGNvbnN0IGNyeXB0byA9IGNyeXB0b0ZhY3Rvcnkoc2VydmVyKTtcblxuICByZXR1cm4gYXN5bmMgZnVuY3Rpb24gZG9jSm9iUHJvY2Vzcyhqb2IpIHtcbiAgICBjb25zdCB7IHRpdGxlLCBvYmplY3RzLCBxdWVyeSwgaGVhZGVyczpzZXJpYWxpemVkRW5jcnlwdGVkSGVhZGVycyB9ID0gam9iO1xuICAgIGxldCBkZWNyeXB0ZWRIZWFkZXJzO1xuXG4gICAgdHJ5IHtcbiAgICAgIGRlY3J5cHRlZEhlYWRlcnMgPSBhd2FpdCBjcnlwdG8uZGVjcnlwdChzZXJpYWxpemVkRW5jcnlwdGVkSGVhZGVycyk7XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZGVjcnlwdCByZXBvcnQgam9iIGRhdGEuIFBsZWFzZSByZS1nZW5lcmF0ZSB0aGlzIHJlcG9ydC4nKTtcbiAgICB9O1xuXG4gICAgY29uc3QgaGVhZGVycyA9IG9taXQoZGVjcnlwdGVkSGVhZGVycywgS0JOX1NDUkVFTlNIT1RfSEVBREVSX0JMQUNLTElTVCk7XG4gICAgY29uc3QgcGRmRG9jID0gYXdhaXQgcHJpbnRhYmxlUGRmKHRpdGxlLCBvYmplY3RzLCBxdWVyeSwgaGVhZGVycyk7XG4gICAgcmV0dXJuIHtcbiAgICAgIGNvbnRlbnRUeXBlOiAnYXBwbGljYXRpb24vcGRmJyxcbiAgICAgIGJ1ZmZlcjogYXdhaXQgcGRmRG9jLmdldEJ1ZmZlcigpLFxuICAgIH07XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gb25jZVBlclNlcnZlcihkb2NKb2JQcm9jZXNzRmFjdG9yeSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/doc_job_process.js"
      ],
      "names": [],
      "mappings": ";;AACA,IAAM,aAAa,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC;AACnD,IAAM,uBAAuB,GAAG,OAAO,CAAC,qBAAqB,CAAC,CAAC;AAC/D,IAAM,aAAa,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;;eACzB,OAAO,CAAC,QAAQ,CAAC;;IAA1B,IAAI,YAAJ,IAAI;;AAEZ,IAAM,+BAA+B,GAAG,CACtC,iBAAiB,EACjB,gBAAgB,EAChB,cAAc,CACf,CAAC;;AAEF,SAAS,oBAAoB,CAAC,MAAM,EAAE;iCACX,uBAAuB,CAAC,MAAM,CAAC;;MAAhD,YAAY,4BAAZ,YAAY;;AACpB,MAAM,MAAM,GAAG,aAAa,CAAC,MAAM,CAAC,CAAC;;AAErC,SAAO,SAAe,aAAa,CAAC,GAAG;QAC7B,KAAK,EAAE,OAAO,EAAE,KAAK,EAAU,0BAA0B,EAC7D,gBAAgB,EAQd,OAAO,EACP,MAAM;;;;AAVJ,eAAK,GAAyD,GAAG,CAAjE,KAAK;AAAE,iBAAO,GAAgD,GAAG,CAA1D,OAAO;AAAE,eAAK,GAAyC,GAAG,CAAjD,KAAK;AAAU,oCAA0B,GAAK,GAAG,CAA1C,OAAO;AAClC,0BAAgB;;;0CAGO,MAAM,CAAC,OAAO,CAAC,0BAA0B,CAAC;;;AAAnE,0BAAgB;;;;;;;gBAEV,IAAI,KAAK,CAAC,oEAAoE,CAAC;;;AACtF,WAAC;;AAEI,iBAAO,GAAG,IAAI,CAAC,gBAAgB,EAAE,+BAA+B,CAAC;;0CAClD,YAAY,CAAC,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,OAAO,CAAC;;;AAA3D,gBAAM;;0CAGI,MAAM,CAAC,SAAS,EAAE;;;;;AADhC,uBAAW,EAAE,iBAAiB;AAC9B,kBAAM;;;;;;;;GAET,CAAC;CACH;;AAED,MAAM,CAAC,OAAO,GAAG,aAAa,CAAC,oBAAoB,CAAC,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/doc_job_process.js",
      "sourcesContent": [
        "\nconst oncePerServer = require('./once_per_server');\nconst generateDocumentFactory = require('./generate_document');\nconst cryptoFactory = require('./crypto');\nconst { omit } = require('lodash');\n\nconst KBN_SCREENSHOT_HEADER_BLACKLIST = [\n  'accept-encoding',\n  'content-length',\n  'content-type'\n];\n\nfunction docJobProcessFactory(server) {\n  const { printablePdf } = generateDocumentFactory(server);\n  const crypto = cryptoFactory(server);\n\n  return async function docJobProcess(job) {\n    const { title, objects, query, headers:serializedEncryptedHeaders } = job;\n    let decryptedHeaders;\n\n    try {\n      decryptedHeaders = await crypto.decrypt(serializedEncryptedHeaders);\n    } catch (e) {\n      throw new Error('Failed to decrypt report job data. Please re-generate this report.');\n    };\n\n    const headers = omit(decryptedHeaders, KBN_SCREENSHOT_HEADER_BLACKLIST);\n    const pdfDoc = await printablePdf(title, objects, query, headers);\n    return {\n      contentType: 'application/pdf',\n      buffer: await pdfDoc.getBuffer(),\n    };\n  };\n}\n\nmodule.exports = oncePerServer(docJobProcessFactory);\n"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/generate_document.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _require = require('fs');\n\nvar unlink = _require.unlink;\n\nvar _require2 = require('bluebird');\n\nvar map = _require2.map;\n\nvar _require3 = require('lodash');\n\nvar capitalize = _require3.capitalize;\n\nvar getTimeFilterRange = require('./get_time_filter_range');\n\nvar pdf = require('./pdf');\nvar oncePerServer = require('./once_per_server');\nvar getScreenshotFactory = require('./get_screenshot');\n\nfunction generateDocumentFactory(server) {\n  var getScreenshot = getScreenshotFactory(server);\n  var warningLog = function warningLog(msg) {\n    return server.log(['reporting', 'warning'], msg);\n  };\n\n  return {\n    printablePdf: printablePdf\n  };\n\n  function cleanImages(cleanupPaths) {\n    return Promise.all(cleanupPaths.map(function (imagePath) {\n      return new Promise(function (resolve, reject) {\n        return unlink(imagePath, function (err) {\n          if (err) {\n            return reject(err);\n          }\n          resolve();\n        });\n      });\n    }))['catch'](function (err) {\n      // any failures to remove images are silently swallowed\n      warningLog('Failed to remove screenshot image: ' + err.path);\n    });\n  }\n\n  function printablePdf(title, savedObjects, query, headers) {\n    var pdfOutput = pdf.create();\n\n    if (title) {\n      var timeRange = getTimeFilterRange(savedObjects, query);\n      title += timeRange ? ' — ' + timeRange.from + ' to ' + timeRange.to : '';\n      pdfOutput.setTitle(title);\n    }\n\n    return map(savedObjects, function (savedObj) {\n      if (savedObj.isMissing) {\n        return { savedObj: savedObj };\n      } else {\n        return getScreenshot(savedObj.url, savedObj.type, headers).then(function (imagePath) {\n          server.log(['reporting', 'debug'], savedObj.id + ' -> ' + imagePath);\n          return { imagePath: imagePath, savedObj: savedObj };\n        });\n      }\n    }).then(function (objects) {\n      var cleanupPaths = [];\n\n      objects.forEach(function (object) {\n        var imagePath = object.imagePath;\n        var savedObj = object.savedObj;\n\n        if (imagePath) cleanupPaths.push(imagePath);\n\n        if (savedObj.isMissing) {\n          pdfOutput.addHeading(capitalize(savedObj.type) + ' with id \\'' + savedObj.id + '\\' not found', {\n            styles: 'warning'\n          });\n        } else {\n          pdfOutput.addImage(imagePath, {\n            title: savedObj.title,\n            description: savedObj.description\n          });\n        }\n      });\n\n      return cleanupPaths;\n    }).then(function (cleanupPaths) {\n      try {\n        var _ret = (function () {\n          var pdfInstance = pdfOutput.generate();\n          return {\n            v: cleanImages(cleanupPaths).then(function () {\n              return pdfInstance;\n            })\n          };\n        })();\n\n        if (typeof _ret === 'object') return _ret.v;\n      } catch (err) {\n        return cleanImages(cleanupPaths).then(function () {\n          throw err;\n        });\n      }\n    });\n  };\n}\n\nmodule.exports = oncePerServer(generateDocumentFactory);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL2dlbmVyYXRlX2RvY3VtZW50LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O2VBQW1CLE9BQU8sQ0FBQyxJQUFJLENBQUM7O0lBQXhCLE1BQU0sWUFBTixNQUFNOztnQkFDRSxPQUFPLENBQUMsVUFBVSxDQUFDOztJQUEzQixHQUFHLGFBQUgsR0FBRzs7Z0JBQ1ksT0FBTyxDQUFDLFFBQVEsQ0FBQzs7SUFBaEMsVUFBVSxhQUFWLFVBQVU7O0FBQ2xCLElBQU0sa0JBQWtCLEdBQUcsT0FBTyxDQUFDLHlCQUF5QixDQUFDLENBQUM7O0FBRTlELElBQU0sR0FBRyxHQUFHLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQztBQUM3QixJQUFNLGFBQWEsR0FBRyxPQUFPLENBQUMsbUJBQW1CLENBQUMsQ0FBQztBQUNuRCxJQUFNLG9CQUFvQixHQUFHLE9BQU8sQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDOztBQUV6RCxTQUFTLHVCQUF1QixDQUFDLE1BQU0sRUFBRTtBQUN2QyxNQUFNLGFBQWEsR0FBRyxvQkFBb0IsQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUNuRCxNQUFNLFVBQVUsR0FBRyxTQUFiLFVBQVUsQ0FBSSxHQUFHO1dBQUssTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLFdBQVcsRUFBRSxTQUFTLENBQUMsRUFBRSxHQUFHLENBQUM7R0FBQSxDQUFDOztBQUV0RSxTQUFPO0FBQ0wsZ0JBQVksRUFBRSxZQUFZO0dBQzNCLENBQUM7O0FBRUYsV0FBUyxXQUFXLENBQUMsWUFBWSxFQUFFO0FBQ2pDLFdBQU8sT0FBTyxDQUFDLEdBQUcsQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLFVBQUEsU0FBUyxFQUFJO0FBQy9DLGFBQU8sSUFBSSxPQUFPLENBQUMsVUFBQyxPQUFPLEVBQUUsTUFBTSxFQUFLO0FB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Q0FBQztTQUFFLENBQUMsQ0FBQztPQUM3RDtLQUNGLENBQUMsQ0FBQztHQUNKLENBQUM7Q0FDSDs7QUFFRCxNQUFNLENBQUMsT0FBTyxHQUFHLGFBQWEsQ0FBQyx1QkFBdUIsQ0FBQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL2dlbmVyYXRlX2RvY3VtZW50LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgeyB1bmxpbmsgfSA9IHJlcXVpcmUoJ2ZzJyk7XG5jb25zdCB7IG1hcCB9ID0gcmVxdWlyZSgnYmx1ZWJpcmQnKTtcbmNvbnN0IHsgY2FwaXRhbGl6ZSB9ID0gcmVxdWlyZSgnbG9kYXNoJyk7XG5jb25zdCBnZXRUaW1lRmlsdGVyUmFuZ2UgPSByZXF1aXJlKCcuL2dldF90aW1lX2ZpbHRlcl9yYW5nZScpO1xuXG5jb25zdCBwZGYgPSByZXF1aXJlKCcuL3BkZicpO1xuY29uc3Qgb25jZVBlclNlcnZlciA9IHJlcXVpcmUoJy4vb25jZV9wZXJfc2VydmVyJyk7XG5jb25zdCBnZXRTY3JlZW5zaG90RmFjdG9yeSA9IHJlcXVpcmUoJy4vZ2V0X3NjcmVlbnNob3QnKTtcblxuZnVuY3Rpb24gZ2VuZXJhdGVEb2N1bWVudEZhY3Rvcnkoc2VydmVyKSB7XG4gIGNvbnN0IGdldFNjcmVlbnNob3QgPSBnZXRTY3JlZW5zaG90RmFjdG9yeShzZXJ2ZXIpO1xuICBjb25zdCB3YXJuaW5nTG9nID0gKG1zZykgPT4gc2VydmVyLmxvZyhbJ3JlcG9ydGluZycsICd3YXJuaW5nJ10sIG1zZyk7XG5cbiAgcmV0dXJuIHtcbiAgICBwcmludGFibGVQZGY6IHByaW50YWJsZVBkZixcbiAgfTtcblxuICBmdW5jdGlvbiBjbGVhbkltYWdlcyhjbGVhbnVwUGF0aHMpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwoY2xlYW51cFBhdGhzLm1hcChpbWFnZVBhdGggPT4ge1xuICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgICAgcmV0dXJuIHVubGluayhpbWFnZVBhdGgsIChlcnIpID0+IHtcbiAgICAgICAgICBpZiAoZXJyKSB7IHJldHVybiByZWplY3QoZXJyKTsgfVxuICAgICAgICAgIHJlc29sdmUoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9KSlcbiAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgLy8gYW55IGZhaWx1cmVzIHRvIHJlbW92ZSBpbWFnZXMgYXJlIHNpbGVudGx5IHN3YWxsb3dlZFxuICAgICAgd2FybmluZ0xvZyhgRmFpbGVkIHRvIHJlbW92ZSBzY3JlZW5zaG90IGltYWdlOiAke2Vyci5wYXRofWApO1xuICAgIH0pO1xuICB9XG5cbiAgZnVuY3Rpb24gcHJpbnRhYmxlUGRmKHRpdGxlLCBzYXZlZE9iamVjdHMsIHF1ZXJ5LCBoZWFkZXJzKSB7XG4gICAgY29uc3QgcGRmT3V0cHV0ID0gcGRmLmNyZWF0ZSgpO1xuXG4gICAgaWYgKHRpdGxlKSB7XG4gICAgICBjb25zdCB0aW1lUmFuZ2UgPSBnZXRUaW1lRmlsdGVyUmFuZ2Uoc2F2ZWRPYmplY3RzLCBxdWVyeSk7XG4gICAgICB0aXRsZSArPSAodGltZVJhbmdlKSA/IGAg4oCUICR7dGltZVJhbmdlLmZyb219IHRvICR7dGltZVJhbmdlLnRvfWAgOiAnJztcbiAgICAgIHBkZk91dHB1dC5zZXRUaXRsZSh0aXRsZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG1hcChzYXZlZE9iamVjdHMsIGZ1bmN0aW9uIChzYXZlZE9iaikge1xuICAgICAgaWYgKHNhdmVkT2JqLmlzTWlzc2luZykge1xuICAgICAgICByZXR1cm4gIHsgc2F2ZWRPYmogfTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBnZXRTY3JlZW5zaG90KHNhdmVkT2JqLnVybCwgc2F2ZWRPYmoudHlwZSwgaGVhZGVycylcbiAgICAgICAgLnRoZW4oKGltYWdlUGF0aCkgPT4ge1xuICAgICAgICAgIHNlcnZlci5sb2coWydyZXBvcnRpbmcnLCAnZGVidWcnXSwgYCR7c2F2ZWRPYmouaWR9IC0+ICR7aW1hZ2VQYXRofWApO1xuICAgICAgICAgIHJldHVybiB7IGltYWdlUGF0aCwgc2F2ZWRPYmogfTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSlcbiAgICAudGhlbihvYmplY3RzID0+IHtcbiAgICAgIGNvbnN0IGNsZWFudXBQYXRocyA9IFtdO1xuXG4gICAgICBvYmplY3RzLmZvckVhY2gob2JqZWN0ID0+IHtcbiAgICAgICAgY29uc3QgeyBpbWFnZVBhdGgsIHNhdmVkT2JqIH0gPSBvYmplY3Q7XG4gICAgICAgIGlmIChpbWFnZVBhdGgpIGNsZWFudXBQYXRocy5wdXNoKGltYWdlUGF0aCk7XG5cbiAgICAgICAgaWYgKHNhdmVkT2JqLmlzTWlzc2luZykge1xuICAgICAgICAgIHBkZk91dHB1dC5hZGRIZWFkaW5nKGAke2NhcGl0YWxpemUoc2F2ZWRPYmoudHlwZSl9IHdpdGggaWQgJyR7c2F2ZWRPYmouaWR9JyBub3QgZm91bmRgLCB7XG4gICAgICAgICAgICBzdHlsZXM6ICd3YXJuaW5nJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHBkZk91dHB1dC5hZGRJbWFnZShpbWFnZVBhdGgsIHtcbiAgICAgICAgICAgIHRpdGxlOiBzYXZlZE9iai50aXRsZSxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBzYXZlZE9iai5kZXNjcmlwdGlvbixcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIHJldHVybiBjbGVhbnVwUGF0aHM7XG4gICAgfSlcbiAgICAudGhlbihjbGVhbnVwUGF0aHMgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcGRmSW5zdGFuY2UgPSBwZGZPdXRwdXQuZ2VuZXJhdGUoKTtcbiAgICAgICAgcmV0dXJuIGNsZWFuSW1hZ2VzKGNsZWFudXBQYXRocykudGhlbigoKSA9PiBwZGZJbnN0YW5jZSk7XG4gICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgcmV0dXJuIGNsZWFuSW1hZ2VzKGNsZWFudXBQYXRocykudGhlbigoKSA9PiB7IHRocm93IGVycjsgfSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59XG5cbm1vZHVsZS5leHBvcnRzID0gb25jZVBlclNlcnZlcihnZW5lcmF0ZURvY3VtZW50RmFjdG9yeSk7XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/generate_document.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/generate_document.js",
      "sourcesContent": [
        "const { unlink } = require('fs');\nconst { map } = require('bluebird');\nconst { capitalize } = require('lodash');\nconst getTimeFilterRange = require('./get_time_filter_range');\n\nconst pdf = require('./pdf');\nconst oncePerServer = require('./once_per_server');\nconst getScreenshotFactory = require('./get_screenshot');\n\nfunction generateDocumentFactory(server) {\n  const getScreenshot = getScreenshotFactory(server);\n  const warningLog = (msg) => server.log(['reporting', 'warning'], msg);\n\n  return {\n    printablePdf: printablePdf,\n  };\n\n  function cleanImages(cleanupPaths) {\n    return Promise.all(cleanupPaths.map(imagePath => {\n      return new Promise((resolve, reject) => {\n        return unlink(imagePath, (err) => {\n          if (err) { return reject(err); }\n          resolve();\n        });\n      });\n    }))\n    .catch((err) => {\n      // any failures to remove images are silently swallowed\n      warningLog(`Failed to remove screenshot image: ${err.path}`);\n    });\n  }\n\n  function printablePdf(title, savedObjects, query, headers) {\n    const pdfOutput = pdf.create();\n\n    if (title) {\n      const timeRange = getTimeFilterRange(savedObjects, query);\n      title += (timeRange) ? ` — ${timeRange.from} to ${timeRange.to}` : '';\n      pdfOutput.setTitle(title);\n    }\n\n    return map(savedObjects, function (savedObj) {\n      if (savedObj.isMissing) {\n        return  { savedObj };\n      } else {\n        return getScreenshot(savedObj.url, savedObj.type, headers)\n        .then((imagePath) => {\n          server.log(['reporting', 'debug'], `${savedObj.id} -> ${imagePath}`);\n          return { imagePath, savedObj };\n        });\n      }\n    })\n    .then(objects => {\n      const cleanupPaths = [];\n\n      objects.forEach(object => {\n        const { imagePath, savedObj } = object;\n        if (imagePath) cleanupPaths.push(imagePath);\n\n        if (savedObj.isMissing) {\n          pdfOutput.addHeading(`${capitalize(savedObj.type)} with id '${savedObj.id}' not found`, {\n            styles: 'warning'\n          });\n        } else {\n          pdfOutput.addImage(imagePath, {\n            title: savedObj.title,\n            description: savedObj.description,\n          });\n        }\n      });\n\n      return cleanupPaths;\n    })\n    .then(cleanupPaths => {\n      try {\n        const pdfInstance = pdfOutput.generate();\n        return cleanImages(cleanupPaths).then(() => pdfInstance);\n      } catch (err) {\n        return cleanImages(cleanupPaths).then(() => { throw err; });\n      }\n    });\n  };\n}\n\nmodule.exports = oncePerServer(generateDocumentFactory);\n"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/get_time_filter_range.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "some"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "some",
                "local": "some"
              }
            ]
          },
          {
            "source": "@elastic/datemath",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "datemath"
              }
            ]
          },
          {
            "source": "../../../../server/lib/kibana_state",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "parseKibanaState"
              }
            ]
          },
          {
            "source": "moment",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "moment"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "getTimeFilterRange",
            "savedObjects",
            "query"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "getTimeFilterRange",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "savedObjects",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "query",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = getTimeFilterRange;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _elasticDatemath = require('@elastic/datemath');\n\nvar _elasticDatemath2 = _interopRequireDefault(_elasticDatemath);\n\nvar _serverLibKibana_state = require('../../../../server/lib/kibana_state');\n\nvar _serverLibKibana_state2 = _interopRequireDefault(_serverLibKibana_state);\n\nvar _moment = require('moment');\n\nvar _moment2 = _interopRequireDefault(_moment);\n\nfunction getTimeFilterRange(savedObjects) {\n  var query = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n  if (!query._g) {\n    return;\n  }\n\n  var hasTimeBasedIndexPattern = (0, _lodash.some)(savedObjects, { isUsingTimeBasedIndexPattern: true });\n  if (!hasTimeBasedIndexPattern) {\n    return;\n  }\n\n  var globalState = (0, _serverLibKibana_state2['default'])(query, 'global');\n  var time = globalState.get('time');\n  if (!time) {\n    return;\n  }\n\n  var from = (0, _moment2['default'])(_elasticDatemath2['default'].parse(time.from).toISOString()).format('llll');\n  var to = (0, _moment2['default'])(_elasticDatemath2['default'].parse(time.to).toISOString()).format('llll');\n  return { from: from, to: to };\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL2dldF90aW1lX2ZpbHRlcl9yYW5nZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztxQkFLd0Isa0JBQWtCOzs7O3NCQUxyQixRQUFROzsrQkFDUixtQkFBbUI7Ozs7cUNBQ1gscUNBQXFDOzs7O3NCQUMvQyxRQUFROzs7O0FBRVosU0FBUyxrQkFBa0IsQ0FBQyxZQUFZLEVBQWM7TUFBWixLQUFLLHlEQUFHLEVBQUU7O0FBQ2pFLE1BQUksQ0FBQyxLQUFLLENBQUMsRUFBRSxFQUFFO0FBQ2IsV0FBTztHQUNSOztBQUVELE1BQU0sd0JBQXdCLEdBQUcsa0JBQUssWUFBWSxFQUFFLEVBQUUsNEJBQTRCLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQztBQUM1RixNQUFJLENBQUMsd0JBQXdCLEVBQUU7QUFDN0IsV0FBTztHQUNSOztBQUVELE1BQU0sV0FBVyxHQUFHLHdDQUFpQixLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDdEQsTUFBTSxJQUFJLEdBQUcsV0FBVyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUNyQyxNQUFJLENBQUMsSUFBSSxFQUFFO0FBQ1QsV0FBTztHQUNSOztBQUVELE1BQU0sSUFBSSxHQUFHLHlCQUFPLDZCQUFTLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUMsV0FBVyxFQUFFLENBQUMsQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDNUUsTUFBTSxFQUFFLEdBQUcseUJBQU8sNkJBQVMsS0FBSyxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsQ0FBQyxXQUFXLEVBQUUsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUN4RSxTQUFPLEVBQUUsSUFBSSxFQUFKLElBQUksRUFBRSxFQUFFLEVBQUYsRUFBRSxFQUFFLENBQUM7Q0FDckIiLCJmaWxlIjoiL2hvbWUvdWJ1bnR1L3dvcmtzcGFjZS9raWJhbmEtNS4wLjItbGludXgteDg2XzY0L3BsdWdpbnMveC1wYWNrL3BsdWdpbnMvcmVwb3J0aW5nL3NlcnZlci9saWIvZ2V0X3RpbWVfZmlsdGVyX3JhbmdlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgc29tZSB9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgZGF0ZW1hdGggZnJvbSAnQGVsYXN0aWMvZGF0ZW1hdGgnO1xuaW1wb3J0IHBhcnNlS2liYW5hU3RhdGUgZnJvbSAnLi4vLi4vLi4vLi4vc2VydmVyL2xpYi9raWJhbmFfc3RhdGUnO1xuaW1wb3J0IG1vbWVudCBmcm9tICdtb21lbnQnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBnZXRUaW1lRmlsdGVyUmFuZ2Uoc2F2ZWRPYmplY3RzLCBxdWVyeSA9IHt9KSB7XG4gIGlmICghcXVlcnkuX2cpIHtcbiAgICByZXR1cm47XG4gIH1cblxuICBjb25zdCBoYXNUaW1lQmFzZWRJbmRleFBhdHRlcm4gPSBzb21lKHNhdmVkT2JqZWN0cywgeyBpc1VzaW5nVGltZUJhc2VkSW5kZXhQYXR0ZXJuOiB0cnVlIH0pO1xuICBpZiAoIWhhc1RpbWVCYXNlZEluZGV4UGF0dGVybikge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGdsb2JhbFN0YXRlID0gcGFyc2VLaWJhbmFTdGF0ZShxdWVyeSwgJ2dsb2JhbCcpO1xuICBjb25zdCB0aW1lID0gZ2xvYmFsU3RhdGUuZ2V0KCd0aW1lJyk7XG4gIGlmICghdGltZSkge1xuICAgIHJldHVybjtcbiAgfVxuXG4gIGNvbnN0IGZyb20gPSBtb21lbnQoZGF0ZW1hdGgucGFyc2UodGltZS5mcm9tKS50b0lTT1N0cmluZygpKS5mb3JtYXQoJ2xsbGwnKTtcbiAgY29uc3QgdG8gPSBtb21lbnQoZGF0ZW1hdGgucGFyc2UodGltZS50bykudG9JU09TdHJpbmcoKSkuZm9ybWF0KCdsbGxsJyk7XG4gIHJldHVybiB7IGZyb20sIHRvIH07XG59Il19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/get_time_filter_range.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAKwB,kBAAkB;;;;sBALrB,QAAQ;;+BACR,mBAAmB;;;;qCACX,qCAAqC;;;;sBAC/C,QAAQ;;;;AAEZ,SAAS,kBAAkB,CAAC,YAAY,EAAc;MAAZ,KAAK,yDAAG,EAAE;;AACjE,MAAI,CAAC,KAAK,CAAC,EAAE,EAAE;AACb,WAAO;GACR;;AAED,MAAM,wBAAwB,GAAG,kBAAK,YAAY,EAAE,EAAE,4BAA4B,EAAE,IAAI,EAAE,CAAC,CAAC;AAC5F,MAAI,CAAC,wBAAwB,EAAE;AAC7B,WAAO;GACR;;AAED,MAAM,WAAW,GAAG,wCAAiB,KAAK,EAAE,QAAQ,CAAC,CAAC;AACtD,MAAM,IAAI,GAAG,WAAW,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC;AACrC,MAAI,CAAC,IAAI,EAAE;AACT,WAAO;GACR;;AAED,MAAM,IAAI,GAAG,yBAAO,6BAAS,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;AAC5E,MAAM,EAAE,GAAG,yBAAO,6BAAS,KAAK,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,WAAW,EAAE,CAAC,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;AACxE,SAAO,EAAE,IAAI,EAAJ,IAAI,EAAE,EAAE,EAAF,EAAE,EAAE,CAAC;CACrB",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/get_time_filter_range.js",
      "sourcesContent": [
        "import { some } from 'lodash';\nimport datemath from '@elastic/datemath';\nimport parseKibanaState from '../../../../server/lib/kibana_state';\nimport moment from 'moment';\n\nexport default function getTimeFilterRange(savedObjects, query = {}) {\n  if (!query._g) {\n    return;\n  }\n\n  const hasTimeBasedIndexPattern = some(savedObjects, { isUsingTimeBasedIndexPattern: true });\n  if (!hasTimeBasedIndexPattern) {\n    return;\n  }\n\n  const globalState = parseKibanaState(query, 'global');\n  const time = globalState.get('time');\n  if (!time) {\n    return;\n  }\n\n  const from = moment(datemath.parse(time.from).toISOString()).format('llll');\n  const to = moment(datemath.parse(time.to).toISOString()).format('llll');\n  return { from, to };\n}"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/pdf.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar path = require('path');\nvar _ = require('lodash');\nvar concat = require('concat-stream');\nvar Printer = require('pdfmake');\nvar assetPath = path.resolve(__dirname, '..', '..', 'server', 'assets');\n\nvar PdfMaker = (function () {\n  function PdfMaker() {\n    _classCallCheck(this, PdfMaker);\n\n    var fontPath = function fontPath(filename) {\n      return path.resolve(assetPath, 'fonts', filename);\n    };\n    var fonts = {\n      Roboto: {\n        normal: fontPath('Roboto-Regular.ttf'),\n        bold: fontPath('Roboto-Medium.ttf'),\n        italics: fontPath('Roboto-Italic.ttf'),\n        bolditalics: fontPath('Roboto-Italic.ttf')\n      }\n    };\n\n    this._title = '';\n    this._content = [];\n    this._printer = new Printer(fonts);\n  }\n\n  _createClass(PdfMaker, [{\n    key: '_addContents',\n    value: function _addContents(contents) {\n      var groupCount = this._content.length;\n\n      // inject a page break for every 2 groups on the page\n      if (groupCount > 0 && groupCount % 2 === 0) {\n        contents = [{\n          text: '',\n          pageBreak: 'after'\n        }].concat(contents);\n      }\n\n      this._content.push(contents);\n    }\n  }, {\n    key: 'addImage',\n    value: function addImage(filePath) {\n      var opts = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      var contents = [];\n\n      if (opts.title && opts.title.length > 0) {\n        contents.push({\n          text: opts.title,\n          style: 'heading'\n        });\n      }\n\n      if (opts.description && opts.description.length > 0) {\n        contents.push({\n          text: opts.description,\n          style: 'subheading'\n        });\n      }\n\n      var img = {\n        image: filePath,\n        width: 500,\n        alignment: 'center'\n      };\n\n      var wrappedImg = {\n        table: {\n          body: [[img]]\n        },\n        layout: 'simpleBorder'\n      };\n\n      contents.push(_.assign(wrappedImg, _.omit(opts, ['title', 'description'])));\n\n      this._addContents(contents);\n    }\n  }, {\n    key: 'addHeading',\n    value: function addHeading(headingText) {\n      var opts = arguments.length <= 1 || arguments[1] === undefined ? {} : arguments[1];\n\n      var contents = [];\n      contents.push({\n        text: headingText,\n        style: ['heading'].concat(opts.styles || [])\n      });\n      this._addContents(contents);\n    }\n  }, {\n    key: 'setTitle',\n    value: function setTitle(title) {\n      this._title = title;\n    }\n  }, {\n    key: 'generate',\n    value: function generate() {\n      var docTemplate = _.assign(getTemplate(this._title), { content: this._content });\n      this._pdfDoc = this._printer.createPdfKitDocument(docTemplate, getDocOptions());\n      return this;\n    }\n  }, {\n    key: 'getBuffer',\n    value: function getBuffer() {\n      var _this = this;\n\n      if (!this._pdfDoc) throw new Error('Document stream has not been generated');\n      return new Promise(function (resolve, reject) {\n        var concatStream = concat(function (pdfBuffer) {\n          resolve(pdfBuffer);\n        });\n\n        _this._pdfDoc.on('error', reject);\n        _this._pdfDoc.pipe(concatStream);\n        _this._pdfDoc.end();\n      });\n    }\n  }, {\n    key: 'getStream',\n    value: function getStream() {\n      if (!this._pdfDoc) throw new Error('Document stream has not been generated');\n      this._pdfDoc.end();\n      return this._pdfDoc;\n    }\n  }]);\n\n  return PdfMaker;\n})();\n\n;\n\nfunction getTemplate(title) {\n  var pageMarginTop = 40;\n  var pageMarginBottom = 80;\n  var pageMarginWidth = 40;\n\n  return {\n    // define page size\n    pageOrientation: 'portrait',\n    pageSize: 'A4',\n    pageMargins: [pageMarginWidth, pageMarginTop, pageMarginWidth, pageMarginBottom],\n\n    header: function header() {\n      return {\n        margin: [pageMarginWidth, pageMarginTop / 4, pageMarginWidth, 0],\n        text: title,\n        style: {\n          color: '#aaa'\n        },\n        fontSize: 10,\n        alignment: 'center'\n      };\n    },\n\n    footer: function footer(currentPage, pageCount) {\n      var logoPath = path.resolve(assetPath, 'img', 'logo-grey.png');\n      return {\n        margin: [pageMarginWidth, pageMarginBottom / 4, pageMarginWidth, 0],\n        alignment: 'justify',\n        columns: [{\n          width: 100,\n          image: logoPath\n        }, {\n          margin: [120, 10, 0, 0],\n          text: 'Page ' + currentPage.toString() + ' of ' + pageCount,\n          style: {\n            color: '#aaa'\n          }\n        }]\n      };\n    },\n\n    styles: {\n      heading: {\n        alignment: 'left',\n        fontSize: 14,\n        bold: true,\n        marginTop: 10,\n        marginBottom: 5\n      },\n      subheading: {\n        alignment: 'left',\n        italics: true,\n        marginLeft: 20,\n        marginBottom: 5\n      },\n      warning: {\n        color: '#f39c12' // same as @brand-warning in Kibana colors.less\n      }\n    },\n\n    defaultStyle: {\n      fontSize: 12,\n      font: 'Roboto'\n    }\n  };\n}\n\nfunction getDocOptions() {\n  return {\n    tableLayouts: {\n      simpleBorder: {\n        // format is function (i, node) { ... };\n        hLineWidth: function hLineWidth() {\n          return 1;\n        },\n        vLineWidth: function vLineWidth() {\n          return 1;\n        },\n        hLineColor: function hLineColor() {\n          return 'silver';\n        },\n        vLineColor: function vLineColor() {\n          return 'silver';\n        },\n        paddingLeft: function paddingLeft() {\n          return 0;\n        },\n        paddingRight: function paddingRight() {\n          return 0;\n        },\n        paddingTop: function paddingTop() {\n          return 0;\n        },\n        paddingBottom: function paddingBottom() {\n          return 0;\n        }\n      }\n    }\n  };\n}\n\nmodule.exports = {\n  create: function create() {\n    return new PdfMaker();\n  }\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL3BkZi5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7QUFBQSxJQUFNLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDN0IsSUFBTSxDQUFDLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQzVCLElBQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxlQUFlLENBQUMsQ0FBQztBQUN4QyxJQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsU0FBUyxDQUFDLENBQUM7QUFDbkMsSUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUM7O0lBRXBFLFFBQVE7QUFDRCxXQURQLFFBQVEsR0FDRTswQkFEVixRQUFROztBQUVWLFFBQU0sUUFBUSxHQUFHLFNBQVgsUUFBUSxDQUFJLFFBQVE7YUFBSyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxPQUFPLEVBQUUsUUFBUSxDQUFDO0tBQUEsQ0FBQztBQUMxRSxRQUFNLEtBQUssR0FBRztBQUNaLFlBQU0sRUFBRTtBQUNOLGNBQU0sRUFBRSxRQUFRLENBQUMsb0JBQW9CLENBQUM7QUFDdEMsWUFBSSxFQUFFLFFBQVEsQ0FBQyxtQkFBbUIsQ0FBQztBQUNuQyxlQUFPLEVBQUUsUUFBUSxDQUFDLG1CQUFtQixDQUFDO0FBQ3RDLG1CQUFXLEVBQUUsUUFBUSxDQUFDLG1CQUFtQixDQUFDO09BQzNDO0tBQ0YsQ0FBQzs7QUFFRixRQUFJLENBQUMsTUFBTSxHQUFHLEVBQUUsQ0FBQztBQUNqQixRQUFJLENBQUMsUUFBUSxHQUFHLEVBQUUsQ0FBQztBQUNuQixRQUFJLENBQUMsUUFBUSxHQUFHLElBQUksT0FBTyxDQUFD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O0dBQ0YsQ0FBQztDQUNIOztBQUVELFNBQVMsYUFBYSxHQUFHO0FBQ3ZCLFNBQU87QUFDTCxnQkFBWSxFQUFFO0FBQ1osa0JBQVksRUFBRTs7QUFFWixrQkFBVSxFQUFFO2lCQUFNLENBQUM7U0FBQTtBQUNuQixrQkFBVSxFQUFFO2lCQUFNLENBQUM7U0FBQTtBQUNuQixrQkFBVSxFQUFFO2lCQUFNLFFBQVE7U0FBQTtBQUMxQixrQkFBVSxFQUFFO2lCQUFNLFFBQVE7U0FBQTtBQUMxQixtQkFBVyxFQUFFO2lCQUFNLENBQUM7U0FBQTtBQUNwQixvQkFBWSxFQUFFO2lCQUFNLENBQUM7U0FBQTtBQUNyQixrQkFBVSxFQUFFO2lCQUFNLENBQUM7U0FBQTtBQUNuQixxQkFBYSxFQUFFO2lCQUFNLENBQUM7U0FBQTtPQUN2QjtLQUNGO0dBQ0YsQ0FBQztDQUNIOztBQUVELE1BQU0sQ0FBQyxPQUFPLEdBQUc7QUFDZixRQUFNLEVBQUU7V0FBTSxJQUFJLFFBQVEsRUFBRTtHQUFBO0NBQzdCLENBQUMiLCJmaWxlIjoiL2hvbWUvdWJ1bnR1L3dvcmtzcGFjZS9raWJhbmEtNS4wLjItbGludXgteDg2XzY0L3BsdWdpbnMveC1wYWNrL3BsdWdpbnMvcmVwb3J0aW5nL3NlcnZlci9saWIvcGRmLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbmNvbnN0IF8gPSByZXF1aXJlKCdsb2Rhc2gnKTtcbmNvbnN0IGNvbmNhdCA9IHJlcXVpcmUoJ2NvbmNhdC1zdHJlYW0nKTtcbmNvbnN0IFByaW50ZXIgPSByZXF1aXJlKCdwZGZtYWtlJyk7XG5jb25zdCBhc3NldFBhdGggPSBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnLi4nLCAnLi4nLCAnc2VydmVyJywgJ2Fzc2V0cycpO1xuXG5jbGFzcyBQZGZNYWtlciB7XG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGNvbnN0IGZvbnRQYXRoID0gKGZpbGVuYW1lKSA9PiBwYXRoLnJlc29sdmUoYXNzZXRQYXRoLCAnZm9udHMnLCBmaWxlbmFtZSk7XG4gICAgY29uc3QgZm9udHMgPSB7XG4gICAgICBSb2JvdG86IHtcbiAgICAgICAgbm9ybWFsOiBmb250UGF0aCgnUm9ib3RvLVJlZ3VsYXIudHRmJyksXG4gICAgICAgIGJvbGQ6IGZvbnRQYXRoKCdSb2JvdG8tTWVkaXVtLnR0ZicpLFxuICAgICAgICBpdGFsaWNzOiBmb250UGF0aCgnUm9ib3RvLUl0YWxpYy50dGYnKSxcbiAgICAgICAgYm9sZGl0YWxpY3M6IGZvbnRQYXRoKCdSb2JvdG8tSXRhbGljLnR0ZicpLFxuICAgICAgfVxuICAgIH07XG5cbiAgICB0aGlzLl90aXRsZSA9ICcnO1xuICAgIHRoaXMuX2NvbnRlbnQgPSBbXTtcbiAgICB0aGlzLl9wcmludGVyID0gbmV3IFByaW50ZXIoZm9udHMpO1xuICB9XG5cbiAgX2FkZENvbnRlbnRzKGNvbnRlbnRzKSB7XG4gICAgY29uc3QgZ3JvdXBDb3VudCA9IHRoaXMuX2NvbnRlbnQubGVuZ3RoO1xuXG4gICAgLy8gaW5qZWN0IGEgcGFnZSBicmVhayBmb3IgZXZlcnkgMiBncm91cHMgb24gdGhlIHBhZ2VcbiAgICBpZiAoZ3JvdXBDb3VudCA+IDAgJiYgZ3JvdXBDb3VudCAlIDIgPT09IDApIHtcbiAgICAgIGNvbnRlbnRzID0gW3tcbiAgICAgICAgdGV4dDogJycsXG4gICAgICAgIHBhZ2VCcmVhazogJ2FmdGVyJyxcbiAgICAgIH1dLmNvbmNhdChjb250ZW50cyk7XG4gICAgfVxuXG4gICAgdGhpcy5fY29udGVudC5wdXNoKGNvbnRlbnRzKTtcbiAgfVxuXG4gIGFkZEltYWdlKGZpbGVQYXRoLCBvcHRzID0ge30pIHtcbiAgICBjb25zdCBjb250ZW50cyA9IFtdO1xuXG4gICAgaWYgKG9wdHMudGl0bGUgJiYgb3B0cy50aXRsZS5sZW5ndGggPiAwKSB7XG4gICAgICBjb250ZW50cy5wdXNoKHtcbiAgICAgICAgdGV4dDogb3B0cy50aXRsZSxcbiAgICAgICAgc3R5bGU6ICdoZWFkaW5nJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKG9wdHMuZGVzY3JpcHRpb24gJiYgb3B0cy5kZXNjcmlwdGlvbi5sZW5ndGggPiAwKSB7XG4gICAgICBjb250ZW50cy5wdXNoKHtcbiAgICAgICAgdGV4dDogb3B0cy5kZXNjcmlwdGlvbixcbiAgICAgICAgc3R5bGU6ICdzdWJoZWFkaW5nJ1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgaW1nID0ge1xuICAgICAgaW1hZ2U6IGZpbGVQYXRoLFxuICAgICAgd2lkdGg6IDUwMCxcbiAgICAgIGFsaWdubWVudDogJ2NlbnRlcicsXG4gICAgfTtcblxuICAgIGNvbnN0IHdyYXBwZWRJbWcgPSB7XG4gICAgICB0YWJsZToge1xuICAgICAgICBib2R5OiBbXG4gICAgICAgICAgWyBpbWcgXSxcbiAgICAgICAgXSxcbiAgICAgIH0sXG4gICAgICBsYXlvdXQ6ICdzaW1wbGVCb3JkZXInXG4gICAgfTtcblxuICAgIGNvbnRlbnRzLnB1c2goXy5hc3NpZ24od3JhcHBlZEltZywgXy5vbWl0KG9wdHMsIFsndGl0bGUnLCAnZGVzY3JpcHRpb24nXSkpKTtcblxuICAgIHRoaXMuX2FkZENvbnRlbnRzKGNvbnRlbnRzKTtcbiAgfVxuXG4gIGFkZEhlYWRpbmcoaGVhZGluZ1RleHQsIG9wdHMgPSB7fSkge1xuICAgIGNvbnN0IGNvbnRlbnRzID0gW107XG4gICAgY29udGVudHMucHVzaCh7XG4gICAgICB0ZXh0OiBoZWFkaW5nVGV4dCxcbiAgICAgIHN0eWxlOiBbJ2hlYWRpbmcnXS5jb25jYXQob3B0cy5zdHlsZXMgfHwgW10pXG4gICAgfSk7XG4gICAgdGhpcy5fYWRkQ29udGVudHMoY29udGVudHMpO1xuICB9XG5cbiAgc2V0VGl0bGUodGl0bGUpIHtcbiAgICB0aGlzLl90aXRsZSA9IHRpdGxlO1xuICB9XG5cbiAgZ2VuZXJhdGUoKSB7XG4gICAgY29uc3QgZG9jVGVtcGxhdGUgPSBfLmFzc2lnbihnZXRUZW1wbGF0ZSh0aGlzLl90aXRsZSksIHsgY29udGVudDogdGhpcy5fY29udGVudCB9KTtcbiAgICB0aGlzLl9wZGZEb2MgPSB0aGlzLl9wcmludGVyLmNyZWF0ZVBkZktpdERvY3VtZW50KGRvY1RlbXBsYXRlLCBnZXREb2NPcHRpb25zKCkpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgZ2V0QnVmZmVyKCkge1xuICAgIGlmICghdGhpcy5fcGRmRG9jKSB0aHJvdyBuZXcgRXJyb3IoJ0RvY3VtZW50IHN0cmVhbSBoYXMgbm90IGJlZW4gZ2VuZXJhdGVkJyk7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIGNvbnN0IGNvbmNhdFN0cmVhbSA9IGNvbmNhdChmdW5jdGlvbiAocGRmQnVmZmVyKSB7XG4gICAgICAgIHJlc29sdmUocGRmQnVmZmVyKTtcbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLl9wZGZEb2Mub24oJ2Vycm9yJywgcmVqZWN0KTtcbiAgICAgIHRoaXMuX3BkZkRvYy5waXBlKGNvbmNhdFN0cmVhbSk7XG4gICAgICB0aGlzLl9wZGZEb2MuZW5kKCk7XG4gICAgfSk7XG4gIH1cblxuICBnZXRTdHJlYW0oKSB7XG4gICAgaWYgKCF0aGlzLl9wZGZEb2MpIHRocm93IG5ldyBFcnJvcignRG9jdW1lbnQgc3RyZWFtIGhhcyBub3QgYmVlbiBnZW5lcmF0ZWQnKTtcbiAgICB0aGlzLl9wZGZEb2MuZW5kKCk7XG4gICAgcmV0dXJuIHRoaXMuX3BkZkRvYztcbiAgfVxufTtcblxuZnVuY3Rpb24gZ2V0VGVtcGxhdGUodGl0bGUpIHtcbiAgY29uc3QgcGFnZU1hcmdpblRvcCA9IDQwO1xuICBjb25zdCBwYWdlTWFyZ2luQm90dG9tID0gODA7XG4gIGNvbnN0IHBhZ2VNYXJnaW5XaWR0aCA9IDQwO1xuXG4gIHJldHVybiB7XG4gICAgLy8gZGVmaW5lIHBhZ2Ugc2l6ZVxuICAgIHBhZ2VPcmllbnRhdGlvbjogJ3BvcnRyYWl0JyxcbiAgICBwYWdlU2l6ZTogJ0E0JyxcbiAgICBwYWdlTWFyZ2luczogWyBwYWdlTWFyZ2luV2lkdGgsIHBhZ2VNYXJnaW5Ub3AsIHBhZ2VNYXJnaW5XaWR0aCwgcGFnZU1hcmdpbkJvdHRvbSBdLFxuXG4gICAgaGVhZGVyOiBmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBtYXJnaW46IFsgcGFnZU1hcmdpbldpZHRoLCBwYWdlTWFyZ2luVG9wIC8gNCwgcGFnZU1hcmdpbldpZHRoLCAwIF0sXG4gICAgICAgIHRleHQ6IHRpdGxlLFxuICAgICAgICBzdHlsZToge1xuICAgICAgICAgIGNvbG9yOiAnI2FhYScsXG4gICAgICAgIH0sXG4gICAgICAgIGZvbnRTaXplOiAxMCxcbiAgICAgICAgYWxpZ25tZW50OiAnY2VudGVyJ1xuICAgICAgfTtcbiAgICB9LFxuXG4gICAgZm9vdGVyOiBmdW5jdGlvbiAoY3VycmVudFBhZ2UsIHBhZ2VDb3VudCkge1xuICAgICAgY29uc3QgbG9nb1BhdGggPSBwYXRoLnJlc29sdmUoYXNzZXRQYXRoLCAnaW1nJywgJ2xvZ28tZ3JleS5wbmcnKTtcbiAgICAgIHJldHVybiB7XG4gICAgICAgIG1hcmdpbjogWyBwYWdlTWFyZ2luV2lkdGgsIHBhZ2VNYXJnaW5Cb3R0b20gLyA0LCBwYWdlTWFyZ2luV2lkdGgsIDAgXSxcbiAgICAgICAgYWxpZ25tZW50OiAnanVzdGlmeScsXG4gICAgICAgIGNvbHVtbnM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICB3aWR0aDogMTAwLFxuICAgICAgICAgICAgaW1hZ2U6IGxvZ29QYXRoLFxuICAgICAgICAgIH0sIHtcbiAgICAgICAgICAgIG1hcmdpbjogWyAxMjAsIDEwLCAwLCAwIF0sXG4gICAgICAgICAgICB0ZXh0OiAnUGFnZSAnICsgY3VycmVudFBhZ2UudG9TdHJpbmcoKSArICcgb2YgJyArIHBhZ2VDb3VudCxcbiAgICAgICAgICAgIHN0eWxlOiB7XG4gICAgICAgICAgICAgIGNvbG9yOiAnI2FhYSdcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgfSxcbiAgICAgICAgXVxuICAgICAgfTtcbiAgICB9LFxuXG4gICAgc3R5bGVzOiB7XG4gICAgICBoZWFkaW5nOiB7XG4gICAgICAgIGFsaWdubWVudDogJ2xlZnQnLFxuICAgICAgICBmb250U2l6ZTogMTQsXG4gICAgICAgIGJvbGQ6IHRydWUsXG4gICAgICAgIG1hcmdpblRvcDogMTAsXG4gICAgICAgIG1hcmdpbkJvdHRvbTogNSxcbiAgICAgIH0sXG4gICAgICBzdWJoZWFkaW5nOiB7XG4gICAgICAgIGFsaWdubWVudDogJ2xlZnQnLFxuICAgICAgICBpdGFsaWNzOiB0cnVlLFxuICAgICAgICBtYXJnaW5MZWZ0OiAyMCxcbiAgICAgICAgbWFyZ2luQm90dG9tOiA1LFxuICAgICAgfSxcbiAgICAgIHdhcm5pbmc6IHtcbiAgICAgICAgY29sb3I6ICcjZjM5YzEyJyAvLyBzYW1lIGFzIEBicmFuZC13YXJuaW5nIGluIEtpYmFuYSBjb2xvcnMubGVzc1xuICAgICAgfVxuICAgIH0sXG5cbiAgICBkZWZhdWx0U3R5bGU6IHtcbiAgICAgIGZvbnRTaXplOiAxMixcbiAgICAgIGZvbnQ6ICdSb2JvdG8nLFxuICAgIH0sXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldERvY09wdGlvbnMoKSB7XG4gIHJldHVybiB7XG4gICAgdGFibGVMYXlvdXRzOiB7XG4gICAgICBzaW1wbGVCb3JkZXI6IHtcbiAgICAgICAgLy8gZm9ybWF0IGlzIGZ1bmN0aW9uIChpLCBub2RlKSB7IC4uLiB9O1xuICAgICAgICBoTGluZVdpZHRoOiAoKSA9PiAxLFxuICAgICAgICB2TGluZVdpZHRoOiAoKSA9PiAxLFxuICAgICAgICBoTGluZUNvbG9yOiAoKSA9PiAnc2lsdmVyJyxcbiAgICAgICAgdkxpbmVDb2xvcjogKCkgPT4gJ3NpbHZlcicsXG4gICAgICAgIHBhZGRpbmdMZWZ0OiAoKSA9PiAwLFxuICAgICAgICBwYWRkaW5nUmlnaHQ6ICgpID0+IDAsXG4gICAgICAgIHBhZGRpbmdUb3A6ICgpID0+IDAsXG4gICAgICAgIHBhZGRpbmdCb3R0b206ICgpID0+IDAsXG4gICAgICB9XG4gICAgfVxuICB9O1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgY3JlYXRlOiAoKSA9PiBuZXcgUGRmTWFrZXIoKSxcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/pdf.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/pdf.js",
      "sourcesContent": [
        "const path = require('path');\nconst _ = require('lodash');\nconst concat = require('concat-stream');\nconst Printer = require('pdfmake');\nconst assetPath = path.resolve(__dirname, '..', '..', 'server', 'assets');\n\nclass PdfMaker {\n  constructor() {\n    const fontPath = (filename) => path.resolve(assetPath, 'fonts', filename);\n    const fonts = {\n      Roboto: {\n        normal: fontPath('Roboto-Regular.ttf'),\n        bold: fontPath('Roboto-Medium.ttf'),\n        italics: fontPath('Roboto-Italic.ttf'),\n        bolditalics: fontPath('Roboto-Italic.ttf'),\n      }\n    };\n\n    this._title = '';\n    this._content = [];\n    this._printer = new Printer(fonts);\n  }\n\n  _addContents(contents) {\n    const groupCount = this._content.length;\n\n    // inject a page break for every 2 groups on the page\n    if (groupCount > 0 && groupCount % 2 === 0) {\n      contents = [{\n        text: '',\n        pageBreak: 'after',\n      }].concat(contents);\n    }\n\n    this._content.push(contents);\n  }\n\n  addImage(filePath, opts = {}) {\n    const contents = [];\n\n    if (opts.title && opts.title.length > 0) {\n      contents.push({\n        text: opts.title,\n        style: 'heading'\n      });\n    }\n\n    if (opts.description && opts.description.length > 0) {\n      contents.push({\n        text: opts.description,\n        style: 'subheading'\n      });\n    }\n\n    const img = {\n      image: filePath,\n      width: 500,\n      alignment: 'center',\n    };\n\n    const wrappedImg = {\n      table: {\n        body: [\n          [ img ],\n        ],\n      },\n      layout: 'simpleBorder'\n    };\n\n    contents.push(_.assign(wrappedImg, _.omit(opts, ['title', 'description'])));\n\n    this._addContents(contents);\n  }\n\n  addHeading(headingText, opts = {}) {\n    const contents = [];\n    contents.push({\n      text: headingText,\n      style: ['heading'].concat(opts.styles || [])\n    });\n    this._addContents(contents);\n  }\n\n  setTitle(title) {\n    this._title = title;\n  }\n\n  generate() {\n    const docTemplate = _.assign(getTemplate(this._title), { content: this._content });\n    this._pdfDoc = this._printer.createPdfKitDocument(docTemplate, getDocOptions());\n    return this;\n  }\n\n  getBuffer() {\n    if (!this._pdfDoc) throw new Error('Document stream has not been generated');\n    return new Promise((resolve, reject) => {\n      const concatStream = concat(function (pdfBuffer) {\n        resolve(pdfBuffer);\n      });\n\n      this._pdfDoc.on('error', reject);\n      this._pdfDoc.pipe(concatStream);\n      this._pdfDoc.end();\n    });\n  }\n\n  getStream() {\n    if (!this._pdfDoc) throw new Error('Document stream has not been generated');\n    this._pdfDoc.end();\n    return this._pdfDoc;\n  }\n};\n\nfunction getTemplate(title) {\n  const pageMarginTop = 40;\n  const pageMarginBottom = 80;\n  const pageMarginWidth = 40;\n\n  return {\n    // define page size\n    pageOrientation: 'portrait',\n    pageSize: 'A4',\n    pageMargins: [ pageMarginWidth, pageMarginTop, pageMarginWidth, pageMarginBottom ],\n\n    header: function () {\n      return {\n        margin: [ pageMarginWidth, pageMarginTop / 4, pageMarginWidth, 0 ],\n        text: title,\n        style: {\n          color: '#aaa',\n        },\n        fontSize: 10,\n        alignment: 'center'\n      };\n    },\n\n    footer: function (currentPage, pageCount) {\n      const logoPath = path.resolve(assetPath, 'img', 'logo-grey.png');\n      return {\n        margin: [ pageMarginWidth, pageMarginBottom / 4, pageMarginWidth, 0 ],\n        alignment: 'justify',\n        columns: [\n          {\n            width: 100,\n            image: logoPath,\n          }, {\n            margin: [ 120, 10, 0, 0 ],\n            text: 'Page ' + currentPage.toString() + ' of ' + pageCount,\n            style: {\n              color: '#aaa'\n            },\n          },\n        ]\n      };\n    },\n\n    styles: {\n      heading: {\n        alignment: 'left',\n        fontSize: 14,\n        bold: true,\n        marginTop: 10,\n        marginBottom: 5,\n      },\n      subheading: {\n        alignment: 'left',\n        italics: true,\n        marginLeft: 20,\n        marginBottom: 5,\n      },\n      warning: {\n        color: '#f39c12' // same as @brand-warning in Kibana colors.less\n      }\n    },\n\n    defaultStyle: {\n      fontSize: 12,\n      font: 'Roboto',\n    },\n  };\n}\n\nfunction getDocOptions() {\n  return {\n    tableLayouts: {\n      simpleBorder: {\n        // format is function (i, node) { ... };\n        hLineWidth: () => 1,\n        vLineWidth: () => 1,\n        hLineColor: () => 'silver',\n        vLineColor: () => 'silver',\n        paddingLeft: () => 0,\n        paddingRight: () => 0,\n        paddingTop: () => 0,\n        paddingBottom: () => 0,\n      }\n    }\n  };\n}\n\nmodule.exports = {\n  create: () => new PdfMaker(),\n};\n"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/get_screenshot.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar queue = require('queue');\nvar screenshotFactory = require('./screenshot');\nvar oncePerServer = require('./once_per_server');\n\n// bounding boxes for various saved object types\nvar boundingBoxes = {\n  visualization: {\n    top: 70,\n    left: 362,\n    bottom: 0\n  },\n  search: {\n    top: 70,\n    left: 222,\n    bottom: 0,\n    right: 30\n  }\n};\n\nfunction getScreenshotFactory(server) {\n  var config = server.config();\n  var logger = function logger(msg) {\n    return server.log(['reporting', 'debug'], msg);\n  };\n\n  var phantomPath = server.plugins.reporting.phantom.binary;\n  var captureSettings = config.get('xpack.reporting.capture');\n  var screenshotSettings = { basePath: config.get('server.basePath'), imagePath: config.get('path.data') };\n  var captureConcurrency = captureSettings.concurrency;\n  logger('Screenshot concurrency: ' + captureConcurrency);\n\n  // init the screenshot module\n  var screenshot = screenshotFactory(phantomPath, captureSettings, screenshotSettings, logger);\n\n  // create the process queue\n  var screenshotQueue = queue({ concurrency: captureConcurrency });\n\n  return function getScreenshot(objUrl, type, headers) {\n    return new Promise(function (resolve, reject) {\n      screenshotQueue.push(function (cb) {\n        return screenshot.capture(objUrl, {\n          headers: headers,\n          bounding: boundingBoxes[type]\n        }).then(function (filename) {\n          resolve(filename);\n          cb();\n        }, function (err) {\n          reject(err);\n          cb();\n        });\n      });\n\n      if (!screenshotQueue.running) screenshotQueue.start();\n    });\n  };\n};\n\nmodule.exports = oncePerServer(getScreenshotFactory);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL2dldF9zY3JlZW5zaG90LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBTSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQy9CLElBQU0saUJBQWlCLEdBQUcsT0FBTyxDQUFDLGNBQWMsQ0FBQyxDQUFDO0FBQ2xELElBQU0sYUFBYSxHQUFHLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDOzs7QUFHbkQsSUFBTSxhQUFhLEdBQUc7QUFDcEIsZUFBYSxFQUFFO0FBQ2IsT0FBRyxFQUFFLEVBQUU7QUFDUCxRQUFJLEVBQUUsR0FBRztBQUNULFVBQU0sRUFBRSxDQUFDO0dBQ1Y7QUFDRCxRQUFNLEVBQUU7QUFDTixPQUFHLEVBQUUsRUFBRTtBQUNQLFFBQUksRUFBRSxHQUFHO0FBQ1QsVUFBTSxFQUFFLENBQUM7QUFDVCxTQUFLLEVBQUUsRUFBRTtHQUNWO0NBQ0YsQ0FBQzs7QUFFRixTQUFTLG9CQUFvQixDQUFDLE1BQU0sRUFBRTtBQUNwQyxNQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUM7QUFDL0IsTUFBTSxNQUFNLEdBQUcsU0FBVCxNQUFNLENBQUksR0FBRztXQUFLLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxXQUFXLEVBQUUsT0FBTyxDQUFDLEVBQUUsR0FBRyxDQUFDO0dBQUEsQ0FBQzs7QUFFaEUsTUFBTSxXQUFXLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxTQUFTLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQztBQUM1RCxNQUFNLGVBQWUsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLHlCQUF5QixDQUFDLENBQUM7QUFDOUQsTUFBTSxrQkFBa0IsR0FBRyxFQUFFLFFBQVEsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLGlCQUFpQixDQUFDLEVBQUUsU0FBUyxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQztBQUMzRyxNQUFNLGtCQUFrQixHQUFHLGVBQWUsQ0FBQyxXQUFXLENBQUM7QUFDdkQsUUFBTSw4QkFBNEIsa0JBQWtCLENBQUcsQ0FBQzs7O0FBR3hELE1BQU0sVUFBVSxHQUFHLGlCQUFpQixDQUFDLFdBQVcsRUFBRSxlQUFlLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxDQUFDLENBQUM7OztBQUcvRixNQUFNLGVBQWUsR0FBRyxLQUFLLENBQUMsRUFBRSxXQUFXLEVBQUUsa0JBQWtCLEVBQUUsQ0FBQyxDQUFDOztBQUVuRSxTQUFPLFNBQVMsYUFBYSxDQUFDLE1BQU0sRUFBRSxJQUFJLEVBQUUsT0FBTyxFQUFFO0FBQ25ELFdBQU8sSUFBSSxPQUFPLENBQUMsVUFBVSxPQUFPLEVBQUUsTUFBTSxFQUFFO0FBQzVDLHFCQUFlLENBQUMsSUFBSSxDQUFDLFVBQVUsRUFBRSxFQUFFO0FBQ2pDLGVBQU8sVUFBVSxDQUFDLE9BQU8sQ0FBQyxNQUFNLEVBQUU7QUFDaEMsaUJBQU8sRUFBUCxPQUFPO0FBQ1Asa0JBQVEsRUFBRSxhQUFhLENBQUMsSUFBSSxDQUFDO1NBQzlCLENBQUMsQ0FDRCxJQUFJLENBQUMsVUFBQyxRQUFRLEVBQUs7QUFDbEIsaUJBQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUNsQixZQUFFLEVBQUUsQ0FBQztTQUNOLEVBQUUsVUFBQyxHQUFHLEVBQUs7QUFDVixnQkFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0FBQ1osWUFBRSxFQUFFLENBQUM7U0FDTixDQUFDLENBQUM7T0FDSixDQUFDLENBQUM7O0FBRUgsVUFBSSxDQUFDLGVBQWUsQ0FBQyxPQUFPLEVBQUUsZUFBZSxDQUFDLEtBQUssRUFBRSxDQUFDO0tBQ3ZELENBQUMsQ0FBQztHQUNKLENBQUM7Q0FDSCxDQUFDOztBQUVGLE1BQU0sQ0FBQyxPQUFPLEdBQUcsYUFBYSxDQUFDLG9CQUFvQixDQUFDLENBQUMiLCJmaWxlIjoiL2hvbWUvdWJ1bnR1L3dvcmtzcGFjZS9raWJhbmEtNS4wLjItbGludXgteDg2XzY0L3BsdWdpbnMveC1wYWNrL3BsdWdpbnMvcmVwb3J0aW5nL3NlcnZlci9saWIvZ2V0X3NjcmVlbnNob3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBxdWV1ZSA9IHJlcXVpcmUoJ3F1ZXVlJyk7XG5jb25zdCBzY3JlZW5zaG90RmFjdG9yeSA9IHJlcXVpcmUoJy4vc2NyZWVuc2hvdCcpO1xuY29uc3Qgb25jZVBlclNlcnZlciA9IHJlcXVpcmUoJy4vb25jZV9wZXJfc2VydmVyJyk7XG5cbi8vIGJvdW5kaW5nIGJveGVzIGZvciB2YXJpb3VzIHNhdmVkIG9iamVjdCB0eXBlc1xuY29uc3QgYm91bmRpbmdCb3hlcyA9IHtcbiAgdmlzdWFsaXphdGlvbjoge1xuICAgIHRvcDogNzAsXG4gICAgbGVmdDogMzYyLFxuICAgIGJvdHRvbTogMFxuICB9LFxuICBzZWFyY2g6IHtcbiAgICB0b3A6IDcwLFxuICAgIGxlZnQ6IDIyMixcbiAgICBib3R0b206IDAsXG4gICAgcmlnaHQ6IDMwLFxuICB9LFxufTtcblxuZnVuY3Rpb24gZ2V0U2NyZWVuc2hvdEZhY3Rvcnkoc2VydmVyKSB7XG4gIGNvbnN0IGNvbmZpZyA9IHNlcnZlci5jb25maWcoKTtcbiAgY29uc3QgbG9nZ2VyID0gKG1zZykgPT4gc2VydmVyLmxvZyhbJ3JlcG9ydGluZycsICdkZWJ1ZyddLCBtc2cpO1xuXG4gIGNvbnN0IHBoYW50b21QYXRoID0gc2VydmVyLnBsdWdpbnMucmVwb3J0aW5nLnBoYW50b20uYmluYXJ5O1xuICBjb25zdCBjYXB0dXJlU2V0dGluZ3MgPSBjb25maWcuZ2V0KCd4cGFjay5yZXBvcnRpbmcuY2FwdHVyZScpO1xuICBjb25zdCBzY3JlZW5zaG90U2V0dGluZ3MgPSB7IGJhc2VQYXRoOiBjb25maWcuZ2V0KCdzZXJ2ZXIuYmFzZVBhdGgnKSwgaW1hZ2VQYXRoOiBjb25maWcuZ2V0KCdwYXRoLmRhdGEnKSB9O1xuICBjb25zdCBjYXB0dXJlQ29uY3VycmVuY3kgPSBjYXB0dXJlU2V0dGluZ3MuY29uY3VycmVuY3k7XG4gIGxvZ2dlcihgU2NyZWVuc2hvdCBjb25jdXJyZW5jeTogJHtjYXB0dXJlQ29uY3VycmVuY3l9YCk7XG5cbiAgLy8gaW5pdCB0aGUgc2NyZWVuc2hvdCBtb2R1bGVcbiAgY29uc3Qgc2NyZWVuc2hvdCA9IHNjcmVlbnNob3RGYWN0b3J5KHBoYW50b21QYXRoLCBjYXB0dXJlU2V0dGluZ3MsIHNjcmVlbnNob3RTZXR0aW5ncywgbG9nZ2VyKTtcblxuICAvLyBjcmVhdGUgdGhlIHByb2Nlc3MgcXVldWVcbiAgY29uc3Qgc2NyZWVuc2hvdFF1ZXVlID0gcXVldWUoeyBjb25jdXJyZW5jeTogY2FwdHVyZUNvbmN1cnJlbmN5IH0pO1xuXG4gIHJldHVybiBmdW5jdGlvbiBnZXRTY3JlZW5zaG90KG9ialVybCwgdHlwZSwgaGVhZGVycykge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgICBzY3JlZW5zaG90UXVldWUucHVzaChmdW5jdGlvbiAoY2IpIHtcbiAgICAgICAgcmV0dXJuIHNjcmVlbnNob3QuY2FwdHVyZShvYmpVcmwsIHtcbiAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgIGJvdW5kaW5nOiBib3VuZGluZ0JveGVzW3R5cGVdLFxuICAgICAgICB9KVxuICAgICAgICAudGhlbigoZmlsZW5hbWUpID0+IHtcbiAgICAgICAgICByZXNvbHZlKGZpbGVuYW1lKTtcbiAgICAgICAgICBjYigpO1xuICAgICAgICB9LCAoZXJyKSA9PiB7XG4gICAgICAgICAgcmVqZWN0KGVycik7XG4gICAgICAgICAgY2IoKTtcbiAgICAgICAgfSk7XG4gICAgICB9KTtcblxuICAgICAgaWYgKCFzY3JlZW5zaG90UXVldWUucnVubmluZykgc2NyZWVuc2hvdFF1ZXVlLnN0YXJ0KCk7XG4gICAgfSk7XG4gIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IG9uY2VQZXJTZXJ2ZXIoZ2V0U2NyZWVuc2hvdEZhY3RvcnkpO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/get_screenshot.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAM,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;AAC/B,IAAM,iBAAiB,GAAG,OAAO,CAAC,cAAc,CAAC,CAAC;AAClD,IAAM,aAAa,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC;;;AAGnD,IAAM,aAAa,GAAG;AACpB,eAAa,EAAE;AACb,OAAG,EAAE,EAAE;AACP,QAAI,EAAE,GAAG;AACT,UAAM,EAAE,CAAC;GACV;AACD,QAAM,EAAE;AACN,OAAG,EAAE,EAAE;AACP,QAAI,EAAE,GAAG;AACT,UAAM,EAAE,CAAC;AACT,SAAK,EAAE,EAAE;GACV;CACF,CAAC;;AAEF,SAAS,oBAAoB,CAAC,MAAM,EAAE;AACpC,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;AAC/B,MAAM,MAAM,GAAG,SAAT,MAAM,CAAI,GAAG;WAAK,MAAM,CAAC,GAAG,CAAC,CAAC,WAAW,EAAE,OAAO,CAAC,EAAE,GAAG,CAAC;GAAA,CAAC;;AAEhE,MAAM,WAAW,GAAG,MAAM,CAAC,OAAO,CAAC,SAAS,CAAC,OAAO,CAAC,MAAM,CAAC;AAC5D,MAAM,eAAe,GAAG,MAAM,CAAC,GAAG,CAAC,yBAAyB,CAAC,CAAC;AAC9D,MAAM,kBAAkB,GAAG,EAAE,QAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,iBAAiB,CAAC,EAAE,SAAS,EAAE,MAAM,CAAC,GAAG,CAAC,WAAW,CAAC,EAAE,CAAC;AAC3G,MAAM,kBAAkB,GAAG,eAAe,CAAC,WAAW,CAAC;AACvD,QAAM,8BAA4B,kBAAkB,CAAG,CAAC;;;AAGxD,MAAM,UAAU,GAAG,iBAAiB,CAAC,WAAW,EAAE,eAAe,EAAE,kBAAkB,EAAE,MAAM,CAAC,CAAC;;;AAG/F,MAAM,eAAe,GAAG,KAAK,CAAC,EAAE,WAAW,EAAE,kBAAkB,EAAE,CAAC,CAAC;;AAEnE,SAAO,SAAS,aAAa,CAAC,MAAM,EAAE,IAAI,EAAE,OAAO,EAAE;AACnD,WAAO,IAAI,OAAO,CAAC,UAAU,OAAO,EAAE,MAAM,EAAE;AAC5C,qBAAe,CAAC,IAAI,CAAC,UAAU,EAAE,EAAE;AACjC,eAAO,UAAU,CAAC,OAAO,CAAC,MAAM,EAAE;AAChC,iBAAO,EAAP,OAAO;AACP,kBAAQ,EAAE,aAAa,CAAC,IAAI,CAAC;SAC9B,CAAC,CACD,IAAI,CAAC,UAAC,QAAQ,EAAK;AAClB,iBAAO,CAAC,QAAQ,CAAC,CAAC;AAClB,YAAE,EAAE,CAAC;SACN,EAAE,UAAC,GAAG,EAAK;AACV,gBAAM,CAAC,GAAG,CAAC,CAAC;AACZ,YAAE,EAAE,CAAC;SACN,CAAC,CAAC;OACJ,CAAC,CAAC;;AAEH,UAAI,CAAC,eAAe,CAAC,OAAO,EAAE,eAAe,CAAC,KAAK,EAAE,CAAC;KACvD,CAAC,CAAC;GACJ,CAAC;CACH,CAAC;;AAEF,MAAM,CAAC,OAAO,GAAG,aAAa,CAAC,oBAAoB,CAAC,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/get_screenshot.js",
      "sourcesContent": [
        "const queue = require('queue');\nconst screenshotFactory = require('./screenshot');\nconst oncePerServer = require('./once_per_server');\n\n// bounding boxes for various saved object types\nconst boundingBoxes = {\n  visualization: {\n    top: 70,\n    left: 362,\n    bottom: 0\n  },\n  search: {\n    top: 70,\n    left: 222,\n    bottom: 0,\n    right: 30,\n  },\n};\n\nfunction getScreenshotFactory(server) {\n  const config = server.config();\n  const logger = (msg) => server.log(['reporting', 'debug'], msg);\n\n  const phantomPath = server.plugins.reporting.phantom.binary;\n  const captureSettings = config.get('xpack.reporting.capture');\n  const screenshotSettings = { basePath: config.get('server.basePath'), imagePath: config.get('path.data') };\n  const captureConcurrency = captureSettings.concurrency;\n  logger(`Screenshot concurrency: ${captureConcurrency}`);\n\n  // init the screenshot module\n  const screenshot = screenshotFactory(phantomPath, captureSettings, screenshotSettings, logger);\n\n  // create the process queue\n  const screenshotQueue = queue({ concurrency: captureConcurrency });\n\n  return function getScreenshot(objUrl, type, headers) {\n    return new Promise(function (resolve, reject) {\n      screenshotQueue.push(function (cb) {\n        return screenshot.capture(objUrl, {\n          headers,\n          bounding: boundingBoxes[type],\n        })\n        .then((filename) => {\n          resolve(filename);\n          cb();\n        }, (err) => {\n          reject(err);\n          cb();\n        });\n      });\n\n      if (!screenshotQueue.running) screenshotQueue.start();\n    });\n  };\n};\n\nmodule.exports = oncePerServer(getScreenshotFactory);\n"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/screenshot.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "create-class",
        "class-call-check"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nvar _createClass = (function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ('value' in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; })();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError('Cannot call a class as a function'); } }\n\nvar path = require('path');\nvar _ = require('lodash');\nvar getPort = require('get-port');\nvar Promise = require('bluebird');\nvar Puid = require('puid');\nvar Horseman = require('@elastic/node-horseman');\n\nvar puid = new Puid();\n\nvar Screenshot = (function () {\n  function Screenshot(phantomPath, captureSettings, screenshotSettings, logger) {\n    _classCallCheck(this, Screenshot);\n\n    this.phantomPath = phantomPath;\n    this.captureSettings = captureSettings;\n    this.screenshotSettings = screenshotSettings;\n    this.logger = logger || _.noop;\n  }\n\n  _createClass(Screenshot, [{\n    key: 'capture',\n    value: function capture(url, opts) {\n      var _this = this;\n\n      this.logger('fetching screenshot of ' + url);\n      opts = _.assign({ basePath: this.screenshotSettings.basePath }, opts);\n      return fetch(url, this.phantomPath, this.captureSettings, opts).then(function (ph) {\n        var filepath = getTargetFile(_this.screenshotSettings.imagePath);\n        var operation = opts.bounding ? getShotCropped(ph, _this.captureSettings.viewport, opts.bounding, filepath) : getShot(ph, filepath);\n\n        return operation.then(function () {\n          _this.logger('Screenshot saved to ' + filepath);\n          ph.close();\n          return filepath;\n        })['catch'](function (err) {\n          _this.logger('Screenshot failed ' + err.message);\n          ph.close();\n          throw err;\n        });\n      });\n    }\n  }]);\n\n  return Screenshot;\n})();\n\nmodule.exports = function (phantomPath, captureSettings, screenshotSettings, logger) {\n  return new Screenshot(phantomPath, captureSettings, screenshotSettings, logger);\n};\n\nfunction fetch(url, phantomPath, captureSettings, opts) {\n  var loadDelay = captureSettings.loadDelay;\n  var viewport = captureSettings.viewport;\n  var timeout = captureSettings.timeout;\n\n  var phantomOpts = {\n    phantomPath: phantomPath,\n    timeout: timeout,\n    injectJquery: false\n  };\n  var settings = {\n    width: viewport.width,\n    height: viewport.height,\n    zoom: captureSettings.zoom\n  };\n\n  return createPhantom(phantomOpts, settings).then(function (ph) {\n    if (opts.headers) return ph.headers(opts.headers).then(function () {\n      return ph;\n    });\n    return ph;\n  }).then(function (ph) {\n    return ph.open(url).then(function (status) {\n      if (status !== 'success') throw new Error('URL open failed. Is the server running?');\n      return ph;\n    });\n  }).then(function (ph) {\n    return ph.waitForSelector('.application visualize').evaluate(function (basePath) {\n      (function (window, document) {\n        function injectCSS(cssPath) {\n          var node = document.createElement('link');\n          node.rel = 'stylesheet';\n          node.href = cssPath;\n          document.getElementsByTagName('head')[0].appendChild(node);\n        };\n\n        injectCSS(basePath + '/app/reporting/assets/reporting-overrides.css');\n      })(window, window.document);\n    }, opts.basePath).wait(loadDelay).then(function () {\n      return ph;\n    });\n  });\n};\n\nfunction createPhantom(phantomOpts, settings) {\n  return Promise.resolve(getPort()).then(function (port) {\n    var instanceOpts = Object.assign({ bridgePort: port }, phantomOpts);\n    var ph = new Horseman(instanceOpts);\n    return ph.viewport(settings.width, settings.height).zoom(settings.zoom).then(function () {\n      return ph;\n    });\n  });\n}\n\nfunction getTargetFile(imagePath) {\n  return path.join(imagePath, 'screenshot-' + puid.generate() + '.png');\n}\n\nfunction getShot(ph, filepath) {\n  return ph.screenshot(filepath);\n}\n\n// cropped screenshot using DOM element or getBoundingClientRect\n// see https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\nfunction getShotCropped(ph, viewport, bounding, filepath) {\n  var contentOffset = _.defaults({}, bounding, {\n    top: 90, // top chrome\n    left: 0,\n    right: 0,\n    bottom: 0\n  });\n\n  var boundingArea = _.defaults(contentOffset, {\n    width: viewport.width - contentOffset.left - contentOffset.right,\n    height: viewport.height - contentOffset.top - contentOffset.bottom\n  });\n\n  return ph.crop(boundingArea, filepath);\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL3NjcmVlbnNob3QuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQUEsSUFBTSxJQUFJLEdBQUcsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzdCLElBQU0sQ0FBQyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQztBQUM1QixJQUFNLE9BQU8sR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDcEMsSUFBTSxPQUFPLEdBQUcsT0FBTyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQ3BDLElBQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQztBQUM3QixJQUFNLFFBQVEsR0FBRyxPQUFPLENBQUMsd0JBQXdCLENBQUMsQ0FBQzs7QUFFbkQsSUFBTSxJQUFJLEdBQUcsSUFBSSxJQUFJLEVBQUUsQ0FBQzs7SUFFbEIsVUFBVTtBQUNILFdBRFAsVUFBVSxDQUNGLFdBQVcsRUFBRSxlQUFlLEVBQUUsa0JBQWtCLEVBQUUsTUFBTSxFQUFFOzBCQURsRSxVQUFVOztBQUVaLFFBQUksQ0FBQyxXQUFXLEdBQUcsV0FBVyxDQUFDO0FBQy9CLFFBQUksQ0FBQyxlQUFlLEdBQUcsZUFBZSxDQUFDO0FBQ3ZDLFFBQUksQ0FBQyxrQkFBa0IsR0FBRyxrQkFBa0IsQ0FBQztBQUM3QyxRQUFJLENBQUMsTUFBTSxHQUFHLE1BQU0sSUFBSSxDQUFDLENBQUMsSUFBSSxDQUFDO0dBQ2hDOztlQU5HLFVBQVU7O1dBUVAsaUJBQUMsR0FBRyxFQUFFLElBQUksRUFBRTs7O0FBQ2pCLFVBQUksQ0FBQyxNQUFNLDZCQUEyQixHQUFHLENBQUcsQ0FBQztBQUM3QyxVQUFJLEdBQUcsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxFQUFFLFFBQVEsRUFBRSxJQUFJLENBQUMsa0JBQWtCLENB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QUFhLENBQUMsU0FBUyxFQUFFO0FBQ2hDLFNBQU8sSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLGtCQUFnQixJQUFJLENBQUMsUUFBUSxFQUFFLFVBQU8sQ0FBQztDQUNsRTs7QUFFRCxTQUFTLE9BQU8sQ0FBQyxFQUFFLEVBQUUsUUFBUSxFQUFFO0FBQzdCLFNBQU8sRUFBRSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQUMsQ0FBQztDQUNoQzs7OztBQUlELFNBQVMsY0FBYyxDQUFDLEVBQUUsRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRTtBQUN4RCxNQUFNLGFBQWEsR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLEVBQUUsRUFBRSxRQUFRLEVBQUU7QUFDN0MsT0FBRyxFQUFFLEVBQUU7QUFDUCxRQUFJLEVBQUUsQ0FBQztBQUNQLFNBQUssRUFBRSxDQUFDO0FBQ1IsVUFBTSxFQUFFLENBQUM7R0FDVixDQUFDLENBQUM7O0FBRUgsTUFBTSxZQUFZLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxhQUFhLEVBQUU7QUFDN0MsU0FBSyxFQUFFLFFBQVEsQ0FBQyxLQUFLLEdBQUcsYUFBYSxDQUFDLElBQUksR0FBRyxhQUFhLENBQUMsS0FBSztBQUNoRSxVQUFNLEVBQUUsUUFBUSxDQUFDLE1BQU0sR0FBRyxhQUFhLENBQUMsR0FBRyxHQUFHLGFBQWEsQ0FBQyxNQUFNO0dBQ25FLENBQUMsQ0FBQzs7QUFFSCxTQUFPLEVBQUUsQ0FBQyxJQUFJLENBQUMsWUFBWSxFQUFFLFFBQVEsQ0FBQyxDQUFDO0NBQ3hDIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL3NjcmVlbnNob3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3QgXyA9IHJlcXVpcmUoJ2xvZGFzaCcpO1xuY29uc3QgZ2V0UG9ydCA9IHJlcXVpcmUoJ2dldC1wb3J0Jyk7XG5jb25zdCBQcm9taXNlID0gcmVxdWlyZSgnYmx1ZWJpcmQnKTtcbmNvbnN0IFB1aWQgPSByZXF1aXJlKCdwdWlkJyk7XG5jb25zdCBIb3JzZW1hbiA9IHJlcXVpcmUoJ0BlbGFzdGljL25vZGUtaG9yc2VtYW4nKTtcblxuY29uc3QgcHVpZCA9IG5ldyBQdWlkKCk7XG5cbmNsYXNzIFNjcmVlbnNob3Qge1xuICBjb25zdHJ1Y3RvcihwaGFudG9tUGF0aCwgY2FwdHVyZVNldHRpbmdzLCBzY3JlZW5zaG90U2V0dGluZ3MsIGxvZ2dlcikge1xuICAgIHRoaXMucGhhbnRvbVBhdGggPSBwaGFudG9tUGF0aDtcbiAgICB0aGlzLmNhcHR1cmVTZXR0aW5ncyA9IGNhcHR1cmVTZXR0aW5ncztcbiAgICB0aGlzLnNjcmVlbnNob3RTZXR0aW5ncyA9IHNjcmVlbnNob3RTZXR0aW5ncztcbiAgICB0aGlzLmxvZ2dlciA9IGxvZ2dlciB8fCBfLm5vb3A7XG4gIH1cblxuICBjYXB0dXJlKHVybCwgb3B0cykge1xuICAgIHRoaXMubG9nZ2VyKGBmZXRjaGluZyBzY3JlZW5zaG90IG9mICR7dXJsfWApO1xuICAgIG9wdHMgPSBfLmFzc2lnbih7IGJhc2VQYXRoOiB0aGlzLnNjcmVlbnNob3RTZXR0aW5ncy5iYXNlUGF0aCB9LCBvcHRzKTtcbiAgICByZXR1cm4gZmV0Y2godXJsLCB0aGlzLnBoYW50b21QYXRoLCB0aGlzLmNhcHR1cmVTZXR0aW5ncywgb3B0cylcbiAgICAudGhlbihwaCA9PiB7XG4gICAgICBjb25zdCBmaWxlcGF0aCA9IGdldFRhcmdldEZpbGUodGhpcy5zY3JlZW5zaG90U2V0dGluZ3MuaW1hZ2VQYXRoKTtcbiAgICAgIGNvbnN0IG9wZXJhdGlvbiA9IChvcHRzLmJvdW5kaW5nKVxuICAgICAgICA/IGdldFNob3RDcm9wcGVkKHBoLCB0aGlzLmNhcHR1cmVTZXR0aW5ncy52aWV3cG9ydCwgb3B0cy5ib3VuZGluZywgZmlsZXBhdGgpXG4gICAgICAgIDogZ2V0U2hvdChwaCwgZmlsZXBhdGgpO1xuXG4gICAgICByZXR1cm4gb3BlcmF0aW9uXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIHRoaXMubG9nZ2VyKGBTY3JlZW5zaG90IHNhdmVkIHRvICR7ZmlsZXBhdGh9YCk7XG4gICAgICAgIHBoLmNsb3NlKCk7XG4gICAgICAgIHJldHVybiBmaWxlcGF0aDtcbiAgICAgIH0pXG4gICAgICAuY2F0Y2goKGVycikgPT4ge1xuICAgICAgICB0aGlzLmxvZ2dlcihgU2NyZWVuc2hvdCBmYWlsZWQgJHtlcnIubWVzc2FnZX1gKTtcbiAgICAgICAgcGguY2xvc2UoKTtcbiAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAocGhhbnRvbVBhdGgsIGNhcHR1cmVTZXR0aW5ncywgc2NyZWVuc2hvdFNldHRpbmdzLCBsb2dnZXIpIHtcbiAgcmV0dXJuIG5ldyBTY3JlZW5zaG90KHBoYW50b21QYXRoLCBjYXB0dXJlU2V0dGluZ3MsIHNjcmVlbnNob3RTZXR0aW5ncywgbG9nZ2VyKTtcbn07XG5cbmZ1bmN0aW9uIGZldGNoKHVybCwgcGhhbnRvbVBhdGgsIGNhcHR1cmVTZXR0aW5ncywgb3B0cykge1xuICBjb25zdCB7IGxvYWREZWxheSwgdmlld3BvcnQsIHRpbWVvdXQgfSA9IGNhcHR1cmVTZXR0aW5ncztcbiAgY29uc3QgcGhhbnRvbU9wdHMgPSB7XG4gICAgcGhhbnRvbVBhdGg6IHBoYW50b21QYXRoLFxuICAgIHRpbWVvdXQ6IHRpbWVvdXQsXG4gICAgaW5qZWN0SnF1ZXJ5OiBmYWxzZSxcbiAgfTtcbiAgY29uc3Qgc2V0dGluZ3MgPSB7XG4gICAgd2lkdGg6IHZpZXdwb3J0LndpZHRoLFxuICAgIGhlaWdodDogdmlld3BvcnQuaGVpZ2h0LFxuICAgIHpvb206IGNhcHR1cmVTZXR0aW5ncy56b29tXG4gIH07XG5cbiAgcmV0dXJuIGNyZWF0ZVBoYW50b20ocGhhbnRvbU9wdHMsIHNldHRpbmdzKVxuICAudGhlbigocGgpID0+IHtcbiAgICBpZiAob3B0cy5oZWFkZXJzKSByZXR1cm4gcGguaGVhZGVycyhvcHRzLmhlYWRlcnMpLnRoZW4oKCkgPT4gcGgpO1xuICAgIHJldHVybiBwaDtcbiAgfSlcbiAgLnRoZW4oKHBoKSA9PiB7XG4gICAgcmV0dXJuIHBoLm9wZW4odXJsKS50aGVuKGZ1bmN0aW9uIChzdGF0dXMpIHtcbiAgICAgIGlmIChzdGF0dXMgIT09ICdzdWNjZXNzJykgdGhyb3cgbmV3IEVycm9yKCdVUkwgb3BlbiBmYWlsZWQuIElzIHRoZSBzZXJ2ZXIgcnVubmluZz8nKTtcbiAgICAgIHJldHVybiBwaDtcbiAgICB9KTtcbiAgfSlcbiAgLnRoZW4ocGggPT4ge1xuICAgIHJldHVybiBwaFxuICAgIC53YWl0Rm9yU2VsZWN0b3IoJy5hcHBsaWNhdGlvbiB2aXN1YWxpemUnKVxuICAgIC5ldmFsdWF0ZShmdW5jdGlvbiAoYmFzZVBhdGgpIHtcbiAgICAgIChmdW5jdGlvbiAod2luZG93LCBkb2N1bWVudCkge1xuICAgICAgICBmdW5jdGlvbiBpbmplY3RDU1MoY3NzUGF0aCkge1xuICAgICAgICAgIHZhciBub2RlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnbGluaycpO1xuICAgICAgICAgIG5vZGUucmVsID0gJ3N0eWxlc2hlZXQnO1xuICAgICAgICAgIG5vZGUuaHJlZiA9IGNzc1BhdGg7XG4gICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudHNCeVRhZ05hbWUoJ2hlYWQnKVswXS5hcHBlbmRDaGlsZChub2RlKTtcbiAgICAgICAgfTtcblxuICAgICAgICBpbmplY3RDU1MoYmFzZVBhdGggKyAnL2FwcC9yZXBvcnRpbmcvYXNzZXRzL3JlcG9ydGluZy1vdmVycmlkZXMuY3NzJyk7XG4gICAgICB9KHdpbmRvdywgd2luZG93LmRvY3VtZW50KSk7XG4gICAgfSwgb3B0cy5iYXNlUGF0aClcbiAgICAud2FpdChsb2FkRGVsYXkpXG4gICAgLnRoZW4oKCkgPT4gcGgpO1xuICB9KTtcbn07XG5cbmZ1bmN0aW9uIGNyZWF0ZVBoYW50b20ocGhhbnRvbU9wdHMsIHNldHRpbmdzKSB7XG4gIHJldHVybiBQcm9taXNlLnJlc29sdmUoZ2V0UG9ydCgpKVxuICAudGhlbihwb3J0ID0+IHtcbiAgICBjb25zdCBpbnN0YW5jZU9wdHMgPSBPYmplY3QuYXNzaWduKHsgYnJpZGdlUG9ydDogcG9ydCB9LCBwaGFudG9tT3B0cyk7XG4gICAgY29uc3QgcGggPSBuZXcgSG9yc2VtYW4oaW5zdGFuY2VPcHRzKTtcbiAgICByZXR1cm4gcGgudmlld3BvcnQoc2V0dGluZ3Mud2lkdGgsIHNldHRpbmdzLmhlaWdodCkuem9vbShzZXR0aW5ncy56b29tKVxuICAgIC50aGVuKCgpID0+IHBoKTtcbiAgfSk7XG59XG5cbmZ1bmN0aW9uIGdldFRhcmdldEZpbGUoaW1hZ2VQYXRoKSB7XG4gIHJldHVybiBwYXRoLmpvaW4oaW1hZ2VQYXRoLCBgc2NyZWVuc2hvdC0ke3B1aWQuZ2VuZXJhdGUoKX0ucG5nYCk7XG59XG5cbmZ1bmN0aW9uIGdldFNob3QocGgsIGZpbGVwYXRoKSB7XG4gIHJldHVybiBwaC5zY3JlZW5zaG90KGZpbGVwYXRoKTtcbn1cblxuLy8gY3JvcHBlZCBzY3JlZW5zaG90IHVzaW5nIERPTSBlbGVtZW50IG9yIGdldEJvdW5kaW5nQ2xpZW50UmVjdFxuLy8gc2VlIGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2VuLVVTL2RvY3MvV2ViL0FQSS9FbGVtZW50L2dldEJvdW5kaW5nQ2xpZW50UmVjdFxuZnVuY3Rpb24gZ2V0U2hvdENyb3BwZWQocGgsIHZpZXdwb3J0LCBib3VuZGluZywgZmlsZXBhdGgpIHtcbiAgY29uc3QgY29udGVudE9mZnNldCA9IF8uZGVmYXVsdHMoe30sIGJvdW5kaW5nLCB7XG4gICAgdG9wOiA5MCwgLy8gdG9wIGNocm9tZVxuICAgIGxlZnQ6IDAsXG4gICAgcmlnaHQ6IDAsXG4gICAgYm90dG9tOiAwLFxuICB9KTtcblxuICBjb25zdCBib3VuZGluZ0FyZWEgPSBfLmRlZmF1bHRzKGNvbnRlbnRPZmZzZXQsIHtcbiAgICB3aWR0aDogdmlld3BvcnQud2lkdGggLSBjb250ZW50T2Zmc2V0LmxlZnQgLSBjb250ZW50T2Zmc2V0LnJpZ2h0LFxuICAgIGhlaWdodDogdmlld3BvcnQuaGVpZ2h0IC0gY29udGVudE9mZnNldC50b3AgLSBjb250ZW50T2Zmc2V0LmJvdHRvbSxcbiAgfSk7XG5cbiAgcmV0dXJuIHBoLmNyb3AoYm91bmRpbmdBcmVhLCBmaWxlcGF0aCk7XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/screenshot.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/screenshot.js",
      "sourcesContent": [
        "const path = require('path');\nconst _ = require('lodash');\nconst getPort = require('get-port');\nconst Promise = require('bluebird');\nconst Puid = require('puid');\nconst Horseman = require('@elastic/node-horseman');\n\nconst puid = new Puid();\n\nclass Screenshot {\n  constructor(phantomPath, captureSettings, screenshotSettings, logger) {\n    this.phantomPath = phantomPath;\n    this.captureSettings = captureSettings;\n    this.screenshotSettings = screenshotSettings;\n    this.logger = logger || _.noop;\n  }\n\n  capture(url, opts) {\n    this.logger(`fetching screenshot of ${url}`);\n    opts = _.assign({ basePath: this.screenshotSettings.basePath }, opts);\n    return fetch(url, this.phantomPath, this.captureSettings, opts)\n    .then(ph => {\n      const filepath = getTargetFile(this.screenshotSettings.imagePath);\n      const operation = (opts.bounding)\n        ? getShotCropped(ph, this.captureSettings.viewport, opts.bounding, filepath)\n        : getShot(ph, filepath);\n\n      return operation\n      .then(() => {\n        this.logger(`Screenshot saved to ${filepath}`);\n        ph.close();\n        return filepath;\n      })\n      .catch((err) => {\n        this.logger(`Screenshot failed ${err.message}`);\n        ph.close();\n        throw err;\n      });\n    });\n  }\n}\n\nmodule.exports = function (phantomPath, captureSettings, screenshotSettings, logger) {\n  return new Screenshot(phantomPath, captureSettings, screenshotSettings, logger);\n};\n\nfunction fetch(url, phantomPath, captureSettings, opts) {\n  const { loadDelay, viewport, timeout } = captureSettings;\n  const phantomOpts = {\n    phantomPath: phantomPath,\n    timeout: timeout,\n    injectJquery: false,\n  };\n  const settings = {\n    width: viewport.width,\n    height: viewport.height,\n    zoom: captureSettings.zoom\n  };\n\n  return createPhantom(phantomOpts, settings)\n  .then((ph) => {\n    if (opts.headers) return ph.headers(opts.headers).then(() => ph);\n    return ph;\n  })\n  .then((ph) => {\n    return ph.open(url).then(function (status) {\n      if (status !== 'success') throw new Error('URL open failed. Is the server running?');\n      return ph;\n    });\n  })\n  .then(ph => {\n    return ph\n    .waitForSelector('.application visualize')\n    .evaluate(function (basePath) {\n      (function (window, document) {\n        function injectCSS(cssPath) {\n          var node = document.createElement('link');\n          node.rel = 'stylesheet';\n          node.href = cssPath;\n          document.getElementsByTagName('head')[0].appendChild(node);\n        };\n\n        injectCSS(basePath + '/app/reporting/assets/reporting-overrides.css');\n      }(window, window.document));\n    }, opts.basePath)\n    .wait(loadDelay)\n    .then(() => ph);\n  });\n};\n\nfunction createPhantom(phantomOpts, settings) {\n  return Promise.resolve(getPort())\n  .then(port => {\n    const instanceOpts = Object.assign({ bridgePort: port }, phantomOpts);\n    const ph = new Horseman(instanceOpts);\n    return ph.viewport(settings.width, settings.height).zoom(settings.zoom)\n    .then(() => ph);\n  });\n}\n\nfunction getTargetFile(imagePath) {\n  return path.join(imagePath, `screenshot-${puid.generate()}.png`);\n}\n\nfunction getShot(ph, filepath) {\n  return ph.screenshot(filepath);\n}\n\n// cropped screenshot using DOM element or getBoundingClientRect\n// see https://developer.mozilla.org/en-US/docs/Web/API/Element/getBoundingClientRect\nfunction getShotCropped(ph, viewport, bounding, filepath) {\n  const contentOffset = _.defaults({}, bounding, {\n    top: 90, // top chrome\n    left: 0,\n    right: 0,\n    bottom: 0,\n  });\n\n  const boundingArea = _.defaults(contentOffset, {\n    width: viewport.width - contentOffset.left - contentOffset.right,\n    height: viewport.height - contentOffset.top - contentOffset.bottom,\n  });\n\n  return ph.crop(boundingArea, filepath);\n}\n"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/routes/file.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar path = require('path');\nvar fs = require('fs');\n\nvar mainEntry = '/app/reporting/assets';\n\nmodule.exports = function (server) {\n  var modulePath = path.resolve(__dirname, '..', '..', '..', '..', 'node_modules');\n  var assetPath = path.resolve(__dirname, '..', '..', 'server', 'assets');\n\n  server.route({\n    path: mainEntry + '/font-awesome.svg',\n    method: 'GET',\n    handler: function handler(request, reply) {\n      var filepath = path.resolve(modulePath, 'font-awesome', 'fonts', 'fontawesome-webfont.svg');\n      var filestream = fs.createReadStream(filepath);\n      reply(filestream).type('image/svg+xml');\n    }\n  });\n\n  server.route({\n    path: mainEntry + '/reporting-overrides.css',\n    method: 'GET',\n    handler: function handler(request, reply) {\n      var filepath = path.resolve(assetPath, 'reporting-overrides.css');\n      var filestream = fs.createReadStream(filepath);\n      reply(filestream).type('text/css');\n    }\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvcm91dGVzL2ZpbGUuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDN0IsSUFBTSxFQUFFLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDOztBQUV6QixJQUFNLFNBQVMsR0FBRyx1QkFBdUIsQ0FBQzs7QUFFMUMsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFVLE1BQU0sRUFBRTtBQUNqQyxNQUFNLFVBQVUsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFNBQVMsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsY0FBYyxDQUFDLENBQUM7QUFDbkYsTUFBTSxTQUFTLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUM7O0FBRTFFLFFBQU0sQ0FBQyxLQUFLLENBQUM7QUFDWCxRQUFJLEVBQUssU0FBUyxzQkFBbUI7QUFDckMsVUFBTSxFQUFFLEtBQUs7QUFDYixXQUFPLEVBQUUsaUJBQVUsT0FBTyxFQUFFLEtBQUssRUFBRTtBQUNqQyxVQUFNLFFBQVEsR0FBRyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxjQUFjLEVBQUUsT0FBTyxFQUFFLHlCQUF5QixDQUFDLENBQUM7QUFDOUYsVUFBTSxVQUFVLEdBQUcsRUFBRSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ2pELFdBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsZUFBZSxDQUFDLENBQUM7S0FDekM7R0FDRixDQUFDLENBQUM7O0FBRUgsUUFBTSxDQUFDLEtBQUssQ0FBQztBQUNYLFFBQUksRUFBSyxTQUFTLDZCQUEwQjtBQUM1QyxVQUFNLEVBQUUsS0FBSztBQUNiLFdBQU8sRUFBRSxpQkFBVSxPQUFPLEVBQUUsS0FBSyxFQUFFO0FBQ2pDLFVBQU0sUUFBUSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLHlCQUF5QixDQUFDLENBQUM7QUFDcEUsVUFBTSxVQUFVLEdBQUcsRUFBRSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ2pELFdBQUssQ0FBQyxVQUFVLENBQUMsQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7S0FDcEM7R0FDRixDQUFDLENBQUM7Q0FDSixDQUFDIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvcm91dGVzL2ZpbGUuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCBwYXRoID0gcmVxdWlyZSgncGF0aCcpO1xuY29uc3QgZnMgPSByZXF1aXJlKCdmcycpO1xuXG5jb25zdCBtYWluRW50cnkgPSAnL2FwcC9yZXBvcnRpbmcvYXNzZXRzJztcblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiAoc2VydmVyKSB7XG4gIGNvbnN0IG1vZHVsZVBhdGggPSBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnLi4nLCAnLi4nLCAnLi4nLCAnLi4nLCAnbm9kZV9tb2R1bGVzJyk7XG4gIGNvbnN0IGFzc2V0UGF0aCA9IHBhdGgucmVzb2x2ZShfX2Rpcm5hbWUsICcuLicsICcuLicsICdzZXJ2ZXInLCAnYXNzZXRzJyk7XG5cbiAgc2VydmVyLnJvdXRlKHtcbiAgICBwYXRoOiBgJHttYWluRW50cnl9L2ZvbnQtYXdlc29tZS5zdmdgLFxuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gKHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgICBjb25zdCBmaWxlcGF0aCA9IHBhdGgucmVzb2x2ZShtb2R1bGVQYXRoLCAnZm9udC1hd2Vzb21lJywgJ2ZvbnRzJywgJ2ZvbnRhd2Vzb21lLXdlYmZvbnQuc3ZnJyk7XG4gICAgICBjb25zdCBmaWxlc3RyZWFtID0gZnMuY3JlYXRlUmVhZFN0cmVhbShmaWxlcGF0aCk7XG4gICAgICByZXBseShmaWxlc3RyZWFtKS50eXBlKCdpbWFnZS9zdmcreG1sJyk7XG4gICAgfVxuICB9KTtcblxuICBzZXJ2ZXIucm91dGUoe1xuICAgIHBhdGg6IGAke21haW5FbnRyeX0vcmVwb3J0aW5nLW92ZXJyaWRlcy5jc3NgLFxuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgaGFuZGxlcjogZnVuY3Rpb24gKHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgICBjb25zdCBmaWxlcGF0aCA9IHBhdGgucmVzb2x2ZShhc3NldFBhdGgsICdyZXBvcnRpbmctb3ZlcnJpZGVzLmNzcycpO1xuICAgICAgY29uc3QgZmlsZXN0cmVhbSA9IGZzLmNyZWF0ZVJlYWRTdHJlYW0oZmlsZXBhdGgpO1xuICAgICAgcmVwbHkoZmlsZXN0cmVhbSkudHlwZSgndGV4dC9jc3MnKTtcbiAgICB9XG4gIH0pO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/routes/file.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAM,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;AAC7B,IAAM,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;;AAEzB,IAAM,SAAS,GAAG,uBAAuB,CAAC;;AAE1C,MAAM,CAAC,OAAO,GAAG,UAAU,MAAM,EAAE;AACjC,MAAM,UAAU,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,cAAc,CAAC,CAAC;AACnF,MAAM,SAAS,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,IAAI,EAAE,IAAI,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC;;AAE1E,QAAM,CAAC,KAAK,CAAC;AACX,QAAI,EAAK,SAAS,sBAAmB;AACrC,UAAM,EAAE,KAAK;AACb,WAAO,EAAE,iBAAU,OAAO,EAAE,KAAK,EAAE;AACjC,UAAM,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,UAAU,EAAE,cAAc,EAAE,OAAO,EAAE,yBAAyB,CAAC,CAAC;AAC9F,UAAM,UAAU,GAAG,EAAE,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC;AACjD,WAAK,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,eAAe,CAAC,CAAC;KACzC;GACF,CAAC,CAAC;;AAEH,QAAM,CAAC,KAAK,CAAC;AACX,QAAI,EAAK,SAAS,6BAA0B;AAC5C,UAAM,EAAE,KAAK;AACb,WAAO,EAAE,iBAAU,OAAO,EAAE,KAAK,EAAE;AACjC,UAAM,QAAQ,GAAG,IAAI,CAAC,OAAO,CAAC,SAAS,EAAE,yBAAyB,CAAC,CAAC;AACpE,UAAM,UAAU,GAAG,EAAE,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAAC;AACjD,WAAK,CAAC,UAAU,CAAC,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;KACpC;GACF,CAAC,CAAC;CACJ,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/routes/file.js",
      "sourcesContent": [
        "const path = require('path');\nconst fs = require('fs');\n\nconst mainEntry = '/app/reporting/assets';\n\nmodule.exports = function (server) {\n  const modulePath = path.resolve(__dirname, '..', '..', '..', '..', 'node_modules');\n  const assetPath = path.resolve(__dirname, '..', '..', 'server', 'assets');\n\n  server.route({\n    path: `${mainEntry}/font-awesome.svg`,\n    method: 'GET',\n    handler: function (request, reply) {\n      const filepath = path.resolve(modulePath, 'font-awesome', 'fonts', 'fontawesome-webfont.svg');\n      const filestream = fs.createReadStream(filepath);\n      reply(filestream).type('image/svg+xml');\n    }\n  });\n\n  server.route({\n    path: `${mainEntry}/reporting-overrides.css`,\n    method: 'GET',\n    handler: function (request, reply) {\n      const filepath = path.resolve(assetPath, 'reporting-overrides.css');\n      const filestream = fs.createReadStream(filepath);\n      reply(filestream).type('text/css');\n    }\n  });\n};\n"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/routes/jobs.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar boom = require('boom');\n\nvar _require = require('../lib/constants');\n\nvar JOBTYPES = _require.JOBTYPES;\nvar API_BASE_URL = _require.API_BASE_URL;\n\nvar jobsQueryFactory = require('../lib/jobs_query');\nvar licensePreFactory = require('../lib/license_pre_routing');\nvar userPreRoutingFactory = require('../lib/user_pre_routing');\nvar syncJobHandlerFactory = require('../lib/sync_job_handler');\n\nvar mainEntry = API_BASE_URL + '/jobs';\nvar API_TAG = 'api';\n\nmodule.exports = function (server) {\n  var socketTimeout = server.config().get('xpack.reporting.generate.socketTimeout');\n  var jobsQuery = jobsQueryFactory(server);\n  var licensePre = licensePreFactory(server);\n  var userPreRouting = userPreRoutingFactory(server);\n  var syncJobHandler = syncJobHandlerFactory(server);\n\n  // list jobs in the queue, paginated\n  server.route({\n    path: mainEntry + '/list',\n    method: 'GET',\n    handler: function handler(request, reply) {\n      var page = parseInt(request.query.page) || 0;\n      var size = Math.min(100, parseInt(request.query.size) || 10);\n\n      var results = jobsQuery.list(request, page, size);\n      reply(results);\n    },\n    config: {\n      pre: [licensePre]\n    }\n  });\n\n  // list all completed jobs since a specified time\n  server.route({\n    path: mainEntry + '/list_completed_since',\n    method: 'GET',\n    handler: function handler(request, reply) {\n      var size = Math.min(100, parseInt(request.query.size) || 10);\n      var sinceInMs = Date.parse(request.query.since) || null;\n\n      var results = jobsQuery.listCompletedSince(request, size, sinceInMs);\n      reply(results);\n    },\n    config: {\n      pre: [licensePre]\n    }\n  });\n\n  // return the count of all jobs in the queue\n  server.route({\n    path: mainEntry + '/count',\n    method: 'GET',\n    handler: function handler(request, reply) {\n      var results = jobsQuery.count(request);\n      reply(results);\n    },\n    config: {\n      pre: [licensePre]\n    }\n  });\n\n  // return the raw output from a job\n  server.route({\n    path: mainEntry + '/output/{docId}',\n    method: 'GET',\n    handler: function handler(request, reply) {\n      var docId = request.params.docId;\n\n      jobsQuery.get(request, docId, true).then(function (doc) {\n        if (!doc) return reply(boom.notFound());\n        reply(doc._source.output);\n      });\n    },\n    config: {\n      pre: [licensePre],\n      timeout: { socket: socketTimeout }\n    }\n  });\n\n  // trigger a download of the output from a job\n  server.route({\n    path: mainEntry + '/download/{docId}',\n    method: 'GET',\n    handler: function handler(request, reply) {\n      var docId = request.params.docId;\n\n      var jobType = JOBTYPES.PRINTABLE_PDF;\n\n      syncJobHandler(docId, jobType, request, reply);\n    },\n    config: {\n      pre: [licensePre, userPreRouting],\n      timeout: { socket: socketTimeout },\n      tags: [API_TAG]\n    }\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvcm91dGVzL2pvYnMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFNLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7O2VBQ00sT0FBTyxDQUFDLGtCQUFrQixDQUFDOztJQUF0RCxRQUFRLFlBQVIsUUFBUTtJQUFFLFlBQVksWUFBWixZQUFZOztBQUM5QixJQUFNLGdCQUFnQixHQUFHLE9BQU8sQ0FBQyxtQkFBbUIsQ0FBQyxDQUFDO0FBQ3RELElBQU0saUJBQWlCLEdBQUcsT0FBTyxDQUFFLDRCQUE0QixDQUFDLENBQUM7QUFDakUsSUFBTSxxQkFBcUIsR0FBRyxPQUFPLENBQUMseUJBQXlCLENBQUMsQ0FBQztBQUNqRSxJQUFNLHFCQUFxQixHQUFHLE9BQU8sQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDOztBQUVqRSxJQUFNLFNBQVMsR0FBTSxZQUFZLFVBQU8sQ0FBQztBQUN6QyxJQUFNLE9BQU8sR0FBRyxLQUFLLENBQUM7O0FBRXRCLE1BQU0sQ0FBQyxPQUFPLEdBQUcsVUFBVSxNQUFNLEVBQUU7QUFDakMsTUFBTSxhQUFhLEdBQUcsTUFBTSxDQUFDLE1BQU0sRUFBRSxDQUFDLEdBQUcsQ0FBQyx3Q0FBd0MsQ0FBQyxDQUFDO0FBQ3BGLE1BQU0sU0FBUyxHQUFHLGdCQUFnQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzNDLE1BQU0sVUFBVSxHQUFHLGlCQUFpQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQzdDLE1BQU0sY0FBYyxHQUFHLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0FBQ3JELE1BQU0sY0FBYyxHQUFHLHFCQUFxQixDQUFDLE1BQU0sQ0FBQyxDQUFDOzs7QUFHckQsUUFBTSxDQUFDLEtBQUssQ0FBQztBQUNYLFFBQUksRUFBSyxTQUFTLFVBQU87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SyxFQUFLO1VBQ25CLEtBQUssR0FBSyxPQUFPLENBQUMsTUFBTSxDQUF4QixLQUFLOztBQUNiLFVBQU0sT0FBTyxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUM7O0FBRXZDLG9CQUFjLENBQUMsS0FBSyxFQUFFLE9BQU8sRUFBRSxPQUFPLEVBQUUsS0FBSyxDQUFDLENBQUM7S0FDaEQ7QUFDRCxVQUFNLEVBQUU7QUFDTixTQUFHLEVBQUUsQ0FBRSxVQUFVLEVBQUUsY0FBYyxDQUFFO0FBQ25DLGFBQU8sRUFBRSxFQUFFLE1BQU0sRUFBRSxhQUFhLEVBQUU7QUFDbEMsVUFBSSxFQUFFLENBQUMsT0FBTyxDQUFDO0tBQ2hCO0dBQ0YsQ0FBQyxDQUFDO0NBQ0osQ0FBQyIsImZpbGUiOiIvaG9tZS91YnVudHUvd29ya3NwYWNlL2tpYmFuYS01LjAuMi1saW51eC14ODZfNjQvcGx1Z2lucy94LXBhY2svcGx1Z2lucy9yZXBvcnRpbmcvc2VydmVyL3JvdXRlcy9qb2JzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgYm9vbSA9IHJlcXVpcmUoJ2Jvb20nKTtcbmNvbnN0IHsgSk9CVFlQRVMsIEFQSV9CQVNFX1VSTCB9ID0gcmVxdWlyZSgnLi4vbGliL2NvbnN0YW50cycpO1xuY29uc3Qgam9ic1F1ZXJ5RmFjdG9yeSA9IHJlcXVpcmUoJy4uL2xpYi9qb2JzX3F1ZXJ5Jyk7XG5jb25zdCBsaWNlbnNlUHJlRmFjdG9yeSA9IHJlcXVpcmUgKCcuLi9saWIvbGljZW5zZV9wcmVfcm91dGluZycpO1xuY29uc3QgdXNlclByZVJvdXRpbmdGYWN0b3J5ID0gcmVxdWlyZSgnLi4vbGliL3VzZXJfcHJlX3JvdXRpbmcnKTtcbmNvbnN0IHN5bmNKb2JIYW5kbGVyRmFjdG9yeSA9IHJlcXVpcmUoJy4uL2xpYi9zeW5jX2pvYl9oYW5kbGVyJyk7XG5cbmNvbnN0IG1haW5FbnRyeSA9IGAke0FQSV9CQVNFX1VSTH0vam9ic2A7XG5jb25zdCBBUElfVEFHID0gJ2FwaSc7XG5cbm1vZHVsZS5leHBvcnRzID0gZnVuY3Rpb24gKHNlcnZlcikge1xuICBjb25zdCBzb2NrZXRUaW1lb3V0ID0gc2VydmVyLmNvbmZpZygpLmdldCgneHBhY2sucmVwb3J0aW5nLmdlbmVyYXRlLnNvY2tldFRpbWVvdXQnKTtcbiAgY29uc3Qgam9ic1F1ZXJ5ID0gam9ic1F1ZXJ5RmFjdG9yeShzZXJ2ZXIpO1xuICBjb25zdCBsaWNlbnNlUHJlID0gbGljZW5zZVByZUZhY3Rvcnkoc2VydmVyKTtcbiAgY29uc3QgdXNlclByZVJvdXRpbmcgPSB1c2VyUHJlUm91dGluZ0ZhY3Rvcnkoc2VydmVyKTtcbiAgY29uc3Qgc3luY0pvYkhhbmRsZXIgPSBzeW5jSm9iSGFuZGxlckZhY3Rvcnkoc2VydmVyKTtcblxuICAvLyBsaXN0IGpvYnMgaW4gdGhlIHF1ZXVlLCBwYWdpbmF0ZWRcbiAgc2VydmVyLnJvdXRlKHtcbiAgICBwYXRoOiBgJHttYWluRW50cnl9L2xpc3RgLFxuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgaGFuZGxlcjogKHJlcXVlc3QsIHJlcGx5KSA9PiB7XG4gICAgICBjb25zdCBwYWdlID0gcGFyc2VJbnQocmVxdWVzdC5xdWVyeS5wYWdlKSB8fCAwO1xuICAgICAgY29uc3Qgc2l6ZSA9IE1hdGgubWluKDEwMCwgcGFyc2VJbnQocmVxdWVzdC5xdWVyeS5zaXplKSB8fCAxMCk7XG5cbiAgICAgIGNvbnN0IHJlc3VsdHMgPSBqb2JzUXVlcnkubGlzdChyZXF1ZXN0LCBwYWdlLCBzaXplKTtcbiAgICAgIHJlcGx5KHJlc3VsdHMpO1xuICAgIH0sXG4gICAgY29uZmlnOiB7XG4gICAgICBwcmU6IFsgbGljZW5zZVByZSBdLFxuICAgIH1cbiAgfSk7XG5cbiAgLy8gbGlzdCBhbGwgY29tcGxldGVkIGpvYnMgc2luY2UgYSBzcGVjaWZpZWQgdGltZVxuICBzZXJ2ZXIucm91dGUoe1xuICAgIHBhdGg6IGAke21haW5FbnRyeX0vbGlzdF9jb21wbGV0ZWRfc2luY2VgLFxuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgaGFuZGxlcjogKHJlcXVlc3QsIHJlcGx5KSA9PiB7XG4gICAgICBjb25zdCBzaXplID0gTWF0aC5taW4oMTAwLCBwYXJzZUludChyZXF1ZXN0LnF1ZXJ5LnNpemUpIHx8IDEwKTtcbiAgICAgIGNvbnN0IHNpbmNlSW5NcyA9IERhdGUucGFyc2UocmVxdWVzdC5xdWVyeS5zaW5jZSkgfHwgbnVsbDtcblxuICAgICAgY29uc3QgcmVzdWx0cyA9IGpvYnNRdWVyeS5saXN0Q29tcGxldGVkU2luY2UocmVxdWVzdCwgc2l6ZSwgc2luY2VJbk1zKTtcbiAgICAgIHJlcGx5KHJlc3VsdHMpO1xuICAgIH0sXG4gICAgY29uZmlnOiB7XG4gICAgICBwcmU6IFsgbGljZW5zZVByZSBdLFxuICAgIH1cbiAgfSk7XG5cbiAgLy8gcmV0dXJuIHRoZSBjb3VudCBvZiBhbGwgam9icyBpbiB0aGUgcXVldWVcbiAgc2VydmVyLnJvdXRlKHtcbiAgICBwYXRoOiBgJHttYWluRW50cnl9L2NvdW50YCxcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIGhhbmRsZXI6IChyZXF1ZXN0LCByZXBseSkgPT4ge1xuICAgICAgY29uc3QgcmVzdWx0cyA9IGpvYnNRdWVyeS5jb3VudChyZXF1ZXN0KTtcbiAgICAgIHJlcGx5KHJlc3VsdHMpO1xuICAgIH0sXG4gICAgY29uZmlnOiB7XG4gICAgICBwcmU6IFsgbGljZW5zZVByZSBdLFxuICAgIH1cbiAgfSk7XG5cbiAgLy8gcmV0dXJuIHRoZSByYXcgb3V0cHV0IGZyb20gYSBqb2JcbiAgc2VydmVyLnJvdXRlKHtcbiAgICBwYXRoOiBgJHttYWluRW50cnl9L291dHB1dC97ZG9jSWR9YCxcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIGhhbmRsZXI6IChyZXF1ZXN0LCByZXBseSkgPT4ge1xuICAgICAgY29uc3QgeyBkb2NJZCB9ID0gcmVxdWVzdC5wYXJhbXM7XG5cbiAgICAgIGpvYnNRdWVyeS5nZXQocmVxdWVzdCwgZG9jSWQsIHRydWUpXG4gICAgICAudGhlbigoZG9jKSA9PiB7XG4gICAgICAgIGlmICghZG9jKSByZXR1cm4gcmVwbHkoYm9vbS5ub3RGb3VuZCgpKTtcbiAgICAgICAgcmVwbHkoZG9jLl9zb3VyY2Uub3V0cHV0KTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgY29uZmlnOiB7XG4gICAgICBwcmU6IFsgbGljZW5zZVByZSBdLFxuICAgICAgdGltZW91dDogeyBzb2NrZXQ6IHNvY2tldFRpbWVvdXQgfSxcbiAgICB9XG4gIH0pO1xuXG4gIC8vIHRyaWdnZXIgYSBkb3dubG9hZCBvZiB0aGUgb3V0cHV0IGZyb20gYSBqb2JcbiAgc2VydmVyLnJvdXRlKHtcbiAgICBwYXRoOiBgJHttYWluRW50cnl9L2Rvd25sb2FkL3tkb2NJZH1gLFxuICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgaGFuZGxlcjogKHJlcXVlc3QsIHJlcGx5KSA9PiB7XG4gICAgICBjb25zdCB7IGRvY0lkIH0gPSByZXF1ZXN0LnBhcmFtcztcbiAgICAgIGNvbnN0IGpvYlR5cGUgPSBKT0JUWVBFUy5QUklOVEFCTEVfUERGO1xuXG4gICAgICBzeW5jSm9iSGFuZGxlcihkb2NJZCwgam9iVHlwZSwgcmVxdWVzdCwgcmVwbHkpO1xuICAgIH0sXG4gICAgY29uZmlnOiB7XG4gICAgICBwcmU6IFsgbGljZW5zZVByZSwgdXNlclByZVJvdXRpbmcgXSxcbiAgICAgIHRpbWVvdXQ6IHsgc29ja2V0OiBzb2NrZXRUaW1lb3V0IH0sXG4gICAgICB0YWdzOiBbQVBJX1RBR10sXG4gICAgfSxcbiAgfSk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/routes/jobs.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/routes/jobs.js",
      "sourcesContent": [
        "const boom = require('boom');\nconst { JOBTYPES, API_BASE_URL } = require('../lib/constants');\nconst jobsQueryFactory = require('../lib/jobs_query');\nconst licensePreFactory = require ('../lib/license_pre_routing');\nconst userPreRoutingFactory = require('../lib/user_pre_routing');\nconst syncJobHandlerFactory = require('../lib/sync_job_handler');\n\nconst mainEntry = `${API_BASE_URL}/jobs`;\nconst API_TAG = 'api';\n\nmodule.exports = function (server) {\n  const socketTimeout = server.config().get('xpack.reporting.generate.socketTimeout');\n  const jobsQuery = jobsQueryFactory(server);\n  const licensePre = licensePreFactory(server);\n  const userPreRouting = userPreRoutingFactory(server);\n  const syncJobHandler = syncJobHandlerFactory(server);\n\n  // list jobs in the queue, paginated\n  server.route({\n    path: `${mainEntry}/list`,\n    method: 'GET',\n    handler: (request, reply) => {\n      const page = parseInt(request.query.page) || 0;\n      const size = Math.min(100, parseInt(request.query.size) || 10);\n\n      const results = jobsQuery.list(request, page, size);\n      reply(results);\n    },\n    config: {\n      pre: [ licensePre ],\n    }\n  });\n\n  // list all completed jobs since a specified time\n  server.route({\n    path: `${mainEntry}/list_completed_since`,\n    method: 'GET',\n    handler: (request, reply) => {\n      const size = Math.min(100, parseInt(request.query.size) || 10);\n      const sinceInMs = Date.parse(request.query.since) || null;\n\n      const results = jobsQuery.listCompletedSince(request, size, sinceInMs);\n      reply(results);\n    },\n    config: {\n      pre: [ licensePre ],\n    }\n  });\n\n  // return the count of all jobs in the queue\n  server.route({\n    path: `${mainEntry}/count`,\n    method: 'GET',\n    handler: (request, reply) => {\n      const results = jobsQuery.count(request);\n      reply(results);\n    },\n    config: {\n      pre: [ licensePre ],\n    }\n  });\n\n  // return the raw output from a job\n  server.route({\n    path: `${mainEntry}/output/{docId}`,\n    method: 'GET',\n    handler: (request, reply) => {\n      const { docId } = request.params;\n\n      jobsQuery.get(request, docId, true)\n      .then((doc) => {\n        if (!doc) return reply(boom.notFound());\n        reply(doc._source.output);\n      });\n    },\n    config: {\n      pre: [ licensePre ],\n      timeout: { socket: socketTimeout },\n    }\n  });\n\n  // trigger a download of the output from a job\n  server.route({\n    path: `${mainEntry}/download/{docId}`,\n    method: 'GET',\n    handler: (request, reply) => {\n      const { docId } = request.params;\n      const jobType = JOBTYPES.PRINTABLE_PDF;\n\n      syncJobHandler(docId, jobType, request, reply);\n    },\n    config: {\n      pre: [ licensePre, userPreRouting ],\n      timeout: { socket: socketTimeout },\n      tags: [API_TAG],\n    },\n  });\n};\n"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/phantom.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "// Code borrowed heavily from phantomjs's install script\n// https://github.com/Medium/phantomjs/blob/v1.9.19/install.js\n\n'use strict';\n\nvar path = require('path');\nvar fs = require('fs');\nvar Promise = require('bluebird');\nvar extract = require('./extract');\n\nvar version = '1.9.8';\nvar basename = 'phantomjs-' + version;\nvar sourcePath = path.resolve(__dirname, '..', '..', '..', '..', '.phantom');\n\nfunction installPhantom() {\n  var installPath = arguments.length <= 0 || arguments[0] === undefined ? sourcePath : arguments[0];\n\n  var phantomSource = getPackage(sourcePath);\n  var phantomPackage = getPackage(installPath);\n\n  return Promise['try'](function () {\n    fs.accessSync(phantomPackage.binary, fs.X_OK);\n    return phantomPackage;\n  })['catch'](function () {\n    // error here means the binary does not exist, so install it\n    var fileType = phantomSource.ext.substring(1);\n    var filepath = phantomSource.dir + '/' + phantomSource.base;\n\n    return extract[fileType](filepath, phantomPackage.dir).then(function () {\n      return Promise['try'](function () {\n        fs.chmodSync(phantomPackage.binary, '755');\n        return phantomPackage;\n      });\n    });\n  });\n}\n\nfunction getPackage(installPath) {\n  var platform = getTargetPlatform();\n  var arch = getTargetArch();\n  var suffix = undefined;\n  var binary = undefined;\n\n  if (platform === 'linux' && arch === 'x64') {\n    binary = path.join(basename + '-linux-x86_64', 'bin', 'phantomjs');\n    suffix = 'linux-x86_64.tar.bz2';\n  } else if (platform === 'linux' && arch === 'ia32') {\n    binary = path.join(basename + '-linux-i686', 'bin', 'phantomjs');\n    suffix = 'linux-i686.tar.bz2';\n  } else if (platform === 'darwin' || platform === 'openbsd' || platform === 'freebsd') {\n    binary = path.join(basename + '-macosx', 'bin', 'phantomjs');\n    suffix = 'macosx.zip';\n  } else if (platform === 'win32') {\n    binary = path.join(basename + '-windows', 'phantomjs.exe');\n    suffix = 'windows.zip';\n  } else {\n    var msg = 'Unsupported platform: ' + platform + ' ' + arch;\n    throw new Error(msg);\n  }\n\n  var filename = basename + '-' + suffix;\n  var parsed = path.parse(path.join(installPath, filename));\n  parsed.binary = path.join(installPath, binary);\n  return parsed;\n}\n\n/**\n * @return {string}\n */\nfunction getTargetPlatform() {\n  return process.env.PHANTOMJS_PLATFORM || process.platform;\n}\n\n/**\n * @return {string}\n */\nfunction getTargetArch() {\n  return process.env.PHANTOMJS_ARCH || process.arch;\n}\n\nmodule.exports = {\n  install: installPhantom\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL3BoYW50b20uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7QUFHQSxJQUFJLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7QUFDM0IsSUFBSSxFQUFFLEdBQUcsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0FBQ3ZCLElBQUksT0FBTyxHQUFHLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQztBQUNsQyxJQUFJLE9BQU8sR0FBRyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUM7O0FBRW5DLElBQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQztBQUN4QixJQUFNLFFBQVEsR0FBRyxZQUFZLEdBQUcsT0FBTyxDQUFDO0FBQ3hDLElBQU0sVUFBVSxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUMsU0FBUyxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxVQUFVLENBQUMsQ0FBQzs7QUFFL0UsU0FBUyxjQUFjLEdBQTJCO01BQTFCLFdBQVcseURBQUcsVUFBVTs7QUFDOUMsTUFBTSxhQUFhLEdBQUcsVUFBVSxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQzdDLE1BQU0sY0FBYyxHQUFHLFVBQVUsQ0FBQyxXQUFXLENBQUMsQ0FBQzs7QUFFL0MsU0FBTyxPQUFPLE9BQUksQ0FBQyxZQUFZO0FBQzdCLE1BQUUsQ0FBQyxVQUFVLENBQUMsY0FBYyxDQUFDLE1BQU0sRUFBRSxFQUFFLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDOUMsV0FBTyxjQUFjLENBQUM7R0FDdkIsQ0FBQyxTQUNJLENBQUMsWUFBWTs7QUFFakIsUUFBSSxRQUFRLEdBQUcsYUFBYSxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLENBQUM7QUFDOUMsUUFBSSxRQUFRLEdBQUcsYUFBYSxDQUFDLEdBQUcsR0FBRyxHQUFHLEdBQUcsYUFBYSxDQUFDLElBQUksQ0FBQzs7QUFFNUQsV0FBTyxPQUFPLENBQUMsUUFBUSxDQUFDLENBQUMsUUFBUSxFQUFFLGNBQWMsQ0FBQyxHQUFHLENBQUMsQ0FDckQsSUFBSSxDQUFDLFlBQVk7QUFDaEIsYUFBTyxPQUFPLE9BQUksQ0FBQyxZQUFZO0FBQzdCLFVBQUUsQ0FBQyxTQUFTLENBQUMsY0FBYyxDQUFDLE1BQU0sRUFBRSxLQUFLLENBQUMsQ0FBQztBQUMzQyxlQUFPLGNBQWMsQ0FBQztPQUN2QixDQUFDLENBQUM7S0FDSixDQUFDLENBQUM7R0FDSixDQUFDLENBQUM7Q0FDSjs7QUFFRCxTQUFTLFVBQVUsQ0FBQyxXQUFXLEVBQUU7QUFDL0IsTUFBTSxRQUFRLEdBQUcsaUJBQWlCLEVBQUUsQ0FBQztBQUNyQyxNQUFNLElBQUksR0FBRyxhQUFhLEVBQUUsQ0FBQztBQUM3QixNQUFJLE1BQU0sWUFBQSxDQUFDO0FBQ1gsTUFBSSxNQUFNLFlBQUEsQ0FBQzs7QUFFWCxNQUFJLFFBQVEsS0FBSyxPQUFPLElBQUksSUFBSSxLQUFLLEtBQUssRUFBRTtBQUMxQyxVQUFNLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEdBQUcsZUFBZSxFQUFFLEtBQUssRUFBRSxXQUFXLENBQUMsQ0FBQztBQUNuRSxVQUFNLEdBQUcsc0JBQXNCLENBQUM7R0FDakMsTUFBTSxJQUFJLFFBQVEsS0FBSyxPQUFPLElBQUksSUFBSSxLQUFLLE1BQU0sRUFBRTtBQUNsRCxVQUFNLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxRQUFRLEdBQUcsYUFBYSxFQUFFLEtBQUssRUFBRSxXQUFXLENBQUMsQ0FBQztBQUNqRSxVQUFNLEdBQUcsb0JBQW9CLENBQUM7R0FDL0IsTUFBTSxJQUFJLFFBQVEsS0FBSyxRQUFRLElBQUksUUFBUSxLQUFLLFNBQVMsSUFBSSxRQUFRLEtBQUssU0FBUyxFQUFFO0FBQ3BGLFVBQU0sR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxTQUFTLEVBQUUsS0FBSyxFQUFFLFdBQVcsQ0FBQyxDQUFDO0FBQzdELFVBQU0sR0FBRyxZQUFZLENBQUM7R0FDdkIsTUFBTSxJQUFJLFFBQVEsS0FBSyxPQUFPLEVBQUU7QUFDL0IsVUFBTSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsUUFBUSxHQUFHLFVBQVUsRUFBRSxlQUFlLENBQUMsQ0FBQztBQUMzRCxVQUFNLEdBQUcsYUFBYSxDQUFDO0dBQ3hCLE1BQU07QUFDTCxRQUFJLEdBQUcsR0FBRyx3QkFBd0IsR0FBRyxRQUFRLEdBQUcsR0FBRyxHQUFHLElBQUksQ0FBQztBQUMzRCxVQUFNLElBQUksS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0dBQ3RCOztBQUVELE1BQUksUUFBUSxHQUFHLFFBQVEsR0FBRyxHQUFHLEdBQUcsTUFBTSxDQUFDO0FBQ3ZDLE1BQUksTUFBTSxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLEVBQUUsUUFBUSxDQUFDLENBQUMsQ0FBQztBQUMxRCxRQUFNLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLE1BQU0sQ0FBQyxDQUFDO0FBQy9DLFNBQU8sTUFBTSxDQUFDO0NBQ2Y7Ozs7O0FBS0QsU0FBUyxpQkFBaUIsR0FBRztBQUMzQixTQUFPLE9BQU8sQ0FBQyxHQUFHLENBQUMsa0JBQWtCLElBQUksT0FBTyxDQUFDLFFBQVEsQ0FBQztDQUMzRDs7Ozs7QUFLRCxTQUFTLGFBQWEsR0FBRztBQUN2QixTQUFPLE9BQU8sQ0FBQyxHQUFHLENBQUMsY0FBYyxJQUFJLE9BQU8sQ0FBQyxJQUFJLENBQUM7Q0FDbkQ7O0FBRUQsTUFBTSxDQUFDLE9BQU8sR0FBRztBQUNmLFNBQU8sRUFBRSxjQUFjO0NBQ3hCLENBQUMiLCJmaWxlIjoiL2hvbWUvdWJ1bnR1L3dvcmtzcGFjZS9raWJhbmEtNS4wLjItbGludXgteDg2XzY0L3BsdWdpbnMveC1wYWNrL3BsdWdpbnMvcmVwb3J0aW5nL3NlcnZlci9saWIvcGhhbnRvbS5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIENvZGUgYm9ycm93ZWQgaGVhdmlseSBmcm9tIHBoYW50b21qcydzIGluc3RhbGwgc2NyaXB0XG4vLyBodHRwczovL2dpdGh1Yi5jb20vTWVkaXVtL3BoYW50b21qcy9ibG9iL3YxLjkuMTkvaW5zdGFsbC5qc1xuXG52YXIgcGF0aCA9IHJlcXVpcmUoJ3BhdGgnKTtcbnZhciBmcyA9IHJlcXVpcmUoJ2ZzJyk7XG52YXIgUHJvbWlzZSA9IHJlcXVpcmUoJ2JsdWViaXJkJyk7XG52YXIgZXh0cmFjdCA9IHJlcXVpcmUoJy4vZXh0cmFjdCcpO1xuXG5jb25zdCB2ZXJzaW9uID0gJzEuOS44JztcbmNvbnN0IGJhc2VuYW1lID0gJ3BoYW50b21qcy0nICsgdmVyc2lvbjtcbmNvbnN0IHNvdXJjZVBhdGggPSBwYXRoLnJlc29sdmUoX19kaXJuYW1lLCAnLi4nLCAnLi4nLCAnLi4nLCAnLi4nLCAnLnBoYW50b20nKTtcblxuZnVuY3Rpb24gaW5zdGFsbFBoYW50b20oaW5zdGFsbFBhdGggPSBzb3VyY2VQYXRoKSB7XG4gIGNvbnN0IHBoYW50b21Tb3VyY2UgPSBnZXRQYWNrYWdlKHNvdXJjZVBhdGgpO1xuICBjb25zdCBwaGFudG9tUGFja2FnZSA9IGdldFBhY2thZ2UoaW5zdGFsbFBhdGgpO1xuXG4gIHJldHVybiBQcm9taXNlLnRyeShmdW5jdGlvbiAoKSB7XG4gICAgZnMuYWNjZXNzU3luYyhwaGFudG9tUGFja2FnZS5iaW5hcnksIGZzLlhfT0spO1xuICAgIHJldHVybiBwaGFudG9tUGFja2FnZTtcbiAgfSlcbiAgLmNhdGNoKGZ1bmN0aW9uICgpIHtcbiAgICAvLyBlcnJvciBoZXJlIG1lYW5zIHRoZSBiaW5hcnkgZG9lcyBub3QgZXhpc3QsIHNvIGluc3RhbGwgaXRcbiAgICB2YXIgZmlsZVR5cGUgPSBwaGFudG9tU291cmNlLmV4dC5zdWJzdHJpbmcoMSk7XG4gICAgdmFyIGZpbGVwYXRoID0gcGhhbnRvbVNvdXJjZS5kaXIgKyAnLycgKyBwaGFudG9tU291cmNlLmJhc2U7XG5cbiAgICByZXR1cm4gZXh0cmFjdFtmaWxlVHlwZV0oZmlsZXBhdGgsIHBoYW50b21QYWNrYWdlLmRpcilcbiAgICAudGhlbihmdW5jdGlvbiAoKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS50cnkoZnVuY3Rpb24gKCkge1xuICAgICAgICBmcy5jaG1vZFN5bmMocGhhbnRvbVBhY2thZ2UuYmluYXJ5LCAnNzU1Jyk7XG4gICAgICAgIHJldHVybiBwaGFudG9tUGFja2FnZTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9KTtcbn1cblxuZnVuY3Rpb24gZ2V0UGFja2FnZShpbnN0YWxsUGF0aCkge1xuICBjb25zdCBwbGF0Zm9ybSA9IGdldFRhcmdldFBsYXRmb3JtKCk7XG4gIGNvbnN0IGFyY2ggPSBnZXRUYXJnZXRBcmNoKCk7XG4gIGxldCBzdWZmaXg7XG4gIGxldCBiaW5hcnk7XG5cbiAgaWYgKHBsYXRmb3JtID09PSAnbGludXgnICYmIGFyY2ggPT09ICd4NjQnKSB7XG4gICAgYmluYXJ5ID0gcGF0aC5qb2luKGJhc2VuYW1lICsgJy1saW51eC14ODZfNjQnLCAnYmluJywgJ3BoYW50b21qcycpO1xuICAgIHN1ZmZpeCA9ICdsaW51eC14ODZfNjQudGFyLmJ6Mic7XG4gIH0gZWxzZSBpZiAocGxhdGZvcm0gPT09ICdsaW51eCcgJiYgYXJjaCA9PT0gJ2lhMzInKSB7XG4gICAgYmluYXJ5ID0gcGF0aC5qb2luKGJhc2VuYW1lICsgJy1saW51eC1pNjg2JywgJ2JpbicsICdwaGFudG9tanMnKTtcbiAgICBzdWZmaXggPSAnbGludXgtaTY4Ni50YXIuYnoyJztcbiAgfSBlbHNlIGlmIChwbGF0Zm9ybSA9PT0gJ2RhcndpbicgfHwgcGxhdGZvcm0gPT09ICdvcGVuYnNkJyB8fCBwbGF0Zm9ybSA9PT0gJ2ZyZWVic2QnKSB7XG4gICAgYmluYXJ5ID0gcGF0aC5qb2luKGJhc2VuYW1lICsgJy1tYWNvc3gnLCAnYmluJywgJ3BoYW50b21qcycpO1xuICAgIHN1ZmZpeCA9ICdtYWNvc3guemlwJztcbiAgfSBlbHNlIGlmIChwbGF0Zm9ybSA9PT0gJ3dpbjMyJykge1xuICAgIGJpbmFyeSA9IHBhdGguam9pbihiYXNlbmFtZSArICctd2luZG93cycsICdwaGFudG9tanMuZXhlJyk7XG4gICAgc3VmZml4ID0gJ3dpbmRvd3MuemlwJztcbiAgfSBlbHNlIHtcbiAgICB2YXIgbXNnID0gJ1Vuc3VwcG9ydGVkIHBsYXRmb3JtOiAnICsgcGxhdGZvcm0gKyAnICcgKyBhcmNoO1xuICAgIHRocm93IG5ldyBFcnJvcihtc2cpO1xuICB9XG5cbiAgdmFyIGZpbGVuYW1lID0gYmFzZW5hbWUgKyAnLScgKyBzdWZmaXg7XG4gIHZhciBwYXJzZWQgPSBwYXRoLnBhcnNlKHBhdGguam9pbihpbnN0YWxsUGF0aCwgZmlsZW5hbWUpKTtcbiAgcGFyc2VkLmJpbmFyeSA9IHBhdGguam9pbihpbnN0YWxsUGF0aCwgYmluYXJ5KTtcbiAgcmV0dXJuIHBhcnNlZDtcbn1cblxuLyoqXG4gKiBAcmV0dXJuIHtzdHJpbmd9XG4gKi9cbmZ1bmN0aW9uIGdldFRhcmdldFBsYXRmb3JtKCkge1xuICByZXR1cm4gcHJvY2Vzcy5lbnYuUEhBTlRPTUpTX1BMQVRGT1JNIHx8IHByb2Nlc3MucGxhdGZvcm07XG59XG5cbi8qKlxuICogQHJldHVybiB7c3RyaW5nfVxuICovXG5mdW5jdGlvbiBnZXRUYXJnZXRBcmNoKCkge1xuICByZXR1cm4gcHJvY2Vzcy5lbnYuUEhBTlRPTUpTX0FSQ0ggfHwgcHJvY2Vzcy5hcmNoO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgaW5zdGFsbDogaW5zdGFsbFBoYW50b21cbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/phantom.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/phantom.js",
      "sourcesContent": [
        "// Code borrowed heavily from phantomjs's install script\n// https://github.com/Medium/phantomjs/blob/v1.9.19/install.js\n\nvar path = require('path');\nvar fs = require('fs');\nvar Promise = require('bluebird');\nvar extract = require('./extract');\n\nconst version = '1.9.8';\nconst basename = 'phantomjs-' + version;\nconst sourcePath = path.resolve(__dirname, '..', '..', '..', '..', '.phantom');\n\nfunction installPhantom(installPath = sourcePath) {\n  const phantomSource = getPackage(sourcePath);\n  const phantomPackage = getPackage(installPath);\n\n  return Promise.try(function () {\n    fs.accessSync(phantomPackage.binary, fs.X_OK);\n    return phantomPackage;\n  })\n  .catch(function () {\n    // error here means the binary does not exist, so install it\n    var fileType = phantomSource.ext.substring(1);\n    var filepath = phantomSource.dir + '/' + phantomSource.base;\n\n    return extract[fileType](filepath, phantomPackage.dir)\n    .then(function () {\n      return Promise.try(function () {\n        fs.chmodSync(phantomPackage.binary, '755');\n        return phantomPackage;\n      });\n    });\n  });\n}\n\nfunction getPackage(installPath) {\n  const platform = getTargetPlatform();\n  const arch = getTargetArch();\n  let suffix;\n  let binary;\n\n  if (platform === 'linux' && arch === 'x64') {\n    binary = path.join(basename + '-linux-x86_64', 'bin', 'phantomjs');\n    suffix = 'linux-x86_64.tar.bz2';\n  } else if (platform === 'linux' && arch === 'ia32') {\n    binary = path.join(basename + '-linux-i686', 'bin', 'phantomjs');\n    suffix = 'linux-i686.tar.bz2';\n  } else if (platform === 'darwin' || platform === 'openbsd' || platform === 'freebsd') {\n    binary = path.join(basename + '-macosx', 'bin', 'phantomjs');\n    suffix = 'macosx.zip';\n  } else if (platform === 'win32') {\n    binary = path.join(basename + '-windows', 'phantomjs.exe');\n    suffix = 'windows.zip';\n  } else {\n    var msg = 'Unsupported platform: ' + platform + ' ' + arch;\n    throw new Error(msg);\n  }\n\n  var filename = basename + '-' + suffix;\n  var parsed = path.parse(path.join(installPath, filename));\n  parsed.binary = path.join(installPath, binary);\n  return parsed;\n}\n\n/**\n * @return {string}\n */\nfunction getTargetPlatform() {\n  return process.env.PHANTOMJS_PLATFORM || process.platform;\n}\n\n/**\n * @return {string}\n */\nfunction getTargetArch() {\n  return process.env.PHANTOMJS_ARCH || process.arch;\n}\n\nmodule.exports = {\n  install: installPhantom\n};\n"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/extract.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar fs = require('fs');\nvar unzip = require('unzip');\nvar bz2 = require('unbzip2-stream');\nvar tar = require('tar-fs');\n\nexports.zip = function (filepath, target) {\n  return new Promise(function (resolve, reject) {\n    var extract = unzip.Extract;\n\n    fs.createReadStream(filepath).pipe(extract({ path: target })).on('error', function () {\n      reject(new Error('Failed to unzip file'));\n    }).on('close', resolve);\n  });\n};\n\nexports.bz2 = function (filepath, target) {\n  return new Promise(function (resolve, reject) {\n    fs.createReadStream(filepath).pipe(bz2()).on('error', function () {\n      reject(new Error('Failed to unpack tar.bz2 file'));\n    }).pipe(tar.extract(target)).on('error', function () {\n      reject(new Error('Failed to unpack tar.bz2 file'));\n    }).on('finish', resolve);\n  });\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL2V4dHJhY3QuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxJQUFJLEVBQUUsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7QUFDdkIsSUFBSSxLQUFLLEdBQUcsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDO0FBQzdCLElBQUksR0FBRyxHQUFHLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDO0FBQ3BDLElBQUksR0FBRyxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQzs7QUFFNUIsT0FBTyxDQUFDLEdBQUcsR0FBRyxVQUFVLFFBQVEsRUFBRSxNQUFNLEVBQUU7QUFDeEMsU0FBTyxJQUFJLE9BQU8sQ0FBQyxVQUFVLE9BQU8sRUFBRSxNQUFNLEVBQUU7QUFDNUMsUUFBSSxPQUFPLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQzs7QUFFNUIsTUFBRSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsQ0FBQyxDQUM1QixJQUFJLENBQUMsT0FBTyxDQUFDLEVBQUUsSUFBSSxFQUFFLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FDL0IsRUFBRSxDQUFDLE9BQU8sRUFBRSxZQUFZO0FBQ3ZCLFlBQU0sQ0FBQyxJQUFJLEtBQUssQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLENBQUM7S0FDM0MsQ0FBQyxDQUNELEVBQUUsQ0FBQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUM7R0FDdkIsQ0FBQyxDQUFDO0NBQ0osQ0FBQzs7QUFFRixPQUFPLENBQUMsR0FBRyxHQUFHLFVBQVUsUUFBUSxFQUFFLE1BQU0sRUFBRTtBQUN4QyxTQUFPLElBQUksT0FBTyxDQUFDLFVBQVUsT0FBTyxFQUFFLE1BQU0sRUFBRTtBQUM1QyxNQUFFLENBQUMsZ0JBQWdCLENBQUMsUUFBUSxDQUFDLENBQzVCLElBQUksQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUNYLEVBQUUsQ0FBQyxPQUFPLEVBQUUsWUFBWTtBQUN2QixZQUFNLENBQUMsSUFBSSxLQUFLLENBQUMsK0JBQStCLENBQUMsQ0FBQyxDQUFDO0tBQ3BELENBQUMsQ0FDRCxJQUFJLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsQ0FBQyxDQUN6QixFQUFFLENBQUMsT0FBTyxFQUFFLFlBQVk7QUFDdkIsWUFBTSxDQUFDLElBQUksS0FBSyxDQUFDLCtCQUErQixDQUFDLENBQUMsQ0FBQztLQUNwRCxDQUFDLENBQ0QsRUFBRSxDQUFDLFFBQVEsRUFBRSxPQUFPLENBQUMsQ0FBQztHQUN4QixDQUFDLENBQUM7Q0FDSixDQUFDIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL2V4dHJhY3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgZnMgPSByZXF1aXJlKCdmcycpO1xudmFyIHVuemlwID0gcmVxdWlyZSgndW56aXAnKTtcbnZhciBiejIgPSByZXF1aXJlKCd1bmJ6aXAyLXN0cmVhbScpO1xudmFyIHRhciA9IHJlcXVpcmUoJ3Rhci1mcycpO1xuXG5leHBvcnRzLnppcCA9IGZ1bmN0aW9uIChmaWxlcGF0aCwgdGFyZ2V0KSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgdmFyIGV4dHJhY3QgPSB1bnppcC5FeHRyYWN0O1xuXG4gICAgZnMuY3JlYXRlUmVhZFN0cmVhbShmaWxlcGF0aClcbiAgICAucGlwZShleHRyYWN0KHsgcGF0aDogdGFyZ2V0IH0pKVxuICAgIC5vbignZXJyb3InLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZWplY3QobmV3IEVycm9yKCdGYWlsZWQgdG8gdW56aXAgZmlsZScpKTtcbiAgICB9KVxuICAgIC5vbignY2xvc2UnLCByZXNvbHZlKTtcbiAgfSk7XG59O1xuXG5leHBvcnRzLmJ6MiA9IGZ1bmN0aW9uIChmaWxlcGF0aCwgdGFyZ2V0KSB7XG4gIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSwgcmVqZWN0KSB7XG4gICAgZnMuY3JlYXRlUmVhZFN0cmVhbShmaWxlcGF0aClcbiAgICAucGlwZShiejIoKSlcbiAgICAub24oJ2Vycm9yJywgZnVuY3Rpb24gKCkge1xuICAgICAgcmVqZWN0KG5ldyBFcnJvcignRmFpbGVkIHRvIHVucGFjayB0YXIuYnoyIGZpbGUnKSk7XG4gICAgfSlcbiAgICAucGlwZSh0YXIuZXh0cmFjdCh0YXJnZXQpKVxuICAgIC5vbignZXJyb3InLCBmdW5jdGlvbiAoKSB7XG4gICAgICByZWplY3QobmV3IEVycm9yKCdGYWlsZWQgdG8gdW5wYWNrIHRhci5iejIgZmlsZScpKTtcbiAgICB9KVxuICAgIC5vbignZmluaXNoJywgcmVzb2x2ZSk7XG4gIH0pO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/extract.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAI,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;AACvB,IAAI,KAAK,GAAG,OAAO,CAAC,OAAO,CAAC,CAAC;AAC7B,IAAI,GAAG,GAAG,OAAO,CAAC,gBAAgB,CAAC,CAAC;AACpC,IAAI,GAAG,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAE5B,OAAO,CAAC,GAAG,GAAG,UAAU,QAAQ,EAAE,MAAM,EAAE;AACxC,SAAO,IAAI,OAAO,CAAC,UAAU,OAAO,EAAE,MAAM,EAAE;AAC5C,QAAI,OAAO,GAAG,KAAK,CAAC,OAAO,CAAC;;AAE5B,MAAE,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAC5B,IAAI,CAAC,OAAO,CAAC,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC,CAAC,CAC/B,EAAE,CAAC,OAAO,EAAE,YAAY;AACvB,YAAM,CAAC,IAAI,KAAK,CAAC,sBAAsB,CAAC,CAAC,CAAC;KAC3C,CAAC,CACD,EAAE,CAAC,OAAO,EAAE,OAAO,CAAC,CAAC;GACvB,CAAC,CAAC;CACJ,CAAC;;AAEF,OAAO,CAAC,GAAG,GAAG,UAAU,QAAQ,EAAE,MAAM,EAAE;AACxC,SAAO,IAAI,OAAO,CAAC,UAAU,OAAO,EAAE,MAAM,EAAE;AAC5C,MAAE,CAAC,gBAAgB,CAAC,QAAQ,CAAC,CAC5B,IAAI,CAAC,GAAG,EAAE,CAAC,CACX,EAAE,CAAC,OAAO,EAAE,YAAY;AACvB,YAAM,CAAC,IAAI,KAAK,CAAC,+BAA+B,CAAC,CAAC,CAAC;KACpD,CAAC,CACD,IAAI,CAAC,GAAG,CAAC,OAAO,CAAC,MAAM,CAAC,CAAC,CACzB,EAAE,CAAC,OAAO,EAAE,YAAY;AACvB,YAAM,CAAC,IAAI,KAAK,CAAC,+BAA+B,CAAC,CAAC,CAAC;KACpD,CAAC,CACD,EAAE,CAAC,QAAQ,EAAE,OAAO,CAAC,CAAC;GACxB,CAAC,CAAC;CACJ,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/extract.js",
      "sourcesContent": [
        "var fs = require('fs');\nvar unzip = require('unzip');\nvar bz2 = require('unbzip2-stream');\nvar tar = require('tar-fs');\n\nexports.zip = function (filepath, target) {\n  return new Promise(function (resolve, reject) {\n    var extract = unzip.Extract;\n\n    fs.createReadStream(filepath)\n    .pipe(extract({ path: target }))\n    .on('error', function () {\n      reject(new Error('Failed to unzip file'));\n    })\n    .on('close', resolve);\n  });\n};\n\nexports.bz2 = function (filepath, target) {\n  return new Promise(function (resolve, reject) {\n    fs.createReadStream(filepath)\n    .pipe(bz2())\n    .on('error', function () {\n      reject(new Error('Failed to unpack tar.bz2 file'));\n    })\n    .pipe(tar.extract(target))\n    .on('error', function () {\n      reject(new Error('Failed to unpack tar.bz2 file'));\n    })\n    .on('finish', resolve);\n  });\n};\n"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/create_queue.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar Esqueue = require('esqueue');\nvar createWorkers = require('./create_workers');\n\nvar _require = require('./constants');\n\nvar QUEUE_INDEX = _require.QUEUE_INDEX;\nvar QUEUE_DOCTYPE = _require.QUEUE_DOCTYPE;\n\nvar oncePerServer = require('./once_per_server');\n\nvar dateSeparator = '.';\n\nfunction createQueueFactory(server) {\n  var queueConfig = server.config().get('xpack.reporting.queue');\n  var client = server.plugins.elasticsearch.client;\n  var queueOptions = {\n    doctype: QUEUE_DOCTYPE,\n    interval: queueConfig.indexInterval,\n    timeout: queueConfig.timeout,\n    dateSeparator: dateSeparator,\n    client: client\n  };\n\n  var queue = new Esqueue(QUEUE_INDEX, queueOptions);\n\n  createWorkers(server)(queue);\n\n  return queue;\n}\n\nmodule.exports = oncePerServer(createQueueFactory);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL2NyZWF0ZV9xdWV1ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQU0sT0FBTyxHQUFHLE9BQU8sQ0FBQyxTQUFTLENBQUMsQ0FBQztBQUNuQyxJQUFNLGFBQWEsR0FBRyxPQUFPLENBQUMsa0JBQWtCLENBQUMsQ0FBQzs7ZUFDWCxPQUFPLENBQUMsYUFBYSxDQUFDOztJQUFyRCxXQUFXLFlBQVgsV0FBVztJQUFFLGFBQWEsWUFBYixhQUFhOztBQUNsQyxJQUFNLGFBQWEsR0FBRyxPQUFPLENBQUMsbUJBQW1CLENBQUMsQ0FBQzs7QUFFbkQsSUFBTSxhQUFhLEdBQUcsR0FBRyxDQUFDOztBQUUxQixTQUFTLGtCQUFrQixDQUFDLE1BQU0sRUFBRTtBQUNsQyxNQUFNLFdBQVcsR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLHVCQUF1QixDQUFDLENBQUM7QUFDakUsTUFBTSxNQUFNLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsTUFBTSxDQUFDO0FBQ25ELE1BQU0sWUFBWSxHQUFHO0FBQ25CLFdBQU8sRUFBRSxhQUFhO0FBQ3RCLFlBQVEsRUFBRSxXQUFXLENBQUMsYUFBYTtBQUNuQyxXQUFPLEVBQUUsV0FBVyxDQUFDLE9BQU87QUFDNUIsaUJBQWEsRUFBRSxhQUFhO0FBQzVCLFVBQU0sRUFBRSxNQUFNO0dBQ2YsQ0FBQzs7QUFFRixNQUFNLEtBQUssR0FBRyxJQUFJLE9BQU8sQ0FBQyxXQUFXLEVBQUUsWUFBWSxDQUFDLENBQUM7O0FBRXJELGVBQWEsQ0FBQyxNQUFNLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQzs7QUFFN0IsU0FBTyxLQUFLLENBQUM7Q0FDZDs7QUFFRCxNQUFNLENBQUMsT0FBTyxHQUFHLGFBQWEsQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL2NyZWF0ZV9xdWV1ZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEVzcXVldWUgPSByZXF1aXJlKCdlc3F1ZXVlJyk7XG5jb25zdCBjcmVhdGVXb3JrZXJzID0gcmVxdWlyZSgnLi9jcmVhdGVfd29ya2VycycpO1xuY29uc3QgeyBRVUVVRV9JTkRFWCwgUVVFVUVfRE9DVFlQRSB9ID0gcmVxdWlyZSgnLi9jb25zdGFudHMnKTtcbmNvbnN0IG9uY2VQZXJTZXJ2ZXIgPSByZXF1aXJlKCcuL29uY2VfcGVyX3NlcnZlcicpO1xuXG5jb25zdCBkYXRlU2VwYXJhdG9yID0gJy4nO1xuXG5mdW5jdGlvbiBjcmVhdGVRdWV1ZUZhY3Rvcnkoc2VydmVyKSB7XG4gIGNvbnN0IHF1ZXVlQ29uZmlnID0gc2VydmVyLmNvbmZpZygpLmdldCgneHBhY2sucmVwb3J0aW5nLnF1ZXVlJyk7XG4gIGNvbnN0IGNsaWVudCA9IHNlcnZlci5wbHVnaW5zLmVsYXN0aWNzZWFyY2guY2xpZW50O1xuICBjb25zdCBxdWV1ZU9wdGlvbnMgPSB7XG4gICAgZG9jdHlwZTogUVVFVUVfRE9DVFlQRSxcbiAgICBpbnRlcnZhbDogcXVldWVDb25maWcuaW5kZXhJbnRlcnZhbCxcbiAgICB0aW1lb3V0OiBxdWV1ZUNvbmZpZy50aW1lb3V0LFxuICAgIGRhdGVTZXBhcmF0b3I6IGRhdGVTZXBhcmF0b3IsXG4gICAgY2xpZW50OiBjbGllbnRcbiAgfTtcblxuICBjb25zdCBxdWV1ZSA9IG5ldyBFc3F1ZXVlKFFVRVVFX0lOREVYLCBxdWV1ZU9wdGlvbnMpO1xuXG4gIGNyZWF0ZVdvcmtlcnMoc2VydmVyKShxdWV1ZSk7XG5cbiAgcmV0dXJuIHF1ZXVlO1xufVxuXG5tb2R1bGUuZXhwb3J0cyA9IG9uY2VQZXJTZXJ2ZXIoY3JlYXRlUXVldWVGYWN0b3J5KTsiXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/create_queue.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAM,OAAO,GAAG,OAAO,CAAC,SAAS,CAAC,CAAC;AACnC,IAAM,aAAa,GAAG,OAAO,CAAC,kBAAkB,CAAC,CAAC;;eACX,OAAO,CAAC,aAAa,CAAC;;IAArD,WAAW,YAAX,WAAW;IAAE,aAAa,YAAb,aAAa;;AAClC,IAAM,aAAa,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC;;AAEnD,IAAM,aAAa,GAAG,GAAG,CAAC;;AAE1B,SAAS,kBAAkB,CAAC,MAAM,EAAE;AAClC,MAAM,WAAW,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC;AACjE,MAAM,MAAM,GAAG,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,MAAM,CAAC;AACnD,MAAM,YAAY,GAAG;AACnB,WAAO,EAAE,aAAa;AACtB,YAAQ,EAAE,WAAW,CAAC,aAAa;AACnC,WAAO,EAAE,WAAW,CAAC,OAAO;AAC5B,iBAAa,EAAE,aAAa;AAC5B,UAAM,EAAE,MAAM;GACf,CAAC;;AAEF,MAAM,KAAK,GAAG,IAAI,OAAO,CAAC,WAAW,EAAE,YAAY,CAAC,CAAC;;AAErD,eAAa,CAAC,MAAM,CAAC,CAAC,KAAK,CAAC,CAAC;;AAE7B,SAAO,KAAK,CAAC;CACd;;AAED,MAAM,CAAC,OAAO,GAAG,aAAa,CAAC,kBAAkB,CAAC,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/create_queue.js",
      "sourcesContent": [
        "const Esqueue = require('esqueue');\nconst createWorkers = require('./create_workers');\nconst { QUEUE_INDEX, QUEUE_DOCTYPE } = require('./constants');\nconst oncePerServer = require('./once_per_server');\n\nconst dateSeparator = '.';\n\nfunction createQueueFactory(server) {\n  const queueConfig = server.config().get('xpack.reporting.queue');\n  const client = server.plugins.elasticsearch.client;\n  const queueOptions = {\n    doctype: QUEUE_DOCTYPE,\n    interval: queueConfig.indexInterval,\n    timeout: queueConfig.timeout,\n    dateSeparator: dateSeparator,\n    client: client\n  };\n\n  const queue = new Esqueue(QUEUE_INDEX, queueOptions);\n\n  createWorkers(server)(queue);\n\n  return queue;\n}\n\nmodule.exports = oncePerServer(createQueueFactory);"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/create_workers.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar esqueueEvents = require('esqueue/lib/constants/events');\n\nvar _require = require('./constants');\n\nvar JOBTYPES = _require.JOBTYPES;\n\nvar workersFactory = require('./workers');\nvar oncePerServer = require('./once_per_server');\n\nfunction createWorkersFactory(server) {\n  var queueConfig = server.config().get('xpack.reporting.queue');\n  var workers = workersFactory(server);\n\n  // Once more document types are added, this will need to be passed in\n  return function registerWorkers(queue) {\n\n    var workerTypes = [JOBTYPES.PRINTABLE_PDF];\n\n    workerTypes.forEach(function (workerType) {\n      var log = function log(msg) {\n        server.log(['reporting', 'worker', 'debug'], workerType + ': ' + msg);\n      };\n\n      log('Registering ' + workerType + ' worker');\n      var workerFn = workers[workerType];\n      var workerOptions = {\n        interval: queueConfig.pollInterval\n      };\n      var worker = queue.registerWorker(workerType, workerFn, workerOptions);\n\n      worker.on(esqueueEvents.EVENT_WORKER_COMPLETE, function (res) {\n        return log('Worker completed: (' + res.job.id + ')');\n      });\n      worker.on(esqueueEvents.EVENT_WORKER_JOB_EXECUTION_ERROR, function (res) {\n        return log('Worker error: (' + res.job.id + ')');\n      });\n      worker.on(esqueueEvents.EVENT_WORKER_JOB_TIMEOUT, function (res) {\n        return log('Job timeout exceeded: (' + res.job.id + ')');\n      });\n    });\n  };\n};\n\nmodule.exports = oncePerServer(createWorkersFactory);\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL2NyZWF0ZV93b3JrZXJzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7O0FBQUEsSUFBTSxhQUFhLEdBQUcsT0FBTyxDQUFDLDhCQUE4QixDQUFDLENBQUM7O2VBQ3pDLE9BQU8sQ0FBQyxhQUFhLENBQUM7O0lBQW5DLFFBQVEsWUFBUixRQUFROztBQUNoQixJQUFNLGNBQWMsR0FBRyxPQUFPLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDNUMsSUFBTSxhQUFhLEdBQUcsT0FBTyxDQUFDLG1CQUFtQixDQUFDLENBQUM7O0FBRW5ELFNBQVMsb0JBQW9CLENBQUMsTUFBTSxFQUFFO0FBQ3BDLE1BQU0sV0FBVyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxHQUFHLENBQUMsdUJBQXVCLENBQUMsQ0FBQztBQUNqRSxNQUFNLE9BQU8sR0FBRyxjQUFjLENBQUMsTUFBTSxDQUFDLENBQUM7OztBQUd2QyxTQUFPLFNBQVMsZUFBZSxDQUFDLEtBQUssRUFBRTs7QUFFckMsUUFBTSxXQUFXLEdBQUcsQ0FDbEIsUUFBUSxDQUFDLGFBQWEsQ0FDdkIsQ0FBQzs7QUFFRixlQUFXLENBQUMsT0FBTyxDQUFDLFVBQUMsVUFBVSxFQUFLO0FBQ2xDLFVBQU0sR0FBRyxHQUFHLFNBQU4sR0FBRyxDQUFJLEdBQUcsRUFBSztBQUNuQixjQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsV0FBVyxFQUFFLFFBQVEsRUFBRSxPQUFPLENBQUMsRUFBSyxVQUFVLFVBQUssR0FBRyxDQUFHLENBQUM7T0FDdkUsQ0FBQzs7QUFFRixTQUFHLGtCQUFnQixVQUFVLGFBQVUsQ0FBQztBQUN4QyxVQUFNLFFBQVEsR0FBRyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUM7QUFDckMsVUFBTSxhQUFhLEdBQUc7QUFDcEIsZ0JBQVEsRUFBRSxXQUFXLENBQUMsWUFBWTtPQUNuQyxDQUFDO0FBQ0YsVUFBTSxNQUFNLEdBQUcsS0FBSyxDQUFDLGNBQWMsQ0FBQyxVQUFVLEVBQUUsUUFBUSxFQUFFLGFBQWEsQ0FBQyxDQUFDOztBQUV6RSxZQUFNLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxxQkFBcUIsRUFBRSxVQUFDLEdBQUc7ZUFBSyxHQUFHLHlCQUF1QixHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsT0FBSTtPQUFBLENBQUMsQ0FBQztBQUNsRyxZQUFNLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyxnQ0FBZ0MsRUFBRSxVQUFDLEdBQUc7ZUFBSyxHQUFHLHFCQUFtQixHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsT0FBSTtPQUFBLENBQUMsQ0FBQztBQUN6RyxZQUFNLENBQUMsRUFBRSxDQUFDLGFBQWEsQ0FBQyx3QkFBd0IsRUFBRSxVQUFDLEdBQUc7ZUFBSyxHQUFHLDZCQUEyQixHQUFHLENBQUMsR0FBRyxDQUFDLEVBQUUsT0FBSTtPQUFBLENBQUMsQ0FBQztLQUMxRyxDQUFDLENBQUM7R0FDSixDQUFDO0NBQ0gsQ0FBQzs7QUFFRixNQUFNLENBQUMsT0FBTyxHQUFHLGFBQWEsQ0FBQyxvQkFBb0IsQ0FBQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL2NyZWF0ZV93b3JrZXJzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgZXNxdWV1ZUV2ZW50cyA9IHJlcXVpcmUoJ2VzcXVldWUvbGliL2NvbnN0YW50cy9ldmVudHMnKTtcbmNvbnN0IHsgSk9CVFlQRVMgfSA9IHJlcXVpcmUoJy4vY29uc3RhbnRzJyk7XG5jb25zdCB3b3JrZXJzRmFjdG9yeSA9IHJlcXVpcmUoJy4vd29ya2VycycpO1xuY29uc3Qgb25jZVBlclNlcnZlciA9IHJlcXVpcmUoJy4vb25jZV9wZXJfc2VydmVyJyk7XG5cbmZ1bmN0aW9uIGNyZWF0ZVdvcmtlcnNGYWN0b3J5KHNlcnZlcikge1xuICBjb25zdCBxdWV1ZUNvbmZpZyA9IHNlcnZlci5jb25maWcoKS5nZXQoJ3hwYWNrLnJlcG9ydGluZy5xdWV1ZScpO1xuICBjb25zdCB3b3JrZXJzID0gd29ya2Vyc0ZhY3Rvcnkoc2VydmVyKTtcblxuICAvLyBPbmNlIG1vcmUgZG9jdW1lbnQgdHlwZXMgYXJlIGFkZGVkLCB0aGlzIHdpbGwgbmVlZCB0byBiZSBwYXNzZWQgaW5cbiAgcmV0dXJuIGZ1bmN0aW9uIHJlZ2lzdGVyV29ya2VycyhxdWV1ZSkge1xuXG4gICAgY29uc3Qgd29ya2VyVHlwZXMgPSBbXG4gICAgICBKT0JUWVBFUy5QUklOVEFCTEVfUERGXG4gICAgXTtcblxuICAgIHdvcmtlclR5cGVzLmZvckVhY2goKHdvcmtlclR5cGUpID0+IHtcbiAgICAgIGNvbnN0IGxvZyA9IChtc2cpID0+IHtcbiAgICAgICAgc2VydmVyLmxvZyhbJ3JlcG9ydGluZycsICd3b3JrZXInLCAnZGVidWcnXSwgYCR7d29ya2VyVHlwZX06ICR7bXNnfWApO1xuICAgICAgfTtcblxuICAgICAgbG9nKGBSZWdpc3RlcmluZyAke3dvcmtlclR5cGV9IHdvcmtlcmApO1xuICAgICAgY29uc3Qgd29ya2VyRm4gPSB3b3JrZXJzW3dvcmtlclR5cGVdO1xuICAgICAgY29uc3Qgd29ya2VyT3B0aW9ucyA9IHtcbiAgICAgICAgaW50ZXJ2YWw6IHF1ZXVlQ29uZmlnLnBvbGxJbnRlcnZhbFxuICAgICAgfTtcbiAgICAgIGNvbnN0IHdvcmtlciA9IHF1ZXVlLnJlZ2lzdGVyV29ya2VyKHdvcmtlclR5cGUsIHdvcmtlckZuLCB3b3JrZXJPcHRpb25zKTtcblxuICAgICAgd29ya2VyLm9uKGVzcXVldWVFdmVudHMuRVZFTlRfV09SS0VSX0NPTVBMRVRFLCAocmVzKSA9PiBsb2coYFdvcmtlciBjb21wbGV0ZWQ6ICgke3Jlcy5qb2IuaWR9KWApKTtcbiAgICAgIHdvcmtlci5vbihlc3F1ZXVlRXZlbnRzLkVWRU5UX1dPUktFUl9KT0JfRVhFQ1VUSU9OX0VSUk9SLCAocmVzKSA9PiBsb2coYFdvcmtlciBlcnJvcjogKCR7cmVzLmpvYi5pZH0pYCkpO1xuICAgICAgd29ya2VyLm9uKGVzcXVldWVFdmVudHMuRVZFTlRfV09SS0VSX0pPQl9USU1FT1VULCAocmVzKSA9PiBsb2coYEpvYiB0aW1lb3V0IGV4Y2VlZGVkOiAoJHtyZXMuam9iLmlkfSlgKSk7XG4gICAgfSk7XG4gIH07XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IG9uY2VQZXJTZXJ2ZXIoY3JlYXRlV29ya2Vyc0ZhY3RvcnkpO1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/create_workers.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAM,aAAa,GAAG,OAAO,CAAC,8BAA8B,CAAC,CAAC;;eACzC,OAAO,CAAC,aAAa,CAAC;;IAAnC,QAAQ,YAAR,QAAQ;;AAChB,IAAM,cAAc,GAAG,OAAO,CAAC,WAAW,CAAC,CAAC;AAC5C,IAAM,aAAa,GAAG,OAAO,CAAC,mBAAmB,CAAC,CAAC;;AAEnD,SAAS,oBAAoB,CAAC,MAAM,EAAE;AACpC,MAAM,WAAW,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,uBAAuB,CAAC,CAAC;AACjE,MAAM,OAAO,GAAG,cAAc,CAAC,MAAM,CAAC,CAAC;;;AAGvC,SAAO,SAAS,eAAe,CAAC,KAAK,EAAE;;AAErC,QAAM,WAAW,GAAG,CAClB,QAAQ,CAAC,aAAa,CACvB,CAAC;;AAEF,eAAW,CAAC,OAAO,CAAC,UAAC,UAAU,EAAK;AAClC,UAAM,GAAG,GAAG,SAAN,GAAG,CAAI,GAAG,EAAK;AACnB,cAAM,CAAC,GAAG,CAAC,CAAC,WAAW,EAAE,QAAQ,EAAE,OAAO,CAAC,EAAK,UAAU,UAAK,GAAG,CAAG,CAAC;OACvE,CAAC;;AAEF,SAAG,kBAAgB,UAAU,aAAU,CAAC;AACxC,UAAM,QAAQ,GAAG,OAAO,CAAC,UAAU,CAAC,CAAC;AACrC,UAAM,aAAa,GAAG;AACpB,gBAAQ,EAAE,WAAW,CAAC,YAAY;OACnC,CAAC;AACF,UAAM,MAAM,GAAG,KAAK,CAAC,cAAc,CAAC,UAAU,EAAE,QAAQ,EAAE,aAAa,CAAC,CAAC;;AAEzE,YAAM,CAAC,EAAE,CAAC,aAAa,CAAC,qBAAqB,EAAE,UAAC,GAAG;eAAK,GAAG,yBAAuB,GAAG,CAAC,GAAG,CAAC,EAAE,OAAI;OAAA,CAAC,CAAC;AAClG,YAAM,CAAC,EAAE,CAAC,aAAa,CAAC,gCAAgC,EAAE,UAAC,GAAG;eAAK,GAAG,qBAAmB,GAAG,CAAC,GAAG,CAAC,EAAE,OAAI;OAAA,CAAC,CAAC;AACzG,YAAM,CAAC,EAAE,CAAC,aAAa,CAAC,wBAAwB,EAAE,UAAC,GAAG;eAAK,GAAG,6BAA2B,GAAG,CAAC,GAAG,CAAC,EAAE,OAAI;OAAA,CAAC,CAAC;KAC1G,CAAC,CAAC;GACJ,CAAC;CACH,CAAC;;AAEF,MAAM,CAAC,OAAO,GAAG,aAAa,CAAC,oBAAoB,CAAC,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/create_workers.js",
      "sourcesContent": [
        "const esqueueEvents = require('esqueue/lib/constants/events');\nconst { JOBTYPES } = require('./constants');\nconst workersFactory = require('./workers');\nconst oncePerServer = require('./once_per_server');\n\nfunction createWorkersFactory(server) {\n  const queueConfig = server.config().get('xpack.reporting.queue');\n  const workers = workersFactory(server);\n\n  // Once more document types are added, this will need to be passed in\n  return function registerWorkers(queue) {\n\n    const workerTypes = [\n      JOBTYPES.PRINTABLE_PDF\n    ];\n\n    workerTypes.forEach((workerType) => {\n      const log = (msg) => {\n        server.log(['reporting', 'worker', 'debug'], `${workerType}: ${msg}`);\n      };\n\n      log(`Registering ${workerType} worker`);\n      const workerFn = workers[workerType];\n      const workerOptions = {\n        interval: queueConfig.pollInterval\n      };\n      const worker = queue.registerWorker(workerType, workerFn, workerOptions);\n\n      worker.on(esqueueEvents.EVENT_WORKER_COMPLETE, (res) => log(`Worker completed: (${res.job.id})`));\n      worker.on(esqueueEvents.EVENT_WORKER_JOB_EXECUTION_ERROR, (res) => log(`Worker error: (${res.job.id})`));\n      worker.on(esqueueEvents.EVENT_WORKER_JOB_TIMEOUT, (res) => log(`Job timeout exceeded: (${res.job.id})`));\n    });\n  };\n};\n\nmodule.exports = oncePerServer(createWorkersFactory);\n"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/config/config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar os = require('os');\nvar defaultCPUCount = 2;\n\nfunction cpuCount() {\n  try {\n    return os.cpus().length;\n  } catch (e) {\n    return defaultCPUCount;\n  }\n};\n\nmodule.exports = {\n  concurrency: cpuCount()\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvY29uZmlnL2NvbmZpZy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQU0sRUFBRSxHQUFHLE9BQU8sQ0FBQyxJQUFJLENBQUMsQ0FBQztBQUN6QixJQUFNLGVBQWUsR0FBRyxDQUFDLENBQUM7O0FBRTFCLFNBQVMsUUFBUSxHQUFHO0FBQ2xCLE1BQUk7QUFDRixXQUFPLEVBQUUsQ0FBQyxJQUFJLEVBQUUsQ0FBQyxNQUFNLENBQUM7R0FDekIsQ0FBQyxPQUFPLENBQUMsRUFBRTtBQUNWLFdBQU8sZUFBZSxDQUFDO0dBQ3hCO0NBQ0YsQ0FBQzs7QUFFRixNQUFNLENBQUMsT0FBTyxHQUFHO0FBQ2YsYUFBVyxFQUFFLFFBQVEsRUFBRTtDQUN4QixDQUFDIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvY29uZmlnL2NvbmZpZy5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IG9zID0gcmVxdWlyZSgnb3MnKTtcbmNvbnN0IGRlZmF1bHRDUFVDb3VudCA9IDI7XG5cbmZ1bmN0aW9uIGNwdUNvdW50KCkge1xuICB0cnkge1xuICAgIHJldHVybiBvcy5jcHVzKCkubGVuZ3RoO1xuICB9IGNhdGNoIChlKSB7XG4gICAgcmV0dXJuIGRlZmF1bHRDUFVDb3VudDtcbiAgfVxufTtcblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGNvbmN1cnJlbmN5OiBjcHVDb3VudCgpXG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/config/config.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAM,EAAE,GAAG,OAAO,CAAC,IAAI,CAAC,CAAC;AACzB,IAAM,eAAe,GAAG,CAAC,CAAC;;AAE1B,SAAS,QAAQ,GAAG;AAClB,MAAI;AACF,WAAO,EAAE,CAAC,IAAI,EAAE,CAAC,MAAM,CAAC;GACzB,CAAC,OAAO,CAAC,EAAE;AACV,WAAO,eAAe,CAAC;GACxB;CACF,CAAC;;AAEF,MAAM,CAAC,OAAO,GAAG;AACf,aAAW,EAAE,QAAQ,EAAE;CACxB,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/config/config.js",
      "sourcesContent": [
        "const os = require('os');\nconst defaultCPUCount = 2;\n\nfunction cpuCount() {\n  try {\n    return os.cpus().length;\n  } catch (e) {\n    return defaultCPUCount;\n  }\n};\n\nmodule.exports = {\n  concurrency: cpuCount()\n};\n"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/check_license.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nmodule.exports = function (xpackLicenseInfo) {\n\n  // If, for some reason, we cannot get the license information\n  // from Elasticsearch, assume worst case and disable reporting\n  if (!xpackLicenseInfo || !xpackLicenseInfo.isAvailable()) {\n    return {\n      showLinks: true,\n      enableLinks: false,\n      message: 'You cannot use Reporting because license information is not available at this time.'\n    };\n  }\n\n  var VALID_LICENSE_MODES_TO_ENABLE_REPORTING = ['trial', 'standard', 'gold', 'platinum'];\n\n  var isLicenseModeValid = xpackLicenseInfo.license.isOneOf(VALID_LICENSE_MODES_TO_ENABLE_REPORTING);\n  var isLicenseActive = xpackLicenseInfo.license.isActive();\n\n  // License is not valid\n  if (!isLicenseModeValid) {\n    return {\n      showLinks: false,\n      message: 'Your ' + xpackLicenseInfo.license.getType() + ' license does not support Reporting. Please upgrade your license.'\n    };\n  }\n\n  // License is valid but not active\n  if (!isLicenseActive) {\n    return {\n      showLinks: true,\n      enableLinks: false,\n      message: 'You cannot use Reporting because your ' + xpackLicenseInfo.license.getType() + ' license has expired.'\n    };\n  }\n\n  // License is valid and active\n  return {\n    showLinks: true,\n    enableLinks: true\n  };\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL2NoZWNrX2xpY2Vuc2UuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxNQUFNLENBQUMsT0FBTyxHQUFHLFVBQVUsZ0JBQWdCLEVBQUU7Ozs7QUFJM0MsTUFBSSxDQUFDLGdCQUFnQixJQUFJLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxFQUFFLEVBQUU7QUFDeEQsV0FBTztBQUNMLGVBQVMsRUFBRSxJQUFJO0FBQ2YsaUJBQVcsRUFBRSxLQUFLO0FBQ2xCLGFBQU8sRUFBRSxxRkFBcUY7S0FDL0YsQ0FBQztHQUNIOztBQUVELE1BQU0sdUNBQXVDLEdBQUcsQ0FDOUMsT0FBTyxFQUNQLFVBQVUsRUFDVixNQUFNLEVBQ04sVUFBVSxDQUNYLENBQUM7O0FBRUYsTUFBTSxrQkFBa0IsR0FBRyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLHVDQUF1QyxDQUFDLENBQUM7QUFDckcsTUFBTSxlQUFlLEdBQUcsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFDOzs7QUFHNUQsTUFBSSxDQUFDLGtCQUFrQixFQUFFO0FBQ3ZCLFdBQU87QUFDTCxlQUFTLEVBQUUsS0FBSztBQUNoQixhQUFPLFlBQVUsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxzRUFBbUU7S0FDdkgsQ0FBQztHQUNIOzs7QUFHRCxNQUFJLENBQUMsZUFBZSxFQUFFO0FBQ3BCLFdBQU87QUFDTCxlQUFTLEVBQUUsSUFBSTtBQUNmLGlCQUFXLEVBQUUsS0FBSztBQUNsQixhQUFPLDZDQUEyQyxnQkFBZ0IsQ0FBQyxPQUFPLENBQUMsT0FBTyxFQUFFLDBCQUF1QjtLQUM1RyxDQUFDO0dBQ0g7OztBQUdELFNBQU87QUFDTCxhQUFTLEVBQUUsSUFBSTtBQUNmLGVBQVcsRUFBRSxJQUFJO0dBQ2xCLENBQUM7Q0FDSCxDQUFDIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL2NoZWNrX2xpY2Vuc2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJtb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uICh4cGFja0xpY2Vuc2VJbmZvKSB7XG5cbiAgLy8gSWYsIGZvciBzb21lIHJlYXNvbiwgd2UgY2Fubm90IGdldCB0aGUgbGljZW5zZSBpbmZvcm1hdGlvblxuICAvLyBmcm9tIEVsYXN0aWNzZWFyY2gsIGFzc3VtZSB3b3JzdCBjYXNlIGFuZCBkaXNhYmxlIHJlcG9ydGluZ1xuICBpZiAoIXhwYWNrTGljZW5zZUluZm8gfHwgIXhwYWNrTGljZW5zZUluZm8uaXNBdmFpbGFibGUoKSkge1xuICAgIHJldHVybiB7XG4gICAgICBzaG93TGlua3M6IHRydWUsXG4gICAgICBlbmFibGVMaW5rczogZmFsc2UsXG4gICAgICBtZXNzYWdlOiAnWW91IGNhbm5vdCB1c2UgUmVwb3J0aW5nIGJlY2F1c2UgbGljZW5zZSBpbmZvcm1hdGlvbiBpcyBub3QgYXZhaWxhYmxlIGF0IHRoaXMgdGltZS4nXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IFZBTElEX0xJQ0VOU0VfTU9ERVNfVE9fRU5BQkxFX1JFUE9SVElORyA9IFtcbiAgICAndHJpYWwnLFxuICAgICdzdGFuZGFyZCcsXG4gICAgJ2dvbGQnLFxuICAgICdwbGF0aW51bSdcbiAgXTtcblxuICBjb25zdCBpc0xpY2Vuc2VNb2RlVmFsaWQgPSB4cGFja0xpY2Vuc2VJbmZvLmxpY2Vuc2UuaXNPbmVPZihWQUxJRF9MSUNFTlNFX01PREVTX1RPX0VOQUJMRV9SRVBPUlRJTkcpO1xuICBjb25zdCBpc0xpY2Vuc2VBY3RpdmUgPSB4cGFja0xpY2Vuc2VJbmZvLmxpY2Vuc2UuaXNBY3RpdmUoKTtcblxuICAvLyBMaWNlbnNlIGlzIG5vdCB2YWxpZFxuICBpZiAoIWlzTGljZW5zZU1vZGVWYWxpZCkge1xuICAgIHJldHVybiB7XG4gICAgICBzaG93TGlua3M6IGZhbHNlLFxuICAgICAgbWVzc2FnZTogYFlvdXIgJHt4cGFja0xpY2Vuc2VJbmZvLmxpY2Vuc2UuZ2V0VHlwZSgpfSBsaWNlbnNlIGRvZXMgbm90IHN1cHBvcnQgUmVwb3J0aW5nLiBQbGVhc2UgdXBncmFkZSB5b3VyIGxpY2Vuc2UuYFxuICAgIH07XG4gIH1cblxuICAvLyBMaWNlbnNlIGlzIHZhbGlkIGJ1dCBub3QgYWN0aXZlXG4gIGlmICghaXNMaWNlbnNlQWN0aXZlKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNob3dMaW5rczogdHJ1ZSxcbiAgICAgIGVuYWJsZUxpbmtzOiBmYWxzZSxcbiAgICAgIG1lc3NhZ2U6IGBZb3UgY2Fubm90IHVzZSBSZXBvcnRpbmcgYmVjYXVzZSB5b3VyICR7eHBhY2tMaWNlbnNlSW5mby5saWNlbnNlLmdldFR5cGUoKX0gbGljZW5zZSBoYXMgZXhwaXJlZC5gXG4gICAgfTtcbiAgfVxuXG4gIC8vIExpY2Vuc2UgaXMgdmFsaWQgYW5kIGFjdGl2ZVxuICByZXR1cm4ge1xuICAgIHNob3dMaW5rczogdHJ1ZSxcbiAgICBlbmFibGVMaW5rczogdHJ1ZVxuICB9O1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/check_license.js"
      ],
      "names": [],
      "mappings": ";;AAAA,MAAM,CAAC,OAAO,GAAG,UAAU,gBAAgB,EAAE;;;;AAI3C,MAAI,CAAC,gBAAgB,IAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE,EAAE;AACxD,WAAO;AACL,eAAS,EAAE,IAAI;AACf,iBAAW,EAAE,KAAK;AAClB,aAAO,EAAE,qFAAqF;KAC/F,CAAC;GACH;;AAED,MAAM,uCAAuC,GAAG,CAC9C,OAAO,EACP,UAAU,EACV,MAAM,EACN,UAAU,CACX,CAAC;;AAEF,MAAM,kBAAkB,GAAG,gBAAgB,CAAC,OAAO,CAAC,OAAO,CAAC,uCAAuC,CAAC,CAAC;AACrG,MAAM,eAAe,GAAG,gBAAgB,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;;;AAG5D,MAAI,CAAC,kBAAkB,EAAE;AACvB,WAAO;AACL,eAAS,EAAE,KAAK;AAChB,aAAO,YAAU,gBAAgB,CAAC,OAAO,CAAC,OAAO,EAAE,sEAAmE;KACvH,CAAC;GACH;;;AAGD,MAAI,CAAC,eAAe,EAAE;AACpB,WAAO;AACL,eAAS,EAAE,IAAI;AACf,iBAAW,EAAE,KAAK;AAClB,aAAO,6CAA2C,gBAAgB,CAAC,OAAO,CAAC,OAAO,EAAE,0BAAuB;KAC5G,CAAC;GACH;;;AAGD,SAAO;AACL,aAAS,EAAE,IAAI;AACf,eAAW,EAAE,IAAI;GAClB,CAAC;CACH,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/check_license.js",
      "sourcesContent": [
        "module.exports = function (xpackLicenseInfo) {\n\n  // If, for some reason, we cannot get the license information\n  // from Elasticsearch, assume worst case and disable reporting\n  if (!xpackLicenseInfo || !xpackLicenseInfo.isAvailable()) {\n    return {\n      showLinks: true,\n      enableLinks: false,\n      message: 'You cannot use Reporting because license information is not available at this time.'\n    };\n  }\n\n  const VALID_LICENSE_MODES_TO_ENABLE_REPORTING = [\n    'trial',\n    'standard',\n    'gold',\n    'platinum'\n  ];\n\n  const isLicenseModeValid = xpackLicenseInfo.license.isOneOf(VALID_LICENSE_MODES_TO_ENABLE_REPORTING);\n  const isLicenseActive = xpackLicenseInfo.license.isActive();\n\n  // License is not valid\n  if (!isLicenseModeValid) {\n    return {\n      showLinks: false,\n      message: `Your ${xpackLicenseInfo.license.getType()} license does not support Reporting. Please upgrade your license.`\n    };\n  }\n\n  // License is valid but not active\n  if (!isLicenseActive) {\n    return {\n      showLinks: true,\n      enableLinks: false,\n      message: `You cannot use Reporting because your ${xpackLicenseInfo.license.getType()} license has expired.`\n    };\n  }\n\n  // License is valid and active\n  return {\n    showLinks: true,\n    enableLinks: true\n  };\n};\n"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/validate_config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nvar crypto = require('crypto');\n\nmodule.exports = function (config, log) {\n  if (config.get('xpack.reporting.encryptionKey') == null) {\n    log('Generating a random key for xpack.reporting.encryptionKey. To prevent pending reports from failing on ' + 'restart, please set xpack.reporting.encryptionKey in kibana.yml');\n    config.set('xpack.reporting.encryptionKey', crypto.randomBytes(16).toString('hex'));\n  }\n\n  var syncSocketTimeout = config.get('xpack.reporting.queue.syncSocketTimeout');\n  if (syncSocketTimeout != null) {\n    var message = 'xpack.reporting.queue.syncSocketTimeout has been deprecated.' + ' Please use xpack.reporting.generate.socketTimeout instead.';\n    log(message);\n    config.set('xpack.reporting.generate.socketTimeout', syncSocketTimeout);\n  }\n};\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3JlcG9ydGluZy9zZXJ2ZXIvbGliL3ZhbGlkYXRlX2NvbmZpZy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLElBQU0sTUFBTSxHQUFHLE9BQU8sQ0FBQyxRQUFRLENBQUMsQ0FBQzs7QUFFakMsTUFBTSxDQUFDLE9BQU8sR0FBRyxVQUFDLE1BQU0sRUFBRSxHQUFHLEVBQUs7QUFDaEMsTUFBSSxNQUFNLENBQUMsR0FBRyxDQUFDLCtCQUErQixDQUFDLElBQUksSUFBSSxFQUFFO0FBQ3ZELE9BQUcsQ0FBQyx3R0FBd0csR0FDMUcsaUVBQWlFLENBQUMsQ0FBQztBQUNyRSxVQUFNLENBQUMsR0FBRyxDQUFDLCtCQUErQixFQUFFLE1BQU0sQ0FBQyxXQUFXLENBQUMsRUFBRSxDQUFDLENBQUMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUM7R0FDckY7O0FBRUQsTUFBTSxpQkFBaUIsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLHlDQUF5QyxDQUFDLENBQUM7QUFDaEYsTUFBSSxpQkFBaUIsSUFBSSxJQUFJLEVBQUU7QUFDN0IsUUFBTSxPQUFPLEdBQUcsOERBQThELEdBQzFFLDZEQUE2RCxDQUFDO0FBQ2xFLE9BQUcsQ0FBRSxPQUFPLENBQUMsQ0FBQztBQUNkLFVBQU0sQ0FBQyxHQUFHLENBQUMsd0NBQXdDLEVBQUUsaUJBQWlCLENBQUMsQ0FBQztHQUN6RTtDQUNGLENBQUMiLCJmaWxlIjoiL2hvbWUvdWJ1bnR1L3dvcmtzcGFjZS9raWJhbmEtNS4wLjItbGludXgteDg2XzY0L3BsdWdpbnMveC1wYWNrL3BsdWdpbnMvcmVwb3J0aW5nL3NlcnZlci9saWIvdmFsaWRhdGVfY29uZmlnLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgY3J5cHRvID0gcmVxdWlyZSgnY3J5cHRvJyk7XG5cbm1vZHVsZS5leHBvcnRzID0gKGNvbmZpZywgbG9nKSA9PiB7XG4gIGlmIChjb25maWcuZ2V0KCd4cGFjay5yZXBvcnRpbmcuZW5jcnlwdGlvbktleScpID09IG51bGwpIHtcbiAgICBsb2coJ0dlbmVyYXRpbmcgYSByYW5kb20ga2V5IGZvciB4cGFjay5yZXBvcnRpbmcuZW5jcnlwdGlvbktleS4gVG8gcHJldmVudCBwZW5kaW5nIHJlcG9ydHMgZnJvbSBmYWlsaW5nIG9uICcgK1xuICAgICAgJ3Jlc3RhcnQsIHBsZWFzZSBzZXQgeHBhY2sucmVwb3J0aW5nLmVuY3J5cHRpb25LZXkgaW4ga2liYW5hLnltbCcpO1xuICAgIGNvbmZpZy5zZXQoJ3hwYWNrLnJlcG9ydGluZy5lbmNyeXB0aW9uS2V5JywgY3J5cHRvLnJhbmRvbUJ5dGVzKDE2KS50b1N0cmluZygnaGV4JykpO1xuICB9XG5cbiAgY29uc3Qgc3luY1NvY2tldFRpbWVvdXQgPSBjb25maWcuZ2V0KCd4cGFjay5yZXBvcnRpbmcucXVldWUuc3luY1NvY2tldFRpbWVvdXQnKTtcbiAgaWYgKHN5bmNTb2NrZXRUaW1lb3V0ICE9IG51bGwpIHtcbiAgICBjb25zdCBtZXNzYWdlID0gJ3hwYWNrLnJlcG9ydGluZy5xdWV1ZS5zeW5jU29ja2V0VGltZW91dCBoYXMgYmVlbiBkZXByZWNhdGVkLidcbiAgICAgICsgJyBQbGVhc2UgdXNlIHhwYWNrLnJlcG9ydGluZy5nZW5lcmF0ZS5zb2NrZXRUaW1lb3V0IGluc3RlYWQuJztcbiAgICBsb2cgKG1lc3NhZ2UpO1xuICAgIGNvbmZpZy5zZXQoJ3hwYWNrLnJlcG9ydGluZy5nZW5lcmF0ZS5zb2NrZXRUaW1lb3V0Jywgc3luY1NvY2tldFRpbWVvdXQpO1xuICB9XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/validate_config.js"
      ],
      "names": [],
      "mappings": ";;AAAA,IAAM,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;AAEjC,MAAM,CAAC,OAAO,GAAG,UAAC,MAAM,EAAE,GAAG,EAAK;AAChC,MAAI,MAAM,CAAC,GAAG,CAAC,+BAA+B,CAAC,IAAI,IAAI,EAAE;AACvD,OAAG,CAAC,wGAAwG,GAC1G,iEAAiE,CAAC,CAAC;AACrE,UAAM,CAAC,GAAG,CAAC,+BAA+B,EAAE,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;GACrF;;AAED,MAAM,iBAAiB,GAAG,MAAM,CAAC,GAAG,CAAC,yCAAyC,CAAC,CAAC;AAChF,MAAI,iBAAiB,IAAI,IAAI,EAAE;AAC7B,QAAM,OAAO,GAAG,8DAA8D,GAC1E,6DAA6D,CAAC;AAClE,OAAG,CAAE,OAAO,CAAC,CAAC;AACd,UAAM,CAAC,GAAG,CAAC,wCAAwC,EAAE,iBAAiB,CAAC,CAAC;GACzE;CACF,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/reporting/server/lib/validate_config.js",
      "sourcesContent": [
        "const crypto = require('crypto');\n\nmodule.exports = (config, log) => {\n  if (config.get('xpack.reporting.encryptionKey') == null) {\n    log('Generating a random key for xpack.reporting.encryptionKey. To prevent pending reports from failing on ' +\n      'restart, please set xpack.reporting.encryptionKey in kibana.yml');\n    config.set('xpack.reporting.encryptionKey', crypto.randomBytes(16).toString('hex'));\n  }\n\n  const syncSocketTimeout = config.get('xpack.reporting.queue.syncSocketTimeout');\n  if (syncSocketTimeout != null) {\n    const message = 'xpack.reporting.queue.syncSocketTimeout has been deprecated.'\n      + ' Please use xpack.reporting.generate.socketTimeout instead.';\n    log (message);\n    config.set('xpack.reporting.generate.socketTimeout', syncSocketTimeout);\n  }\n};\n"
      ]
    },
    "mtime": 1485775596029
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/index.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "hapi-auth-basic",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "hapiAuthBasic"
              }
            ]
          },
          {
            "source": "hapi-auth-cookie",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "hapiAuthCookie"
              }
            ]
          },
          {
            "source": "path",
            "imported": [
              "resolve"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "resolve",
                "local": "resolve"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Promise"
              }
            ]
          },
          {
            "source": "./server/lib/get_basic_validate",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "getBasicValidate"
              }
            ]
          },
          {
            "source": "./server/lib/get_cookie_validate",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "getCookieValidate"
              }
            ]
          },
          {
            "source": "./server/lib/create_expose",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "createExpose"
              }
            ]
          },
          {
            "source": "./server/routes/api/v1/authenticate",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "initAuthenticateApi"
              }
            ]
          },
          {
            "source": "./server/routes/api/v1/users",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "initUsersApi"
              }
            ]
          },
          {
            "source": "./server/routes/api/v1/roles",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "initRolesApi"
              }
            ]
          },
          {
            "source": "./server/routes/api/v1/indices",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "initIndicesApi"
              }
            ]
          },
          {
            "source": "./server/routes/views/login",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "initLoginView"
              }
            ]
          },
          {
            "source": "./server/routes/views/logout",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "initLogoutView"
              }
            ]
          },
          {
            "source": "./server/lib/validate_config",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "validateConfig"
              }
            ]
          },
          {
            "source": "./server/lib/set_elasticsearch_auth",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "setElasticsearchAuth"
              }
            ]
          },
          {
            "source": "./server/lib/login_scheme",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "createScheme"
              }
            ]
          },
          {
            "source": "./server/lib/check_license",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "checkLicense"
              }
            ]
          },
          {
            "source": "../../server/lib/mirror_plugin_status",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "mirrorPluginStatus"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _hapiAuthBasic = require('hapi-auth-basic');\n\nvar _hapiAuthBasic2 = _interopRequireDefault(_hapiAuthBasic);\n\nvar _hapiAuthCookie = require('hapi-auth-cookie');\n\nvar _hapiAuthCookie2 = _interopRequireDefault(_hapiAuthCookie);\n\nvar _path = require('path');\n\nvar _bluebird = require('bluebird');\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _serverLibGet_basic_validate = require('./server/lib/get_basic_validate');\n\nvar _serverLibGet_basic_validate2 = _interopRequireDefault(_serverLibGet_basic_validate);\n\nvar _serverLibGet_cookie_validate = require('./server/lib/get_cookie_validate');\n\nvar _serverLibGet_cookie_validate2 = _interopRequireDefault(_serverLibGet_cookie_validate);\n\nvar _serverLibCreate_expose = require('./server/lib/create_expose');\n\nvar _serverLibCreate_expose2 = _interopRequireDefault(_serverLibCreate_expose);\n\nvar _serverRoutesApiV1Authenticate = require('./server/routes/api/v1/authenticate');\n\nvar _serverRoutesApiV1Authenticate2 = _interopRequireDefault(_serverRoutesApiV1Authenticate);\n\nvar _serverRoutesApiV1Users = require('./server/routes/api/v1/users');\n\nvar _serverRoutesApiV1Users2 = _interopRequireDefault(_serverRoutesApiV1Users);\n\nvar _serverRoutesApiV1Roles = require('./server/routes/api/v1/roles');\n\nvar _serverRoutesApiV1Roles2 = _interopRequireDefault(_serverRoutesApiV1Roles);\n\nvar _serverRoutesApiV1Indices = require('./server/routes/api/v1/indices');\n\nvar _serverRoutesApiV1Indices2 = _interopRequireDefault(_serverRoutesApiV1Indices);\n\nvar _serverRoutesViewsLogin = require('./server/routes/views/login');\n\nvar _serverRoutesViewsLogin2 = _interopRequireDefault(_serverRoutesViewsLogin);\n\nvar _serverRoutesViewsLogout = require('./server/routes/views/logout');\n\nvar _serverRoutesViewsLogout2 = _interopRequireDefault(_serverRoutesViewsLogout);\n\nvar _serverLibValidate_config = require('./server/lib/validate_config');\n\nvar _serverLibValidate_config2 = _interopRequireDefault(_serverLibValidate_config);\n\nvar _serverLibSet_elasticsearch_auth = require('./server/lib/set_elasticsearch_auth');\n\nvar _serverLibSet_elasticsearch_auth2 = _interopRequireDefault(_serverLibSet_elasticsearch_auth);\n\nvar _serverLibLogin_scheme = require('./server/lib/login_scheme');\n\nvar _serverLibLogin_scheme2 = _interopRequireDefault(_serverLibLogin_scheme);\n\nvar _serverLibCheck_license = require('./server/lib/check_license');\n\nvar _serverLibCheck_license2 = _interopRequireDefault(_serverLibCheck_license);\n\nvar _serverLibMirror_plugin_status = require('../../server/lib/mirror_plugin_status');\n\nvar _serverLibMirror_plugin_status2 = _interopRequireDefault(_serverLibMirror_plugin_status);\n\nexports['default'] = function (kibana) {\n  return new kibana.Plugin({\n    id: 'security',\n    configPrefix: 'xpack.security',\n    publicDir: (0, _path.resolve)(__dirname, 'public'),\n    require: ['kibana', 'elasticsearch', 'xpack_main'],\n\n    config: function config(Joi) {\n      return Joi.object({\n        enabled: Joi.boolean()['default'](true),\n        cookieName: Joi.string()['default']('sid'),\n        encryptionKey: Joi.string(),\n        sessionTimeout: Joi.number().allow(null)['default'](null),\n        secureCookies: Joi.boolean()['default'](false)\n      })['default']();\n    },\n\n    uiExports: {\n      chromeNavControls: ['plugins/security/views/nav_control'],\n      managementSections: ['plugins/security/views/management'],\n      apps: [{\n        id: 'login',\n        title: 'Login',\n        main: 'plugins/security/views/login',\n        hidden: true,\n        injectVars: function injectVars(server) {\n          var pluginId = 'security';\n          var xpackInfo = server.plugins.xpack_main.info;\n\n          var _ref = xpackInfo.feature(pluginId).getLicenseCheckResults() || {};\n\n          var showLogin = _ref.showLogin;\n          var loginMessage = _ref.loginMessage;\n          var allowLogin = _ref.allowLogin;\n\n          return {\n            loginState: {\n              showLogin: showLogin,\n              allowLogin: allowLogin,\n              loginMessage: loginMessage\n            }\n          };\n        }\n      }, {\n        id: 'logout',\n        title: 'Logout',\n        main: 'plugins/security/views/logout',\n        hidden: true\n      }],\n      hacks: ['plugins/security/hacks/on_session_timeout', 'plugins/security/hacks/on_unauthorized_response'],\n      injectDefaultVars: function injectDefaultVars(server) {\n\n        var config = server.config();\n        return {\n          secureCookies: config.get('xpack.security.secureCookies'),\n          sessionTimeout: config.get('xpack.security.sessionTimeout')\n        };\n      }\n    },\n\n    preInit: function preInit(server) {\n      (0, _serverLibSet_elasticsearch_auth2['default'])(server.config());\n    },\n\n    init: function init(server) {\n      var thisPlugin = this;\n      var xpackMainPlugin = server.plugins.xpack_main;\n      (0, _serverLibMirror_plugin_status2['default'])(xpackMainPlugin, thisPlugin);\n      xpackMainPlugin.status.once('green', function () {\n        // Register a function that is called whenever the xpack info changes,\n        // to re-compute the license check results for this plugin\n        xpackMainPlugin.info.feature(thisPlugin.id).registerLicenseCheckResultsGenerator(_serverLibCheck_license2['default']);\n      });\n\n      var config = server.config();\n      (0, _serverLibValidate_config2['default'])(config, function (message) {\n        return server.log(['security', 'warning'], message);\n      });\n\n      var cookieName = config.get('xpack.security.cookieName');\n\n      var register = _bluebird2['default'].promisify(server.register, { context: server });\n      _bluebird2['default'].all([register(_hapiAuthBasic2['default']), register(_hapiAuthCookie2['default'])]).then(function () {\n        server.auth.scheme('login', (0, _serverLibLogin_scheme2['default'])({\n          redirectUrl: function redirectUrl(path) {\n            return loginUrl(config.get('server.basePath'), path);\n          },\n          strategies: ['security-cookie', 'security-basic']\n        }));\n\n        server.auth.strategy('session', 'login', 'required');\n\n        server.auth.strategy('security-basic', 'basic', false, {\n          validateFunc: (0, _serverLibGet_basic_validate2['default'])(server)\n        });\n\n        server.auth.strategy('security-cookie', 'cookie', false, {\n          cookie: cookieName,\n          password: config.get('xpack.security.encryptionKey'),\n          clearInvalid: true,\n          validateFunc: (0, _serverLibGet_cookie_validate2['default'])(server),\n          isSecure: config.get('xpack.security.secureCookies'),\n          path: config.get('server.basePath') + '/'\n        });\n      });\n\n      (0, _serverLibCreate_expose2['default'])(server);\n\n      (0, _serverRoutesApiV1Authenticate2['default'])(server);\n      (0, _serverRoutesApiV1Users2['default'])(server);\n      (0, _serverRoutesApiV1Roles2['default'])(server);\n      (0, _serverRoutesApiV1Indices2['default'])(server);\n      (0, _serverRoutesViewsLogin2['default'])(server, thisPlugin, xpackMainPlugin);\n      (0, _serverRoutesViewsLogout2['default'])(server, thisPlugin);\n    }\n  });\n};\n\nfunction loginUrl(baseUrl, requestedPath) {\n  var next = encodeURIComponent(requestedPath);\n  return baseUrl + '/login?next=' + next;\n}\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L2luZGV4LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7OzZCQUEwQixpQkFBaUI7Ozs7OEJBQ2hCLGtCQUFrQjs7OztvQkFDckIsTUFBTTs7d0JBQ1YsVUFBVTs7OzsyQ0FDRCxpQ0FBaUM7Ozs7NENBQ2hDLGtDQUFrQzs7OztzQ0FDdkMsNEJBQTRCOzs7OzZDQUNyQixxQ0FBcUM7Ozs7c0NBQzVDLDhCQUE4Qjs7OztzQ0FDOUIsOEJBQThCOzs7O3dDQUM1QixnQ0FBZ0M7Ozs7c0NBQ2pDLDZCQUE2Qjs7Ozt1Q0FDNUIsOEJBQThCOzs7O3dDQUM5Qiw4QkFBOEI7Ozs7K0NBQ3hCLHFDQUFxQzs7OztxQ0FDN0MsMkJBQTJCOzs7O3NDQUMzQiw0QkFBNEI7Ozs7NkNBQ3RCLHVDQUF1Qzs7OztxQkFFdkQsVUFBQyxNQUFNO1NBQUssSUFBSSxNQUFNLENBQUMsTUFBTSxDQUFDO0FBQzNDLE1BQUUsRUFBRSxVQUFVO0FBQ2QsZ0JBQVksRUFBRSxnQkFBZ0I7QUFDOUIsYUFBUyxFQUFFLG1CQUFRLFNBQVMsRUFBRSxRQUFRLENBQUM7QUFDdkMsV0FBTyxFQUFFLENBQUMsUUFBUSxFQUFFLGVBQWUsRUFBRSxZQUFZLENBQUM7O0FBRWxELFVBQU0sRUFBQSxnQkFBQyxHQUFHLEVBQUU7QUFDVixhQUFPLEdBQUcsQ0FBQyxNQUFNLENBQUM7QUFDaEIsZUFBTyxFQUFFLEdBQUcsQ0FBQyxPQUFPLEVBQUUsV0FBUSxDQUFDLElBQUksQ0FBQztBQUNwQyxrQkFBVSxFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUUsV0FBUSxDQUFDLEtBQUssQ0FBQztBQUN2QyxxQkFBYSxFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQUU7QUFDM0Isc0JBQWMsRUFBRSxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUks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RUFBRSxlQUFlLENBQUMsQ0FBQztBQUNuRCxnREFBZSxNQUFNLEVBQUUsVUFBVSxDQUFDLENBQUM7S0FFcEM7R0FDRixDQUFDO0NBQUE7O0FBRUYsU0FBUyxRQUFRLENBQUMsT0FBTyxFQUFFLGFBQWEsRUFBRTtBQUN4QyxNQUFNLElBQUksR0FBRyxrQkFBa0IsQ0FBQyxhQUFhLENBQUMsQ0FBQztBQUMvQyxTQUFVLE9BQU8sb0JBQWUsSUFBSSxDQUFHO0NBQ3hDIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L2luZGV4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGhhcGlBdXRoQmFzaWMgZnJvbSAnaGFwaS1hdXRoLWJhc2ljJztcbmltcG9ydCBoYXBpQXV0aENvb2tpZSBmcm9tICdoYXBpLWF1dGgtY29va2llJztcbmltcG9ydCB7IHJlc29sdmUgfSBmcm9tICdwYXRoJztcbmltcG9ydCBQcm9taXNlIGZyb20gJ2JsdWViaXJkJztcbmltcG9ydCBnZXRCYXNpY1ZhbGlkYXRlIGZyb20gJy4vc2VydmVyL2xpYi9nZXRfYmFzaWNfdmFsaWRhdGUnO1xuaW1wb3J0IGdldENvb2tpZVZhbGlkYXRlIGZyb20gJy4vc2VydmVyL2xpYi9nZXRfY29va2llX3ZhbGlkYXRlJztcbmltcG9ydCBjcmVhdGVFeHBvc2UgZnJvbSAnLi9zZXJ2ZXIvbGliL2NyZWF0ZV9leHBvc2UnO1xuaW1wb3J0IGluaXRBdXRoZW50aWNhdGVBcGkgZnJvbSAnLi9zZXJ2ZXIvcm91dGVzL2FwaS92MS9hdXRoZW50aWNhdGUnO1xuaW1wb3J0IGluaXRVc2Vyc0FwaSBmcm9tICcuL3NlcnZlci9yb3V0ZXMvYXBpL3YxL3VzZXJzJztcbmltcG9ydCBpbml0Um9sZXNBcGkgZnJvbSAnLi9zZXJ2ZXIvcm91dGVzL2FwaS92MS9yb2xlcyc7XG5pbXBvcnQgaW5pdEluZGljZXNBcGkgZnJvbSAnLi9zZXJ2ZXIvcm91dGVzL2FwaS92MS9pbmRpY2VzJztcbmltcG9ydCBpbml0TG9naW5WaWV3IGZyb20gJy4vc2VydmVyL3JvdXRlcy92aWV3cy9sb2dpbic7XG5pbXBvcnQgaW5pdExvZ291dFZpZXcgZnJvbSAnLi9zZXJ2ZXIvcm91dGVzL3ZpZXdzL2xvZ291dCc7XG5pbXBvcnQgdmFsaWRhdGVDb25maWcgZnJvbSAnLi9zZXJ2ZXIvbGliL3ZhbGlkYXRlX2NvbmZpZyc7XG5pbXBvcnQgc2V0RWxhc3RpY3NlYXJjaEF1dGggZnJvbSAnLi9zZXJ2ZXIvbGliL3NldF9lbGFzdGljc2VhcmNoX2F1dGgnO1xuaW1wb3J0IGNyZWF0ZVNjaGVtZSBmcm9tICcuL3NlcnZlci9saWIvbG9naW5fc2NoZW1lJztcbmltcG9ydCBjaGVja0xpY2Vuc2UgZnJvbSAnLi9zZXJ2ZXIvbGliL2NoZWNrX2xpY2Vuc2UnO1xuaW1wb3J0IG1pcnJvclBsdWdpblN0YXR1cyBmcm9tICcuLi8uLi9zZXJ2ZXIvbGliL21pcnJvcl9wbHVnaW5fc3RhdHVzJztcblxuZXhwb3J0IGRlZmF1bHQgKGtpYmFuYSkgPT4gbmV3IGtpYmFuYS5QbHVnaW4oe1xuICBpZDogJ3NlY3VyaXR5JyxcbiAgY29uZmlnUHJlZml4OiAneHBhY2suc2VjdXJpdHknLFxuICBwdWJsaWNEaXI6IHJlc29sdmUoX19kaXJuYW1lLCAncHVibGljJyksXG4gIHJlcXVpcmU6IFsna2liYW5hJywgJ2VsYXN0aWNzZWFyY2gnLCAneHBhY2tfbWFpbiddLFxuXG4gIGNvbmZpZyhKb2kpIHtcbiAgICByZXR1cm4gSm9pLm9iamVjdCh7XG4gICAgICBlbmFibGVkOiBKb2kuYm9vbGVhbigpLmRlZmF1bHQodHJ1ZSksXG4gICAgICBjb29raWVOYW1lOiBKb2kuc3RyaW5nKCkuZGVmYXVsdCgnc2lkJyksXG4gICAgICBlbmNyeXB0aW9uS2V5OiBKb2kuc3RyaW5nKCksXG4gICAgICBzZXNzaW9uVGltZW91dDogSm9pLm51bWJlcigpLmFsbG93KG51bGwpLmRlZmF1bHQobnVsbCksXG4gICAgICBzZWN1cmVDb29raWVzOiBKb2kuYm9vbGVhbigpLmRlZmF1bHQoZmFsc2UpXG4gICAgfSkuZGVmYXVsdCgpO1xuICB9LFxuXG4gIHVpRXhwb3J0czoge1xuICAgIGNocm9tZU5hdkNvbnRyb2xzOiBbJ3BsdWdpbnMvc2VjdXJpdHkvdmlld3MvbmF2X2NvbnRyb2wnXSxcbiAgICBtYW5hZ2VtZW50U2VjdGlvbnM6IFsncGx1Z2lucy9zZWN1cml0eS92aWV3cy9tYW5hZ2VtZW50J10sXG4gICAgYXBwczogW3tcbiAgICAgIGlkOiAnbG9naW4nLFxuICAgICAgdGl0bGU6ICdMb2dpbicsXG4gICAgICBtYWluOiAncGx1Z2lucy9zZWN1cml0eS92aWV3cy9sb2dpbicsXG4gICAgICBoaWRkZW46IHRydWUsXG4gICAgICBpbmplY3RWYXJzKHNlcnZlcikge1xuICAgICAgICBjb25zdCBwbHVnaW5JZCA9ICdzZWN1cml0eSc7XG4gICAgICAgIGNvbnN0IHhwYWNrSW5mbyA9IHNlcnZlci5wbHVnaW5zLnhwYWNrX21haW4uaW5mbztcbiAgICAgICAgY29uc3QgeyBzaG93TG9naW4sIGxvZ2luTWVzc2FnZSwgYWxsb3dMb2dpbiB9ID0geHBhY2tJbmZvLmZlYXR1cmUocGx1Z2luSWQpLmdldExpY2Vuc2VDaGVja1Jlc3VsdHMoKSB8fCB7fTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGxvZ2luU3RhdGU6IHtcbiAgICAgICAgICAgIHNob3dMb2dpbixcbiAgICAgICAgICAgIGFsbG93TG9naW4sXG4gICAgICAgICAgICBsb2dpbk1lc3NhZ2VcbiAgICAgICAgICB9XG4gICAgICAgIH07XG4gICAgICB9XG4gICAgfSwge1xuICAgICAgaWQ6ICdsb2dvdXQnLFxuICAgICAgdGl0bGU6ICdMb2dvdXQnLFxuICAgICAgbWFpbjogJ3BsdWdpbnMvc2VjdXJpdHkvdmlld3MvbG9nb3V0JyxcbiAgICAgIGhpZGRlbjogdHJ1ZVxuICAgIH1dLFxuICAgIGhhY2tzOiBbXG4gICAgICAncGx1Z2lucy9zZWN1cml0eS9oYWNrcy9vbl9zZXNzaW9uX3RpbWVvdXQnLFxuICAgICAgJ3BsdWdpbnMvc2VjdXJpdHkvaGFja3Mvb25fdW5hdXRob3JpemVkX3Jlc3BvbnNlJ1xuICAgIF0sXG4gICAgaW5qZWN0RGVmYXVsdFZhcnM6IGZ1bmN0aW9uIChzZXJ2ZXIpIHtcblxuICAgICAgY29uc3QgY29uZmlnID0gc2VydmVyLmNvbmZpZygpO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgc2VjdXJlQ29va2llczogY29uZmlnLmdldCgneHBhY2suc2VjdXJpdHkuc2VjdXJlQ29va2llcycpLFxuICAgICAgICBzZXNzaW9uVGltZW91dDogY29uZmlnLmdldCgneHBhY2suc2VjdXJpdHkuc2Vzc2lvblRpbWVvdXQnKVxuICAgICAgfTtcbiAgICB9XG4gIH0sXG5cbiAgcHJlSW5pdChzZXJ2ZXIpIHtcbiAgICBzZXRFbGFzdGljc2VhcmNoQXV0aChzZXJ2ZXIuY29uZmlnKCkpO1xuICB9LFxuXG4gIGluaXQoc2VydmVyKSB7XG4gICAgY29uc3QgdGhpc1BsdWdpbiA9IHRoaXM7XG4gICAgY29uc3QgeHBhY2tNYWluUGx1Z2luID0gc2VydmVyLnBsdWdpbnMueHBhY2tfbWFpbjtcbiAgICBtaXJyb3JQbHVnaW5TdGF0dXMoeHBhY2tNYWluUGx1Z2luLCB0aGlzUGx1Z2luKTtcbiAgICB4cGFja01haW5QbHVnaW4uc3RhdHVzLm9uY2UoJ2dyZWVuJywgKCkgPT4ge1xuICAgICAgLy8gUmVnaXN0ZXIgYSBmdW5jdGlvbiB0aGF0IGlzIGNhbGxlZCB3aGVuZXZlciB0aGUgeHBhY2sgaW5mbyBjaGFuZ2VzLFxuICAgICAgLy8gdG8gcmUtY29tcHV0ZSB0aGUgbGljZW5zZSBjaGVjayByZXN1bHRzIGZvciB0aGlzIHBsdWdpblxuICAgICAgeHBhY2tNYWluUGx1Z2luLmluZm8uZmVhdHVyZSh0aGlzUGx1Z2luLmlkKS5yZWdpc3RlckxpY2Vuc2VDaGVja1Jlc3VsdHNHZW5lcmF0b3IoY2hlY2tMaWNlbnNlKTtcbiAgICB9KTtcblxuICAgIGNvbnN0IGNvbmZpZyA9IHNlcnZlci5jb25maWcoKTtcbiAgICB2YWxpZGF0ZUNvbmZpZyhjb25maWcsIG1lc3NhZ2UgPT4gc2VydmVyLmxvZyhbJ3NlY3VyaXR5JywgJ3dhcm5pbmcnXSwgbWVzc2FnZSkpO1xuXG4gICAgY29uc3QgY29va2llTmFtZSA9IGNvbmZpZy5nZXQoJ3hwYWNrLnNlY3VyaXR5LmNvb2tpZU5hbWUnKTtcblxuICAgIGNvbnN0IHJlZ2lzdGVyID0gUHJvbWlzZS5wcm9taXNpZnkoc2VydmVyLnJlZ2lzdGVyLCB7Y29udGV4dDogc2VydmVyfSk7XG4gICAgUHJvbWlzZS5hbGwoW1xuICAgICAgcmVnaXN0ZXIoaGFwaUF1dGhCYXNpYyksXG4gICAgICByZWdpc3RlcihoYXBpQXV0aENvb2tpZSlcbiAgICBdKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIHNlcnZlci5hdXRoLnNjaGVtZSgnbG9naW4nLCBjcmVhdGVTY2hlbWUoe1xuICAgICAgICByZWRpcmVjdFVybDogKHBhdGgpID0+IGxvZ2luVXJsKGNvbmZpZy5nZXQoJ3NlcnZlci5iYXNlUGF0aCcpLCBwYXRoKSxcbiAgICAgICAgc3RyYXRlZ2llczogWydzZWN1cml0eS1jb29raWUnLCAnc2VjdXJpdHktYmFzaWMnXVxuICAgICAgfSkpO1xuXG4gICAgICBzZXJ2ZXIuYXV0aC5zdHJhdGVneSgnc2Vzc2lvbicsICdsb2dpbicsICdyZXF1aXJlZCcpO1xuXG4gICAgICBzZXJ2ZXIuYXV0aC5zdHJhdGVneSgnc2VjdXJpdHktYmFzaWMnLCAnYmFzaWMnLCBmYWxzZSwge1xuICAgICAgICB2YWxpZGF0ZUZ1bmM6IGdldEJhc2ljVmFsaWRhdGUoc2VydmVyKVxuICAgICAgfSk7XG5cbiAgICAgIHNlcnZlci5hdXRoLnN0cmF0ZWd5KCdzZWN1cml0eS1jb29raWUnLCAnY29va2llJywgZmFsc2UsIHtcbiAgICAgICAgY29va2llOiBjb29raWVOYW1lLFxuICAgICAgICBwYXNzd29yZDogY29uZmlnLmdldCgneHBhY2suc2VjdXJpdHkuZW5jcnlwdGlvbktleScpLFxuICAgICAgICBjbGVhckludmFsaWQ6IHRydWUsXG4gICAgICAgIHZhbGlkYXRlRnVuYzogZ2V0Q29va2llVmFsaWRhdGUoc2VydmVyKSxcbiAgICAgICAgaXNTZWN1cmU6IGNvbmZpZy5nZXQoJ3hwYWNrLnNlY3VyaXR5LnNlY3VyZUNvb2tpZXMnKSxcbiAgICAgICAgcGF0aDogY29uZmlnLmdldCgnc2VydmVyLmJhc2VQYXRoJykgKyAnLydcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgY3JlYXRlRXhwb3NlKHNlcnZlcik7XG5cbiAgICBpbml0QXV0aGVudGljYXRlQXBpKHNlcnZlcik7XG4gICAgaW5pdFVzZXJzQXBpKHNlcnZlcik7XG4gICAgaW5pdFJvbGVzQXBpKHNlcnZlcik7XG4gICAgaW5pdEluZGljZXNBcGkoc2VydmVyKTtcbiAgICBpbml0TG9naW5WaWV3KHNlcnZlciwgdGhpc1BsdWdpbiwgeHBhY2tNYWluUGx1Z2luKTtcbiAgICBpbml0TG9nb3V0VmlldyhzZXJ2ZXIsIHRoaXNQbHVnaW4pO1xuXG4gIH1cbn0pO1xuXG5mdW5jdGlvbiBsb2dpblVybChiYXNlVXJsLCByZXF1ZXN0ZWRQYXRoKSB7XG4gIGNvbnN0IG5leHQgPSBlbmNvZGVVUklDb21wb25lbnQocmVxdWVzdGVkUGF0aCk7XG4gIHJldHVybiBgJHtiYXNlVXJsfS9sb2dpbj9uZXh0PSR7bmV4dH1gO1xufVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/index.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/index.js",
      "sourcesContent": [
        "import hapiAuthBasic from 'hapi-auth-basic';\nimport hapiAuthCookie from 'hapi-auth-cookie';\nimport { resolve } from 'path';\nimport Promise from 'bluebird';\nimport getBasicValidate from './server/lib/get_basic_validate';\nimport getCookieValidate from './server/lib/get_cookie_validate';\nimport createExpose from './server/lib/create_expose';\nimport initAuthenticateApi from './server/routes/api/v1/authenticate';\nimport initUsersApi from './server/routes/api/v1/users';\nimport initRolesApi from './server/routes/api/v1/roles';\nimport initIndicesApi from './server/routes/api/v1/indices';\nimport initLoginView from './server/routes/views/login';\nimport initLogoutView from './server/routes/views/logout';\nimport validateConfig from './server/lib/validate_config';\nimport setElasticsearchAuth from './server/lib/set_elasticsearch_auth';\nimport createScheme from './server/lib/login_scheme';\nimport checkLicense from './server/lib/check_license';\nimport mirrorPluginStatus from '../../server/lib/mirror_plugin_status';\n\nexport default (kibana) => new kibana.Plugin({\n  id: 'security',\n  configPrefix: 'xpack.security',\n  publicDir: resolve(__dirname, 'public'),\n  require: ['kibana', 'elasticsearch', 'xpack_main'],\n\n  config(Joi) {\n    return Joi.object({\n      enabled: Joi.boolean().default(true),\n      cookieName: Joi.string().default('sid'),\n      encryptionKey: Joi.string(),\n      sessionTimeout: Joi.number().allow(null).default(null),\n      secureCookies: Joi.boolean().default(false)\n    }).default();\n  },\n\n  uiExports: {\n    chromeNavControls: ['plugins/security/views/nav_control'],\n    managementSections: ['plugins/security/views/management'],\n    apps: [{\n      id: 'login',\n      title: 'Login',\n      main: 'plugins/security/views/login',\n      hidden: true,\n      injectVars(server) {\n        const pluginId = 'security';\n        const xpackInfo = server.plugins.xpack_main.info;\n        const { showLogin, loginMessage, allowLogin } = xpackInfo.feature(pluginId).getLicenseCheckResults() || {};\n\n        return {\n          loginState: {\n            showLogin,\n            allowLogin,\n            loginMessage\n          }\n        };\n      }\n    }, {\n      id: 'logout',\n      title: 'Logout',\n      main: 'plugins/security/views/logout',\n      hidden: true\n    }],\n    hacks: [\n      'plugins/security/hacks/on_session_timeout',\n      'plugins/security/hacks/on_unauthorized_response'\n    ],\n    injectDefaultVars: function (server) {\n\n      const config = server.config();\n      return {\n        secureCookies: config.get('xpack.security.secureCookies'),\n        sessionTimeout: config.get('xpack.security.sessionTimeout')\n      };\n    }\n  },\n\n  preInit(server) {\n    setElasticsearchAuth(server.config());\n  },\n\n  init(server) {\n    const thisPlugin = this;\n    const xpackMainPlugin = server.plugins.xpack_main;\n    mirrorPluginStatus(xpackMainPlugin, thisPlugin);\n    xpackMainPlugin.status.once('green', () => {\n      // Register a function that is called whenever the xpack info changes,\n      // to re-compute the license check results for this plugin\n      xpackMainPlugin.info.feature(thisPlugin.id).registerLicenseCheckResultsGenerator(checkLicense);\n    });\n\n    const config = server.config();\n    validateConfig(config, message => server.log(['security', 'warning'], message));\n\n    const cookieName = config.get('xpack.security.cookieName');\n\n    const register = Promise.promisify(server.register, {context: server});\n    Promise.all([\n      register(hapiAuthBasic),\n      register(hapiAuthCookie)\n    ])\n    .then(() => {\n      server.auth.scheme('login', createScheme({\n        redirectUrl: (path) => loginUrl(config.get('server.basePath'), path),\n        strategies: ['security-cookie', 'security-basic']\n      }));\n\n      server.auth.strategy('session', 'login', 'required');\n\n      server.auth.strategy('security-basic', 'basic', false, {\n        validateFunc: getBasicValidate(server)\n      });\n\n      server.auth.strategy('security-cookie', 'cookie', false, {\n        cookie: cookieName,\n        password: config.get('xpack.security.encryptionKey'),\n        clearInvalid: true,\n        validateFunc: getCookieValidate(server),\n        isSecure: config.get('xpack.security.secureCookies'),\n        path: config.get('server.basePath') + '/'\n      });\n    });\n\n    createExpose(server);\n\n    initAuthenticateApi(server);\n    initUsersApi(server);\n    initRolesApi(server);\n    initIndicesApi(server);\n    initLoginView(server, thisPlugin, xpackMainPlugin);\n    initLogoutView(server, thisPlugin);\n\n  }\n});\n\nfunction loginUrl(baseUrl, requestedPath) {\n  const next = encodeURIComponent(requestedPath);\n  return `${baseUrl}/login?next=${next}`;\n}\n"
      ]
    },
    "mtime": 1485775588033
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/get_basic_validate.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./get_is_valid_user",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "getIsValidUser"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _get_is_valid_user = require('./get_is_valid_user');\n\nvar _get_is_valid_user2 = _interopRequireDefault(_get_is_valid_user);\n\nexports['default'] = function (server) {\n  var isValidUser = (0, _get_is_valid_user2['default'])(server);\n\n  return function validate(request, username, password, callback) {\n    return isValidUser(request, username, password).then(function () {\n      return callback(null, true, { username: username, password: password });\n    }, function (error) {\n      return callback(error, false);\n    });\n  };\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9saWIvZ2V0X2Jhc2ljX3ZhbGlkYXRlLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O2lDQUEyQixxQkFBcUI7Ozs7cUJBRWpDLFVBQUMsTUFBTSxFQUFLO0FBQ3pCLE1BQU0sV0FBVyxHQUFHLG9DQUFlLE1BQU0sQ0FBQyxDQUFDOztBQUUzQyxTQUFPLFNBQVMsUUFBUSxDQUFDLE9BQU8sRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLFFBQVEsRUFBRTtBQUM5RCxXQUFPLFdBQVcsQ0FBQyxPQUFPLEVBQUUsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FDbEQ7YUFBTSxRQUFRLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxFQUFDLFFBQVEsRUFBUixRQUFRLEVBQUUsUUFBUSxFQUFSLFFBQVEsRUFBQyxDQUFDO0tBQUEsRUFDaEQsVUFBQyxLQUFLO2FBQUssUUFBUSxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUM7S0FBQSxDQUNsQyxDQUFDO0dBQ0gsQ0FBQztDQUNIIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9saWIvZ2V0X2Jhc2ljX3ZhbGlkYXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGdldElzVmFsaWRVc2VyIGZyb20gJy4vZ2V0X2lzX3ZhbGlkX3VzZXInO1xuXG5leHBvcnQgZGVmYXVsdCAoc2VydmVyKSA9PiB7XG4gIGNvbnN0IGlzVmFsaWRVc2VyID0gZ2V0SXNWYWxpZFVzZXIoc2VydmVyKTtcblxuICByZXR1cm4gZnVuY3Rpb24gdmFsaWRhdGUocmVxdWVzdCwgdXNlcm5hbWUsIHBhc3N3b3JkLCBjYWxsYmFjaykge1xuICAgIHJldHVybiBpc1ZhbGlkVXNlcihyZXF1ZXN0LCB1c2VybmFtZSwgcGFzc3dvcmQpLnRoZW4oXG4gICAgICAoKSA9PiBjYWxsYmFjayhudWxsLCB0cnVlLCB7dXNlcm5hbWUsIHBhc3N3b3JkfSksXG4gICAgICAoZXJyb3IpID0+IGNhbGxiYWNrKGVycm9yLCBmYWxzZSlcbiAgICApO1xuICB9O1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/get_basic_validate.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;iCAA2B,qBAAqB;;;;qBAEjC,UAAC,MAAM,EAAK;AACzB,MAAM,WAAW,GAAG,oCAAe,MAAM,CAAC,CAAC;;AAE3C,SAAO,SAAS,QAAQ,CAAC,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,QAAQ,EAAE;AAC9D,WAAO,WAAW,CAAC,OAAO,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC,IAAI,CAClD;aAAM,QAAQ,CAAC,IAAI,EAAE,IAAI,EAAE,EAAC,QAAQ,EAAR,QAAQ,EAAE,QAAQ,EAAR,QAAQ,EAAC,CAAC;KAAA,EAChD,UAAC,KAAK;aAAK,QAAQ,CAAC,KAAK,EAAE,KAAK,CAAC;KAAA,CAClC,CAAC;GACH,CAAC;CACH",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/get_basic_validate.js",
      "sourcesContent": [
        "import getIsValidUser from './get_is_valid_user';\n\nexport default (server) => {\n  const isValidUser = getIsValidUser(server);\n\n  return function validate(request, username, password, callback) {\n    return isValidUser(request, username, password).then(\n      () => callback(null, true, {username, password}),\n      (error) => callback(error, false)\n    );\n  };\n};\n"
      ]
    },
    "mtime": 1485775596253
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/get_is_valid_user.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "assign"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "assign",
                "local": "assign"
              }
            ]
          },
          {
            "source": "./basic_auth",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "basicAuth"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _basic_auth = require('./basic_auth');\n\nvar _basic_auth2 = _interopRequireDefault(_basic_auth);\n\nexports['default'] = function (server) {\n  return function isValidUser(request, username, password) {\n    (0, _lodash.assign)(request.headers, _basic_auth2['default'].getHeader(username, password));\n    return server.plugins.security.getUser(request);\n  };\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9saWIvZ2V0X2lzX3ZhbGlkX3VzZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7c0JBQXFCLFFBQVE7OzBCQUNQLGNBQWM7Ozs7cUJBRXJCLFVBQUMsTUFBTSxFQUFLO0FBQ3pCLFNBQU8sU0FBUyxXQUFXLENBQUMsT0FBTyxFQUFFLFFBQVEsRUFBRSxRQUFRLEVBQUU7QUFDdkQsd0JBQU8sT0FBTyxDQUFDLE9BQU8sRUFBRSx3QkFBVSxTQUFTLENBQUMsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDLENBQUM7QUFDakUsV0FBTyxNQUFNLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxPQUFPLENBQUMsT0FBTyxDQUFDLENBQUM7R0FDakQsQ0FBQztDQUNIIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9saWIvZ2V0X2lzX3ZhbGlkX3VzZXIuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge2Fzc2lnbn0gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBiYXNpY0F1dGggZnJvbSAnLi9iYXNpY19hdXRoJztcblxuZXhwb3J0IGRlZmF1bHQgKHNlcnZlcikgPT4ge1xuICByZXR1cm4gZnVuY3Rpb24gaXNWYWxpZFVzZXIocmVxdWVzdCwgdXNlcm5hbWUsIHBhc3N3b3JkKSB7XG4gICAgYXNzaWduKHJlcXVlc3QuaGVhZGVycywgYmFzaWNBdXRoLmdldEhlYWRlcih1c2VybmFtZSwgcGFzc3dvcmQpKTtcbiAgICByZXR1cm4gc2VydmVyLnBsdWdpbnMuc2VjdXJpdHkuZ2V0VXNlcihyZXF1ZXN0KTtcbiAgfTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/get_is_valid_user.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;sBAAqB,QAAQ;;0BACP,cAAc;;;;qBAErB,UAAC,MAAM,EAAK;AACzB,SAAO,SAAS,WAAW,CAAC,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE;AACvD,wBAAO,OAAO,CAAC,OAAO,EAAE,wBAAU,SAAS,CAAC,QAAQ,EAAE,QAAQ,CAAC,CAAC,CAAC;AACjE,WAAO,MAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC;GACjD,CAAC;CACH",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/get_is_valid_user.js",
      "sourcesContent": [
        "import {assign} from 'lodash';\nimport basicAuth from './basic_auth';\n\nexport default (server) => {\n  return function isValidUser(request, username, password) {\n    assign(request.headers, basicAuth.getHeader(username, password));\n    return server.plugins.security.getUser(request);\n  };\n};\n"
      ]
    },
    "mtime": 1485775596253
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/basic_auth.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "sliced-to-array",
        "to-array"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _slicedToArray = (function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i['return']) _i['return'](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError('Invalid attempt to destructure non-iterable instance'); } }; })();\n\nfunction _toArray(arr) { return Array.isArray(arr) ? arr : Array.from(arr); }\n\nexports['default'] = {\n  getHeader: getAuthHeader,\n  parseHeader: parseAuthHeader\n};\n\nfunction getAuthHeader(username, password) {\n  var auth = new Buffer(username + ':' + password).toString('base64');\n  return {\n    authorization: 'Basic ' + auth\n  };\n}\n\nfunction parseAuthHeader(authorization) {\n  if (typeof authorization !== 'string') {\n    throw new Error('Authorization should be a string');\n  }\n\n  var _authorization$split = authorization.split(' ');\n\n  var _authorization$split2 = _slicedToArray(_authorization$split, 2);\n\n  var authType = _authorization$split2[0];\n  var token = _authorization$split2[1];\n\n  if (authType.toLowerCase() !== 'basic') {\n    throw new Error('Authorization is not Basic');\n  }\n\n  // base64 decode auth header\n  var tokenBuffer = new Buffer(token, 'base64');\n  var tokenString = tokenBuffer.toString();\n\n  // parse auth data\n\n  var _tokenString$split = tokenString.split(/:/);\n\n  var _tokenString$split2 = _toArray(_tokenString$split);\n\n  var username = _tokenString$split2[0];\n\n  var password = _tokenString$split2.slice(1);\n\n  password = password.join(':');\n\n  return { username: username, password: password };\n}\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9saWIvYmFzaWNfYXV0aC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O3FCQUFlO0FBQ2IsV0FBUyxFQUFFLGFBQWE7QUFDeEIsYUFBVyxFQUFFLGVBQWU7Q0FDN0I7O0FBRUQsU0FBUyxhQUFhLENBQUMsUUFBUSxFQUFFLFFBQVEsRUFBRTtBQUN6QyxNQUFNLElBQUksR0FBRyxJQUFJLE1BQU0sQ0FBSSxRQUFRLFNBQUksUUFBUSxDQUFHLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0FBQ3RFLFNBQU87QUFDTCxpQkFBYSxhQUFXLElBQUksQUFBRTtHQUMvQixDQUFDO0NBQ0g7O0FBRUQsU0FBUyxlQUFlLENBQUMsYUFBYSxFQUFFO0FBQ3RDLE1BQUksT0FBTyxhQUFhLEtBQUssUUFBUSxFQUFFO0FBQ3JDLFVBQU0sSUFBSSxLQUFLLENBQUMsa0NBQWtDLENBQUMsQ0FBQztHQUNyRDs7NkJBRTJCLGFBQWEsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDOzs7O01BQTVDLFFBQVE7TUFBRSxLQUFLOztBQUN2QixNQUFJLFFBQVEsQ0FBQyxXQUFXLEVBQUUsS0FBSyxPQUFPLEVBQUU7QUFDdEMsVUFBTSxJQUFJLEtBQUssQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO0dBQy9DOzs7QUFHRCxNQUFNLFdBQVcsR0FBRyxJQUFJLE1BQU0sQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLENBQUM7QUFDaEQsTUFBTSxXQUFXLEdBQUcsV0FBVyxDQUFDLFFBQVEsRUFBRSxDQUFDOzs7OzJCQUdYLFdBQVcsQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDOzs7O01BQWhELFFBQVE7O01BQUssUUFBUTs7QUFDM0IsVUFBUSxHQUFHLFFBQVEsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7O0FBRTlCLFNBQU8sRUFBRSxRQUFRLEVBQVIsUUFBUSxFQUFFLFFBQVEsRUFBUixRQUFRLEVBQUUsQ0FBQztDQUMvQiIsImZpbGUiOiIvaG9tZS91YnVudHUvd29ya3NwYWNlL2tpYmFuYS01LjAuMi1saW51eC14ODZfNjQvcGx1Z2lucy94LXBhY2svcGx1Z2lucy9zZWN1cml0eS9zZXJ2ZXIvbGliL2Jhc2ljX2F1dGguanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCB7XG4gIGdldEhlYWRlcjogZ2V0QXV0aEhlYWRlcixcbiAgcGFyc2VIZWFkZXI6IHBhcnNlQXV0aEhlYWRlclxufTtcblxuZnVuY3Rpb24gZ2V0QXV0aEhlYWRlcih1c2VybmFtZSwgcGFzc3dvcmQpIHtcbiAgY29uc3QgYXV0aCA9IG5ldyBCdWZmZXIoYCR7dXNlcm5hbWV9OiR7cGFzc3dvcmR9YCkudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICByZXR1cm4ge1xuICAgIGF1dGhvcml6YXRpb246IGBCYXNpYyAke2F1dGh9YFxuICB9O1xufVxuXG5mdW5jdGlvbiBwYXJzZUF1dGhIZWFkZXIoYXV0aG9yaXphdGlvbikge1xuICBpZiAodHlwZW9mIGF1dGhvcml6YXRpb24gIT09ICdzdHJpbmcnKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdBdXRob3JpemF0aW9uIHNob3VsZCBiZSBhIHN0cmluZycpO1xuICB9XG5cbiAgY29uc3QgWyBhdXRoVHlwZSwgdG9rZW4gXSA9IGF1dGhvcml6YXRpb24uc3BsaXQoJyAnKTtcbiAgaWYgKGF1dGhUeXBlLnRvTG93ZXJDYXNlKCkgIT09ICdiYXNpYycpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0F1dGhvcml6YXRpb24gaXMgbm90IEJhc2ljJyk7XG4gIH1cblxuICAvLyBiYXNlNjQgZGVjb2RlIGF1dGggaGVhZGVyXG4gIGNvbnN0IHRva2VuQnVmZmVyID0gbmV3IEJ1ZmZlcih0b2tlbiwgJ2Jhc2U2NCcpO1xuICBjb25zdCB0b2tlblN0cmluZyA9IHRva2VuQnVmZmVyLnRvU3RyaW5nKCk7XG5cbiAgLy8gcGFyc2UgYXV0aCBkYXRhXG4gIGxldCBbIHVzZXJuYW1lLCAuLi5wYXNzd29yZCBdID0gdG9rZW5TdHJpbmcuc3BsaXQoLzovKTtcbiAgcGFzc3dvcmQgPSBwYXNzd29yZC5qb2luKCc6Jyk7XG5cbiAgcmV0dXJuIHsgdXNlcm5hbWUsIHBhc3N3b3JkIH07XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/basic_auth.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;;qBAAe;AACb,WAAS,EAAE,aAAa;AACxB,aAAW,EAAE,eAAe;CAC7B;;AAED,SAAS,aAAa,CAAC,QAAQ,EAAE,QAAQ,EAAE;AACzC,MAAM,IAAI,GAAG,IAAI,MAAM,CAAI,QAAQ,SAAI,QAAQ,CAAG,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAAC;AACtE,SAAO;AACL,iBAAa,aAAW,IAAI,AAAE;GAC/B,CAAC;CACH;;AAED,SAAS,eAAe,CAAC,aAAa,EAAE;AACtC,MAAI,OAAO,aAAa,KAAK,QAAQ,EAAE;AACrC,UAAM,IAAI,KAAK,CAAC,kCAAkC,CAAC,CAAC;GACrD;;6BAE2B,aAAa,CAAC,KAAK,CAAC,GAAG,CAAC;;;;MAA5C,QAAQ;MAAE,KAAK;;AACvB,MAAI,QAAQ,CAAC,WAAW,EAAE,KAAK,OAAO,EAAE;AACtC,UAAM,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC;GAC/C;;;AAGD,MAAM,WAAW,GAAG,IAAI,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;AAChD,MAAM,WAAW,GAAG,WAAW,CAAC,QAAQ,EAAE,CAAC;;;;2BAGX,WAAW,CAAC,KAAK,CAAC,GAAG,CAAC;;;;MAAhD,QAAQ;;MAAK,QAAQ;;AAC3B,UAAQ,GAAG,QAAQ,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;;AAE9B,SAAO,EAAE,QAAQ,EAAR,QAAQ,EAAE,QAAQ,EAAR,QAAQ,EAAE,CAAC;CAC/B",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/basic_auth.js",
      "sourcesContent": [
        "export default {\n  getHeader: getAuthHeader,\n  parseHeader: parseAuthHeader\n};\n\nfunction getAuthHeader(username, password) {\n  const auth = new Buffer(`${username}:${password}`).toString('base64');\n  return {\n    authorization: `Basic ${auth}`\n  };\n}\n\nfunction parseAuthHeader(authorization) {\n  if (typeof authorization !== 'string') {\n    throw new Error('Authorization should be a string');\n  }\n\n  const [ authType, token ] = authorization.split(' ');\n  if (authType.toLowerCase() !== 'basic') {\n    throw new Error('Authorization is not Basic');\n  }\n\n  // base64 decode auth header\n  const tokenBuffer = new Buffer(token, 'base64');\n  const tokenString = tokenBuffer.toString();\n\n  // parse auth data\n  let [ username, ...password ] = tokenString.split(/:/);\n  password = password.join(':');\n\n  return { username, password };\n}\n"
      ]
    },
    "mtime": 1485775596253
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/get_cookie_validate.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./get_is_valid_user",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "getIsValidUser"
              }
            ]
          },
          {
            "source": "./get_calculate_expires",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "getCalculateExpires"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "hasSessionExpired",
            "session"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "hasSessionExpired",
              "exported": "hasSessionExpired"
            },
            {
              "kind": "local",
              "local": "session",
              "exported": "session"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.hasSessionExpired = hasSessionExpired;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _get_is_valid_user = require('./get_is_valid_user');\n\nvar _get_is_valid_user2 = _interopRequireDefault(_get_is_valid_user);\n\nvar _get_calculate_expires = require('./get_calculate_expires');\n\nvar _get_calculate_expires2 = _interopRequireDefault(_get_calculate_expires);\n\nexports['default'] = function (server) {\n  var isValidUser = (0, _get_is_valid_user2['default'])(server);\n  var calculateExpires = (0, _get_calculate_expires2['default'])(server);\n  var isSystemApiRequest = server.plugins.kibana.systemApi.isSystemApiRequest;\n\n  return function validate(request, session, callback) {\n    if (hasSessionExpired(session)) return callback(new Error('Session has expired'), false);\n\n    var username = session.username;\n    var password = session.password;\n\n    return isValidUser(request, username, password).then(function () {\n      // Extend the session timeout provided this is NOT a system API call\n      if (!isSystemApiRequest(request)) {\n        // Keep the session alive\n        request.auth.session.set({\n          username: username,\n          password: password,\n          expires: calculateExpires()\n        });\n      }\n      return callback(null, true);\n    }, function (error) {\n      return callback(error, false);\n    });\n  };\n};\n\nfunction hasSessionExpired(session) {\n  var expires = session.expires;\n\n  return !!(expires && expires < Date.now());\n}\n\n;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9saWIvZ2V0X2Nvb2tpZV92YWxpZGF0ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7aUNBQTJCLHFCQUFxQjs7OztxQ0FDaEIseUJBQXlCOzs7O3FCQUUxQyxVQUFDLE1BQU0sRUFBSztBQUN6QixNQUFNLFdBQVcsR0FBRyxvQ0FBZSxNQUFNLENBQUMsQ0FBQztBQUMzQyxNQUFNLGdCQUFnQixHQUFHLHdDQUFvQixNQUFNLENBQUMsQ0FBQztNQUM3QyxrQkFBa0IsR0FBSyxNQUFNLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQXRELGtCQUFrQjs7QUFFMUIsU0FBTyxTQUFTLFFBQVEsQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLFFBQVEsRUFBRTtBQUNuRCxRQUFJLGlCQUFpQixDQUFDLE9BQU8sQ0FBQyxFQUFFLE9BQU8sUUFBUSxDQUFDLElBQUksS0FBSyxDQUFDLHFCQUFxQixDQUFDLEVBQUUsS0FBSyxDQUFDLENBQUM7O1FBRWxGLFFBQVEsR0FBYyxPQUFPLENBQTdCLFFBQVE7UUFBRSxRQUFRLEdBQUksT0FBTyxDQUFuQixRQUFROztBQUN6QixXQUFPLFdBQVcsQ0FBQyxPQUFPLEVBQUUsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FDbEQsWUFBTTs7QUFFSixVQUFJLENBQUMsa0JBQWtCLENBQUMsT0FBTyxDQUFDLEVBQUU7O0FBRWhDLGVBQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQztBQUN2QixrQkFBUSxFQUFSLFFBQVE7QUFDUixrQkFBUSxFQUFSLFFBQVE7QUFDUixpQkFBTyxFQUFFLGdCQUFnQixFQUFFO1NBQzVCLENBQUMsQ0FBQztPQUNKO0FBQ0QsYUFBTyxRQUFRLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO0tBQzdCLEVBQ0QsVUFBQyxLQUFLO2FBQUssUUFBUSxDQUFDLEtBQUssRUFBRSxLQUFLLENBQUM7S0FBQSxDQUNsQyxDQUFDO0dBQ0gsQ0FBQztDQUNIOztBQUVNLFNBQVMsaUJBQWlCLENBQUMsT0FBTyxFQUFFO01BQ2xDLE9BQU8sR0FBSSxPQUFPLENBQWxCLE9BQU87O0FBQ2QsU0FBTyxDQUFDLEVBQUUsT0FBTyxJQUFJLE9BQU8sR0FBRyxJQUFJLENBQUMsR0FBRyxFQUFFLENBQUEsQUFBQyxDQUFDO0NBQzVDOztBQUFBLENBQUMiLCJmaWxlIjoiL2hvbWUvdWJ1bnR1L3dvcmtzcGFjZS9raWJhbmEtNS4wLjItbGludXgteDg2XzY0L3BsdWdpbnMveC1wYWNrL3BsdWdpbnMvc2VjdXJpdHkvc2VydmVyL2xpYi9nZXRfY29va2llX3ZhbGlkYXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGdldElzVmFsaWRVc2VyIGZyb20gJy4vZ2V0X2lzX3ZhbGlkX3VzZXInO1xuaW1wb3J0IGdldENhbGN1bGF0ZUV4cGlyZXMgZnJvbSAnLi9nZXRfY2FsY3VsYXRlX2V4cGlyZXMnO1xuXG5leHBvcnQgZGVmYXVsdCAoc2VydmVyKSA9PiB7XG4gIGNvbnN0IGlzVmFsaWRVc2VyID0gZ2V0SXNWYWxpZFVzZXIoc2VydmVyKTtcbiAgY29uc3QgY2FsY3VsYXRlRXhwaXJlcyA9IGdldENhbGN1bGF0ZUV4cGlyZXMoc2VydmVyKTtcbiAgY29uc3QgeyBpc1N5c3RlbUFwaVJlcXVlc3QgfSA9IHNlcnZlci5wbHVnaW5zLmtpYmFuYS5zeXN0ZW1BcGk7XG5cbiAgcmV0dXJuIGZ1bmN0aW9uIHZhbGlkYXRlKHJlcXVlc3QsIHNlc3Npb24sIGNhbGxiYWNrKSB7XG4gICAgaWYgKGhhc1Nlc3Npb25FeHBpcmVkKHNlc3Npb24pKSByZXR1cm4gY2FsbGJhY2sobmV3IEVycm9yKCdTZXNzaW9uIGhhcyBleHBpcmVkJyksIGZhbHNlKTtcblxuICAgIGNvbnN0IHt1c2VybmFtZSwgcGFzc3dvcmR9ID0gc2Vzc2lvbjtcbiAgICByZXR1cm4gaXNWYWxpZFVzZXIocmVxdWVzdCwgdXNlcm5hbWUsIHBhc3N3b3JkKS50aGVuKFxuICAgICAgKCkgPT4ge1xuICAgICAgICAvLyBFeHRlbmQgdGhlIHNlc3Npb24gdGltZW91dCBwcm92aWRlZCB0aGlzIGlzIE5PVCBhIHN5c3RlbSBBUEkgY2FsbFxuICAgICAgICBpZiAoIWlzU3lzdGVtQXBpUmVxdWVzdChyZXF1ZXN0KSkge1xuICAgICAgICAgIC8vIEtlZXAgdGhlIHNlc3Npb24gYWxpdmVcbiAgICAgICAgICByZXF1ZXN0LmF1dGguc2Vzc2lvbi5zZXQoe1xuICAgICAgICAgICAgdXNlcm5hbWUsXG4gICAgICAgICAgICBwYXNzd29yZCxcbiAgICAgICAgICAgIGV4cGlyZXM6IGNhbGN1bGF0ZUV4cGlyZXMoKVxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBjYWxsYmFjayhudWxsLCB0cnVlKTtcbiAgICAgIH0sXG4gICAgICAoZXJyb3IpID0+IGNhbGxiYWNrKGVycm9yLCBmYWxzZSlcbiAgICApO1xuICB9O1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGhhc1Nlc3Npb25FeHBpcmVkKHNlc3Npb24pIHtcbiAgY29uc3Qge2V4cGlyZXN9ID0gc2Vzc2lvbjtcbiAgcmV0dXJuICEhKGV4cGlyZXMgJiYgZXhwaXJlcyA8IERhdGUubm93KCkpO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/get_cookie_validate.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;;iCAA2B,qBAAqB;;;;qCAChB,yBAAyB;;;;qBAE1C,UAAC,MAAM,EAAK;AACzB,MAAM,WAAW,GAAG,oCAAe,MAAM,CAAC,CAAC;AAC3C,MAAM,gBAAgB,GAAG,wCAAoB,MAAM,CAAC,CAAC;MAC7C,kBAAkB,GAAK,MAAM,CAAC,OAAO,CAAC,MAAM,CAAC,SAAS,CAAtD,kBAAkB;;AAE1B,SAAO,SAAS,QAAQ,CAAC,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE;AACnD,QAAI,iBAAiB,CAAC,OAAO,CAAC,EAAE,OAAO,QAAQ,CAAC,IAAI,KAAK,CAAC,qBAAqB,CAAC,EAAE,KAAK,CAAC,CAAC;;QAElF,QAAQ,GAAc,OAAO,CAA7B,QAAQ;QAAE,QAAQ,GAAI,OAAO,CAAnB,QAAQ;;AACzB,WAAO,WAAW,CAAC,OAAO,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC,IAAI,CAClD,YAAM;;AAEJ,UAAI,CAAC,kBAAkB,CAAC,OAAO,CAAC,EAAE;;AAEhC,eAAO,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;AACvB,kBAAQ,EAAR,QAAQ;AACR,kBAAQ,EAAR,QAAQ;AACR,iBAAO,EAAE,gBAAgB,EAAE;SAC5B,CAAC,CAAC;OACJ;AACD,aAAO,QAAQ,CAAC,IAAI,EAAE,IAAI,CAAC,CAAC;KAC7B,EACD,UAAC,KAAK;aAAK,QAAQ,CAAC,KAAK,EAAE,KAAK,CAAC;KAAA,CAClC,CAAC;GACH,CAAC;CACH;;AAEM,SAAS,iBAAiB,CAAC,OAAO,EAAE;MAClC,OAAO,GAAI,OAAO,CAAlB,OAAO;;AACd,SAAO,CAAC,EAAE,OAAO,IAAI,OAAO,GAAG,IAAI,CAAC,GAAG,EAAE,CAAA,AAAC,CAAC;CAC5C;;AAAA,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/get_cookie_validate.js",
      "sourcesContent": [
        "import getIsValidUser from './get_is_valid_user';\nimport getCalculateExpires from './get_calculate_expires';\n\nexport default (server) => {\n  const isValidUser = getIsValidUser(server);\n  const calculateExpires = getCalculateExpires(server);\n  const { isSystemApiRequest } = server.plugins.kibana.systemApi;\n\n  return function validate(request, session, callback) {\n    if (hasSessionExpired(session)) return callback(new Error('Session has expired'), false);\n\n    const {username, password} = session;\n    return isValidUser(request, username, password).then(\n      () => {\n        // Extend the session timeout provided this is NOT a system API call\n        if (!isSystemApiRequest(request)) {\n          // Keep the session alive\n          request.auth.session.set({\n            username,\n            password,\n            expires: calculateExpires()\n          });\n        }\n        return callback(null, true);\n      },\n      (error) => callback(error, false)\n    );\n  };\n};\n\nexport function hasSessionExpired(session) {\n  const {expires} = session;\n  return !!(expires && expires < Date.now());\n};\n"
      ]
    },
    "mtime": 1485775596253
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/get_calculate_expires.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nexports['default'] = function (server) {\n  var ttl = server.config().get('xpack.security.sessionTimeout');\n  return function () {\n    return ttl && Date.now() + ttl;\n  };\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9saWIvZ2V0X2NhbGN1bGF0ZV9leHBpcmVzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztxQkFBZSxVQUFDLE1BQU0sRUFBSztBQUN6QixNQUFNLEdBQUcsR0FBRyxNQUFNLENBQUMsTUFBTSxFQUFFLENBQUMsR0FBRyxDQUFDLCtCQUErQixDQUFDLENBQUM7QUFDakUsU0FBTztXQUFNLEdBQUcsSUFBSSxJQUFJLENBQUMsR0FBRyxFQUFFLEdBQUcsR0FBRztHQUFBLENBQUM7Q0FDdEMiLCJmaWxlIjoiL2hvbWUvdWJ1bnR1L3dvcmtzcGFjZS9raWJhbmEtNS4wLjItbGludXgteDg2XzY0L3BsdWdpbnMveC1wYWNrL3BsdWdpbnMvc2VjdXJpdHkvc2VydmVyL2xpYi9nZXRfY2FsY3VsYXRlX2V4cGlyZXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCAoc2VydmVyKSA9PiB7XG4gIGNvbnN0IHR0bCA9IHNlcnZlci5jb25maWcoKS5nZXQoJ3hwYWNrLnNlY3VyaXR5LnNlc3Npb25UaW1lb3V0Jyk7XG4gIHJldHVybiAoKSA9PiB0dGwgJiYgRGF0ZS5ub3coKSArIHR0bDtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/get_calculate_expires.js"
      ],
      "names": [],
      "mappings": ";;;;;;qBAAe,UAAC,MAAM,EAAK;AACzB,MAAM,GAAG,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC,GAAG,CAAC,+BAA+B,CAAC,CAAC;AACjE,SAAO;WAAM,GAAG,IAAI,IAAI,CAAC,GAAG,EAAE,GAAG,GAAG;GAAA,CAAC;CACtC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/get_calculate_expires.js",
      "sourcesContent": [
        "export default (server) => {\n  const ttl = server.config().get('xpack.security.sessionTimeout');\n  return () => ttl && Date.now() + ttl;\n};\n"
      ]
    },
    "mtime": 1485775596253
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/create_expose.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./get_client_shield",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "getClient"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "createExports",
            "server"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "createExports",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "server",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = createExports;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _get_client_shield = require('./get_client_shield');\n\nvar _get_client_shield2 = _interopRequireDefault(_get_client_shield);\n\nfunction createExports(server) {\n  var callWithRequest = (0, _get_client_shield2['default'])(server).callWithRequest;\n\n  server.expose('getUser', function (request) {\n    var xpackInfo = server.plugins.xpack_main.info;\n    if (xpackInfo && xpackInfo.isAvailable() && !xpackInfo.feature('security').isEnabled()) {\n      return Promise.resolve(null);\n    }\n    return callWithRequest(request, 'shield.authenticate');\n  });\n}\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9saWIvY3JlYXRlX2V4cG9zZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztxQkFFd0IsYUFBYTs7OztpQ0FGZixxQkFBcUI7Ozs7QUFFNUIsU0FBUyxhQUFhLENBQUMsTUFBTSxFQUFFO0FBQzVDLE1BQU0sZUFBZSxHQUFHLG9DQUFVLE1BQU0sQ0FBQyxDQUFDLGVBQWUsQ0FBQzs7QUFFMUQsUUFBTSxDQUFDLE1BQU0sQ0FBQyxTQUFTLEVBQUUsVUFBQyxPQUFPLEVBQUs7QUFDcEMsUUFBTSxTQUFTLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDO0FBQ2pELFFBQUksU0FBUyxJQUFJLFNBQVMsQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsVUFBVSxDQUFDLENBQUMsU0FBUyxFQUFFLEVBQUU7QUFDdEYsYUFBTyxPQUFPLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO0tBQzlCO0FBQ0QsV0FBTyxlQUFlLENBQUMsT0FBTyxFQUFFLHFCQUFxQixDQUFDLENBQUM7R0FDeEQsQ0FBQyxDQUFDO0NBQ0o7O0FBQUEsQ0FBQyIsImZpbGUiOiIvaG9tZS91YnVudHUvd29ya3NwYWNlL2tpYmFuYS01LjAuMi1saW51eC14ODZfNjQvcGx1Z2lucy94LXBhY2svcGx1Z2lucy9zZWN1cml0eS9zZXJ2ZXIvbGliL2NyZWF0ZV9leHBvc2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgZ2V0Q2xpZW50IGZyb20gJy4vZ2V0X2NsaWVudF9zaGllbGQnO1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjcmVhdGVFeHBvcnRzKHNlcnZlcikge1xuICBjb25zdCBjYWxsV2l0aFJlcXVlc3QgPSBnZXRDbGllbnQoc2VydmVyKS5jYWxsV2l0aFJlcXVlc3Q7XG5cbiAgc2VydmVyLmV4cG9zZSgnZ2V0VXNlcicsIChyZXF1ZXN0KSA9PiB7XG4gICAgY29uc3QgeHBhY2tJbmZvID0gc2VydmVyLnBsdWdpbnMueHBhY2tfbWFpbi5pbmZvO1xuICAgIGlmICh4cGFja0luZm8gJiYgeHBhY2tJbmZvLmlzQXZhaWxhYmxlKCkgJiYgIXhwYWNrSW5mby5mZWF0dXJlKCdzZWN1cml0eScpLmlzRW5hYmxlZCgpKSB7XG4gICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG51bGwpO1xuICAgIH1cbiAgICByZXR1cm4gY2FsbFdpdGhSZXF1ZXN0KHJlcXVlc3QsICdzaGllbGQuYXV0aGVudGljYXRlJyk7XG4gIH0pO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/create_expose.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAEwB,aAAa;;;;iCAFf,qBAAqB;;;;AAE5B,SAAS,aAAa,CAAC,MAAM,EAAE;AAC5C,MAAM,eAAe,GAAG,oCAAU,MAAM,CAAC,CAAC,eAAe,CAAC;;AAE1D,QAAM,CAAC,MAAM,CAAC,SAAS,EAAE,UAAC,OAAO,EAAK;AACpC,QAAM,SAAS,GAAG,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC,IAAI,CAAC;AACjD,QAAI,SAAS,IAAI,SAAS,CAAC,WAAW,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,SAAS,EAAE,EAAE;AACtF,aAAO,OAAO,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;KAC9B;AACD,WAAO,eAAe,CAAC,OAAO,EAAE,qBAAqB,CAAC,CAAC;GACxD,CAAC,CAAC;CACJ;;AAAA,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/create_expose.js",
      "sourcesContent": [
        "import getClient from './get_client_shield';\n\nexport default function createExports(server) {\n  const callWithRequest = getClient(server).callWithRequest;\n\n  server.expose('getUser', (request) => {\n    const xpackInfo = server.plugins.xpack_main.info;\n    if (xpackInfo && xpackInfo.isAvailable() && !xpackInfo.feature('security').isEnabled()) {\n      return Promise.resolve(null);\n    }\n    return callWithRequest(request, 'shield.authenticate');\n  });\n};\n"
      ]
    },
    "mtime": 1485775596253
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/get_client_shield.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "once"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "once",
                "local": "once"
              }
            ]
          },
          {
            "source": "./elasticsearch-shield-js/elasticsearch-shield",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "elasticsearchShield"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _elasticsearchShieldJsElasticsearchShield = require('./elasticsearch-shield-js/elasticsearch-shield');\n\nvar _elasticsearchShieldJsElasticsearchShield2 = _interopRequireDefault(_elasticsearchShieldJsElasticsearchShield);\n\nexports['default'] = (0, _lodash.once)(function (server) {\n  var createClient = server.plugins.elasticsearch.createClient;\n  var client = createClient({\n    auth: false,\n    plugins: [_elasticsearchShieldJsElasticsearchShield2['default']]\n  });\n\n  var callWithRequestFactory = server.plugins.elasticsearch.callWithRequestFactory;\n  var callWithRequest = callWithRequestFactory(client);\n\n  return { client: client, callWithRequest: callWithRequest };\n});\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9saWIvZ2V0X2NsaWVudF9zaGllbGQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7c0JBQW1CLFFBQVE7O3dEQUNLLGdEQUFnRDs7OztxQkFFakUsa0JBQUssVUFBQyxNQUFNLEVBQUs7QUFDOUIsTUFBTSxZQUFZLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsWUFBWSxDQUFDO0FBQy9ELE1BQU0sTUFBTSxHQUFHLFlBQVksQ0FBQztBQUMxQixRQUFJLEVBQUUsS0FBSztBQUNYLFdBQU8sRUFBRSx1REFBcUI7R0FDL0IsQ0FBQyxDQUFDOztBQUVILE1BQU0sc0JBQXNCLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxhQUFhLENBQUMsc0JBQXNCLENBQUM7QUFDbkYsTUFBTSxlQUFlLEdBQUcsc0JBQXNCLENBQUMsTUFBTSxDQUFDLENBQUM7O0FBRXZELFNBQU8sRUFBQyxNQUFNLEVBQU4sTUFBTSxFQUFFLGVBQWUsRUFBZixlQUFlLEVBQUMsQ0FBQztDQUNsQyxDQUFDIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9saWIvZ2V0X2NsaWVudF9zaGllbGQuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge29uY2V9IGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgZWxhc3RpY3NlYXJjaFNoaWVsZCBmcm9tICcuL2VsYXN0aWNzZWFyY2gtc2hpZWxkLWpzL2VsYXN0aWNzZWFyY2gtc2hpZWxkJztcblxuZXhwb3J0IGRlZmF1bHQgb25jZSgoc2VydmVyKSA9PiB7XG4gIGNvbnN0IGNyZWF0ZUNsaWVudCA9IHNlcnZlci5wbHVnaW5zLmVsYXN0aWNzZWFyY2guY3JlYXRlQ2xpZW50O1xuICBjb25zdCBjbGllbnQgPSBjcmVhdGVDbGllbnQoe1xuICAgIGF1dGg6IGZhbHNlLFxuICAgIHBsdWdpbnM6IFtlbGFzdGljc2VhcmNoU2hpZWxkXVxuICB9KTtcblxuICBjb25zdCBjYWxsV2l0aFJlcXVlc3RGYWN0b3J5ID0gc2VydmVyLnBsdWdpbnMuZWxhc3RpY3NlYXJjaC5jYWxsV2l0aFJlcXVlc3RGYWN0b3J5O1xuICBjb25zdCBjYWxsV2l0aFJlcXVlc3QgPSBjYWxsV2l0aFJlcXVlc3RGYWN0b3J5KGNsaWVudCk7XG5cbiAgcmV0dXJuIHtjbGllbnQsIGNhbGxXaXRoUmVxdWVzdH07XG59KTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/get_client_shield.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;sBAAmB,QAAQ;;wDACK,gDAAgD;;;;qBAEjE,kBAAK,UAAC,MAAM,EAAK;AAC9B,MAAM,YAAY,GAAG,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,YAAY,CAAC;AAC/D,MAAM,MAAM,GAAG,YAAY,CAAC;AAC1B,QAAI,EAAE,KAAK;AACX,WAAO,EAAE,uDAAqB;GAC/B,CAAC,CAAC;;AAEH,MAAM,sBAAsB,GAAG,MAAM,CAAC,OAAO,CAAC,aAAa,CAAC,sBAAsB,CAAC;AACnF,MAAM,eAAe,GAAG,sBAAsB,CAAC,MAAM,CAAC,CAAC;;AAEvD,SAAO,EAAC,MAAM,EAAN,MAAM,EAAE,eAAe,EAAf,eAAe,EAAC,CAAC;CAClC,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/get_client_shield.js",
      "sourcesContent": [
        "import {once} from 'lodash';\nimport elasticsearchShield from './elasticsearch-shield-js/elasticsearch-shield';\n\nexport default once((server) => {\n  const createClient = server.plugins.elasticsearch.createClient;\n  const client = createClient({\n    auth: false,\n    plugins: [elasticsearchShield]\n  });\n\n  const callWithRequestFactory = server.plugins.elasticsearch.callWithRequestFactory;\n  const callWithRequest = callWithRequestFactory(client);\n\n  return {client, callWithRequest};\n});\n"
      ]
    },
    "mtime": 1485775596253
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/elasticsearch-shield-js/elasticsearch-shield.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\n(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.ElasticsearchShield = factory();\n  }\n})(undefined, function () {\n  return function addShieldApi(Client, config, components) {\n    var ca = components.clientAction.factory;\n\n    Client.prototype.shield = components.clientAction.namespaceFactory();\n    var shield = Client.prototype.shield.prototype;\n\n    /**\n     * Perform a [shield.authenticate](Retrieve details about the currently authenticated user) request\n     *\n     * @param {Object} params - An object with parameters used to carry out this action\n     */\n    shield.authenticate = ca({\n      params: {},\n      url: {\n        fmt: '/_xpack/security/_authenticate'\n      }\n    });\n\n    /**\n     * Perform a [shield.changePassword](Change the password of a user) request\n     *\n     * @param {Object} params - An object with parameters used to carry out this action\n     * @param {Boolean} params.refresh - Refresh the index after performing the operation\n     * @param {String} params.username - The username of the user to change the password for\n     */\n    shield.changePassword = ca({\n      params: {\n        refresh: {\n          type: 'boolean'\n        }\n      },\n      urls: [{\n        fmt: '/_xpack/security/user/<%=username%>/_password',\n        req: {\n          username: {\n            type: 'string',\n            required: false\n          }\n        }\n      }, {\n        fmt: '/_xpack/security/user/_password'\n      }],\n      needBody: true,\n      method: 'POST'\n    });\n\n    /**\n     * Perform a [shield.clearCachedRealms](Clears the internal user caches for specified realms) request\n     *\n     * @param {Object} params - An object with parameters used to carry out this action\n     * @param {String} params.usernames - Comma-separated list of usernames to clear from the cache\n     * @param {String} params.realms - Comma-separated list of realms to clear\n     */\n    shield.clearCachedRealms = ca({\n      params: {\n        usernames: {\n          type: 'string',\n          required: false\n        }\n      },\n      url: {\n        fmt: '/_xpack/security/realm/<%=realms%>/_clear_cache',\n        req: {\n          realms: {\n            type: 'string',\n            required: true\n          }\n        }\n      },\n      method: 'POST'\n    });\n\n    /**\n     * Perform a [shield.clearCachedRoles](Clears the internal caches for specified roles) request\n     *\n     * @param {Object} params - An object with parameters used to carry out this action\n     * @param {String} params.name - Role name\n     */\n    shield.clearCachedRoles = ca({\n      params: {},\n      url: {\n        fmt: '/_xpack/security/role/<%=name%>/_clear_cache',\n        req: {\n          name: {\n            type: 'string',\n            required: true\n          }\n        }\n      },\n      method: 'POST'\n    });\n\n    /**\n     * Perform a [shield.deleteRole](Remove a role from the native shield realm) request\n     *\n     * @param {Object} params - An object with parameters used to carry out this action\n     * @param {Boolean} params.refresh - Refresh the index after performing the operation\n     * @param {String} params.name - Role name\n     */\n    shield.deleteRole = ca({\n      params: {\n        refresh: {\n          type: 'boolean'\n        }\n      },\n      url: {\n        fmt: '/_xpack/security/role/<%=name%>',\n        req: {\n          name: {\n            type: 'string',\n            required: true\n          }\n        }\n      },\n      method: 'DELETE'\n    });\n\n    /**\n     * Perform a [shield.deleteUser](Remove a user from the native shield realm) request\n     *\n     * @param {Object} params - An object with parameters used to carry out this action\n     * @param {Boolean} params.refresh - Refresh the index after performing the operation\n     * @param {String} params.username - username\n     */\n    shield.deleteUser = ca({\n      params: {\n        refresh: {\n          type: 'boolean'\n        }\n      },\n      url: {\n        fmt: '/_xpack/security/user/<%=username%>',\n        req: {\n          username: {\n            type: 'string',\n            required: true\n          }\n        }\n      },\n      method: 'DELETE'\n    });\n\n    /**\n     * Perform a [shield.getRole](Retrieve one or more roles from the native shield realm) request\n     *\n     * @param {Object} params - An object with parameters used to carry out this action\n     * @param {String} params.name - Role name\n     */\n    shield.getRole = ca({\n      params: {},\n      urls: [{\n        fmt: '/_xpack/security/role/<%=name%>',\n        req: {\n          name: {\n            type: 'string',\n            required: false\n          }\n        }\n      }, {\n        fmt: '/_xpack/security/role'\n      }]\n    });\n\n    /**\n     * Perform a [shield.getUser](Retrieve one or more users from the native shield realm) request\n     *\n     * @param {Object} params - An object with parameters used to carry out this action\n     * @param {String, String[], Boolean} params.username - A comma-separated list of usernames\n     */\n    shield.getUser = ca({\n      params: {},\n      urls: [{\n        fmt: '/_xpack/security/user/<%=username%>',\n        req: {\n          username: {\n            type: 'list',\n            required: false\n          }\n        }\n      }, {\n        fmt: '/_xpack/security/user'\n      }]\n    });\n\n    /**\n     * Perform a [shield.putRole](Update or create a role for the native shield realm) request\n     *\n     * @param {Object} params - An object with parameters used to carry out this action\n     * @param {Boolean} params.refresh - Refresh the index after performing the operation\n     * @param {String} params.name - Role name\n     */\n    shield.putRole = ca({\n      params: {\n        refresh: {\n          type: 'boolean'\n        }\n      },\n      url: {\n        fmt: '/_xpack/security/role/<%=name%>',\n        req: {\n          name: {\n            type: 'string',\n            required: true\n          }\n        }\n      },\n      needBody: true,\n      method: 'PUT'\n    });\n\n    /**\n     * Perform a [shield.putUser](Update or create a user for the native shield realm) request\n     *\n     * @param {Object} params - An object with parameters used to carry out this action\n     * @param {Boolean} params.refresh - Refresh the index after performing the operation\n     * @param {String} params.username - The username of the User\n     */\n    shield.putUser = ca({\n      params: {\n        refresh: {\n          type: 'boolean'\n        }\n      },\n      url: {\n        fmt: '/_xpack/security/user/<%=username%>',\n        req: {\n          username: {\n            type: 'string',\n            required: true\n          }\n        }\n      },\n      needBody: true,\n      method: 'PUT'\n    });\n  };\n});\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9saWIvZWxhc3RpY3NlYXJjaC1zaGllbGQtanMvZWxhc3RpY3NlYXJjaC1zaGllbGQuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQSxBQUFDLENBQUEsVUFBVSxJQUFJLEVBQUUsT0FBTyxFQUFFO0FBQ3hCLE1BQUksT0FBTyxNQUFNLEtBQUssVUFBVSxJQUFJLE1BQU0sQ0FBQyxHQUFHLEVBQUU7QUFDOUMsVUFBTSxDQUFDLEVBQUUsRUFBRSxPQUFPLENBQUMsQ0FBQztHQUNyQixNQUFNLElBQUksT0FBTyxPQUFPLEtBQUssUUFBUSxFQUFFO0FBQ3RDLFVBQU0sQ0FBQyxPQUFPLEdBQUcsT0FBTyxFQUFFLENBQUM7R0FDNUIsTUFBTTtBQUNMLFFBQUksQ0FBQyxtQkFBbUIsR0FBRyxPQUFPLEVBQUUsQ0FBQztHQUN0QztDQUNGLENBQUEsWUFBTyxZQUFZO0FBQ2xCLFNBQU8sU0FBUyxZQUFZLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxVQUFVLEVBQUU7QUFDdkQsUUFBSSxFQUFFLEdBQUcsVUFBVSxDQUFDLFlBQVksQ0FBQyxPQUFPLENBQUM7O0FBRXpDLFVBQU0sQ0FBQyxTQUFTLENBQUMsTUFBTSxHQUFHLFVBQVUsQ0FBQyxZQUFZLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztBQUNyRSxRQUFJLE1BQU0sR0FBRyxNQUFNLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUM7Ozs7Ozs7QUFPL0MsVUFBTSxDQUFDLFlBQVksR0FBRyxFQUFFLENBQUM7QUFDdkIsWUFBTSxFQUFFLEVBQUU7QUFDVixTQUFHLEVBQUU7QUFDSCxXQUFHLEVBQUUsZ0NBQWdDO09BQ3RDO0tBQ0YsQ0FBQyxDQUFDOzs7Ozs7Ozs7QUFTSCxVQUFNLENBQUMsY0FBYyxHQUFHLEVBQUUsQ0FBQztBQUN6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T0FDN0IsQ0FDRjtLQUNGLENBQUMsQ0FBQzs7Ozs7Ozs7O0FBU0gsVUFBTSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7QUFDbEIsWUFBTSxFQUFFO0FBQ04sZUFBTyxFQUFFO0FBQ1AsY0FBSSxFQUFFLFNBQVM7U0FDaEI7T0FDRjtBQUNELFNBQUcsRUFBRTtBQUNILFdBQUcsRUFBRSxpQ0FBaUM7QUFDdEMsV0FBRyxFQUFFO0FBQ0gsY0FBSSxFQUFFO0FBQ0osZ0JBQUksRUFBRSxRQUFRO0FBQ2Qsb0JBQVEsRUFBRSxJQUFJO1dBQ2Y7U0FDRjtPQUNGO0FBQ0QsY0FBUSxFQUFFLElBQUk7QUFDZCxZQUFNLEVBQUUsS0FBSztLQUNkLENBQUMsQ0FBQzs7Ozs7Ozs7O0FBU0gsVUFBTSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7QUFDbEIsWUFBTSxFQUFFO0FBQ04sZUFBTyxFQUFFO0FBQ1AsY0FBSSxFQUFFLFNBQVM7U0FDaEI7T0FDRjtBQUNELFNBQUcsRUFBRTtBQUNILFdBQUcsRUFBRSxxQ0FBcUM7QUFDMUMsV0FBRyxFQUFFO0FBQ0gsa0JBQVEsRUFBRTtBQUNSLGdCQUFJLEVBQUUsUUFBUTtBQUNkLG9CQUFRLEVBQUUsSUFBSTtXQUNmO1NBQ0Y7T0FDRjtBQUNELGNBQVEsRUFBRSxJQUFJO0FBQ2QsWUFBTSxFQUFFLEtBQUs7S0FDZCxDQUFDLENBQUM7R0FFSixDQUFDO0NBQ0gsQ0FBQyxDQUFFIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9saWIvZWxhc3RpY3NlYXJjaC1zaGllbGQtanMvZWxhc3RpY3NlYXJjaC1zaGllbGQuanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gKHJvb3QsIGZhY3RvcnkpIHtcbiAgaWYgKHR5cGVvZiBkZWZpbmUgPT09ICdmdW5jdGlvbicgJiYgZGVmaW5lLmFtZCkge1xuICAgIGRlZmluZShbXSwgZmFjdG9yeSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKSB7XG4gICAgbW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG4gIH0gZWxzZSB7XG4gICAgcm9vdC5FbGFzdGljc2VhcmNoU2hpZWxkID0gZmFjdG9yeSgpO1xuICB9XG59KHRoaXMsIGZ1bmN0aW9uICgpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uIGFkZFNoaWVsZEFwaShDbGllbnQsIGNvbmZpZywgY29tcG9uZW50cykge1xuICAgIHZhciBjYSA9IGNvbXBvbmVudHMuY2xpZW50QWN0aW9uLmZhY3Rvcnk7XG5cbiAgICBDbGllbnQucHJvdG90eXBlLnNoaWVsZCA9IGNvbXBvbmVudHMuY2xpZW50QWN0aW9uLm5hbWVzcGFjZUZhY3RvcnkoKTtcbiAgICB2YXIgc2hpZWxkID0gQ2xpZW50LnByb3RvdHlwZS5zaGllbGQucHJvdG90eXBlO1xuXG4gICAgLyoqXG4gICAgICogUGVyZm9ybSBhIFtzaGllbGQuYXV0aGVudGljYXRlXShSZXRyaWV2ZSBkZXRhaWxzIGFib3V0IHRoZSBjdXJyZW50bHkgYXV0aGVudGljYXRlZCB1c2VyKSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggcGFyYW1ldGVycyB1c2VkIHRvIGNhcnJ5IG91dCB0aGlzIGFjdGlvblxuICAgICAqL1xuICAgIHNoaWVsZC5hdXRoZW50aWNhdGUgPSBjYSh7XG4gICAgICBwYXJhbXM6IHt9LFxuICAgICAgdXJsOiB7XG4gICAgICAgIGZtdDogJy9feHBhY2svc2VjdXJpdHkvX2F1dGhlbnRpY2F0ZSdcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFBlcmZvcm0gYSBbc2hpZWxkLmNoYW5nZVBhc3N3b3JkXShDaGFuZ2UgdGhlIHBhc3N3b3JkIG9mIGEgdXNlcikgcmVxdWVzdFxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIHBhcmFtZXRlcnMgdXNlZCB0byBjYXJyeSBvdXQgdGhpcyBhY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHBhcmFtcy5yZWZyZXNoIC0gUmVmcmVzaCB0aGUgaW5kZXggYWZ0ZXIgcGVyZm9ybWluZyB0aGUgb3BlcmF0aW9uXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhcmFtcy51c2VybmFtZSAtIFRoZSB1c2VybmFtZSBvZiB0aGUgdXNlciB0byBjaGFuZ2UgdGhlIHBhc3N3b3JkIGZvclxuICAgICAqL1xuICAgIHNoaWVsZC5jaGFuZ2VQYXNzd29yZCA9IGNhKHtcbiAgICAgIHBhcmFtczoge1xuICAgICAgICByZWZyZXNoOiB7XG4gICAgICAgICAgdHlwZTogJ2Jvb2xlYW4nXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB1cmxzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBmbXQ6ICcvX3hwYWNrL3NlY3VyaXR5L3VzZXIvPCU9dXNlcm5hbWUlPi9fcGFzc3dvcmQnLFxuICAgICAgICAgIHJlcToge1xuICAgICAgICAgICAgdXNlcm5hbWU6IHtcbiAgICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGZtdDogJy9feHBhY2svc2VjdXJpdHkvdXNlci9fcGFzc3dvcmQnXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBuZWVkQm9keTogdHJ1ZSxcbiAgICAgIG1ldGhvZDogJ1BPU1QnXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtIGEgW3NoaWVsZC5jbGVhckNhY2hlZFJlYWxtc10oQ2xlYXJzIHRoZSBpbnRlcm5hbCB1c2VyIGNhY2hlcyBmb3Igc3BlY2lmaWVkIHJlYWxtcykgcmVxdWVzdFxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIHBhcmFtZXRlcnMgdXNlZCB0byBjYXJyeSBvdXQgdGhpcyBhY3Rpb25cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGFyYW1zLnVzZXJuYW1lcyAtIENvbW1hLXNlcGFyYXRlZCBsaXN0IG9mIHVzZXJuYW1lcyB0byBjbGVhciBmcm9tIHRoZSBjYWNoZVxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXJhbXMucmVhbG1zIC0gQ29tbWEtc2VwYXJhdGVkIGxpc3Qgb2YgcmVhbG1zIHRvIGNsZWFyXG4gICAgICovXG4gICAgc2hpZWxkLmNsZWFyQ2FjaGVkUmVhbG1zID0gY2Eoe1xuICAgICAgcGFyYW1zOiB7XG4gICAgICAgIHVzZXJuYW1lczoge1xuICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdXJsOiB7XG4gICAgICAgIGZtdDogJy9feHBhY2svc2VjdXJpdHkvcmVhbG0vPCU9cmVhbG1zJT4vX2NsZWFyX2NhY2hlJyxcbiAgICAgICAgcmVxOiB7XG4gICAgICAgICAgcmVhbG1zOiB7XG4gICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgbWV0aG9kOiAnUE9TVCdcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFBlcmZvcm0gYSBbc2hpZWxkLmNsZWFyQ2FjaGVkUm9sZXNdKENsZWFycyB0aGUgaW50ZXJuYWwgY2FjaGVzIGZvciBzcGVjaWZpZWQgcm9sZXMpIHJlcXVlc3RcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBwYXJhbWV0ZXJzIHVzZWQgdG8gY2Fycnkgb3V0IHRoaXMgYWN0aW9uXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhcmFtcy5uYW1lIC0gUm9sZSBuYW1lXG4gICAgICovXG4gICAgc2hpZWxkLmNsZWFyQ2FjaGVkUm9sZXMgPSBjYSh7XG4gICAgICBwYXJhbXM6IHt9LFxuICAgICAgdXJsOiB7XG4gICAgICAgIGZtdDogJy9feHBhY2svc2VjdXJpdHkvcm9sZS88JT1uYW1lJT4vX2NsZWFyX2NhY2hlJyxcbiAgICAgICAgcmVxOiB7XG4gICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG1ldGhvZDogJ1BPU1QnXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtIGEgW3NoaWVsZC5kZWxldGVSb2xlXShSZW1vdmUgYSByb2xlIGZyb20gdGhlIG5hdGl2ZSBzaGllbGQgcmVhbG0pIHJlcXVlc3RcbiAgICAgKlxuICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgLSBBbiBvYmplY3Qgd2l0aCBwYXJhbWV0ZXJzIHVzZWQgdG8gY2Fycnkgb3V0IHRoaXMgYWN0aW9uXG4gICAgICogQHBhcmFtIHtCb29sZWFufSBwYXJhbXMucmVmcmVzaCAtIFJlZnJlc2ggdGhlIGluZGV4IGFmdGVyIHBlcmZvcm1pbmcgdGhlIG9wZXJhdGlvblxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXJhbXMubmFtZSAtIFJvbGUgbmFtZVxuICAgICAqL1xuICAgIHNoaWVsZC5kZWxldGVSb2xlID0gY2Eoe1xuICAgICAgcGFyYW1zOiB7XG4gICAgICAgIHJlZnJlc2g6IHtcbiAgICAgICAgICB0eXBlOiAnYm9vbGVhbidcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHVybDoge1xuICAgICAgICBmbXQ6ICcvX3hwYWNrL3NlY3VyaXR5L3JvbGUvPCU9bmFtZSU+JyxcbiAgICAgICAgcmVxOiB7XG4gICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIG1ldGhvZDogJ0RFTEVURSdcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFBlcmZvcm0gYSBbc2hpZWxkLmRlbGV0ZVVzZXJdKFJlbW92ZSBhIHVzZXIgZnJvbSB0aGUgbmF0aXZlIHNoaWVsZCByZWFsbSkgcmVxdWVzdFxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIHBhcmFtZXRlcnMgdXNlZCB0byBjYXJyeSBvdXQgdGhpcyBhY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHBhcmFtcy5yZWZyZXNoIC0gUmVmcmVzaCB0aGUgaW5kZXggYWZ0ZXIgcGVyZm9ybWluZyB0aGUgb3BlcmF0aW9uXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhcmFtcy51c2VybmFtZSAtIHVzZXJuYW1lXG4gICAgICovXG4gICAgc2hpZWxkLmRlbGV0ZVVzZXIgPSBjYSh7XG4gICAgICBwYXJhbXM6IHtcbiAgICAgICAgcmVmcmVzaDoge1xuICAgICAgICAgIHR5cGU6ICdib29sZWFuJ1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgdXJsOiB7XG4gICAgICAgIGZtdDogJy9feHBhY2svc2VjdXJpdHkvdXNlci88JT11c2VybmFtZSU+JyxcbiAgICAgICAgcmVxOiB7XG4gICAgICAgICAgdXNlcm5hbWU6IHtcbiAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBtZXRob2Q6ICdERUxFVEUnXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtIGEgW3NoaWVsZC5nZXRSb2xlXShSZXRyaWV2ZSBvbmUgb3IgbW9yZSByb2xlcyBmcm9tIHRoZSBuYXRpdmUgc2hpZWxkIHJlYWxtKSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggcGFyYW1ldGVycyB1c2VkIHRvIGNhcnJ5IG91dCB0aGlzIGFjdGlvblxuICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXJhbXMubmFtZSAtIFJvbGUgbmFtZVxuICAgICAqL1xuICAgIHNoaWVsZC5nZXRSb2xlID0gY2Eoe1xuICAgICAgcGFyYW1zOiB7fSxcbiAgICAgIHVybHM6IFtcbiAgICAgICAge1xuICAgICAgICAgIGZtdDogJy9feHBhY2svc2VjdXJpdHkvcm9sZS88JT1uYW1lJT4nLFxuICAgICAgICAgIHJlcToge1xuICAgICAgICAgICAgbmFtZToge1xuICAgICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlXG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgZm10OiAnL194cGFjay9zZWN1cml0eS9yb2xlJ1xuICAgICAgICB9XG4gICAgICBdXG4gICAgfSk7XG5cbiAgICAvKipcbiAgICAgKiBQZXJmb3JtIGEgW3NoaWVsZC5nZXRVc2VyXShSZXRyaWV2ZSBvbmUgb3IgbW9yZSB1c2VycyBmcm9tIHRoZSBuYXRpdmUgc2hpZWxkIHJlYWxtKSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggcGFyYW1ldGVycyB1c2VkIHRvIGNhcnJ5IG91dCB0aGlzIGFjdGlvblxuICAgICAqIEBwYXJhbSB7U3RyaW5nLCBTdHJpbmdbXSwgQm9vbGVhbn0gcGFyYW1zLnVzZXJuYW1lIC0gQSBjb21tYS1zZXBhcmF0ZWQgbGlzdCBvZiB1c2VybmFtZXNcbiAgICAgKi9cbiAgICBzaGllbGQuZ2V0VXNlciA9IGNhKHtcbiAgICAgIHBhcmFtczoge30sXG4gICAgICB1cmxzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBmbXQ6ICcvX3hwYWNrL3NlY3VyaXR5L3VzZXIvPCU9dXNlcm5hbWUlPicsXG4gICAgICAgICAgcmVxOiB7XG4gICAgICAgICAgICB1c2VybmFtZToge1xuICAgICAgICAgICAgICB0eXBlOiAnbGlzdCcsXG4gICAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGZtdDogJy9feHBhY2svc2VjdXJpdHkvdXNlcidcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0pO1xuXG4gICAgLyoqXG4gICAgICogUGVyZm9ybSBhIFtzaGllbGQucHV0Um9sZV0oVXBkYXRlIG9yIGNyZWF0ZSBhIHJvbGUgZm9yIHRoZSBuYXRpdmUgc2hpZWxkIHJlYWxtKSByZXF1ZXN0XG4gICAgICpcbiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGFyYW1zIC0gQW4gb2JqZWN0IHdpdGggcGFyYW1ldGVycyB1c2VkIHRvIGNhcnJ5IG91dCB0aGlzIGFjdGlvblxuICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gcGFyYW1zLnJlZnJlc2ggLSBSZWZyZXNoIHRoZSBpbmRleCBhZnRlciBwZXJmb3JtaW5nIHRoZSBvcGVyYXRpb25cbiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGFyYW1zLm5hbWUgLSBSb2xlIG5hbWVcbiAgICAgKi9cbiAgICBzaGllbGQucHV0Um9sZSA9IGNhKHtcbiAgICAgIHBhcmFtczoge1xuICAgICAgICByZWZyZXNoOiB7XG4gICAgICAgICAgdHlwZTogJ2Jvb2xlYW4nXG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICB1cmw6IHtcbiAgICAgICAgZm10OiAnL194cGFjay9zZWN1cml0eS9yb2xlLzwlPW5hbWUlPicsXG4gICAgICAgIHJlcToge1xuICAgICAgICAgIG5hbWU6IHtcbiAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWVcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBuZWVkQm9keTogdHJ1ZSxcbiAgICAgIG1ldGhvZDogJ1BVVCdcbiAgICB9KTtcblxuICAgIC8qKlxuICAgICAqIFBlcmZvcm0gYSBbc2hpZWxkLnB1dFVzZXJdKFVwZGF0ZSBvciBjcmVhdGUgYSB1c2VyIGZvciB0aGUgbmF0aXZlIHNoaWVsZCByZWFsbSkgcmVxdWVzdFxuICAgICAqXG4gICAgICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyAtIEFuIG9iamVjdCB3aXRoIHBhcmFtZXRlcnMgdXNlZCB0byBjYXJyeSBvdXQgdGhpcyBhY3Rpb25cbiAgICAgKiBAcGFyYW0ge0Jvb2xlYW59IHBhcmFtcy5yZWZyZXNoIC0gUmVmcmVzaCB0aGUgaW5kZXggYWZ0ZXIgcGVyZm9ybWluZyB0aGUgb3BlcmF0aW9uXG4gICAgICogQHBhcmFtIHtTdHJpbmd9IHBhcmFtcy51c2VybmFtZSAtIFRoZSB1c2VybmFtZSBvZiB0aGUgVXNlclxuICAgICAqL1xuICAgIHNoaWVsZC5wdXRVc2VyID0gY2Eoe1xuICAgICAgcGFyYW1zOiB7XG4gICAgICAgIHJlZnJlc2g6IHtcbiAgICAgICAgICB0eXBlOiAnYm9vbGVhbidcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHVybDoge1xuICAgICAgICBmbXQ6ICcvX3hwYWNrL3NlY3VyaXR5L3VzZXIvPCU9dXNlcm5hbWUlPicsXG4gICAgICAgIHJlcToge1xuICAgICAgICAgIHVzZXJuYW1lOiB7XG4gICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgbmVlZEJvZHk6IHRydWUsXG4gICAgICBtZXRob2Q6ICdQVVQnXG4gICAgfSk7XG5cbiAgfTtcbn0pKTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/elasticsearch-shield-js/elasticsearch-shield.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/elasticsearch-shield-js/elasticsearch-shield.js",
      "sourcesContent": [
        "(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    define([], factory);\n  } else if (typeof exports === 'object') {\n    module.exports = factory();\n  } else {\n    root.ElasticsearchShield = factory();\n  }\n}(this, function () {\n  return function addShieldApi(Client, config, components) {\n    var ca = components.clientAction.factory;\n\n    Client.prototype.shield = components.clientAction.namespaceFactory();\n    var shield = Client.prototype.shield.prototype;\n\n    /**\n     * Perform a [shield.authenticate](Retrieve details about the currently authenticated user) request\n     *\n     * @param {Object} params - An object with parameters used to carry out this action\n     */\n    shield.authenticate = ca({\n      params: {},\n      url: {\n        fmt: '/_xpack/security/_authenticate'\n      }\n    });\n\n    /**\n     * Perform a [shield.changePassword](Change the password of a user) request\n     *\n     * @param {Object} params - An object with parameters used to carry out this action\n     * @param {Boolean} params.refresh - Refresh the index after performing the operation\n     * @param {String} params.username - The username of the user to change the password for\n     */\n    shield.changePassword = ca({\n      params: {\n        refresh: {\n          type: 'boolean'\n        }\n      },\n      urls: [\n        {\n          fmt: '/_xpack/security/user/<%=username%>/_password',\n          req: {\n            username: {\n              type: 'string',\n              required: false\n            }\n          }\n        },\n        {\n          fmt: '/_xpack/security/user/_password'\n        }\n      ],\n      needBody: true,\n      method: 'POST'\n    });\n\n    /**\n     * Perform a [shield.clearCachedRealms](Clears the internal user caches for specified realms) request\n     *\n     * @param {Object} params - An object with parameters used to carry out this action\n     * @param {String} params.usernames - Comma-separated list of usernames to clear from the cache\n     * @param {String} params.realms - Comma-separated list of realms to clear\n     */\n    shield.clearCachedRealms = ca({\n      params: {\n        usernames: {\n          type: 'string',\n          required: false\n        }\n      },\n      url: {\n        fmt: '/_xpack/security/realm/<%=realms%>/_clear_cache',\n        req: {\n          realms: {\n            type: 'string',\n            required: true\n          }\n        }\n      },\n      method: 'POST'\n    });\n\n    /**\n     * Perform a [shield.clearCachedRoles](Clears the internal caches for specified roles) request\n     *\n     * @param {Object} params - An object with parameters used to carry out this action\n     * @param {String} params.name - Role name\n     */\n    shield.clearCachedRoles = ca({\n      params: {},\n      url: {\n        fmt: '/_xpack/security/role/<%=name%>/_clear_cache',\n        req: {\n          name: {\n            type: 'string',\n            required: true\n          }\n        }\n      },\n      method: 'POST'\n    });\n\n    /**\n     * Perform a [shield.deleteRole](Remove a role from the native shield realm) request\n     *\n     * @param {Object} params - An object with parameters used to carry out this action\n     * @param {Boolean} params.refresh - Refresh the index after performing the operation\n     * @param {String} params.name - Role name\n     */\n    shield.deleteRole = ca({\n      params: {\n        refresh: {\n          type: 'boolean'\n        }\n      },\n      url: {\n        fmt: '/_xpack/security/role/<%=name%>',\n        req: {\n          name: {\n            type: 'string',\n            required: true\n          }\n        }\n      },\n      method: 'DELETE'\n    });\n\n    /**\n     * Perform a [shield.deleteUser](Remove a user from the native shield realm) request\n     *\n     * @param {Object} params - An object with parameters used to carry out this action\n     * @param {Boolean} params.refresh - Refresh the index after performing the operation\n     * @param {String} params.username - username\n     */\n    shield.deleteUser = ca({\n      params: {\n        refresh: {\n          type: 'boolean'\n        }\n      },\n      url: {\n        fmt: '/_xpack/security/user/<%=username%>',\n        req: {\n          username: {\n            type: 'string',\n            required: true\n          }\n        }\n      },\n      method: 'DELETE'\n    });\n\n    /**\n     * Perform a [shield.getRole](Retrieve one or more roles from the native shield realm) request\n     *\n     * @param {Object} params - An object with parameters used to carry out this action\n     * @param {String} params.name - Role name\n     */\n    shield.getRole = ca({\n      params: {},\n      urls: [\n        {\n          fmt: '/_xpack/security/role/<%=name%>',\n          req: {\n            name: {\n              type: 'string',\n              required: false\n            }\n          }\n        },\n        {\n          fmt: '/_xpack/security/role'\n        }\n      ]\n    });\n\n    /**\n     * Perform a [shield.getUser](Retrieve one or more users from the native shield realm) request\n     *\n     * @param {Object} params - An object with parameters used to carry out this action\n     * @param {String, String[], Boolean} params.username - A comma-separated list of usernames\n     */\n    shield.getUser = ca({\n      params: {},\n      urls: [\n        {\n          fmt: '/_xpack/security/user/<%=username%>',\n          req: {\n            username: {\n              type: 'list',\n              required: false\n            }\n          }\n        },\n        {\n          fmt: '/_xpack/security/user'\n        }\n      ]\n    });\n\n    /**\n     * Perform a [shield.putRole](Update or create a role for the native shield realm) request\n     *\n     * @param {Object} params - An object with parameters used to carry out this action\n     * @param {Boolean} params.refresh - Refresh the index after performing the operation\n     * @param {String} params.name - Role name\n     */\n    shield.putRole = ca({\n      params: {\n        refresh: {\n          type: 'boolean'\n        }\n      },\n      url: {\n        fmt: '/_xpack/security/role/<%=name%>',\n        req: {\n          name: {\n            type: 'string',\n            required: true\n          }\n        }\n      },\n      needBody: true,\n      method: 'PUT'\n    });\n\n    /**\n     * Perform a [shield.putUser](Update or create a user for the native shield realm) request\n     *\n     * @param {Object} params - An object with parameters used to carry out this action\n     * @param {Boolean} params.refresh - Refresh the index after performing the operation\n     * @param {String} params.username - The username of the User\n     */\n    shield.putUser = ca({\n      params: {\n        refresh: {\n          type: 'boolean'\n        }\n      },\n      url: {\n        fmt: '/_xpack/security/user/<%=username%>',\n        req: {\n          username: {\n            type: 'string',\n            required: true\n          }\n        }\n      },\n      needBody: true,\n      method: 'PUT'\n    });\n\n  };\n}));\n"
      ]
    },
    "mtime": 1485775624445
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/routes/api/v1/authenticate.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "boom",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Boom"
              }
            ]
          },
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          },
          {
            "source": "../../../lib/get_is_valid_user",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "getIsValidUser"
              }
            ]
          },
          {
            "source": "../../../lib/get_calculate_expires",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "getCalculateExpires"
              }
            ]
          },
          {
            "source": "../../../lib/errors",
            "imported": [
              "wrapError"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "wrapError",
                "local": "wrapError"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _boom = require('boom');\n\nvar _boom2 = _interopRequireDefault(_boom);\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar _libGet_is_valid_user = require('../../../lib/get_is_valid_user');\n\nvar _libGet_is_valid_user2 = _interopRequireDefault(_libGet_is_valid_user);\n\nvar _libGet_calculate_expires = require('../../../lib/get_calculate_expires');\n\nvar _libGet_calculate_expires2 = _interopRequireDefault(_libGet_calculate_expires);\n\nvar _libErrors = require('../../../lib/errors');\n\nexports['default'] = function (server) {\n  var isValidUser = (0, _libGet_is_valid_user2['default'])(server);\n  var calculateExpires = (0, _libGet_calculate_expires2['default'])(server);\n\n  server.route({\n    method: 'POST',\n    path: '/api/security/v1/login',\n    handler: function handler(request, reply) {\n      var _request$payload = request.payload;\n      var username = _request$payload.username;\n      var password = _request$payload.password;\n\n      return isValidUser(request, username, password).then(function (response) {\n        // Initialize the session\n        request.auth.session.set({\n          username: username,\n          password: password,\n          expires: calculateExpires()\n        });\n\n        return reply(response);\n      }, function (error) {\n        request.auth.session.clear();\n        return reply(_boom2['default'].unauthorized(error));\n      });\n    },\n    config: {\n      auth: false,\n      validate: {\n        payload: {\n          username: _joi2['default'].string().required(),\n          password: _joi2['default'].string().required()\n        }\n      }\n    }\n  });\n\n  server.route({\n    method: 'POST',\n    path: '/api/security/v1/logout',\n    handler: function handler(request, reply) {\n      request.auth.session.clear();\n      return reply().code(204);\n    },\n    config: {\n      auth: false\n    }\n  });\n\n  server.route({\n    method: 'GET',\n    path: '/api/security/v1/me',\n    handler: function handler(request, reply) {\n      server.plugins.security.getUser(request).then(reply, _lodash2['default'].flow(_libErrors.wrapError, reply));\n    }\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9yb3V0ZXMvYXBpL3YxL2F1dGhlbnRpY2F0ZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7OztzQkFBYyxRQUFROzs7O29CQUNMLE1BQU07Ozs7bUJBQ1AsS0FBSzs7OztvQ0FDTSxnQ0FBZ0M7Ozs7d0NBQzNCLG9DQUFvQzs7Ozt5QkFDMUMscUJBQXFCOztxQkFFaEMsVUFBQyxNQUFNLEVBQUs7QUFDekIsTUFBTSxXQUFXLEdBQUcsdUNBQWUsTUFBTSxDQUFDLENBQUM7QUFDM0MsTUFBTSxnQkFBZ0IsR0FBRywyQ0FBb0IsTUFBTSxDQUFDLENBQUM7O0FBRXJELFFBQU0sQ0FBQyxLQUFLLENBQUM7QUFDWCxVQUFNLEVBQUUsTUFBTTtBQUNkLFFBQUksRUFBRSx3QkFBd0I7QUFDOUIsV0FBTyxFQUFBLGlCQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUU7NkJBQ08sT0FBTyxDQUFDLE9BQU87VUFBckMsUUFBUSxvQkFBUixRQUFRO1VBQUUsUUFBUSxvQkFBUixRQUFROztBQUN6QixhQUFPLFdBQVcsQ0FBQyxPQUFPLEVBQUUsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDLElBQUksQ0FBQyxVQUFDLFFBQVEsRUFBSzs7QUFFakUsZUFBTyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDO0FBQ3ZCLGtCQUFRLEVBQVIsUUFBUTtBQUNSLGtCQUFRLEVBQVIsUUFBUTtBQUNSLGlCQUFPLEVBQUUsZ0JBQWdCLEVBQUU7U0FDNUIsQ0FBQyxDQUFDOztBQUVILGVBQU8sS0FBSyxDQUFDLFFBQVEsQ0FBQyxDQUFDO09BQ3hCLEVBQUUsVUFBQyxLQUFLLEVBQUs7QUFDWixlQUFPLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsQ0FBQztBQUM3QixlQUFPLEtBQUssQ0FBQyxrQkFBSyxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztPQUN4QyxDQUFDLENBQUM7S0FDSjtBQUNELFVBQU0sRUFBRTtBQUNOLFVBQUksRUFBRSxLQUFLO0FBQ1gsY0FBUSxFQUFFO0FBQ1IsZUFBTyxFQUFFO0FBQ1Asa0JBQVEsRUFBRSxpQkFBSSxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUU7QUFDakMsa0JBQVEsRUFBRSxpQkFBSSxNQUFNLEVBQUUsQ0FBQyxRQUFRLEVBQUU7U0FDbEM7T0FDRjtLQUNGO0dBQ0YsQ0FBQyxDQUFDOztBQUVILFFBQU0sQ0FBQyxLQUFLLENBQUM7QUFDWCxVQUFNLEVBQUUsTUFBTTtBQUNkLFFBQUksRUFBRSx5QkFBeUI7QUFDL0IsV0FBTyxFQUFBLGlCQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUU7QUFDdEIsYUFBTyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxFQUFFLENBQUM7QUFDN0IsYUFBTyxLQUFLLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7S0FDMUI7QUFDRCxVQUFNLEVBQUU7QUFDTixVQUFJLEVBQUUsS0FBSztLQUNaO0dBQ0YsQ0FBQyxDQUFDOztBQUVILFFBQU0sQ0FBQyxLQUFLLENBQUM7QUFDWCxVQUFNLEVBQUUsS0FBSztBQUNiLFFBQUksRUFBRSxxQkFBcUI7QUFDM0IsV0FBTyxFQUFBLGlCQUFDLE9BQU8sRUFBRSxLQUFLLEVBQUU7QUFDdEIsWUFBTSxDQUFDLE9BQU8sQ0FBQyxRQUFRLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsb0JBQUUsSUFBSSx1QkFBWSxLQUFLLENBQUMsQ0FBQyxDQUFDO0tBQ2hGO0dBQ0YsQ0FBQyxDQUFDO0NBQ0oiLCJmaWxlIjoiL2hvbWUvdWJ1bnR1L3dvcmtzcGFjZS9raWJhbmEtNS4wLjItbGludXgteDg2XzY0L3BsdWdpbnMveC1wYWNrL3BsdWdpbnMvc2VjdXJpdHkvc2VydmVyL3JvdXRlcy9hcGkvdjEvYXV0aGVudGljYXRlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBCb29tIGZyb20gJ2Jvb20nO1xuaW1wb3J0IEpvaSBmcm9tICdqb2knO1xuaW1wb3J0IGdldElzVmFsaWRVc2VyIGZyb20gJy4uLy4uLy4uL2xpYi9nZXRfaXNfdmFsaWRfdXNlcic7XG5pbXBvcnQgZ2V0Q2FsY3VsYXRlRXhwaXJlcyBmcm9tICcuLi8uLi8uLi9saWIvZ2V0X2NhbGN1bGF0ZV9leHBpcmVzJztcbmltcG9ydCB7IHdyYXBFcnJvciB9IGZyb20gJy4uLy4uLy4uL2xpYi9lcnJvcnMnO1xuXG5leHBvcnQgZGVmYXVsdCAoc2VydmVyKSA9PiB7XG4gIGNvbnN0IGlzVmFsaWRVc2VyID0gZ2V0SXNWYWxpZFVzZXIoc2VydmVyKTtcbiAgY29uc3QgY2FsY3VsYXRlRXhwaXJlcyA9IGdldENhbGN1bGF0ZUV4cGlyZXMoc2VydmVyKTtcblxuICBzZXJ2ZXIucm91dGUoe1xuICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgIHBhdGg6ICcvYXBpL3NlY3VyaXR5L3YxL2xvZ2luJyxcbiAgICBoYW5kbGVyKHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgICBjb25zdCB7dXNlcm5hbWUsIHBhc3N3b3JkfSA9IHJlcXVlc3QucGF5bG9hZDtcbiAgICAgIHJldHVybiBpc1ZhbGlkVXNlcihyZXF1ZXN0LCB1c2VybmFtZSwgcGFzc3dvcmQpLnRoZW4oKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgIC8vIEluaXRpYWxpemUgdGhlIHNlc3Npb25cbiAgICAgICAgcmVxdWVzdC5hdXRoLnNlc3Npb24uc2V0KHtcbiAgICAgICAgICB1c2VybmFtZSxcbiAgICAgICAgICBwYXNzd29yZCxcbiAgICAgICAgICBleHBpcmVzOiBjYWxjdWxhdGVFeHBpcmVzKClcbiAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuIHJlcGx5KHJlc3BvbnNlKTtcbiAgICAgIH0sIChlcnJvcikgPT4ge1xuICAgICAgICByZXF1ZXN0LmF1dGguc2Vzc2lvbi5jbGVhcigpO1xuICAgICAgICByZXR1cm4gcmVwbHkoQm9vbS51bmF1dGhvcml6ZWQoZXJyb3IpKTtcbiAgICAgIH0pO1xuICAgIH0sXG4gICAgY29uZmlnOiB7XG4gICAgICBhdXRoOiBmYWxzZSxcbiAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgIHBheWxvYWQ6IHtcbiAgICAgICAgICB1c2VybmFtZTogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gICAgICAgICAgcGFzc3dvcmQ6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIHNlcnZlci5yb3V0ZSh7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgcGF0aDogJy9hcGkvc2VjdXJpdHkvdjEvbG9nb3V0JyxcbiAgICBoYW5kbGVyKHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgICByZXF1ZXN0LmF1dGguc2Vzc2lvbi5jbGVhcigpO1xuICAgICAgcmV0dXJuIHJlcGx5KCkuY29kZSgyMDQpO1xuICAgIH0sXG4gICAgY29uZmlnOiB7XG4gICAgICBhdXRoOiBmYWxzZSxcbiAgICB9XG4gIH0pO1xuXG4gIHNlcnZlci5yb3V0ZSh7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBwYXRoOiAnL2FwaS9zZWN1cml0eS92MS9tZScsXG4gICAgaGFuZGxlcihyZXF1ZXN0LCByZXBseSkge1xuICAgICAgc2VydmVyLnBsdWdpbnMuc2VjdXJpdHkuZ2V0VXNlcihyZXF1ZXN0KS50aGVuKHJlcGx5LCBfLmZsb3cod3JhcEVycm9yLCByZXBseSkpO1xuICAgIH1cbiAgfSk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/routes/api/v1/authenticate.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;sBAAc,QAAQ;;;;oBACL,MAAM;;;;mBACP,KAAK;;;;oCACM,gCAAgC;;;;wCAC3B,oCAAoC;;;;yBAC1C,qBAAqB;;qBAEhC,UAAC,MAAM,EAAK;AACzB,MAAM,WAAW,GAAG,uCAAe,MAAM,CAAC,CAAC;AAC3C,MAAM,gBAAgB,GAAG,2CAAoB,MAAM,CAAC,CAAC;;AAErD,QAAM,CAAC,KAAK,CAAC;AACX,UAAM,EAAE,MAAM;AACd,QAAI,EAAE,wBAAwB;AAC9B,WAAO,EAAA,iBAAC,OAAO,EAAE,KAAK,EAAE;6BACO,OAAO,CAAC,OAAO;UAArC,QAAQ,oBAAR,QAAQ;UAAE,QAAQ,oBAAR,QAAQ;;AACzB,aAAO,WAAW,CAAC,OAAO,EAAE,QAAQ,EAAE,QAAQ,CAAC,CAAC,IAAI,CAAC,UAAC,QAAQ,EAAK;;AAEjE,eAAO,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;AACvB,kBAAQ,EAAR,QAAQ;AACR,kBAAQ,EAAR,QAAQ;AACR,iBAAO,EAAE,gBAAgB,EAAE;SAC5B,CAAC,CAAC;;AAEH,eAAO,KAAK,CAAC,QAAQ,CAAC,CAAC;OACxB,EAAE,UAAC,KAAK,EAAK;AACZ,eAAO,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;AAC7B,eAAO,KAAK,CAAC,kBAAK,YAAY,CAAC,KAAK,CAAC,CAAC,CAAC;OACxC,CAAC,CAAC;KACJ;AACD,UAAM,EAAE;AACN,UAAI,EAAE,KAAK;AACX,cAAQ,EAAE;AACR,eAAO,EAAE;AACP,kBAAQ,EAAE,iBAAI,MAAM,EAAE,CAAC,QAAQ,EAAE;AACjC,kBAAQ,EAAE,iBAAI,MAAM,EAAE,CAAC,QAAQ,EAAE;SAClC;OACF;KACF;GACF,CAAC,CAAC;;AAEH,QAAM,CAAC,KAAK,CAAC;AACX,UAAM,EAAE,MAAM;AACd,QAAI,EAAE,yBAAyB;AAC/B,WAAO,EAAA,iBAAC,OAAO,EAAE,KAAK,EAAE;AACtB,aAAO,CAAC,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,CAAC;AAC7B,aAAO,KAAK,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;KAC1B;AACD,UAAM,EAAE;AACN,UAAI,EAAE,KAAK;KACZ;GACF,CAAC,CAAC;;AAEH,QAAM,CAAC,KAAK,CAAC;AACX,UAAM,EAAE,KAAK;AACb,QAAI,EAAE,qBAAqB;AAC3B,WAAO,EAAA,iBAAC,OAAO,EAAE,KAAK,EAAE;AACtB,YAAM,CAAC,OAAO,CAAC,QAAQ,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,IAAI,CAAC,KAAK,EAAE,oBAAE,IAAI,uBAAY,KAAK,CAAC,CAAC,CAAC;KAChF;GACF,CAAC,CAAC;CACJ",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/routes/api/v1/authenticate.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport Boom from 'boom';\nimport Joi from 'joi';\nimport getIsValidUser from '../../../lib/get_is_valid_user';\nimport getCalculateExpires from '../../../lib/get_calculate_expires';\nimport { wrapError } from '../../../lib/errors';\n\nexport default (server) => {\n  const isValidUser = getIsValidUser(server);\n  const calculateExpires = getCalculateExpires(server);\n\n  server.route({\n    method: 'POST',\n    path: '/api/security/v1/login',\n    handler(request, reply) {\n      const {username, password} = request.payload;\n      return isValidUser(request, username, password).then((response) => {\n        // Initialize the session\n        request.auth.session.set({\n          username,\n          password,\n          expires: calculateExpires()\n        });\n\n        return reply(response);\n      }, (error) => {\n        request.auth.session.clear();\n        return reply(Boom.unauthorized(error));\n      });\n    },\n    config: {\n      auth: false,\n      validate: {\n        payload: {\n          username: Joi.string().required(),\n          password: Joi.string().required()\n        }\n      }\n    }\n  });\n\n  server.route({\n    method: 'POST',\n    path: '/api/security/v1/logout',\n    handler(request, reply) {\n      request.auth.session.clear();\n      return reply().code(204);\n    },\n    config: {\n      auth: false,\n    }\n  });\n\n  server.route({\n    method: 'GET',\n    path: '/api/security/v1/me',\n    handler(request, reply) {\n      server.plugins.security.getUser(request).then(reply, _.flow(wrapError, reply));\n    }\n  });\n};\n"
      ]
    },
    "mtime": 1485775625189
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/errors.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "boom",
            "imported": [
              "wrap"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "wrap",
                "local": "wrapBoom"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "wrapError",
            "error"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "wrapError",
              "exported": "wrapError"
            },
            {
              "kind": "local",
              "local": "error",
              "exported": "error"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports.wrapError = wrapError;\n\nvar _boom = require('boom');\n\nfunction wrapError(error) {\n  return (0, _boom.wrap)(error, error.status);\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9saWIvZXJyb3JzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7b0JBQWlDLE1BQU07O0FBRWhDLFNBQVMsU0FBUyxDQUFDLEtBQUssRUFBRTtBQUMvQixTQUFPLGdCQUFTLEtBQUssRUFBRSxLQUFLLENBQUMsTUFBTSxDQUFDLENBQUM7Q0FDdEMiLCJmaWxlIjoiL2hvbWUvdWJ1bnR1L3dvcmtzcGFjZS9raWJhbmEtNS4wLjItbGludXgteDg2XzY0L3BsdWdpbnMveC1wYWNrL3BsdWdpbnMvc2VjdXJpdHkvc2VydmVyL2xpYi9lcnJvcnMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyB3cmFwIGFzIHdyYXBCb29tIH0gZnJvbSAnYm9vbSc7XG5cbmV4cG9ydCBmdW5jdGlvbiB3cmFwRXJyb3IoZXJyb3IpIHtcbiAgcmV0dXJuIHdyYXBCb29tKGVycm9yLCBlcnJvci5zdGF0dXMpO1xufVxuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/errors.js"
      ],
      "names": [],
      "mappings": ";;;;;;;oBAAiC,MAAM;;AAEhC,SAAS,SAAS,CAAC,KAAK,EAAE;AAC/B,SAAO,gBAAS,KAAK,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC;CACtC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/errors.js",
      "sourcesContent": [
        "import { wrap as wrapBoom } from 'boom';\n\nexport function wrapError(error) {\n  return wrapBoom(error, error.status);\n}\n"
      ]
    },
    "mtime": 1485775596253
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/routes/api/v1/users.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "boom",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Boom"
              }
            ]
          },
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          },
          {
            "source": "../../../lib/get_client_shield",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "getClient"
              }
            ]
          },
          {
            "source": "../../../lib/user_schema",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "userSchema"
              }
            ]
          },
          {
            "source": "../../../lib/errors",
            "imported": [
              "wrapError"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "wrapError",
                "local": "wrapError"
              }
            ]
          },
          {
            "source": "../../../lib/get_calculate_expires",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "getCalculateExpires"
              }
            ]
          },
          {
            "source": "../../../lib/on_change_password",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "onChangePassword"
              }
            ]
          },
          {
            "source": "../../../lib/get_is_valid_user",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "getIsValidUser"
              }
            ]
          },
          {
            "source": "../../../lib/route_pre_check_license",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "routePreCheckLicense"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _boom = require('boom');\n\nvar _boom2 = _interopRequireDefault(_boom);\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nvar _libGet_client_shield = require('../../../lib/get_client_shield');\n\nvar _libGet_client_shield2 = _interopRequireDefault(_libGet_client_shield);\n\nvar _libUser_schema = require('../../../lib/user_schema');\n\nvar _libUser_schema2 = _interopRequireDefault(_libUser_schema);\n\nvar _libErrors = require('../../../lib/errors');\n\nvar _libGet_calculate_expires = require('../../../lib/get_calculate_expires');\n\nvar _libGet_calculate_expires2 = _interopRequireDefault(_libGet_calculate_expires);\n\nvar _libOn_change_password = require('../../../lib/on_change_password');\n\nvar _libOn_change_password2 = _interopRequireDefault(_libOn_change_password);\n\nvar _libGet_is_valid_user = require('../../../lib/get_is_valid_user');\n\nvar _libGet_is_valid_user2 = _interopRequireDefault(_libGet_is_valid_user);\n\nvar _libRoute_pre_check_license = require('../../../lib/route_pre_check_license');\n\nvar _libRoute_pre_check_license2 = _interopRequireDefault(_libRoute_pre_check_license);\n\nexports['default'] = function (server) {\n  var callWithRequest = (0, _libGet_client_shield2['default'])(server).callWithRequest;\n  var calculateExpires = (0, _libGet_calculate_expires2['default'])(server);\n  var isValidUser = (0, _libGet_is_valid_user2['default'])(server);\n  var routePreCheckLicenseFn = (0, _libRoute_pre_check_license2['default'])(server);\n\n  server.route({\n    method: 'GET',\n    path: '/api/security/v1/users',\n    handler: function handler(request, reply) {\n      return callWithRequest(request, 'shield.getUser').then(function (response) {\n        return reply(_lodash2['default'].values(response));\n      }, _lodash2['default'].flow(_libErrors.wrapError, reply));\n    },\n    config: {\n      pre: [routePreCheckLicenseFn]\n    }\n  });\n\n  server.route({\n    method: 'GET',\n    path: '/api/security/v1/users/{username}',\n    handler: function handler(request, reply) {\n      var username = request.params.username;\n      return callWithRequest(request, 'shield.getUser', { username: username }).then(function (response) {\n        if (response[username]) return reply(response[username]);\n        return reply(_boom2['default'].notFound());\n      }, _lodash2['default'].flow(_libErrors.wrapError, reply));\n    },\n    config: {\n      pre: [routePreCheckLicenseFn]\n    }\n  });\n\n  server.route({\n    method: 'POST',\n    path: '/api/security/v1/users/{username}',\n    handler: function handler(request, reply) {\n      var username = request.params.username;\n      var body = (0, _lodash2['default'])(request.payload).omit(['username', 'enabled']).omit(_lodash2['default'].isNull);\n      return callWithRequest(request, 'shield.putUser', { username: username, body: body }).then(function () {\n        return reply(request.payload);\n      }, _lodash2['default'].flow(_libErrors.wrapError, reply));\n    },\n    config: {\n      validate: {\n        payload: _libUser_schema2['default']\n      },\n      pre: [routePreCheckLicenseFn]\n    }\n  });\n\n  server.route({\n    method: 'DELETE',\n    path: '/api/security/v1/users/{username}',\n    handler: function handler(request, reply) {\n      var username = request.params.username;\n      return callWithRequest(request, 'shield.deleteUser', { username: username }).then(function () {\n        return reply().code(204);\n      }, _lodash2['default'].flow(_libErrors.wrapError, reply));\n    },\n    config: {\n      pre: [routePreCheckLicenseFn]\n    }\n  });\n\n  server.route({\n    method: 'POST',\n    path: '/api/security/v1/users/{username}/password',\n    handler: function handler(request, reply) {\n      var username = request.params.username;\n      var _request$payload = request.payload;\n      var password = _request$payload.password;\n      var newPassword = _request$payload.newPassword;\n\n      var promise = Promise.resolve();\n      if (username === request.auth.credentials.username) promise = isValidUser(request, username, password);\n\n      return promise.then(function () {\n        var body = { password: newPassword };\n        return callWithRequest(request, 'shield.changePassword', { username: username, body: body }).then((0, _libOn_change_password2['default'])(request, username, newPassword, calculateExpires, reply))['catch'](_lodash2['default'].flow(_libErrors.wrapError, reply));\n      })['catch'](function (error) {\n        return reply(_boom2['default'].unauthorized(error));\n      });\n    },\n    config: {\n      validate: {\n        payload: {\n          password: _joi2['default'].string(),\n          newPassword: _joi2['default'].string().required()\n        }\n      },\n      pre: [routePreCheckLicenseFn]\n    }\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9yb3V0ZXMvYXBpL3YxL3VzZXJzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O3NCQUFjLFFBQVE7Ozs7b0JBQ0wsTUFBTTs7OzttQkFDUCxLQUFLOzs7O29DQUNDLGdDQUFnQzs7Ozs4QkFDL0IsMEJBQTBCOzs7O3lCQUN2QixxQkFBcUI7O3dDQUNmLG9DQUFvQzs7OztxQ0FDdkMsaUNBQWlDOzs7O29DQUNuQyxnQ0FBZ0M7Ozs7MENBQzFCLHNDQUFzQzs7OztxQkFFeEQsVUFBQyxNQUFNLEVBQUs7QUFDekIsTUFBTSxlQUFlLEdBQUcsdUNBQVUsTUFBTSxDQUFDLENBQUMsZUFBZSxDQUFDO0FBQzFELE1BQU0sZ0JBQWdCLEdBQUcsMkNBQW9CLE1BQU0sQ0FBQyxDQUFDO0FBQ3JELE1BQU0sV0FBVyxHQUFHLHVDQUFlLE1BQU0sQ0FBQyxDQUFDO0FBQzNDLE1BQU0sc0JBQXNCLEdBQUcsNkNBQXFCLE1BQU0sQ0FBQyxDQUFDOztBQUU1RCxRQUFNLENBQUMsS0FBSyxDQUFDO0FBQ1gsVUFBTSxFQUFFLEtBQUs7QUFDYixRQUFJLEVBQUUsd0JBQXdCO0FBQzlCLFdBQU8sRUFBQSxpQkFBQyxPQUFPLEVBQUUsS0FBSyxFQUFFO0FBQ3RCLGFBQU8sZUFBZSxDQUFDLE9BQU8sRUFBRSxnQkFBZ0IsQ0FBQyxDQUFDLElBQUksQ0FDcEQsVUFBQyxRQUFRO2VBQUssS0FBSyxDQUFDLG9CQUFFLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQztPQUFBLEVBQ3ZDLG9CQUFFLElBQUksdUJBQVksS0FBSyxDQUFDLENBQ3pCLENBQUM7S0FDSDtBQUNELFVBQU0sRUFBRTtBQUNOLFNBQUcsRUFBRSxDQUFDLHNCQUFzQixDQUFDO0tBQzlCO0dBQ0YsQ0FBQyxDQUFDOztBQUVILFFBQU0sQ0FBQyxLQUFL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QyxJQUFJLENBQUMsV0FBVyxDQUFDLFFBQVEsRUFBRSxPQUFPLEdBQUcsV0FBVyxDQUFDLE9BQU8sRUFBRSxRQUFRLEVBQUUsUUFBUSxDQUFDLENBQUM7O0FBRXZHLGFBQU8sT0FBTyxDQUFDLElBQUksQ0FBQyxZQUFNO0FBQ3hCLFlBQU0sSUFBSSxHQUFHLEVBQUMsUUFBUSxFQUFFLFdBQVcsRUFBQyxDQUFDO0FBQ3JDLGVBQU8sZUFBZSxDQUFDLE9BQU8sRUFBRSx1QkFBdUIsRUFBRSxFQUFDLFFBQVEsRUFBUixRQUFRLEVBQUUsSUFBSSxFQUFKLElBQUksRUFBQyxDQUFDLENBQ3pFLElBQUksQ0FBQyx3Q0FBaUIsT0FBTyxFQUFFLFFBQVEsRUFBRSxXQUFXLEVBQUUsZ0JBQWdCLEVBQUUsS0FBSyxDQUFDLENBQUMsU0FDMUUsQ0FBQyxvQkFBRSxJQUFJLHVCQUFZLEtBQUssQ0FBQyxDQUFDLENBQUM7T0FDbEMsQ0FBQyxTQUNJLENBQUMsVUFBQyxLQUFLO2VBQUssS0FBSyxDQUFDLGtCQUFLLFlBQVksQ0FBQyxLQUFLLENBQUMsQ0FBQztPQUFBLENBQUMsQ0FBQztLQUNwRDtBQUNELFVBQU0sRUFBRTtBQUNOLGNBQVEsRUFBRTtBQUNSLGVBQU8sRUFBRTtBQUNQLGtCQUFRLEVBQUUsaUJBQUksTUFBTSxFQUFFO0FBQ3RCLHFCQUFXLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFO1NBQ3JDO09BQ0Y7QUFDRCxTQUFHLEVBQUUsQ0FBQyxzQkFBc0IsQ0FBQztLQUM5QjtHQUNGLENBQUMsQ0FBQztDQUNKIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9yb3V0ZXMvYXBpL3YxL3VzZXJzLmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IF8gZnJvbSAnbG9kYXNoJztcbmltcG9ydCBCb29tIGZyb20gJ2Jvb20nO1xuaW1wb3J0IEpvaSBmcm9tICdqb2knO1xuaW1wb3J0IGdldENsaWVudCBmcm9tICcuLi8uLi8uLi9saWIvZ2V0X2NsaWVudF9zaGllbGQnO1xuaW1wb3J0IHVzZXJTY2hlbWEgZnJvbSAnLi4vLi4vLi4vbGliL3VzZXJfc2NoZW1hJztcbmltcG9ydCB7IHdyYXBFcnJvciB9IGZyb20gJy4uLy4uLy4uL2xpYi9lcnJvcnMnO1xuaW1wb3J0IGdldENhbGN1bGF0ZUV4cGlyZXMgZnJvbSAnLi4vLi4vLi4vbGliL2dldF9jYWxjdWxhdGVfZXhwaXJlcyc7XG5pbXBvcnQgb25DaGFuZ2VQYXNzd29yZCBmcm9tICcuLi8uLi8uLi9saWIvb25fY2hhbmdlX3Bhc3N3b3JkJztcbmltcG9ydCBnZXRJc1ZhbGlkVXNlciBmcm9tICcuLi8uLi8uLi9saWIvZ2V0X2lzX3ZhbGlkX3VzZXInO1xuaW1wb3J0IHJvdXRlUHJlQ2hlY2tMaWNlbnNlIGZyb20gJy4uLy4uLy4uL2xpYi9yb3V0ZV9wcmVfY2hlY2tfbGljZW5zZSc7XG5cbmV4cG9ydCBkZWZhdWx0IChzZXJ2ZXIpID0+IHtcbiAgY29uc3QgY2FsbFdpdGhSZXF1ZXN0ID0gZ2V0Q2xpZW50KHNlcnZlcikuY2FsbFdpdGhSZXF1ZXN0O1xuICBjb25zdCBjYWxjdWxhdGVFeHBpcmVzID0gZ2V0Q2FsY3VsYXRlRXhwaXJlcyhzZXJ2ZXIpO1xuICBjb25zdCBpc1ZhbGlkVXNlciA9IGdldElzVmFsaWRVc2VyKHNlcnZlcik7XG4gIGNvbnN0IHJvdXRlUHJlQ2hlY2tMaWNlbnNlRm4gPSByb3V0ZVByZUNoZWNrTGljZW5zZShzZXJ2ZXIpO1xuXG4gIHNlcnZlci5yb3V0ZSh7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBwYXRoOiAnL2FwaS9zZWN1cml0eS92MS91c2VycycsXG4gICAgaGFuZGxlcihyZXF1ZXN0LCByZXBseSkge1xuICAgICAgcmV0dXJuIGNhbGxXaXRoUmVxdWVzdChyZXF1ZXN0LCAnc2hpZWxkLmdldFVzZXInKS50aGVuKFxuICAgICAgICAocmVzcG9uc2UpID0+IHJlcGx5KF8udmFsdWVzKHJlc3BvbnNlKSksXG4gICAgICAgIF8uZmxvdyh3cmFwRXJyb3IsIHJlcGx5KVxuICAgICAgKTtcbiAgICB9LFxuICAgIGNvbmZpZzoge1xuICAgICAgcHJlOiBbcm91dGVQcmVDaGVja0xpY2Vuc2VGbl1cbiAgICB9XG4gIH0pO1xuXG4gIHNlcnZlci5yb3V0ZSh7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBwYXRoOiAnL2FwaS9zZWN1cml0eS92MS91c2Vycy97dXNlcm5hbWV9JyxcbiAgICBoYW5kbGVyKHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgICBjb25zdCB1c2VybmFtZSA9IHJlcXVlc3QucGFyYW1zLnVzZXJuYW1lO1xuICAgICAgcmV0dXJuIGNhbGxXaXRoUmVxdWVzdChyZXF1ZXN0LCAnc2hpZWxkLmdldFVzZXInLCB7dXNlcm5hbWV9KS50aGVuKFxuICAgICAgICAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICBpZiAocmVzcG9uc2VbdXNlcm5hbWVdKSByZXR1cm4gcmVwbHkocmVzcG9uc2VbdXNlcm5hbWVdKTtcbiAgICAgICAgICByZXR1cm4gcmVwbHkoQm9vbS5ub3RGb3VuZCgpKTtcbiAgICAgICAgfSxcbiAgICAgICAgXy5mbG93KHdyYXBFcnJvciwgcmVwbHkpKTtcbiAgICB9LFxuICAgIGNvbmZpZzoge1xuICAgICAgcHJlOiBbcm91dGVQcmVDaGVja0xpY2Vuc2VGbl1cbiAgICB9XG4gIH0pO1xuXG4gIHNlcnZlci5yb3V0ZSh7XG4gICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgcGF0aDogJy9hcGkvc2VjdXJpdHkvdjEvdXNlcnMve3VzZXJuYW1lfScsXG4gICAgaGFuZGxlcihyZXF1ZXN0LCByZXBseSkge1xuICAgICAgY29uc3QgdXNlcm5hbWUgPSByZXF1ZXN0LnBhcmFtcy51c2VybmFtZTtcbiAgICAgIGNvbnN0IGJvZHkgPSBfKHJlcXVlc3QucGF5bG9hZCkub21pdChbJ3VzZXJuYW1lJywgJ2VuYWJsZWQnXSkub21pdChfLmlzTnVsbCk7XG4gICAgICByZXR1cm4gY2FsbFdpdGhSZXF1ZXN0KHJlcXVlc3QsICdzaGllbGQucHV0VXNlcicsIHt1c2VybmFtZSwgYm9keX0pLnRoZW4oXG4gICAgICAgICgpID0+IHJlcGx5KHJlcXVlc3QucGF5bG9hZCksXG4gICAgICAgIF8uZmxvdyh3cmFwRXJyb3IsIHJlcGx5KSk7XG4gICAgfSxcbiAgICBjb25maWc6IHtcbiAgICAgIHZhbGlkYXRlOiB7XG4gICAgICAgIHBheWxvYWQ6IHVzZXJTY2hlbWFcbiAgICAgIH0sXG4gICAgICBwcmU6IFtyb3V0ZVByZUNoZWNrTGljZW5zZUZuXVxuICAgIH1cbiAgfSk7XG5cbiAgc2VydmVyLnJvdXRlKHtcbiAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgIHBhdGg6ICcvYXBpL3NlY3VyaXR5L3YxL3VzZXJzL3t1c2VybmFtZX0nLFxuICAgIGhhbmRsZXIocmVxdWVzdCwgcmVwbHkpIHtcbiAgICAgIGNvbnN0IHVzZXJuYW1lID0gcmVxdWVzdC5wYXJhbXMudXNlcm5hbWU7XG4gICAgICByZXR1cm4gY2FsbFdpdGhSZXF1ZXN0KHJlcXVlc3QsICdzaGllbGQuZGVsZXRlVXNlcicsIHt1c2VybmFtZX0pLnRoZW4oXG4gICAgICAgICgpID0+IHJlcGx5KCkuY29kZSgyMDQpLFxuICAgICAgICBfLmZsb3cod3JhcEVycm9yLCByZXBseSkpO1xuICAgIH0sXG4gICAgY29uZmlnOiB7XG4gICAgICBwcmU6IFtyb3V0ZVByZUNoZWNrTGljZW5zZUZuXVxuICAgIH1cbiAgfSk7XG5cbiAgc2VydmVyLnJvdXRlKHtcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICBwYXRoOiAnL2FwaS9zZWN1cml0eS92MS91c2Vycy97dXNlcm5hbWV9L3Bhc3N3b3JkJyxcbiAgICBoYW5kbGVyKHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgICBjb25zdCB1c2VybmFtZSA9IHJlcXVlc3QucGFyYW1zLnVzZXJuYW1lO1xuICAgICAgY29uc3Qge3Bhc3N3b3JkLCBuZXdQYXNzd29yZH0gPSByZXF1ZXN0LnBheWxvYWQ7XG5cbiAgICAgIGxldCBwcm9taXNlID0gUHJvbWlzZS5yZXNvbHZlKCk7XG4gICAgICBpZiAodXNlcm5hbWUgPT09IHJlcXVlc3QuYXV0aC5jcmVkZW50aWFscy51c2VybmFtZSkgcHJvbWlzZSA9IGlzVmFsaWRVc2VyKHJlcXVlc3QsIHVzZXJuYW1lLCBwYXNzd29yZCk7XG5cbiAgICAgIHJldHVybiBwcm9taXNlLnRoZW4oKCkgPT4ge1xuICAgICAgICBjb25zdCBib2R5ID0ge3Bhc3N3b3JkOiBuZXdQYXNzd29yZH07XG4gICAgICAgIHJldHVybiBjYWxsV2l0aFJlcXVlc3QocmVxdWVzdCwgJ3NoaWVsZC5jaGFuZ2VQYXNzd29yZCcsIHt1c2VybmFtZSwgYm9keX0pXG4gICAgICAgIC50aGVuKG9uQ2hhbmdlUGFzc3dvcmQocmVxdWVzdCwgdXNlcm5hbWUsIG5ld1Bhc3N3b3JkLCBjYWxjdWxhdGVFeHBpcmVzLCByZXBseSkpXG4gICAgICAgIC5jYXRjaChfLmZsb3cod3JhcEVycm9yLCByZXBseSkpO1xuICAgICAgfSlcbiAgICAgIC5jYXRjaCgoZXJyb3IpID0+IHJlcGx5KEJvb20udW5hdXRob3JpemVkKGVycm9yKSkpO1xuICAgIH0sXG4gICAgY29uZmlnOiB7XG4gICAgICB2YWxpZGF0ZToge1xuICAgICAgICBwYXlsb2FkOiB7XG4gICAgICAgICAgcGFzc3dvcmQ6IEpvaS5zdHJpbmcoKSxcbiAgICAgICAgICBuZXdQYXNzd29yZDogSm9pLnN0cmluZygpLnJlcXVpcmVkKClcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIHByZTogW3JvdXRlUHJlQ2hlY2tMaWNlbnNlRm5dXG4gICAgfVxuICB9KTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/routes/api/v1/users.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/routes/api/v1/users.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport Boom from 'boom';\nimport Joi from 'joi';\nimport getClient from '../../../lib/get_client_shield';\nimport userSchema from '../../../lib/user_schema';\nimport { wrapError } from '../../../lib/errors';\nimport getCalculateExpires from '../../../lib/get_calculate_expires';\nimport onChangePassword from '../../../lib/on_change_password';\nimport getIsValidUser from '../../../lib/get_is_valid_user';\nimport routePreCheckLicense from '../../../lib/route_pre_check_license';\n\nexport default (server) => {\n  const callWithRequest = getClient(server).callWithRequest;\n  const calculateExpires = getCalculateExpires(server);\n  const isValidUser = getIsValidUser(server);\n  const routePreCheckLicenseFn = routePreCheckLicense(server);\n\n  server.route({\n    method: 'GET',\n    path: '/api/security/v1/users',\n    handler(request, reply) {\n      return callWithRequest(request, 'shield.getUser').then(\n        (response) => reply(_.values(response)),\n        _.flow(wrapError, reply)\n      );\n    },\n    config: {\n      pre: [routePreCheckLicenseFn]\n    }\n  });\n\n  server.route({\n    method: 'GET',\n    path: '/api/security/v1/users/{username}',\n    handler(request, reply) {\n      const username = request.params.username;\n      return callWithRequest(request, 'shield.getUser', {username}).then(\n        (response) => {\n          if (response[username]) return reply(response[username]);\n          return reply(Boom.notFound());\n        },\n        _.flow(wrapError, reply));\n    },\n    config: {\n      pre: [routePreCheckLicenseFn]\n    }\n  });\n\n  server.route({\n    method: 'POST',\n    path: '/api/security/v1/users/{username}',\n    handler(request, reply) {\n      const username = request.params.username;\n      const body = _(request.payload).omit(['username', 'enabled']).omit(_.isNull);\n      return callWithRequest(request, 'shield.putUser', {username, body}).then(\n        () => reply(request.payload),\n        _.flow(wrapError, reply));\n    },\n    config: {\n      validate: {\n        payload: userSchema\n      },\n      pre: [routePreCheckLicenseFn]\n    }\n  });\n\n  server.route({\n    method: 'DELETE',\n    path: '/api/security/v1/users/{username}',\n    handler(request, reply) {\n      const username = request.params.username;\n      return callWithRequest(request, 'shield.deleteUser', {username}).then(\n        () => reply().code(204),\n        _.flow(wrapError, reply));\n    },\n    config: {\n      pre: [routePreCheckLicenseFn]\n    }\n  });\n\n  server.route({\n    method: 'POST',\n    path: '/api/security/v1/users/{username}/password',\n    handler(request, reply) {\n      const username = request.params.username;\n      const {password, newPassword} = request.payload;\n\n      let promise = Promise.resolve();\n      if (username === request.auth.credentials.username) promise = isValidUser(request, username, password);\n\n      return promise.then(() => {\n        const body = {password: newPassword};\n        return callWithRequest(request, 'shield.changePassword', {username, body})\n        .then(onChangePassword(request, username, newPassword, calculateExpires, reply))\n        .catch(_.flow(wrapError, reply));\n      })\n      .catch((error) => reply(Boom.unauthorized(error)));\n    },\n    config: {\n      validate: {\n        payload: {\n          password: Joi.string(),\n          newPassword: Joi.string().required()\n        }\n      },\n      pre: [routePreCheckLicenseFn]\n    }\n  });\n};\n"
      ]
    },
    "mtime": 1485775625189
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/user_schema.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nexports['default'] = {\n  username: _joi2['default'].string().required(),\n  password: _joi2['default'].string(),\n  roles: _joi2['default'].array().items(_joi2['default'].string()),\n  full_name: _joi2['default'].string().allow(null, ''),\n  email: _joi2['default'].string().allow(null, ''),\n  metadata: _joi2['default'].object(),\n  enabled: _joi2['default'].boolean()['default'](true)\n};\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9saWIvdXNlcl9zY2hlbWEuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7bUJBQWdCLEtBQUs7Ozs7cUJBRU47QUFDYixVQUFRLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFO0FBQ2pDLFVBQVEsRUFBRSxpQkFBSSxNQUFNLEVBQUU7QUFDdEIsT0FBSyxFQUFFLGlCQUFJLEtBQUssRUFBRSxDQUFDLEtBQUssQ0FBQyxpQkFBSSxNQUFNLEVBQUUsQ0FBQztBQUN0QyxXQUFTLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLElBQUksRUFBRSxFQUFFLENBQUM7QUFDdkMsT0FBSyxFQUFFLGlCQUFJLE1BQU0sRUFBRSxDQUFDLEtBQUssQ0FBQyxJQUFJLEVBQUUsRUFBRSxDQUFDO0FBQ25DLFVBQVEsRUFBRSxpQkFBSSxNQUFNLEVBQUU7QUFDdEIsU0FBTyxFQUFFLGlCQUFJLE9BQU8sRUFBRSxXQUFRLENBQUMsSUFBSSxDQUFDO0NBQ3JDIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9saWIvdXNlcl9zY2hlbWEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgSm9pIGZyb20gJ2pvaSc7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgdXNlcm5hbWU6IEpvaS5zdHJpbmcoKS5yZXF1aXJlZCgpLFxuICBwYXNzd29yZDogSm9pLnN0cmluZygpLFxuICByb2xlczogSm9pLmFycmF5KCkuaXRlbXMoSm9pLnN0cmluZygpKSxcbiAgZnVsbF9uYW1lOiBKb2kuc3RyaW5nKCkuYWxsb3cobnVsbCwgJycpLFxuICBlbWFpbDogSm9pLnN0cmluZygpLmFsbG93KG51bGwsICcnKSxcbiAgbWV0YWRhdGE6IEpvaS5vYmplY3QoKSxcbiAgZW5hYmxlZDogSm9pLmJvb2xlYW4oKS5kZWZhdWx0KHRydWUpXG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/user_schema.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;mBAAgB,KAAK;;;;qBAEN;AACb,UAAQ,EAAE,iBAAI,MAAM,EAAE,CAAC,QAAQ,EAAE;AACjC,UAAQ,EAAE,iBAAI,MAAM,EAAE;AACtB,OAAK,EAAE,iBAAI,KAAK,EAAE,CAAC,KAAK,CAAC,iBAAI,MAAM,EAAE,CAAC;AACtC,WAAS,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,EAAE,CAAC;AACvC,OAAK,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,IAAI,EAAE,EAAE,CAAC;AACnC,UAAQ,EAAE,iBAAI,MAAM,EAAE;AACtB,SAAO,EAAE,iBAAI,OAAO,EAAE,WAAQ,CAAC,IAAI,CAAC;CACrC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/user_schema.js",
      "sourcesContent": [
        "import Joi from 'joi';\n\nexport default {\n  username: Joi.string().required(),\n  password: Joi.string(),\n  roles: Joi.array().items(Joi.string()),\n  full_name: Joi.string().allow(null, ''),\n  email: Joi.string().allow(null, ''),\n  metadata: Joi.object(),\n  enabled: Joi.boolean().default(true)\n};\n"
      ]
    },
    "mtime": 1485775596253
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/on_change_password.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nexports[\"default\"] = function (request, username, password, calculateExpires, reply) {\n  return function () {\n    var currentUser = request.auth.credentials.username;\n    if (username === currentUser) {\n      request.auth.session.set({\n        username: username,\n        password: password,\n        expires: calculateExpires()\n      });\n    }\n\n    return reply().code(204);\n  };\n};\n\nmodule.exports = exports[\"default\"];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9saWIvb25fY2hhbmdlX3Bhc3N3b3JkLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztxQkFBZSxVQUFDLE9BQU8sRUFBRSxRQUFRLEVBQUUsUUFBUSxFQUFFLGdCQUFnQixFQUFFLEtBQUssRUFBSztBQUN2RSxTQUFPLFlBQU07QUFDWCxRQUFNLFdBQVcsR0FBRyxPQUFPLENBQUMsSUFBSSxDQUFDLFdBQVcsQ0FBQyxRQUFRLENBQUM7QUFDdEQsUUFBSSxRQUFRLEtBQUssV0FBVyxFQUFFO0FBQzVCLGFBQU8sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQztBQUN2QixnQkFBUSxFQUFSLFFBQVE7QUFDUixnQkFBUSxFQUFSLFFBQVE7QUFDUixlQUFPLEVBQUUsZ0JBQWdCLEVBQUU7T0FDNUIsQ0FBQyxDQUFDO0tBQ0o7O0FBRUQsV0FBTyxLQUFLLEVBQUUsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUM7R0FDMUIsQ0FBQztDQUNIIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9saWIvb25fY2hhbmdlX3Bhc3N3b3JkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgKHJlcXVlc3QsIHVzZXJuYW1lLCBwYXNzd29yZCwgY2FsY3VsYXRlRXhwaXJlcywgcmVwbHkpID0+IHtcbiAgcmV0dXJuICgpID0+IHtcbiAgICBjb25zdCBjdXJyZW50VXNlciA9IHJlcXVlc3QuYXV0aC5jcmVkZW50aWFscy51c2VybmFtZTtcbiAgICBpZiAodXNlcm5hbWUgPT09IGN1cnJlbnRVc2VyKSB7XG4gICAgICByZXF1ZXN0LmF1dGguc2Vzc2lvbi5zZXQoe1xuICAgICAgICB1c2VybmFtZSxcbiAgICAgICAgcGFzc3dvcmQsXG4gICAgICAgIGV4cGlyZXM6IGNhbGN1bGF0ZUV4cGlyZXMoKVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcGx5KCkuY29kZSgyMDQpO1xuICB9O1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/on_change_password.js"
      ],
      "names": [],
      "mappings": ";;;;;;qBAAe,UAAC,OAAO,EAAE,QAAQ,EAAE,QAAQ,EAAE,gBAAgB,EAAE,KAAK,EAAK;AACvE,SAAO,YAAM;AACX,QAAM,WAAW,GAAG,OAAO,CAAC,IAAI,CAAC,WAAW,CAAC,QAAQ,CAAC;AACtD,QAAI,QAAQ,KAAK,WAAW,EAAE;AAC5B,aAAO,CAAC,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC;AACvB,gBAAQ,EAAR,QAAQ;AACR,gBAAQ,EAAR,QAAQ;AACR,eAAO,EAAE,gBAAgB,EAAE;OAC5B,CAAC,CAAC;KACJ;;AAED,WAAO,KAAK,EAAE,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC;GAC1B,CAAC;CACH",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/on_change_password.js",
      "sourcesContent": [
        "export default (request, username, password, calculateExpires, reply) => {\n  return () => {\n    const currentUser = request.auth.credentials.username;\n    if (username === currentUser) {\n      request.auth.session.set({\n        username,\n        password,\n        expires: calculateExpires()\n      });\n    }\n\n    return reply().code(204);\n  };\n};\n"
      ]
    },
    "mtime": 1485775596253
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/route_pre_check_license.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "routePreCheckLicense",
            "server"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "routePreCheckLicense",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "server",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = routePreCheckLicense;\nvar Boom = require('boom');\n\nfunction routePreCheckLicense(server) {\n  var xpackMainPlugin = server.plugins.xpack_main;\n  var pluginId = 'security';\n  return function forbidApiAccess(request, reply) {\n    var licenseCheckResults = xpackMainPlugin.info.feature(pluginId).getLicenseCheckResults();\n    if (!licenseCheckResults.showLinks) {\n      reply(Boom.forbidden(licenseCheckResults.linksMessage));\n    } else {\n      reply();\n    }\n  };\n}\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9saWIvcm91dGVfcHJlX2NoZWNrX2xpY2Vuc2UuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7cUJBRXdCLG9CQUFvQjtBQUY1QyxJQUFNLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7O0FBRWQsU0FBUyxvQkFBb0IsQ0FBQyxNQUFNLEVBQUU7QUFDbkQsTUFBTSxlQUFlLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUM7QUFDbEQsTUFBTSxRQUFRLEdBQUcsVUFBVSxDQUFDO0FBQzVCLFNBQU8sU0FBUyxlQUFlLENBQUMsT0FBTyxFQUFFLEtBQUssRUFBRTtBQUM5QyxRQUFNLG1CQUFtQixHQUFHLGVBQWUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDLHNCQUFzQixFQUFFLENBQUM7QUFDNUYsUUFBSSxDQUFDLG1CQUFtQixDQUFDLFNBQVMsRUFBRTtBQUNsQyxXQUFLLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxtQkFBbUIsQ0FBQyxZQUFZLENBQUMsQ0FBQyxDQUFDO0tBQ3pELE1BQU07QUFDTCxXQUFLLEVBQUUsQ0FBQztLQUNUO0dBQ0YsQ0FBQztDQUNIOztBQUFBLENBQUMiLCJmaWxlIjoiL2hvbWUvdWJ1bnR1L3dvcmtzcGFjZS9raWJhbmEtNS4wLjItbGludXgteDg2XzY0L3BsdWdpbnMveC1wYWNrL3BsdWdpbnMvc2VjdXJpdHkvc2VydmVyL2xpYi9yb3V0ZV9wcmVfY2hlY2tfbGljZW5zZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IEJvb20gPSByZXF1aXJlKCdib29tJyk7XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJvdXRlUHJlQ2hlY2tMaWNlbnNlKHNlcnZlcikge1xuICBjb25zdCB4cGFja01haW5QbHVnaW4gPSBzZXJ2ZXIucGx1Z2lucy54cGFja19tYWluO1xuICBjb25zdCBwbHVnaW5JZCA9ICdzZWN1cml0eSc7XG4gIHJldHVybiBmdW5jdGlvbiBmb3JiaWRBcGlBY2Nlc3MocmVxdWVzdCwgcmVwbHkpIHtcbiAgICBjb25zdCBsaWNlbnNlQ2hlY2tSZXN1bHRzID0geHBhY2tNYWluUGx1Z2luLmluZm8uZmVhdHVyZShwbHVnaW5JZCkuZ2V0TGljZW5zZUNoZWNrUmVzdWx0cygpO1xuICAgIGlmICghbGljZW5zZUNoZWNrUmVzdWx0cy5zaG93TGlua3MpIHtcbiAgICAgIHJlcGx5KEJvb20uZm9yYmlkZGVuKGxpY2Vuc2VDaGVja1Jlc3VsdHMubGlua3NNZXNzYWdlKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcGx5KCk7XG4gICAgfVxuICB9O1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/route_pre_check_license.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAEwB,oBAAoB;AAF5C,IAAM,IAAI,GAAG,OAAO,CAAC,MAAM,CAAC,CAAC;;AAEd,SAAS,oBAAoB,CAAC,MAAM,EAAE;AACnD,MAAM,eAAe,GAAG,MAAM,CAAC,OAAO,CAAC,UAAU,CAAC;AAClD,MAAM,QAAQ,GAAG,UAAU,CAAC;AAC5B,SAAO,SAAS,eAAe,CAAC,OAAO,EAAE,KAAK,EAAE;AAC9C,QAAM,mBAAmB,GAAG,eAAe,CAAC,IAAI,CAAC,OAAO,CAAC,QAAQ,CAAC,CAAC,sBAAsB,EAAE,CAAC;AAC5F,QAAI,CAAC,mBAAmB,CAAC,SAAS,EAAE;AAClC,WAAK,CAAC,IAAI,CAAC,SAAS,CAAC,mBAAmB,CAAC,YAAY,CAAC,CAAC,CAAC;KACzD,MAAM;AACL,WAAK,EAAE,CAAC;KACT;GACF,CAAC;CACH;;AAAA,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/route_pre_check_license.js",
      "sourcesContent": [
        "const Boom = require('boom');\n\nexport default function routePreCheckLicense(server) {\n  const xpackMainPlugin = server.plugins.xpack_main;\n  const pluginId = 'security';\n  return function forbidApiAccess(request, reply) {\n    const licenseCheckResults = xpackMainPlugin.info.feature(pluginId).getLicenseCheckResults();\n    if (!licenseCheckResults.showLinks) {\n      reply(Boom.forbidden(licenseCheckResults.linksMessage));\n    } else {\n      reply();\n    }\n  };\n};\n"
      ]
    },
    "mtime": 1485775596253
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/routes/api/v1/roles.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "boom",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Boom"
              }
            ]
          },
          {
            "source": "../../../lib/get_client_shield",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "getClient"
              }
            ]
          },
          {
            "source": "../../../lib/role_schema",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "roleSchema"
              }
            ]
          },
          {
            "source": "../../../lib/errors",
            "imported": [
              "wrapError"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "wrapError",
                "local": "wrapError"
              }
            ]
          },
          {
            "source": "../../../lib/route_pre_check_license",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "routePreCheckLicense"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _boom = require('boom');\n\nvar _boom2 = _interopRequireDefault(_boom);\n\nvar _libGet_client_shield = require('../../../lib/get_client_shield');\n\nvar _libGet_client_shield2 = _interopRequireDefault(_libGet_client_shield);\n\nvar _libRole_schema = require('../../../lib/role_schema');\n\nvar _libRole_schema2 = _interopRequireDefault(_libRole_schema);\n\nvar _libErrors = require('../../../lib/errors');\n\nvar _libRoute_pre_check_license = require('../../../lib/route_pre_check_license');\n\nvar _libRoute_pre_check_license2 = _interopRequireDefault(_libRoute_pre_check_license);\n\nexports['default'] = function (server) {\n  var callWithRequest = (0, _libGet_client_shield2['default'])(server).callWithRequest;\n  var routePreCheckLicenseFn = (0, _libRoute_pre_check_license2['default'])(server);\n\n  server.route({\n    method: 'GET',\n    path: '/api/security/v1/roles',\n    handler: function handler(request, reply) {\n      return callWithRequest(request, 'shield.getRole').then(function (response) {\n        var roles = _lodash2['default'].map(response, function (role, name) {\n          return _lodash2['default'].assign(role, { name: name });\n        });\n        return reply(roles);\n      }, _lodash2['default'].flow(_libErrors.wrapError, reply));\n    },\n    config: {\n      pre: [routePreCheckLicenseFn]\n    }\n  });\n\n  server.route({\n    method: 'GET',\n    path: '/api/security/v1/roles/{name}',\n    handler: function handler(request, reply) {\n      var name = request.params.name;\n      return callWithRequest(request, 'shield.getRole', { name: name }).then(function (response) {\n        if (response[name]) return reply(_lodash2['default'].assign(response[name], { name: name }));\n        return reply(_boom2['default'].notFound());\n      }, _lodash2['default'].flow(_libErrors.wrapError, reply));\n    },\n    config: {\n      pre: [routePreCheckLicenseFn]\n    }\n  });\n\n  server.route({\n    method: 'POST',\n    path: '/api/security/v1/roles/{name}',\n    handler: function handler(request, reply) {\n      var name = request.params.name;\n      var body = _lodash2['default'].omit(request.payload, 'name');\n      return callWithRequest(request, 'shield.putRole', { name: name, body: body }).then(function () {\n        return reply(request.payload);\n      }, _lodash2['default'].flow(_libErrors.wrapError, reply));\n    },\n    config: {\n      validate: {\n        payload: _libRole_schema2['default']\n      },\n      pre: [routePreCheckLicenseFn]\n    }\n  });\n\n  server.route({\n    method: 'DELETE',\n    path: '/api/security/v1/roles/{name}',\n    handler: function handler(request, reply) {\n      var name = request.params.name;\n      return callWithRequest(request, 'shield.deleteRole', { name: name }).then(function () {\n        return reply().code(204);\n      }, _lodash2['default'].flow(_libErrors.wrapError, reply));\n    },\n    config: {\n      pre: [routePreCheckLicenseFn]\n    }\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9yb3V0ZXMvYXBpL3YxL3JvbGVzLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O3NCQUFjLFFBQVE7Ozs7b0JBQ0wsTUFBTTs7OztvQ0FDRCxnQ0FBZ0M7Ozs7OEJBQy9CLDBCQUEwQjs7Ozt5QkFDdkIscUJBQXFCOzswQ0FDZCxzQ0FBc0M7Ozs7cUJBRXhELFVBQUMsTUFBTSxFQUFLO0FBQ3pCLE1BQU0sZUFBZSxHQUFHLHVDQUFVLE1BQU0sQ0FBQyxDQUFDLGVBQWUsQ0FBQztBQUMxRCxNQUFNLHNCQUFzQixHQUFHLDZDQUFxQixNQUFNLENBQUMsQ0FBQzs7QUFFNUQsUUFBTSxDQUFDLEtBQUssQ0FBQztBQUNYLFVBQU0sRUFBRSxLQUFLO0FBQ2IsUUFBSSxFQUFFLHdCQUF3QjtBQUM5QixXQUFPLEVBQUEsaUJBQUMsT0FBTyxFQUFFLEtBQUssRUFBRTtBQUN0QixhQUFPLGVBQWUsQ0FBQyxPQUFPLEVBQUUsZ0JBQWdCLENBQUMsQ0FBQyxJQUFJLENBQ3BELFVBQUMsUUFBUSxFQUFLO0FBQ1osWUFBTSxLQUFLLEdBQUcsb0JBQUUsR0FBRyxDQUFDLFFBQVEsRUFBRSxVQUFDLElBQUksRUFBRSxJQUFJO2lCQUFLLG9CQUFFLE1BQU0sQ0FBQyxJQUFJLEVBQUUsRUFBQyxJQUFJLEVBQUosSUFBSSxFQUFDLENBQUM7U0FBQSxDQUFDLENBQUM7QUFDdEUsZUFBTyxLQUFLLENBQUMsS0FBSyxDQUFDLENBQUM7T0FDckIsRUFDRCxvQkFBRSxJQUFJLHVCQUFZLEtBQUssQ0FBQyxDQUN6QixDQUFDO0tBQ0g7QUFDRCxVQUFNLEVBQUU7QUFDTixTQUFHLEVBQUUsQ0FBQyxzQkFBc0IsQ0FBQztLQUM5QjtHQUNGLENBQUMsQ0FBQzs7QUFFSCxRQUFNLENBQUMsS0FBSyxDQUFDO0FBQ1gsVUFBTSxFQUFFLEtBQUs7QUFDYixRQUFJLEVBQUUsK0JBQStCO0FBQ3JDLFdBQU8sRUFBQSxpQkFBQyxPQUFPLEVBQUUsS0FBSyxFQUFFO0FBQ3RCLFVBQU0sSUFBSSxHQUFHLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDO0FBQ2pDLGFBQU8sZUFBZSxDQUFDLE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxFQUFDLElBQUksRUFBSixJQUFJLEVBQUMsQ0FBQyxDQUFDLElBQUksQ0FDNUQsVUFBQyxRQUFRLEVBQUs7QUFDWixZQUFJLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxPQUFPLEtBQUssQ0FBQyxvQkFBRSxNQUFNLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFLEVBQUMsSUFBSSxFQUFKLElBQUksRUFBQyxDQUFDLENBQUMsQ0FBQztBQUNuRSxlQUFPLEtBQUssQ0FBQyxrQkFBSyxRQUFRLEVBQUUsQ0FBQyxDQUFDO09BQy9CLEVBQ0Qsb0JBQUUsSUFBSSx1QkFBWSxLQUFLLENBQUMsQ0FBQyxDQUFDO0tBQzdCO0FBQ0QsVUFBTSxFQUFFO0FBQ04sU0FBRyxFQUFFLENBQUMsc0JBQXNCLENBQUM7S0FDOUI7R0FDRixDQUFDLENBQUM7O0FBRUgsUUFBTSxDQUFDLEtBQUssQ0FBQztBQUNYLFVBQU0sRUFBRSxNQUFNO0FBQ2QsUUFBSSxFQUFFLCtCQUErQjtBQUNyQyxXQUFPLEVBQUEsaUJBQUMsT0FBTyxFQUFFLEtBQUssRUFBRTtBQUN0QixVQUFNLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQztBQUNqQyxVQUFNLElBQUksR0FBRyxvQkFBRSxJQUFJLENBQUMsT0FBTyxDQUFDLE9BQU8sRUFBRSxNQUFNLENBQUMsQ0FBQztBQUM3QyxhQUFPLGVBQWUsQ0FBQyxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsRUFBQyxJQUFJLEVBQUosSUFBSSxFQUFFLElBQUksRUFBSixJQUFJLEVBQUMsQ0FBQyxDQUFDLElBQUksQ0FDbEU7ZUFBTSxLQUFLLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQztPQUFBLEVBQzVCLG9CQUFFLElBQUksdUJBQVksS0FBSyxDQUFDLENBQUMsQ0FBQztLQUM3QjtBQUNELFVBQU0sRUFBRTtBQUNOLGNBQVEsRUFBRTtBQUNSLGVBQU8sNkJBQVk7T0FDcEI7QUFDRCxTQUFHLEVBQUUsQ0FBQyxzQkFBc0IsQ0FBQztLQUM5QjtHQUNGLENBQUMsQ0FBQzs7QUFFSCxRQUFNLENBQUMsS0FBSyxDQUFDO0FBQ1gsVUFBTSxFQUFFLFFBQVE7QUFDaEIsUUFBSSxFQUFFLCtCQUErQjtBQUNyQyxXQUFPLEVBQUEsaUJBQUMsT0FBTyxFQUFFLEtBQUssRUFBRTtBQUN0QixVQUFNLElBQUksR0FBRyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQztBQUNqQyxhQUFPLGVBQWUsQ0FBQyxPQUFPLEVBQUUsbUJBQW1CLEVBQUUsRUFBQyxJQUFJLEVBQUosSUFBSSxFQUFDLENBQUMsQ0FBQyxJQUFJLENBQy9EO2VBQU0sS0FBSyxFQUFFLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQztPQUFBLEVBQ3ZCLG9CQUFFLElBQUksdUJBQVksS0FBSyxDQUFDLENBQUMsQ0FBQztLQUM3QjtBQUNELFVBQU0sRUFBRTtBQUNOLFNBQUcsRUFBRSxDQUFDLHNCQUFzQixDQUFDO0tBQzlCO0dBQ0YsQ0FBQyxDQUFDO0NBQ0oiLCJmaWxlIjoiL2hvbWUvdWJ1bnR1L3dvcmtzcGFjZS9raWJhbmEtNS4wLjItbGludXgteDg2XzY0L3BsdWdpbnMveC1wYWNrL3BsdWdpbnMvc2VjdXJpdHkvc2VydmVyL3JvdXRlcy9hcGkvdjEvcm9sZXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgXyBmcm9tICdsb2Rhc2gnO1xuaW1wb3J0IEJvb20gZnJvbSAnYm9vbSc7XG5pbXBvcnQgZ2V0Q2xpZW50IGZyb20gJy4uLy4uLy4uL2xpYi9nZXRfY2xpZW50X3NoaWVsZCc7XG5pbXBvcnQgcm9sZVNjaGVtYSBmcm9tICcuLi8uLi8uLi9saWIvcm9sZV9zY2hlbWEnO1xuaW1wb3J0IHsgd3JhcEVycm9yIH0gZnJvbSAnLi4vLi4vLi4vbGliL2Vycm9ycyc7XG5pbXBvcnQgcm91dGVQcmVDaGVja0xpY2Vuc2UgZnJvbSAnLi4vLi4vLi4vbGliL3JvdXRlX3ByZV9jaGVja19saWNlbnNlJztcblxuZXhwb3J0IGRlZmF1bHQgKHNlcnZlcikgPT4ge1xuICBjb25zdCBjYWxsV2l0aFJlcXVlc3QgPSBnZXRDbGllbnQoc2VydmVyKS5jYWxsV2l0aFJlcXVlc3Q7XG4gIGNvbnN0IHJvdXRlUHJlQ2hlY2tMaWNlbnNlRm4gPSByb3V0ZVByZUNoZWNrTGljZW5zZShzZXJ2ZXIpO1xuXG4gIHNlcnZlci5yb3V0ZSh7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBwYXRoOiAnL2FwaS9zZWN1cml0eS92MS9yb2xlcycsXG4gICAgaGFuZGxlcihyZXF1ZXN0LCByZXBseSkge1xuICAgICAgcmV0dXJuIGNhbGxXaXRoUmVxdWVzdChyZXF1ZXN0LCAnc2hpZWxkLmdldFJvbGUnKS50aGVuKFxuICAgICAgICAocmVzcG9uc2UpID0+IHtcbiAgICAgICAgICBjb25zdCByb2xlcyA9IF8ubWFwKHJlc3BvbnNlLCAocm9sZSwgbmFtZSkgPT4gXy5hc3NpZ24ocm9sZSwge25hbWV9KSk7XG4gICAgICAgICAgcmV0dXJuIHJlcGx5KHJvbGVzKTtcbiAgICAgICAgfSxcbiAgICAgICAgXy5mbG93KHdyYXBFcnJvciwgcmVwbHkpXG4gICAgICApO1xuICAgIH0sXG4gICAgY29uZmlnOiB7XG4gICAgICBwcmU6IFtyb3V0ZVByZUNoZWNrTGljZW5zZUZuXVxuICAgIH1cbiAgfSk7XG5cbiAgc2VydmVyLnJvdXRlKHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHBhdGg6ICcvYXBpL3NlY3VyaXR5L3YxL3JvbGVzL3tuYW1lfScsXG4gICAgaGFuZGxlcihyZXF1ZXN0LCByZXBseSkge1xuICAgICAgY29uc3QgbmFtZSA9IHJlcXVlc3QucGFyYW1zLm5hbWU7XG4gICAgICByZXR1cm4gY2FsbFdpdGhSZXF1ZXN0KHJlcXVlc3QsICdzaGllbGQuZ2V0Um9sZScsIHtuYW1lfSkudGhlbihcbiAgICAgICAgKHJlc3BvbnNlKSA9PiB7XG4gICAgICAgICAgaWYgKHJlc3BvbnNlW25hbWVdKSByZXR1cm4gcmVwbHkoXy5hc3NpZ24ocmVzcG9uc2VbbmFtZV0sIHtuYW1lfSkpO1xuICAgICAgICAgIHJldHVybiByZXBseShCb29tLm5vdEZvdW5kKCkpO1xuICAgICAgICB9LFxuICAgICAgICBfLmZsb3cod3JhcEVycm9yLCByZXBseSkpO1xuICAgIH0sXG4gICAgY29uZmlnOiB7XG4gICAgICBwcmU6IFtyb3V0ZVByZUNoZWNrTGljZW5zZUZuXVxuICAgIH1cbiAgfSk7XG5cbiAgc2VydmVyLnJvdXRlKHtcbiAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICBwYXRoOiAnL2FwaS9zZWN1cml0eS92MS9yb2xlcy97bmFtZX0nLFxuICAgIGhhbmRsZXIocmVxdWVzdCwgcmVwbHkpIHtcbiAgICAgIGNvbnN0IG5hbWUgPSByZXF1ZXN0LnBhcmFtcy5uYW1lO1xuICAgICAgY29uc3QgYm9keSA9IF8ub21pdChyZXF1ZXN0LnBheWxvYWQsICduYW1lJyk7XG4gICAgICByZXR1cm4gY2FsbFdpdGhSZXF1ZXN0KHJlcXVlc3QsICdzaGllbGQucHV0Um9sZScsIHtuYW1lLCBib2R5fSkudGhlbihcbiAgICAgICAgKCkgPT4gcmVwbHkocmVxdWVzdC5wYXlsb2FkKSxcbiAgICAgICAgXy5mbG93KHdyYXBFcnJvciwgcmVwbHkpKTtcbiAgICB9LFxuICAgIGNvbmZpZzoge1xuICAgICAgdmFsaWRhdGU6IHtcbiAgICAgICAgcGF5bG9hZDogcm9sZVNjaGVtYVxuICAgICAgfSxcbiAgICAgIHByZTogW3JvdXRlUHJlQ2hlY2tMaWNlbnNlRm5dXG4gICAgfVxuICB9KTtcblxuICBzZXJ2ZXIucm91dGUoe1xuICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgcGF0aDogJy9hcGkvc2VjdXJpdHkvdjEvcm9sZXMve25hbWV9JyxcbiAgICBoYW5kbGVyKHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgICBjb25zdCBuYW1lID0gcmVxdWVzdC5wYXJhbXMubmFtZTtcbiAgICAgIHJldHVybiBjYWxsV2l0aFJlcXVlc3QocmVxdWVzdCwgJ3NoaWVsZC5kZWxldGVSb2xlJywge25hbWV9KS50aGVuKFxuICAgICAgICAoKSA9PiByZXBseSgpLmNvZGUoMjA0KSxcbiAgICAgICAgXy5mbG93KHdyYXBFcnJvciwgcmVwbHkpKTtcbiAgICB9LFxuICAgIGNvbmZpZzoge1xuICAgICAgcHJlOiBbcm91dGVQcmVDaGVja0xpY2Vuc2VGbl1cbiAgICB9XG4gIH0pO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/routes/api/v1/roles.js"
      ],
      "names": [],
      "mappings": "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",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/routes/api/v1/roles.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport Boom from 'boom';\nimport getClient from '../../../lib/get_client_shield';\nimport roleSchema from '../../../lib/role_schema';\nimport { wrapError } from '../../../lib/errors';\nimport routePreCheckLicense from '../../../lib/route_pre_check_license';\n\nexport default (server) => {\n  const callWithRequest = getClient(server).callWithRequest;\n  const routePreCheckLicenseFn = routePreCheckLicense(server);\n\n  server.route({\n    method: 'GET',\n    path: '/api/security/v1/roles',\n    handler(request, reply) {\n      return callWithRequest(request, 'shield.getRole').then(\n        (response) => {\n          const roles = _.map(response, (role, name) => _.assign(role, {name}));\n          return reply(roles);\n        },\n        _.flow(wrapError, reply)\n      );\n    },\n    config: {\n      pre: [routePreCheckLicenseFn]\n    }\n  });\n\n  server.route({\n    method: 'GET',\n    path: '/api/security/v1/roles/{name}',\n    handler(request, reply) {\n      const name = request.params.name;\n      return callWithRequest(request, 'shield.getRole', {name}).then(\n        (response) => {\n          if (response[name]) return reply(_.assign(response[name], {name}));\n          return reply(Boom.notFound());\n        },\n        _.flow(wrapError, reply));\n    },\n    config: {\n      pre: [routePreCheckLicenseFn]\n    }\n  });\n\n  server.route({\n    method: 'POST',\n    path: '/api/security/v1/roles/{name}',\n    handler(request, reply) {\n      const name = request.params.name;\n      const body = _.omit(request.payload, 'name');\n      return callWithRequest(request, 'shield.putRole', {name, body}).then(\n        () => reply(request.payload),\n        _.flow(wrapError, reply));\n    },\n    config: {\n      validate: {\n        payload: roleSchema\n      },\n      pre: [routePreCheckLicenseFn]\n    }\n  });\n\n  server.route({\n    method: 'DELETE',\n    path: '/api/security/v1/roles/{name}',\n    handler(request, reply) {\n      const name = request.params.name;\n      return callWithRequest(request, 'shield.deleteRole', {name}).then(\n        () => reply().code(204),\n        _.flow(wrapError, reply));\n    },\n    config: {\n      pre: [routePreCheckLicenseFn]\n    }\n  });\n};\n"
      ]
    },
    "mtime": 1485775625189
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/role_schema.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "joi",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Joi"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _joi = require('joi');\n\nvar _joi2 = _interopRequireDefault(_joi);\n\nexports['default'] = {\n  name: _joi2['default'].string().required(),\n  cluster: _joi2['default'].array().items(_joi2['default'].string()),\n  indices: _joi2['default'].array().items({\n    names: _joi2['default'].array().items(_joi2['default'].string()),\n    field_security: _joi2['default'].object().keys({\n      grant: _joi2['default'].array().items(_joi2['default'].string()),\n      except: _joi2['default'].array().items(_joi2['default'].string())\n    }),\n    privileges: _joi2['default'].array().items(_joi2['default'].string()),\n    query: _joi2['default'].string().allow('')\n  }),\n  run_as: _joi2['default'].array().items(_joi2['default'].string()),\n  metadata: _joi2['default'].object()\n};\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9saWIvcm9sZV9zY2hlbWEuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7bUJBQWdCLEtBQUs7Ozs7cUJBRU47QUFDYixNQUFJLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsUUFBUSxFQUFFO0FBQzdCLFNBQU8sRUFBRSxpQkFBSSxLQUFLLEVBQUUsQ0FBQyxLQUFLLENBQUMsaUJBQUksTUFBTSxFQUFFLENBQUM7QUFDeEMsU0FBTyxFQUFFLGlCQUFJLEtBQUssRUFBRSxDQUFDLEtBQUssQ0FBQztBQUN6QixTQUFLLEVBQUUsaUJBQUksS0FBSyxFQUFFLENBQUMsS0FBSyxDQUFDLGlCQUFJLE1BQU0sRUFBRSxDQUFDO0FBQ3RDLGtCQUFjLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsSUFBSSxDQUFDO0FBQ2hDLFdBQUssRUFBRSxpQkFBSSxLQUFLLEVBQUUsQ0FBQyxLQUFLLENBQUMsaUJBQUksTUFBTSxFQUFFLENBQUM7QUFDdEMsWUFBTSxFQUFHLGlCQUFJLEtBQUssRUFBRSxDQUFDLEtBQUssQ0FBQyxpQkFBSSxNQUFNLEVBQUUsQ0FBQztLQUN6QyxDQUFDO0FBQ0YsY0FBVSxFQUFFLGlCQUFJLEtBQUssRUFBRSxDQUFDLEtBQUssQ0FBQyxpQkFBSSxNQUFNLEVBQUUsQ0FBQztBQUMzQyxTQUFLLEVBQUUsaUJBQUksTUFBTSxFQUFFLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQztHQUM5QixDQUFDO0FBQ0YsUUFBTSxFQUFFLGlCQUFJLEtBQUssRUFBRSxDQUFDLEtBQUssQ0FBQyxpQkFBSSxNQUFNLEVBQUUsQ0FBQztBQUN2QyxVQUFRLEVBQUUsaUJBQUksTUFBTSxFQUFFO0NBQ3ZCIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9saWIvcm9sZV9zY2hlbWEuanMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgSm9pIGZyb20gJ2pvaSc7XG5cbmV4cG9ydCBkZWZhdWx0IHtcbiAgbmFtZTogSm9pLnN0cmluZygpLnJlcXVpcmVkKCksXG4gIGNsdXN0ZXI6IEpvaS5hcnJheSgpLml0ZW1zKEpvaS5zdHJpbmcoKSksXG4gIGluZGljZXM6IEpvaS5hcnJheSgpLml0ZW1zKHtcbiAgICBuYW1lczogSm9pLmFycmF5KCkuaXRlbXMoSm9pLnN0cmluZygpKSxcbiAgICBmaWVsZF9zZWN1cml0eTogSm9pLm9iamVjdCgpLmtleXMoe1xuICAgICAgZ3JhbnQ6IEpvaS5hcnJheSgpLml0ZW1zKEpvaS5zdHJpbmcoKSksXG4gICAgICBleGNlcHQ6ICBKb2kuYXJyYXkoKS5pdGVtcyhKb2kuc3RyaW5nKCkpXG4gICAgfSksXG4gICAgcHJpdmlsZWdlczogSm9pLmFycmF5KCkuaXRlbXMoSm9pLnN0cmluZygpKSxcbiAgICBxdWVyeTogSm9pLnN0cmluZygpLmFsbG93KCcnKVxuICB9KSxcbiAgcnVuX2FzOiBKb2kuYXJyYXkoKS5pdGVtcyhKb2kuc3RyaW5nKCkpLFxuICBtZXRhZGF0YTogSm9pLm9iamVjdCgpXG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/role_schema.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;mBAAgB,KAAK;;;;qBAEN;AACb,MAAI,EAAE,iBAAI,MAAM,EAAE,CAAC,QAAQ,EAAE;AAC7B,SAAO,EAAE,iBAAI,KAAK,EAAE,CAAC,KAAK,CAAC,iBAAI,MAAM,EAAE,CAAC;AACxC,SAAO,EAAE,iBAAI,KAAK,EAAE,CAAC,KAAK,CAAC;AACzB,SAAK,EAAE,iBAAI,KAAK,EAAE,CAAC,KAAK,CAAC,iBAAI,MAAM,EAAE,CAAC;AACtC,kBAAc,EAAE,iBAAI,MAAM,EAAE,CAAC,IAAI,CAAC;AAChC,WAAK,EAAE,iBAAI,KAAK,EAAE,CAAC,KAAK,CAAC,iBAAI,MAAM,EAAE,CAAC;AACtC,YAAM,EAAG,iBAAI,KAAK,EAAE,CAAC,KAAK,CAAC,iBAAI,MAAM,EAAE,CAAC;KACzC,CAAC;AACF,cAAU,EAAE,iBAAI,KAAK,EAAE,CAAC,KAAK,CAAC,iBAAI,MAAM,EAAE,CAAC;AAC3C,SAAK,EAAE,iBAAI,MAAM,EAAE,CAAC,KAAK,CAAC,EAAE,CAAC;GAC9B,CAAC;AACF,QAAM,EAAE,iBAAI,KAAK,EAAE,CAAC,KAAK,CAAC,iBAAI,MAAM,EAAE,CAAC;AACvC,UAAQ,EAAE,iBAAI,MAAM,EAAE;CACvB",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/role_schema.js",
      "sourcesContent": [
        "import Joi from 'joi';\n\nexport default {\n  name: Joi.string().required(),\n  cluster: Joi.array().items(Joi.string()),\n  indices: Joi.array().items({\n    names: Joi.array().items(Joi.string()),\n    field_security: Joi.object().keys({\n      grant: Joi.array().items(Joi.string()),\n      except:  Joi.array().items(Joi.string())\n    }),\n    privileges: Joi.array().items(Joi.string()),\n    query: Joi.string().allow('')\n  }),\n  run_as: Joi.array().items(Joi.string()),\n  metadata: Joi.object()\n};\n"
      ]
    },
    "mtime": 1485775596253
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/routes/api/v1/indices.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "_"
              }
            ]
          },
          {
            "source": "../../../lib/get_client_shield",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "getClient"
              }
            ]
          },
          {
            "source": "../../../lib/errors",
            "imported": [
              "wrapError"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "wrapError",
                "local": "wrapError"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _lodash = require('lodash');\n\nvar _lodash2 = _interopRequireDefault(_lodash);\n\nvar _libGet_client_shield = require('../../../lib/get_client_shield');\n\nvar _libGet_client_shield2 = _interopRequireDefault(_libGet_client_shield);\n\nvar _libErrors = require('../../../lib/errors');\n\nexports['default'] = function (server) {\n  var callWithRequest = (0, _libGet_client_shield2['default'])(server).callWithRequest;\n\n  server.route({\n    method: 'GET',\n    path: '/api/security/v1/fields/{query}',\n    handler: function handler(request, reply) {\n      return callWithRequest(request, 'indices.getFieldMapping', {\n        index: request.params.query,\n        fields: '*',\n        allowNoIndices: false,\n        includeDefaults: true\n      }).then(function (mappings) {\n        return reply((0, _lodash2['default'])(mappings).map('mappings').map(_lodash2['default'].values).flatten().map(_lodash2['default'].keys).flatten().uniq().value());\n      })['catch'](_lodash2['default'].flow(_libErrors.wrapError, reply));\n    }\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9yb3V0ZXMvYXBpL3YxL2luZGljZXMuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7c0JBQWMsUUFBUTs7OztvQ0FDQSxnQ0FBZ0M7Ozs7eUJBQzVCLHFCQUFxQjs7cUJBRWhDLFVBQUMsTUFBTSxFQUFLO0FBQ3pCLE1BQU0sZUFBZSxHQUFHLHVDQUFVLE1BQU0sQ0FBQyxDQUFDLGVBQWUsQ0FBQzs7QUFFMUQsUUFBTSxDQUFDLEtBQUssQ0FBQztBQUNYLFVBQU0sRUFBRSxLQUFLO0FBQ2IsUUFBSSxFQUFFLGlDQUFpQztBQUN2QyxXQUFPLEVBQUEsaUJBQUMsT0FBTyxFQUFFLEtBQUssRUFBRTtBQUN0QixhQUFPLGVBQWUsQ0FBQyxPQUFPLEVBQUUseUJBQXlCLEVBQUU7QUFDekQsYUFBSyxFQUFFLE9BQU8sQ0FBQyxNQUFNLENBQUMsS0FBSztBQUMzQixjQUFNLEVBQUUsR0FBRztBQUNYLHNCQUFjLEVBQUUsS0FBSztBQUNyQix1QkFBZSxFQUFFLElBQUk7T0FDdEIsQ0FBQyxDQUNELElBQUksQ0FBQyxVQUFDLFFBQVE7ZUFBSyxLQUFLLENBQ3ZCLHlCQUFFLFFBQVEsQ0FBQyxDQUNWLEdBQUcsQ0FBQyxVQUFVLENBQUMsQ0FDZixHQUFHLENBQUMsb0JBQUUsTUFBTSxDQUFDLENBQ2IsT0FBTyxFQUFFLENBQ1QsR0FBRyxDQUFDLG9CQUFFLElBQUksQ0FBQyxDQUNYLE9BQU8sRUFBRSxDQUNULElBQUksRUFBRSxDQUNOLEtBQUssRUFBRSxDQUNUO09BQUEsQ0FBQyxTQUNJLENBQUMsb0JBQUUsSUFBSSx1QkFBWSxLQUFLLENBQUMsQ0FBQyxDQUFDO0tBQ2xDO0dBQ0YsQ0FBQyxDQUFDO0NBQ0oiLCJmaWxlIjoiL2hvbWUvdWJ1bnR1L3dvcmtzcGFjZS9raWJhbmEtNS4wLjItbGludXgteDg2XzY0L3BsdWdpbnMveC1wYWNrL3BsdWdpbnMvc2VjdXJpdHkvc2VydmVyL3JvdXRlcy9hcGkvdjEvaW5kaWNlcy5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBfIGZyb20gJ2xvZGFzaCc7XG5pbXBvcnQgZ2V0Q2xpZW50IGZyb20gJy4uLy4uLy4uL2xpYi9nZXRfY2xpZW50X3NoaWVsZCc7XG5pbXBvcnQgeyB3cmFwRXJyb3IgfSBmcm9tICcuLi8uLi8uLi9saWIvZXJyb3JzJztcblxuZXhwb3J0IGRlZmF1bHQgKHNlcnZlcikgPT4ge1xuICBjb25zdCBjYWxsV2l0aFJlcXVlc3QgPSBnZXRDbGllbnQoc2VydmVyKS5jYWxsV2l0aFJlcXVlc3Q7XG5cbiAgc2VydmVyLnJvdXRlKHtcbiAgICBtZXRob2Q6ICdHRVQnLFxuICAgIHBhdGg6ICcvYXBpL3NlY3VyaXR5L3YxL2ZpZWxkcy97cXVlcnl9JyxcbiAgICBoYW5kbGVyKHJlcXVlc3QsIHJlcGx5KSB7XG4gICAgICByZXR1cm4gY2FsbFdpdGhSZXF1ZXN0KHJlcXVlc3QsICdpbmRpY2VzLmdldEZpZWxkTWFwcGluZycsIHtcbiAgICAgICAgaW5kZXg6IHJlcXVlc3QucGFyYW1zLnF1ZXJ5LFxuICAgICAgICBmaWVsZHM6ICcqJyxcbiAgICAgICAgYWxsb3dOb0luZGljZXM6IGZhbHNlLFxuICAgICAgICBpbmNsdWRlRGVmYXVsdHM6IHRydWVcbiAgICAgIH0pXG4gICAgICAudGhlbigobWFwcGluZ3MpID0+IHJlcGx5KFxuICAgICAgICBfKG1hcHBpbmdzKVxuICAgICAgICAubWFwKCdtYXBwaW5ncycpXG4gICAgICAgIC5tYXAoXy52YWx1ZXMpXG4gICAgICAgIC5mbGF0dGVuKClcbiAgICAgICAgLm1hcChfLmtleXMpXG4gICAgICAgIC5mbGF0dGVuKClcbiAgICAgICAgLnVuaXEoKVxuICAgICAgICAudmFsdWUoKVxuICAgICAgKSlcbiAgICAgIC5jYXRjaChfLmZsb3cod3JhcEVycm9yLCByZXBseSkpO1xuICAgIH1cbiAgfSk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/routes/api/v1/indices.js"
      ],
      "names": [],
      "mappings": ";;;;;;;;sBAAc,QAAQ;;;;oCACA,gCAAgC;;;;yBAC5B,qBAAqB;;qBAEhC,UAAC,MAAM,EAAK;AACzB,MAAM,eAAe,GAAG,uCAAU,MAAM,CAAC,CAAC,eAAe,CAAC;;AAE1D,QAAM,CAAC,KAAK,CAAC;AACX,UAAM,EAAE,KAAK;AACb,QAAI,EAAE,iCAAiC;AACvC,WAAO,EAAA,iBAAC,OAAO,EAAE,KAAK,EAAE;AACtB,aAAO,eAAe,CAAC,OAAO,EAAE,yBAAyB,EAAE;AACzD,aAAK,EAAE,OAAO,CAAC,MAAM,CAAC,KAAK;AAC3B,cAAM,EAAE,GAAG;AACX,sBAAc,EAAE,KAAK;AACrB,uBAAe,EAAE,IAAI;OACtB,CAAC,CACD,IAAI,CAAC,UAAC,QAAQ;eAAK,KAAK,CACvB,yBAAE,QAAQ,CAAC,CACV,GAAG,CAAC,UAAU,CAAC,CACf,GAAG,CAAC,oBAAE,MAAM,CAAC,CACb,OAAO,EAAE,CACT,GAAG,CAAC,oBAAE,IAAI,CAAC,CACX,OAAO,EAAE,CACT,IAAI,EAAE,CACN,KAAK,EAAE,CACT;OAAA,CAAC,SACI,CAAC,oBAAE,IAAI,uBAAY,KAAK,CAAC,CAAC,CAAC;KAClC;GACF,CAAC,CAAC;CACJ",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/routes/api/v1/indices.js",
      "sourcesContent": [
        "import _ from 'lodash';\nimport getClient from '../../../lib/get_client_shield';\nimport { wrapError } from '../../../lib/errors';\n\nexport default (server) => {\n  const callWithRequest = getClient(server).callWithRequest;\n\n  server.route({\n    method: 'GET',\n    path: '/api/security/v1/fields/{query}',\n    handler(request, reply) {\n      return callWithRequest(request, 'indices.getFieldMapping', {\n        index: request.params.query,\n        fields: '*',\n        allowNoIndices: false,\n        includeDefaults: true\n      })\n      .then((mappings) => reply(\n        _(mappings)\n        .map('mappings')\n        .map(_.values)\n        .flatten()\n        .map(_.keys)\n        .flatten()\n        .uniq()\n        .value()\n      ))\n      .catch(_.flow(wrapError, reply));\n    }\n  });\n};\n"
      ]
    },
    "mtime": 1485775625189
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/routes/views/login.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "lodash",
            "imported": [
              "get"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "get",
                "local": "get"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _lodash = require('lodash');\n\nexports['default'] = function (server, uiExports, xpackMainPlugin) {\n  var config = server.config();\n  var cookieName = config.get('xpack.security.cookieName');\n  var login = uiExports.apps.byId.login;\n\n  server.route({\n    method: 'GET',\n    path: '/login',\n    handler: function handler(request, reply) {\n\n      var xpackInfo = xpackMainPlugin && xpackMainPlugin.info;\n      var licenseCheckResults = xpackInfo && xpackInfo.isAvailable() && xpackInfo.feature('security').getLicenseCheckResults();\n      var showLogin = (0, _lodash.get)(licenseCheckResults, 'showLogin');\n\n      var isUserAlreadyLoggedIn = !!request.state[cookieName];\n      if (isUserAlreadyLoggedIn || !showLogin) {\n        var next = (0, _lodash.get)(request, 'query.next', '/');\n        return reply.redirect('' + config.get('server.basePath') + next);\n      }\n      return reply.renderAppWithDefaultConfig(login);\n    },\n    config: {\n      auth: false\n    }\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9yb3V0ZXMvdmlld3MvbG9naW4uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7O3NCQUFvQixRQUFROztxQkFFYixVQUFDLE1BQU0sRUFBRSxTQUFTLEVBQUUsZUFBZSxFQUFLO0FBQ3JELE1BQU0sTUFBTSxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQztBQUMvQixNQUFNLFVBQVUsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLDJCQUEyQixDQUFDLENBQUM7QUFDM0QsTUFBTSxLQUFLLEdBQUcsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDOztBQUV4QyxRQUFNLENBQUMsS0FBSyxDQUFDO0FBQ1gsVUFBTSxFQUFFLEtBQUs7QUFDYixRQUFJLEVBQUUsUUFBUTtBQUNkLFdBQU8sRUFBQSxpQkFBQyxPQUFPLEVBQUUsS0FBSyxFQUFFOztBQUV0QixVQUFNLFNBQVMsR0FBRyxlQUFlLElBQUksZUFBZSxDQUFDLElBQUksQ0FBQztBQUMxRCxVQUFNLG1CQUFtQixHQUFHLFNBQVMsSUFBSSxTQUFTLENBQUMsV0FBVyxFQUFFLElBQUksU0FBUyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxzQkFBc0IsRUFBRSxDQUFDO0FBQzNILFVBQU0sU0FBUyxHQUFHLGlCQUFJLG1CQUFtQixFQUFFLFdBQVcsQ0FBQyxDQUFDOztBQUV4RCxVQUFNLHFCQUFxQixHQUFHLENBQUMsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLFVBQVUsQ0FBQyxDQUFDO0FBQzFELFVBQUkscUJBQXFCLElBQUksQ0FBQyxTQUFTLEVBQUU7QUFDdkMsWUFBTSxJQUFJLEdBQUcsaUJBQUksT0FBTyxFQUFFLFlBQVksRUFBRSxHQUFHLENBQUMsQ0FBQztBQUM3QyxlQUFPLEtBQUssQ0FBQyxRQUFRLE1BQUksTUFBTSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxHQUFHLElBQUksQ0FBRyxDQUFDO09BQ2xFO0FBQ0QsYUFBTyxLQUFLLENBQUMsMEJBQTBCLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDaEQ7QUFDRCxVQUFNLEVBQUU7QUFDTixVQUFJLEVBQUUsS0FBSztLQUNaO0dBQ0YsQ0FBQyxDQUFDO0NBQ0oiLCJmaWxlIjoiL2hvbWUvdWJ1bnR1L3dvcmtzcGFjZS9raWJhbmEtNS4wLjItbGludXgteDg2XzY0L3BsdWdpbnMveC1wYWNrL3BsdWdpbnMvc2VjdXJpdHkvc2VydmVyL3JvdXRlcy92aWV3cy9sb2dpbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGdldCB9IGZyb20gJ2xvZGFzaCc7XG5cbmV4cG9ydCBkZWZhdWx0IChzZXJ2ZXIsIHVpRXhwb3J0cywgeHBhY2tNYWluUGx1Z2luKSA9PiB7XG4gIGNvbnN0IGNvbmZpZyA9IHNlcnZlci5jb25maWcoKTtcbiAgY29uc3QgY29va2llTmFtZSA9IGNvbmZpZy5nZXQoJ3hwYWNrLnNlY3VyaXR5LmNvb2tpZU5hbWUnKTtcbiAgY29uc3QgbG9naW4gPSB1aUV4cG9ydHMuYXBwcy5ieUlkLmxvZ2luO1xuXG4gIHNlcnZlci5yb3V0ZSh7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBwYXRoOiAnL2xvZ2luJyxcbiAgICBoYW5kbGVyKHJlcXVlc3QsIHJlcGx5KSB7XG5cbiAgICAgIGNvbnN0IHhwYWNrSW5mbyA9IHhwYWNrTWFpblBsdWdpbiAmJiB4cGFja01haW5QbHVnaW4uaW5mbztcbiAgICAgIGNvbnN0IGxpY2Vuc2VDaGVja1Jlc3VsdHMgPSB4cGFja0luZm8gJiYgeHBhY2tJbmZvLmlzQXZhaWxhYmxlKCkgJiYgeHBhY2tJbmZvLmZlYXR1cmUoJ3NlY3VyaXR5JykuZ2V0TGljZW5zZUNoZWNrUmVzdWx0cygpO1xuICAgICAgY29uc3Qgc2hvd0xvZ2luID0gZ2V0KGxpY2Vuc2VDaGVja1Jlc3VsdHMsICdzaG93TG9naW4nKTtcblxuICAgICAgY29uc3QgaXNVc2VyQWxyZWFkeUxvZ2dlZEluID0gISFyZXF1ZXN0LnN0YXRlW2Nvb2tpZU5hbWVdO1xuICAgICAgaWYgKGlzVXNlckFscmVhZHlMb2dnZWRJbiB8fCAhc2hvd0xvZ2luKSB7XG4gICAgICAgIGNvbnN0IG5leHQgPSBnZXQocmVxdWVzdCwgJ3F1ZXJ5Lm5leHQnLCAnLycpO1xuICAgICAgICByZXR1cm4gcmVwbHkucmVkaXJlY3QoYCR7Y29uZmlnLmdldCgnc2VydmVyLmJhc2VQYXRoJyl9JHtuZXh0fWApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHJlcGx5LnJlbmRlckFwcFdpdGhEZWZhdWx0Q29uZmlnKGxvZ2luKTtcbiAgICB9LFxuICAgIGNvbmZpZzoge1xuICAgICAgYXV0aDogZmFsc2VcbiAgICB9XG4gIH0pO1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/routes/views/login.js"
      ],
      "names": [],
      "mappings": ";;;;;;sBAAoB,QAAQ;;qBAEb,UAAC,MAAM,EAAE,SAAS,EAAE,eAAe,EAAK;AACrD,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,EAAE,CAAC;AAC/B,MAAM,UAAU,GAAG,MAAM,CAAC,GAAG,CAAC,2BAA2B,CAAC,CAAC;AAC3D,MAAM,KAAK,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,KAAK,CAAC;;AAExC,QAAM,CAAC,KAAK,CAAC;AACX,UAAM,EAAE,KAAK;AACb,QAAI,EAAE,QAAQ;AACd,WAAO,EAAA,iBAAC,OAAO,EAAE,KAAK,EAAE;;AAEtB,UAAM,SAAS,GAAG,eAAe,IAAI,eAAe,CAAC,IAAI,CAAC;AAC1D,UAAM,mBAAmB,GAAG,SAAS,IAAI,SAAS,CAAC,WAAW,EAAE,IAAI,SAAS,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,sBAAsB,EAAE,CAAC;AAC3H,UAAM,SAAS,GAAG,iBAAI,mBAAmB,EAAE,WAAW,CAAC,CAAC;;AAExD,UAAM,qBAAqB,GAAG,CAAC,CAAC,OAAO,CAAC,KAAK,CAAC,UAAU,CAAC,CAAC;AAC1D,UAAI,qBAAqB,IAAI,CAAC,SAAS,EAAE;AACvC,YAAM,IAAI,GAAG,iBAAI,OAAO,EAAE,YAAY,EAAE,GAAG,CAAC,CAAC;AAC7C,eAAO,KAAK,CAAC,QAAQ,MAAI,MAAM,CAAC,GAAG,CAAC,iBAAiB,CAAC,GAAG,IAAI,CAAG,CAAC;OAClE;AACD,aAAO,KAAK,CAAC,0BAA0B,CAAC,KAAK,CAAC,CAAC;KAChD;AACD,UAAM,EAAE;AACN,UAAI,EAAE,KAAK;KACZ;GACF,CAAC,CAAC;CACJ",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/routes/views/login.js",
      "sourcesContent": [
        "import { get } from 'lodash';\n\nexport default (server, uiExports, xpackMainPlugin) => {\n  const config = server.config();\n  const cookieName = config.get('xpack.security.cookieName');\n  const login = uiExports.apps.byId.login;\n\n  server.route({\n    method: 'GET',\n    path: '/login',\n    handler(request, reply) {\n\n      const xpackInfo = xpackMainPlugin && xpackMainPlugin.info;\n      const licenseCheckResults = xpackInfo && xpackInfo.isAvailable() && xpackInfo.feature('security').getLicenseCheckResults();\n      const showLogin = get(licenseCheckResults, 'showLogin');\n\n      const isUserAlreadyLoggedIn = !!request.state[cookieName];\n      if (isUserAlreadyLoggedIn || !showLogin) {\n        const next = get(request, 'query.next', '/');\n        return reply.redirect(`${config.get('server.basePath')}${next}`);\n      }\n      return reply.renderAppWithDefaultConfig(login);\n    },\n    config: {\n      auth: false\n    }\n  });\n};\n"
      ]
    },
    "mtime": 1485775624445
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/routes/views/logout.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nexports['default'] = function (server, uiExports) {\n  var logout = uiExports.apps.byId.logout;\n\n  server.route({\n    method: 'GET',\n    path: '/logout',\n    handler: function handler(request, reply) {\n      return reply.renderAppWithDefaultConfig(logout);\n    },\n    config: {\n      auth: false\n    }\n  });\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9yb3V0ZXMvdmlld3MvbG9nb3V0LmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7OztxQkFBZSxVQUFDLE1BQU0sRUFBRSxTQUFTLEVBQUs7QUFDcEMsTUFBTSxNQUFNLEdBQUcsU0FBUyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDOztBQUUxQyxRQUFNLENBQUMsS0FBSyxDQUFDO0FBQ1gsVUFBTSxFQUFFLEtBQUs7QUFDYixRQUFJLEVBQUUsU0FBUztBQUNmLFdBQU8sRUFBQSxpQkFBQyxPQUFPLEVBQUUsS0FBSyxFQUFFO0FBQ3RCLGFBQU8sS0FBSyxDQUFDLDBCQUEwQixDQUFDLE1BQU0sQ0FBQyxDQUFDO0tBQ2pEO0FBQ0QsVUFBTSxFQUFFO0FBQ04sVUFBSSxFQUFFLEtBQUs7S0FDWjtHQUNGLENBQUMsQ0FBQztDQUNKIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9yb3V0ZXMvdmlld3MvbG9nb3V0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgKHNlcnZlciwgdWlFeHBvcnRzKSA9PiB7XG4gIGNvbnN0IGxvZ291dCA9IHVpRXhwb3J0cy5hcHBzLmJ5SWQubG9nb3V0O1xuXG4gIHNlcnZlci5yb3V0ZSh7XG4gICAgbWV0aG9kOiAnR0VUJyxcbiAgICBwYXRoOiAnL2xvZ291dCcsXG4gICAgaGFuZGxlcihyZXF1ZXN0LCByZXBseSkge1xuICAgICAgcmV0dXJuIHJlcGx5LnJlbmRlckFwcFdpdGhEZWZhdWx0Q29uZmlnKGxvZ291dCk7XG4gICAgfSxcbiAgICBjb25maWc6IHtcbiAgICAgIGF1dGg6IGZhbHNlXG4gICAgfVxuICB9KTtcbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/routes/views/logout.js"
      ],
      "names": [],
      "mappings": ";;;;;;qBAAe,UAAC,MAAM,EAAE,SAAS,EAAK;AACpC,MAAM,MAAM,GAAG,SAAS,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC;;AAE1C,QAAM,CAAC,KAAK,CAAC;AACX,UAAM,EAAE,KAAK;AACb,QAAI,EAAE,SAAS;AACf,WAAO,EAAA,iBAAC,OAAO,EAAE,KAAK,EAAE;AACtB,aAAO,KAAK,CAAC,0BAA0B,CAAC,MAAM,CAAC,CAAC;KACjD;AACD,UAAM,EAAE;AACN,UAAI,EAAE,KAAK;KACZ;GACF,CAAC,CAAC;CACJ",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/routes/views/logout.js",
      "sourcesContent": [
        "export default (server, uiExports) => {\n  const logout = uiExports.apps.byId.logout;\n\n  server.route({\n    method: 'GET',\n    path: '/logout',\n    handler(request, reply) {\n      return reply.renderAppWithDefaultConfig(logout);\n    },\n    config: {\n      auth: false\n    }\n  });\n};\n"
      ]
    },
    "mtime": 1485775624445
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/validate_config.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nvar crypto = require('crypto');\n\nexports['default'] = function (config, log) {\n  if (config.get('xpack.security.encryptionKey') == null) {\n    log('Generating a random key for xpack.security.encryptionKey. To prevent sessions from being invalidated on ' + 'restart, please set xpack.security.encryptionKey in kibana.yml');\n\n    config.set('xpack.security.encryptionKey', crypto.randomBytes(16).toString('hex'));\n  } else if (config.get('xpack.security.encryptionKey').length < 32) {\n    throw new Error('xpack.security.encryptionKey must be at least 32 characters. Please update the key in kibana.yml.');\n  }\n\n  var isSslConfigured = config.get('server.ssl.key') != null && config.get('server.ssl.cert') != null;\n  if (!isSslConfigured) {\n    if (config.get('xpack.security.secureCookies')) {\n      log('Using secure cookies, but SSL is not enabled inside Kibana. SSL must be configured outside of Kibana to ' + 'function properly.');\n    } else {\n      log('Session cookies will be transmitted over insecure connections. This is not recommended.');\n    }\n  } else {\n    config.set('xpack.security.secureCookies', true);\n  }\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9saWIvdmFsaWRhdGVfY29uZmlnLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsSUFBTSxNQUFNLEdBQUcsT0FBTyxDQUFDLFFBQVEsQ0FBQyxDQUFDOztxQkFFbEIsVUFBQyxNQUFNLEVBQUUsR0FBRyxFQUFLO0FBQzlCLE1BQUksTUFBTSxDQUFDLEdBQUcsQ0FBQyw4QkFBOEIsQ0FBQyxJQUFJLElBQUksRUFBRTtBQUN0RCxPQUFHLENBQUMsMEdBQTBHLEdBQzVHLGdFQUFnRSxDQUFDLENBQUM7O0FBRXBFLFVBQU0sQ0FBQyxHQUFHLENBQUMsOEJBQThCLEVBQUUsTUFBTSxDQUFDLFdBQVcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztHQUNwRixNQUFNLElBQUksTUFBTSxDQUFDLEdBQUcsQ0FBQyw4QkFBOEIsQ0FBQyxDQUFDLE1BQU0sR0FBRyxFQUFFLEVBQUU7QUFDakUsVUFBTSxJQUFJLEtBQUssQ0FBQyxtR0FBbUcsQ0FBQyxDQUFDO0dBQ3RIOztBQUVELE1BQU0sZUFBZSxHQUFHLE1BQU0sQ0FBQyxHQUFHLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxJQUFJLElBQUksTUFBTSxDQUFDLEdBQUcsQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLElBQUksQ0FBQztBQUN0RyxNQUFJLENBQUMsZUFBZSxFQUFFO0FBQ3BCLFFBQUksTUFBTSxDQUFDLEdBQUcsQ0FBQyw4QkFBOEIsQ0FBQyxFQUFFO0FBQzlDLFNBQUcsQ0FBQywwR0FBMEcsR0FDNUcsb0JBQW9CLENBQUMsQ0FBQztLQUN6QixNQUFNO0FBQ0wsU0FBRyxDQUFDLHlGQUF5RixDQUFDLENBQUM7S0FDaEc7R0FDRixNQUFNO0FBQ0wsVUFBTSxDQUFDLEdBQUcsQ0FBQyw4QkFBOEIsRUFBRSxJQUFJLENBQUMsQ0FBQztHQUNsRDtDQUNGIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9saWIvdmFsaWRhdGVfY29uZmlnLmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgY3J5cHRvID0gcmVxdWlyZSgnY3J5cHRvJyk7XG5cbmV4cG9ydCBkZWZhdWx0IChjb25maWcsIGxvZykgPT4ge1xuICBpZiAoY29uZmlnLmdldCgneHBhY2suc2VjdXJpdHkuZW5jcnlwdGlvbktleScpID09IG51bGwpIHtcbiAgICBsb2coJ0dlbmVyYXRpbmcgYSByYW5kb20ga2V5IGZvciB4cGFjay5zZWN1cml0eS5lbmNyeXB0aW9uS2V5LiBUbyBwcmV2ZW50IHNlc3Npb25zIGZyb20gYmVpbmcgaW52YWxpZGF0ZWQgb24gJyArXG4gICAgICAncmVzdGFydCwgcGxlYXNlIHNldCB4cGFjay5zZWN1cml0eS5lbmNyeXB0aW9uS2V5IGluIGtpYmFuYS55bWwnKTtcblxuICAgIGNvbmZpZy5zZXQoJ3hwYWNrLnNlY3VyaXR5LmVuY3J5cHRpb25LZXknLCBjcnlwdG8ucmFuZG9tQnl0ZXMoMTYpLnRvU3RyaW5nKCdoZXgnKSk7XG4gIH0gZWxzZSBpZiAoY29uZmlnLmdldCgneHBhY2suc2VjdXJpdHkuZW5jcnlwdGlvbktleScpLmxlbmd0aCA8IDMyKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCd4cGFjay5zZWN1cml0eS5lbmNyeXB0aW9uS2V5IG11c3QgYmUgYXQgbGVhc3QgMzIgY2hhcmFjdGVycy4gUGxlYXNlIHVwZGF0ZSB0aGUga2V5IGluIGtpYmFuYS55bWwuJyk7XG4gIH1cblxuICBjb25zdCBpc1NzbENvbmZpZ3VyZWQgPSBjb25maWcuZ2V0KCdzZXJ2ZXIuc3NsLmtleScpICE9IG51bGwgJiYgY29uZmlnLmdldCgnc2VydmVyLnNzbC5jZXJ0JykgIT0gbnVsbDtcbiAgaWYgKCFpc1NzbENvbmZpZ3VyZWQpIHtcbiAgICBpZiAoY29uZmlnLmdldCgneHBhY2suc2VjdXJpdHkuc2VjdXJlQ29va2llcycpKSB7XG4gICAgICBsb2coJ1VzaW5nIHNlY3VyZSBjb29raWVzLCBidXQgU1NMIGlzIG5vdCBlbmFibGVkIGluc2lkZSBLaWJhbmEuIFNTTCBtdXN0IGJlIGNvbmZpZ3VyZWQgb3V0c2lkZSBvZiBLaWJhbmEgdG8gJyArXG4gICAgICAgICdmdW5jdGlvbiBwcm9wZXJseS4nKTtcbiAgICB9IGVsc2Uge1xuICAgICAgbG9nKCdTZXNzaW9uIGNvb2tpZXMgd2lsbCBiZSB0cmFuc21pdHRlZCBvdmVyIGluc2VjdXJlIGNvbm5lY3Rpb25zLiBUaGlzIGlzIG5vdCByZWNvbW1lbmRlZC4nKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgY29uZmlnLnNldCgneHBhY2suc2VjdXJpdHkuc2VjdXJlQ29va2llcycsIHRydWUpO1xuICB9XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/validate_config.js"
      ],
      "names": [],
      "mappings": ";;;;;AAAA,IAAM,MAAM,GAAG,OAAO,CAAC,QAAQ,CAAC,CAAC;;qBAElB,UAAC,MAAM,EAAE,GAAG,EAAK;AAC9B,MAAI,MAAM,CAAC,GAAG,CAAC,8BAA8B,CAAC,IAAI,IAAI,EAAE;AACtD,OAAG,CAAC,0GAA0G,GAC5G,gEAAgE,CAAC,CAAC;;AAEpE,UAAM,CAAC,GAAG,CAAC,8BAA8B,EAAE,MAAM,CAAC,WAAW,CAAC,EAAE,CAAC,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC;GACpF,MAAM,IAAI,MAAM,CAAC,GAAG,CAAC,8BAA8B,CAAC,CAAC,MAAM,GAAG,EAAE,EAAE;AACjE,UAAM,IAAI,KAAK,CAAC,mGAAmG,CAAC,CAAC;GACtH;;AAED,MAAM,eAAe,GAAG,MAAM,CAAC,GAAG,CAAC,gBAAgB,CAAC,IAAI,IAAI,IAAI,MAAM,CAAC,GAAG,CAAC,iBAAiB,CAAC,IAAI,IAAI,CAAC;AACtG,MAAI,CAAC,eAAe,EAAE;AACpB,QAAI,MAAM,CAAC,GAAG,CAAC,8BAA8B,CAAC,EAAE;AAC9C,SAAG,CAAC,0GAA0G,GAC5G,oBAAoB,CAAC,CAAC;KACzB,MAAM;AACL,SAAG,CAAC,yFAAyF,CAAC,CAAC;KAChG;GACF,MAAM;AACL,UAAM,CAAC,GAAG,CAAC,8BAA8B,EAAE,IAAI,CAAC,CAAC;GAClD;CACF",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/validate_config.js",
      "sourcesContent": [
        "const crypto = require('crypto');\n\nexport default (config, log) => {\n  if (config.get('xpack.security.encryptionKey') == null) {\n    log('Generating a random key for xpack.security.encryptionKey. To prevent sessions from being invalidated on ' +\n      'restart, please set xpack.security.encryptionKey in kibana.yml');\n\n    config.set('xpack.security.encryptionKey', crypto.randomBytes(16).toString('hex'));\n  } else if (config.get('xpack.security.encryptionKey').length < 32) {\n    throw new Error('xpack.security.encryptionKey must be at least 32 characters. Please update the key in kibana.yml.');\n  }\n\n  const isSslConfigured = config.get('server.ssl.key') != null && config.get('server.ssl.cert') != null;\n  if (!isSslConfigured) {\n    if (config.get('xpack.security.secureCookies')) {\n      log('Using secure cookies, but SSL is not enabled inside Kibana. SSL must be configured outside of Kibana to ' +\n        'function properly.');\n    } else {\n      log('Session cookies will be transmitted over insecure connections. This is not recommended.');\n    }\n  } else {\n    config.set('xpack.security.secureCookies', true);\n  }\n};\n"
      ]
    },
    "mtime": 1485775596253
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/set_elasticsearch_auth.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./default_auth",
            "imported": [
              "USERNAME",
              "PASSWORD"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "USERNAME",
                "local": "USERNAME"
              },
              {
                "kind": "named",
                "imported": "PASSWORD",
                "local": "PASSWORD"
              }
            ]
          }
        ],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\n\nvar _default_auth = require('./default_auth');\n\nexports['default'] = function (config) {\n  var _config$get = config.get('elasticsearch');\n\n  var username = _config$get.username;\n  var password = _config$get.password;\n\n  if (!username) config.set('elasticsearch.username', _default_auth.USERNAME);\n  if (!password) config.set('elasticsearch.password', _default_auth.PASSWORD);\n};\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9saWIvc2V0X2VsYXN0aWNzZWFyY2hfYXV0aC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7NEJBQWlDLGdCQUFnQjs7cUJBRWxDLFVBQUMsTUFBTSxFQUFLO29CQUNJLE1BQU0sQ0FBQyxHQUFHLENBQUMsZUFBZSxDQUFDOztNQUFqRCxRQUFRLGVBQVIsUUFBUTtNQUFFLFFBQVEsZUFBUixRQUFROztBQUN6QixNQUFJLENBQUMsUUFBUSxFQUFFLE1BQU0sQ0FBQyxHQUFHLENBQUMsd0JBQXdCLHlCQUFXLENBQUM7QUFDOUQsTUFBSSxDQUFDLFFBQVEsRUFBRSxNQUFNLENBQUMsR0FBRyxDQUFDLHdCQUF3Qix5QkFBVyxDQUFDO0NBQy9EIiwiZmlsZSI6Ii9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9saWIvc2V0X2VsYXN0aWNzZWFyY2hfYXV0aC5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7VVNFUk5BTUUsIFBBU1NXT1JEfSBmcm9tICcuL2RlZmF1bHRfYXV0aCc7XG5cbmV4cG9ydCBkZWZhdWx0IChjb25maWcpID0+IHtcbiAgY29uc3Qge3VzZXJuYW1lLCBwYXNzd29yZH0gPSBjb25maWcuZ2V0KCdlbGFzdGljc2VhcmNoJyk7XG4gIGlmICghdXNlcm5hbWUpIGNvbmZpZy5zZXQoJ2VsYXN0aWNzZWFyY2gudXNlcm5hbWUnLCBVU0VSTkFNRSk7XG4gIGlmICghcGFzc3dvcmQpIGNvbmZpZy5zZXQoJ2VsYXN0aWNzZWFyY2gucGFzc3dvcmQnLCBQQVNTV09SRCk7XG59O1xuIl19",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/set_elasticsearch_auth.js"
      ],
      "names": [],
      "mappings": ";;;;;;4BAAiC,gBAAgB;;qBAElC,UAAC,MAAM,EAAK;oBACI,MAAM,CAAC,GAAG,CAAC,eAAe,CAAC;;MAAjD,QAAQ,eAAR,QAAQ;MAAE,QAAQ,eAAR,QAAQ;;AACzB,MAAI,CAAC,QAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,wBAAwB,yBAAW,CAAC;AAC9D,MAAI,CAAC,QAAQ,EAAE,MAAM,CAAC,GAAG,CAAC,wBAAwB,yBAAW,CAAC;CAC/D",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/set_elasticsearch_auth.js",
      "sourcesContent": [
        "import {USERNAME, PASSWORD} from './default_auth';\n\nexport default (config) => {\n  const {username, password} = config.get('elasticsearch');\n  if (!username) config.set('elasticsearch.username', USERNAME);\n  if (!password) config.set('elasticsearch.password', PASSWORD);\n};\n"
      ]
    },
    "mtime": 1485775596253
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/default_auth.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [],
          "specifiers": []
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = Object.freeze({\n  USERNAME: 'kibana',\n  PASSWORD: 'changeme'\n});\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9saWIvZGVmYXVsdF9hdXRoLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O3FCQUFlLE1BQU0sQ0FBQyxNQUFNLENBQUM7QUFDM0IsVUFBUSxFQUFFLFFBQVE7QUFDbEIsVUFBUSxFQUFFLFVBQVU7Q0FDckIsQ0FBQyIsImZpbGUiOiIvaG9tZS91YnVudHUvd29ya3NwYWNlL2tpYmFuYS01LjAuMi1saW51eC14ODZfNjQvcGx1Z2lucy94LXBhY2svcGx1Z2lucy9zZWN1cml0eS9zZXJ2ZXIvbGliL2RlZmF1bHRfYXV0aC5qcyIsInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IE9iamVjdC5mcmVlemUoe1xuICBVU0VSTkFNRTogJ2tpYmFuYScsXG4gIFBBU1NXT1JEOiAnY2hhbmdlbWUnXG59KTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/default_auth.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAAe,MAAM,CAAC,MAAM,CAAC;AAC3B,UAAQ,EAAE,QAAQ;AAClB,UAAQ,EAAE,UAAU;CACrB,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/default_auth.js",
      "sourcesContent": [
        "export default Object.freeze({\n  USERNAME: 'kibana',\n  PASSWORD: 'changeme'\n});\n"
      ]
    },
    "mtime": 1485775596253
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/login_scheme.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "./auth_redirect",
            "imported": [
              "*"
            ],
            "specifiers": [
              {
                "kind": "namespace",
                "local": "authRedirect"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "createScheme",
            "redirectUrl",
            "strategies"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "createScheme",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "redirectUrl",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "strategies",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-wildcard"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = createScheme;\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj['default'] = obj; return newObj; } }\n\nvar _auth_redirect = require('./auth_redirect');\n\nvar authRedirect = _interopRequireWildcard(_auth_redirect);\n\n/**\n * Creates a hapi auth scheme with conditional session\n * expiration handling based on each request\n *\n * @param {object}\n *    redirectUrl: Transform function that request path is passed to before\n *                 redirecting\n *    strategy:    The name of the auth strategy to use for test\n * @return {Function}\n */\n\nfunction createScheme(_ref) {\n  var redirectUrl = _ref.redirectUrl;\n  var strategies = _ref.strategies;\n\n  return function (server) {\n    var authenticate = authRedirect['default']({\n      redirectUrl: redirectUrl,\n      strategies: strategies,\n      testRequest: server.auth.test,\n      xpackMainPlugin: server.plugins.xpack_main\n    });\n    return { authenticate: authenticate };\n  };\n}\n\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9saWIvbG9naW5fc2NoZW1lLmpzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O3FCQVl3QixZQUFZOzs7OzZCQVpOLGlCQUFpQjs7SUFBbkMsWUFBWTs7Ozs7Ozs7Ozs7OztBQVlULFNBQVMsWUFBWSxDQUFDLElBQTJCLEVBQUU7TUFBM0IsV0FBVyxHQUFiLElBQTJCLENBQXpCLFdBQVc7TUFBRSxVQUFVLEdBQXpCLElBQTJCLENBQVosVUFBVTs7QUFDNUQsU0FBTyxVQUFDLE1BQU0sRUFBSztBQUNqQixRQUFNLFlBQVksR0FBRyxZQUFZLFdBQVEsQ0FBQztBQUN4QyxpQkFBVyxFQUFYLFdBQVc7QUFDWCxnQkFBVSxFQUFWLFVBQVU7QUFDVixpQkFBVyxFQUFFLE1BQU0sQ0FBQyxJQUFJLENBQUMsSUFBSTtBQUM3QixxQkFBZSxFQUFFLE1BQU0sQ0FBQyxPQUFPLENBQUMsVUFBVTtLQUMzQyxDQUFDLENBQUM7QUFDSCxXQUFPLEVBQUUsWUFBWSxFQUFaLFlBQVksRUFBRSxDQUFDO0dBQ3pCLENBQUM7Q0FDSCIsImZpbGUiOiIvaG9tZS91YnVudHUvd29ya3NwYWNlL2tpYmFuYS01LjAuMi1saW51eC14ODZfNjQvcGx1Z2lucy94LXBhY2svcGx1Z2lucy9zZWN1cml0eS9zZXJ2ZXIvbGliL2xvZ2luX3NjaGVtZS5qcyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCAqIGFzIGF1dGhSZWRpcmVjdCBmcm9tICcuL2F1dGhfcmVkaXJlY3QnO1xuXG4vKipcbiAqIENyZWF0ZXMgYSBoYXBpIGF1dGggc2NoZW1lIHdpdGggY29uZGl0aW9uYWwgc2Vzc2lvblxuICogZXhwaXJhdGlvbiBoYW5kbGluZyBiYXNlZCBvbiBlYWNoIHJlcXVlc3RcbiAqXG4gKiBAcGFyYW0ge29iamVjdH1cbiAqICAgIHJlZGlyZWN0VXJsOiBUcmFuc2Zvcm0gZnVuY3Rpb24gdGhhdCByZXF1ZXN0IHBhdGggaXMgcGFzc2VkIHRvIGJlZm9yZVxuICogICAgICAgICAgICAgICAgIHJlZGlyZWN0aW5nXG4gKiAgICBzdHJhdGVneTogICAgVGhlIG5hbWUgb2YgdGhlIGF1dGggc3RyYXRlZ3kgdG8gdXNlIGZvciB0ZXN0XG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gY3JlYXRlU2NoZW1lKHsgcmVkaXJlY3RVcmwsIHN0cmF0ZWdpZXMgfSkge1xuICByZXR1cm4gKHNlcnZlcikgPT4ge1xuICAgIGNvbnN0IGF1dGhlbnRpY2F0ZSA9IGF1dGhSZWRpcmVjdC5kZWZhdWx0KHtcbiAgICAgIHJlZGlyZWN0VXJsLFxuICAgICAgc3RyYXRlZ2llcyxcbiAgICAgIHRlc3RSZXF1ZXN0OiBzZXJ2ZXIuYXV0aC50ZXN0LFxuICAgICAgeHBhY2tNYWluUGx1Z2luOiBzZXJ2ZXIucGx1Z2lucy54cGFja19tYWluXG4gICAgfSk7XG4gICAgcmV0dXJuIHsgYXV0aGVudGljYXRlIH07XG4gIH07XG59XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/login_scheme.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAYwB,YAAY;;;;6BAZN,iBAAiB;;IAAnC,YAAY;;;;;;;;;;;;;AAYT,SAAS,YAAY,CAAC,IAA2B,EAAE;MAA3B,WAAW,GAAb,IAA2B,CAAzB,WAAW;MAAE,UAAU,GAAzB,IAA2B,CAAZ,UAAU;;AAC5D,SAAO,UAAC,MAAM,EAAK;AACjB,QAAM,YAAY,GAAG,YAAY,WAAQ,CAAC;AACxC,iBAAW,EAAX,WAAW;AACX,gBAAU,EAAV,UAAU;AACV,iBAAW,EAAE,MAAM,CAAC,IAAI,CAAC,IAAI;AAC7B,qBAAe,EAAE,MAAM,CAAC,OAAO,CAAC,UAAU;KAC3C,CAAC,CAAC;AACH,WAAO,EAAE,YAAY,EAAZ,YAAY,EAAE,CAAC;GACzB,CAAC;CACH",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/login_scheme.js",
      "sourcesContent": [
        "import * as authRedirect from './auth_redirect';\n\n/**\n * Creates a hapi auth scheme with conditional session\n * expiration handling based on each request\n *\n * @param {object}\n *    redirectUrl: Transform function that request path is passed to before\n *                 redirecting\n *    strategy:    The name of the auth strategy to use for test\n * @return {Function}\n */\nexport default function createScheme({ redirectUrl, strategies }) {\n  return (server) => {\n    const authenticate = authRedirect.default({\n      redirectUrl,\n      strategies,\n      testRequest: server.auth.test,\n      xpackMainPlugin: server.plugins.xpack_main\n    });\n    return { authenticate };\n  };\n}\n"
      ]
    },
    "mtime": 1485775596253
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/auth_redirect.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [
          {
            "source": "boom",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Boom"
              }
            ]
          },
          {
            "source": "bluebird",
            "imported": [
              "default"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "default",
                "local": "Promise"
              }
            ]
          },
          {
            "source": "lodash",
            "imported": [
              "contains",
              "get",
              "has"
            ],
            "specifiers": [
              {
                "kind": "named",
                "imported": "contains",
                "local": "contains"
              },
              {
                "kind": "named",
                "imported": "get",
                "local": "get"
              },
              {
                "kind": "named",
                "imported": "has",
                "local": "has"
              }
            ]
          }
        ],
        "exports": {
          "exported": [
            "factory",
            "redirectUrl",
            "strategies",
            "testRequest",
            "xpackMainPlugin",
            "shouldRedirect",
            "request"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "factory",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "redirectUrl",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "strategies",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "testRequest",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "xpackMainPlugin",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "shouldRedirect",
              "exported": "shouldRedirect"
            },
            {
              "kind": "local",
              "local": "request",
              "exported": "request"
            }
          ]
        }
      },
      "usedHelpers": [
        "interop-require-default"
      ]
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = factory;\nexports.shouldRedirect = shouldRedirect;\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { 'default': obj }; }\n\nvar _boom = require('boom');\n\nvar _boom2 = _interopRequireDefault(_boom);\n\nvar _bluebird = require('bluebird');\n\nvar _bluebird2 = _interopRequireDefault(_bluebird);\n\nvar _lodash = require('lodash');\n\nvar ROUTE_TAG_API = 'api';\nvar KIBANA_XSRF_HEADER = 'kbn-xsrf';\nvar KIBANA_VERSION_HEADER = 'kbn-version';\n\n/**\n * Creates a hapi authenticate function that conditionally\n * redirects on auth failure\n *\n * Kibana requires a `kbn-xsrf` header or a `kbn-version` for xhr requests, so\n * it is probably the safest measure we have for determining whether a request\n * should return a 401 or a 302 when authentication fails.\n *\n * @param {object}\n *    onError:     Transform function that error is passed to before deferring\n *                 to standard error handler\n *    redirectUrl: Transform function that request path is passed to before\n *                 redirecting\n *    strategy:    The name of the auth strategy to use for test, or an array of auth strategy names\n *    testRequest: Function to test authentication for a request\n * @return {Function}\n */\n\nfunction factory(_ref) {\n  var redirectUrl = _ref.redirectUrl;\n  var strategies = _ref.strategies;\n  var testRequest = _ref.testRequest;\n  var xpackMainPlugin = _ref.xpackMainPlugin;\n\n  var testRequestAsync = _bluebird2['default'].promisify(testRequest);\n  return function authenticate(request, reply) {\n    // If security is disabled or license is basic, continue with no user credentials and delete the client cookie as well\n    var xpackInfo = xpackMainPlugin && xpackMainPlugin.info;\n    if (xpackInfo && xpackInfo.isAvailable() && (!xpackInfo.feature('security').isEnabled() || xpackInfo.license.isOneOf('basic'))) {\n      reply['continue']({ credentials: {} });\n      return;\n    }\n\n    // Test the request against all of the authentication strategies and if any succeed, continue\n    return _bluebird2['default'].any(strategies.map(function (strategy) {\n      return testRequestAsync(strategy, request);\n    })).then(function (credentials) {\n      return reply['continue']({ credentials: credentials });\n    })['catch'](function () {\n      if (shouldRedirect(request)) {\n        reply.redirect(redirectUrl(request.url.path));\n      } else {\n        reply(_boom2['default'].unauthorized());\n      }\n    });\n  };\n}\n\n;\n\nfunction shouldRedirect(request) {\n  var hasVersionHeader = (0, _lodash.has)(request.raw.req.headers, KIBANA_VERSION_HEADER);\n  var hasXsrfHeader = (0, _lodash.has)(request.raw.req.headers, KIBANA_XSRF_HEADER);\n\n  var isApiRoute = (0, _lodash.contains)((0, _lodash.get)(request, 'route.settings.tags'), ROUTE_TAG_API);\n  var isAjaxRequest = hasVersionHeader || hasXsrfHeader;\n\n  return !isApiRoute && !isAjaxRequest;\n}\n\n;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9saWIvYXV0aF9yZWRpcmVjdC5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztxQkF5QndCLE9BQU87Ozs7O29CQXpCZCxNQUFNOzs7O3dCQUNILFVBQVU7Ozs7c0JBQ0ssUUFBUTs7QUFFM0MsSUFBTSxhQUFhLEdBQUcsS0FBSyxDQUFDO0FBQzVCLElBQU0sa0JBQWtCLEdBQUcsVUFBVSxDQUFDO0FBQ3RDLElBQU0scUJBQXFCLEdBQUcsYUFBYSxDQUFDOzs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQW1CN0IsU0FBUyxPQUFPLENBQUMsSUFBeUQsRUFBRTtNQUF6RCxXQUFXLEdBQWIsSUFBeUQsQ0FBdkQsV0FBVztNQUFFLFVBQVUsR0FBekIsSUFBeUQsQ0FBMUMsVUFBVTtNQUFFLFdBQVcsR0FBdEMsSUFBeUQsQ0FBOUIsV0FBVztNQUFFLGVBQWUsR0FBdkQsSUFBeUQsQ0FBakIsZUFBZTs7QUFDckYsTUFBTSxnQkFBZ0IsR0FBRyxzQkFBUSxTQUFTLENBQUMsV0FBVyxDQUFDLENBQUM7QUFDeEQsU0FBTyxTQUFTLFlBQVksQ0FBQyxPQUFPLEVBQUUsS0FBSyxFQUFFOztBQUUzQyxRQUFNLFNBQVMsR0FBRyxlQUFlLElBQUksZUFBZSxDQUFDLElBQUksQ0FBQztBQUMxRCxRQUFJLFNBQVMsSUFDTixTQUFTLENBQUMsV0FBVyxFQUFFLEtBQ3RCLENBQUMsU0FBUyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxTQUFTLEVBQUUsSUFBSSxTQUFTLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQSxBQUFDLEVBQUU7QUFDekYsV0FBSyxZQUFTLENBQUMsRUFBRSxXQUFXLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztBQUNwQyxhQUFPO0tBQ1I7OztBQUdELFdBQU8sc0JBQVEsR0FBRyxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsVUFBQyxRQUFRO2FBQUssZ0JBQWdCLENBQUMsUUFBUSxFQUFFLE9BQU8sQ0FBQztLQUFBLENBQUMsQ0FBQyxDQUNwRixJQUFJLENBQUMsVUFBQyxXQUFXO2FBQUssS0FBSyxZQUFTLENBQUMsRUFBRSxXQUFXLEVBQVgsV0FBVyxFQUFFLENBQUM7S0FBQSxDQUFDLFNBQ2pELENBQUMsWUFBTTtBQUNYLFVBQUksY0FBYyxDQUFDLE9BQU8sQ0FBQyxFQUFFO0FBQzNCLGFBQUssQ0FBQyxRQUFRLENBQUMsV0FBVyxDQUFDLE9BQU8sQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLENBQUMsQ0FBQztPQUMvQyxNQUFNO0FBQ0wsYUFBSyxDQUFDLGtCQUFLLFlBQVksRUFBRSxDQUFDLENBQUM7T0FDNUI7S0FDRixDQUFDLENBQUM7R0FDSixDQUFDO0NBQ0g7O0FBQUEsQ0FBQzs7QUFFSyxTQUFTLGNBQWMsQ0FBQyxPQUFPLEVBQUU7QUFDdEMsTUFBTSxnQkFBZ0IsR0FBRyxpQkFBSSxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUscUJBQXFCLENBQUMsQ0FBQztBQUM3RSxNQUFNLGFBQWEsR0FBRyxpQkFBSSxPQUFPLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsa0JBQWtCLENBQUMsQ0FBQzs7QUFFdkUsTUFBTSxVQUFVLEdBQUcsc0JBQVMsaUJBQUksT0FBTyxFQUFFLHFCQUFxQixDQUFDLEVBQUUsYUFBYSxDQUFDLENBQUM7QUFDaEYsTUFBTSxhQUFhLEdBQUcsZ0JBQWdCLElBQUksYUFBYSxDQUFDOztBQUV4RCxTQUFPLENBQUMsVUFBVSxJQUFJLENBQUMsYUFBYSxDQUFDO0NBQ3RDOztBQUFBLENBQUMiLCJmaWxlIjoiL2hvbWUvdWJ1bnR1L3dvcmtzcGFjZS9raWJhbmEtNS4wLjItbGludXgteDg2XzY0L3BsdWdpbnMveC1wYWNrL3BsdWdpbnMvc2VjdXJpdHkvc2VydmVyL2xpYi9hdXRoX3JlZGlyZWN0LmpzIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IEJvb20gZnJvbSAnYm9vbSc7XG5pbXBvcnQgUHJvbWlzZSBmcm9tICdibHVlYmlyZCc7XG5pbXBvcnQgeyBjb250YWlucywgZ2V0LCBoYXMgfSBmcm9tICdsb2Rhc2gnO1xuXG5jb25zdCBST1VURV9UQUdfQVBJID0gJ2FwaSc7XG5jb25zdCBLSUJBTkFfWFNSRl9IRUFERVIgPSAna2JuLXhzcmYnO1xuY29uc3QgS0lCQU5BX1ZFUlNJT05fSEVBREVSID0gJ2tibi12ZXJzaW9uJztcblxuLyoqXG4gKiBDcmVhdGVzIGEgaGFwaSBhdXRoZW50aWNhdGUgZnVuY3Rpb24gdGhhdCBjb25kaXRpb25hbGx5XG4gKiByZWRpcmVjdHMgb24gYXV0aCBmYWlsdXJlXG4gKlxuICogS2liYW5hIHJlcXVpcmVzIGEgYGtibi14c3JmYCBoZWFkZXIgb3IgYSBga2JuLXZlcnNpb25gIGZvciB4aHIgcmVxdWVzdHMsIHNvXG4gKiBpdCBpcyBwcm9iYWJseSB0aGUgc2FmZXN0IG1lYXN1cmUgd2UgaGF2ZSBmb3IgZGV0ZXJtaW5pbmcgd2hldGhlciBhIHJlcXVlc3RcbiAqIHNob3VsZCByZXR1cm4gYSA0MDEgb3IgYSAzMDIgd2hlbiBhdXRoZW50aWNhdGlvbiBmYWlscy5cbiAqXG4gKiBAcGFyYW0ge29iamVjdH1cbiAqICAgIG9uRXJyb3I6ICAgICBUcmFuc2Zvcm0gZnVuY3Rpb24gdGhhdCBlcnJvciBpcyBwYXNzZWQgdG8gYmVmb3JlIGRlZmVycmluZ1xuICogICAgICAgICAgICAgICAgIHRvIHN0YW5kYXJkIGVycm9yIGhhbmRsZXJcbiAqICAgIHJlZGlyZWN0VXJsOiBUcmFuc2Zvcm0gZnVuY3Rpb24gdGhhdCByZXF1ZXN0IHBhdGggaXMgcGFzc2VkIHRvIGJlZm9yZVxuICogICAgICAgICAgICAgICAgIHJlZGlyZWN0aW5nXG4gKiAgICBzdHJhdGVneTogICAgVGhlIG5hbWUgb2YgdGhlIGF1dGggc3RyYXRlZ3kgdG8gdXNlIGZvciB0ZXN0LCBvciBhbiBhcnJheSBvZiBhdXRoIHN0cmF0ZWd5IG5hbWVzXG4gKiAgICB0ZXN0UmVxdWVzdDogRnVuY3Rpb24gdG8gdGVzdCBhdXRoZW50aWNhdGlvbiBmb3IgYSByZXF1ZXN0XG4gKiBAcmV0dXJuIHtGdW5jdGlvbn1cbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gZmFjdG9yeSh7IHJlZGlyZWN0VXJsLCBzdHJhdGVnaWVzLCB0ZXN0UmVxdWVzdCwgeHBhY2tNYWluUGx1Z2luIH0pIHtcbiAgY29uc3QgdGVzdFJlcXVlc3RBc3luYyA9IFByb21pc2UucHJvbWlzaWZ5KHRlc3RSZXF1ZXN0KTtcbiAgcmV0dXJuIGZ1bmN0aW9uIGF1dGhlbnRpY2F0ZShyZXF1ZXN0LCByZXBseSkge1xuICAgIC8vIElmIHNlY3VyaXR5IGlzIGRpc2FibGVkIG9yIGxpY2Vuc2UgaXMgYmFzaWMsIGNvbnRpbnVlIHdpdGggbm8gdXNlciBjcmVkZW50aWFscyBhbmQgZGVsZXRlIHRoZSBjbGllbnQgY29va2llIGFzIHdlbGxcbiAgICBjb25zdCB4cGFja0luZm8gPSB4cGFja01haW5QbHVnaW4gJiYgeHBhY2tNYWluUGx1Z2luLmluZm87XG4gICAgaWYgKHhwYWNrSW5mb1xuICAgICAgICAmJiB4cGFja0luZm8uaXNBdmFpbGFibGUoKVxuICAgICAgICAmJiAoIXhwYWNrSW5mby5mZWF0dXJlKCdzZWN1cml0eScpLmlzRW5hYmxlZCgpIHx8IHhwYWNrSW5mby5saWNlbnNlLmlzT25lT2YoJ2Jhc2ljJykpKSB7XG4gICAgICByZXBseS5jb250aW51ZSh7IGNyZWRlbnRpYWxzOiB7fSB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICAvLyBUZXN0IHRoZSByZXF1ZXN0IGFnYWluc3QgYWxsIG9mIHRoZSBhdXRoZW50aWNhdGlvbiBzdHJhdGVnaWVzIGFuZCBpZiBhbnkgc3VjY2VlZCwgY29udGludWVcbiAgICByZXR1cm4gUHJvbWlzZS5hbnkoc3RyYXRlZ2llcy5tYXAoKHN0cmF0ZWd5KSA9PiB0ZXN0UmVxdWVzdEFzeW5jKHN0cmF0ZWd5LCByZXF1ZXN0KSkpXG4gICAgLnRoZW4oKGNyZWRlbnRpYWxzKSA9PiByZXBseS5jb250aW51ZSh7IGNyZWRlbnRpYWxzIH0pKVxuICAgIC5jYXRjaCgoKSA9PiB7XG4gICAgICBpZiAoc2hvdWxkUmVkaXJlY3QocmVxdWVzdCkpIHtcbiAgICAgICAgcmVwbHkucmVkaXJlY3QocmVkaXJlY3RVcmwocmVxdWVzdC51cmwucGF0aCkpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmVwbHkoQm9vbS51bmF1dGhvcml6ZWQoKSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH07XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gc2hvdWxkUmVkaXJlY3QocmVxdWVzdCkge1xuICBjb25zdCBoYXNWZXJzaW9uSGVhZGVyID0gaGFzKHJlcXVlc3QucmF3LnJlcS5oZWFkZXJzLCBLSUJBTkFfVkVSU0lPTl9IRUFERVIpO1xuICBjb25zdCBoYXNYc3JmSGVhZGVyID0gaGFzKHJlcXVlc3QucmF3LnJlcS5oZWFkZXJzLCBLSUJBTkFfWFNSRl9IRUFERVIpO1xuXG4gIGNvbnN0IGlzQXBpUm91dGUgPSBjb250YWlucyhnZXQocmVxdWVzdCwgJ3JvdXRlLnNldHRpbmdzLnRhZ3MnKSwgUk9VVEVfVEFHX0FQSSk7XG4gIGNvbnN0IGlzQWpheFJlcXVlc3QgPSBoYXNWZXJzaW9uSGVhZGVyIHx8IGhhc1hzcmZIZWFkZXI7XG5cbiAgcmV0dXJuICFpc0FwaVJvdXRlICYmICFpc0FqYXhSZXF1ZXN0O1xufTtcbiJdfQ==",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/auth_redirect.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAyBwB,OAAO;;;;;oBAzBd,MAAM;;;;wBACH,UAAU;;;;sBACK,QAAQ;;AAE3C,IAAM,aAAa,GAAG,KAAK,CAAC;AAC5B,IAAM,kBAAkB,GAAG,UAAU,CAAC;AACtC,IAAM,qBAAqB,GAAG,aAAa,CAAC;;;;;;;;;;;;;;;;;;;;AAmB7B,SAAS,OAAO,CAAC,IAAyD,EAAE;MAAzD,WAAW,GAAb,IAAyD,CAAvD,WAAW;MAAE,UAAU,GAAzB,IAAyD,CAA1C,UAAU;MAAE,WAAW,GAAtC,IAAyD,CAA9B,WAAW;MAAE,eAAe,GAAvD,IAAyD,CAAjB,eAAe;;AACrF,MAAM,gBAAgB,GAAG,sBAAQ,SAAS,CAAC,WAAW,CAAC,CAAC;AACxD,SAAO,SAAS,YAAY,CAAC,OAAO,EAAE,KAAK,EAAE;;AAE3C,QAAM,SAAS,GAAG,eAAe,IAAI,eAAe,CAAC,IAAI,CAAC;AAC1D,QAAI,SAAS,IACN,SAAS,CAAC,WAAW,EAAE,KACtB,CAAC,SAAS,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,SAAS,EAAE,IAAI,SAAS,CAAC,OAAO,CAAC,OAAO,CAAC,OAAO,CAAC,CAAA,AAAC,EAAE;AACzF,WAAK,YAAS,CAAC,EAAE,WAAW,EAAE,EAAE,EAAE,CAAC,CAAC;AACpC,aAAO;KACR;;;AAGD,WAAO,sBAAQ,GAAG,CAAC,UAAU,CAAC,GAAG,CAAC,UAAC,QAAQ;aAAK,gBAAgB,CAAC,QAAQ,EAAE,OAAO,CAAC;KAAA,CAAC,CAAC,CACpF,IAAI,CAAC,UAAC,WAAW;aAAK,KAAK,YAAS,CAAC,EAAE,WAAW,EAAX,WAAW,EAAE,CAAC;KAAA,CAAC,SACjD,CAAC,YAAM;AACX,UAAI,cAAc,CAAC,OAAO,CAAC,EAAE;AAC3B,aAAK,CAAC,QAAQ,CAAC,WAAW,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC,CAAC;OAC/C,MAAM;AACL,aAAK,CAAC,kBAAK,YAAY,EAAE,CAAC,CAAC;OAC5B;KACF,CAAC,CAAC;GACJ,CAAC;CACH;;AAAA,CAAC;;AAEK,SAAS,cAAc,CAAC,OAAO,EAAE;AACtC,MAAM,gBAAgB,GAAG,iBAAI,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,OAAO,EAAE,qBAAqB,CAAC,CAAC;AAC7E,MAAM,aAAa,GAAG,iBAAI,OAAO,CAAC,GAAG,CAAC,GAAG,CAAC,OAAO,EAAE,kBAAkB,CAAC,CAAC;;AAEvE,MAAM,UAAU,GAAG,sBAAS,iBAAI,OAAO,EAAE,qBAAqB,CAAC,EAAE,aAAa,CAAC,CAAC;AAChF,MAAM,aAAa,GAAG,gBAAgB,IAAI,aAAa,CAAC;;AAExD,SAAO,CAAC,UAAU,IAAI,CAAC,aAAa,CAAC;CACtC;;AAAA,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/auth_redirect.js",
      "sourcesContent": [
        "import Boom from 'boom';\nimport Promise from 'bluebird';\nimport { contains, get, has } from 'lodash';\n\nconst ROUTE_TAG_API = 'api';\nconst KIBANA_XSRF_HEADER = 'kbn-xsrf';\nconst KIBANA_VERSION_HEADER = 'kbn-version';\n\n/**\n * Creates a hapi authenticate function that conditionally\n * redirects on auth failure\n *\n * Kibana requires a `kbn-xsrf` header or a `kbn-version` for xhr requests, so\n * it is probably the safest measure we have for determining whether a request\n * should return a 401 or a 302 when authentication fails.\n *\n * @param {object}\n *    onError:     Transform function that error is passed to before deferring\n *                 to standard error handler\n *    redirectUrl: Transform function that request path is passed to before\n *                 redirecting\n *    strategy:    The name of the auth strategy to use for test, or an array of auth strategy names\n *    testRequest: Function to test authentication for a request\n * @return {Function}\n */\nexport default function factory({ redirectUrl, strategies, testRequest, xpackMainPlugin }) {\n  const testRequestAsync = Promise.promisify(testRequest);\n  return function authenticate(request, reply) {\n    // If security is disabled or license is basic, continue with no user credentials and delete the client cookie as well\n    const xpackInfo = xpackMainPlugin && xpackMainPlugin.info;\n    if (xpackInfo\n        && xpackInfo.isAvailable()\n        && (!xpackInfo.feature('security').isEnabled() || xpackInfo.license.isOneOf('basic'))) {\n      reply.continue({ credentials: {} });\n      return;\n    }\n\n    // Test the request against all of the authentication strategies and if any succeed, continue\n    return Promise.any(strategies.map((strategy) => testRequestAsync(strategy, request)))\n    .then((credentials) => reply.continue({ credentials }))\n    .catch(() => {\n      if (shouldRedirect(request)) {\n        reply.redirect(redirectUrl(request.url.path));\n      } else {\n        reply(Boom.unauthorized());\n      }\n    });\n  };\n};\n\nexport function shouldRedirect(request) {\n  const hasVersionHeader = has(request.raw.req.headers, KIBANA_VERSION_HEADER);\n  const hasXsrfHeader = has(request.raw.req.headers, KIBANA_XSRF_HEADER);\n\n  const isApiRoute = contains(get(request, 'route.settings.tags'), ROUTE_TAG_API);\n  const isAjaxRequest = hasVersionHeader || hasXsrfHeader;\n\n  return !isApiRoute && !isAjaxRequest;\n};\n"
      ]
    },
    "mtime": 1485775596253
  },
  "{\"filename\":\"/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/check_license.js\",\"extra\":{},\"env\":{},\"retainLines\":false,\"nonStandard\":true,\"experimental\":false,\"highlightCode\":true,\"suppressDeprecationMessages\":false,\"stage\":2,\"blacklist\":[],\"optional\":[],\"modules\":\"common\",\"moduleIds\":false,\"jsxPragma\":\"React.createElement\",\"plugins\":[],\"ignore\":[],\"code\":true,\"metadata\":true,\"ast\":true,\"comments\":true,\"compact\":\"auto\",\"keepModuleIdExtensions\":false,\"auxiliaryCommentAfter\":\"\",\"externalHelpers\":false,\"metadataUsedHelpers\":false,\"breakConfig\":false,\"sourceType\":\"module\"}:5.8.38": {
    "metadata": {
      "modules": {
        "imports": [],
        "exports": {
          "exported": [
            "checkLicense",
            "xpackLicenseInfo"
          ],
          "specifiers": [
            {
              "kind": "local",
              "local": "checkLicense",
              "exported": "default"
            },
            {
              "kind": "local",
              "local": "xpackLicenseInfo",
              "exported": "default"
            }
          ]
        }
      },
      "usedHelpers": []
    },
    "ignored": false,
    "code": "'use strict';\n\nObject.defineProperty(exports, '__esModule', {\n  value: true\n});\nexports['default'] = checkLicense;\n\nfunction checkLicense(xpackLicenseInfo) {\n\n  var showLogin = undefined; // show login page or skip it?\n  var allowLogin = undefined; // allow login or disable it on the login page?\n  var showLinks = undefined; // show security links throughout the kibana app?\n\n  var loginMessage = undefined; // message to show on login page\n  var linksMessage = undefined; // message to show when security links are clicked throughout the kibana app\n\n  // If, for some reason, we cannot get license information\n  // from Elasticsearch, assume worst-case and lock user\n  // at login screen.\n  if (!xpackLicenseInfo || !xpackLicenseInfo.isAvailable()) {\n    loginMessage = 'Login is currently disabled because the license could not be determined. ' + 'Please check that Elasticsearch is running, then refresh this page.';\n    return {\n      showLogin: true,\n      allowLogin: false,\n      showLinks: false,\n      loginMessage: loginMessage,\n      linksMessage: linksMessage\n    };\n  }\n\n  var isLicenseActive = xpackLicenseInfo.license.isActive();\n  var isLicenseBasic = xpackLicenseInfo.license.isOneOf(['basic']);\n  var isEnabledInES = xpackLicenseInfo.feature('security').isEnabled();\n\n  if (!isEnabledInES) {\n    linksMessage = 'Access is denied because Security is disabled in Elasticsearch.';\n    showLogin = false;\n    allowLogin = null;\n    showLinks = false;\n  } else if (isLicenseBasic) {\n    linksMessage = 'Your Basic license does not support Security. Please upgrade your license.';\n    showLogin = false;\n    allowLogin = null;\n    showLinks = false;\n  } else if (!isLicenseActive) {\n    loginMessage = 'Login is disabled because your license has expired. Please extend your license or disable Security in Elasticsearch.';\n    linksMessage = 'Access is denied because your license has expired. Please extend your license.';\n    showLogin = true;\n    allowLogin = false;\n    showLinks = false;\n  } else {\n    showLogin = true;\n    allowLogin = true;\n    showLinks = true;\n  };\n\n  return {\n    showLogin: showLogin,\n    allowLogin: allowLogin,\n    showLinks: showLinks,\n    loginMessage: loginMessage,\n    linksMessage: linksMessage\n  };\n}\n\n;\nmodule.exports = exports['default'];\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9ob21lL3VidW50dS93b3Jrc3BhY2Uva2liYW5hLTUuMC4yLWxpbnV4LXg4Nl82NC9wbHVnaW5zL3gtcGFjay9wbHVnaW5zL3NlY3VyaXR5L3NlcnZlci9saWIvY2hlY2tfbGljZW5zZS5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztxQkFBd0IsWUFBWTs7QUFBckIsU0FBUyxZQUFZLENBQUMsZ0JBQWdCLEVBQUU7O0FBRXJELE1BQUksU0FBUyxZQUFBLENBQUM7QUFDZCxNQUFJLFVBQVUsWUFBQSxDQUFDO0FBQ2YsTUFBSSxTQUFTLFlBQUEsQ0FBQzs7QUFFZCxNQUFJLFlBQVksWUFBQSxDQUFDO0FBQ2pCLE1BQUksWUFBWSxZQUFBLENBQUM7Ozs7O0FBS2pCLE1BQUksQ0FBQyxnQkFBZ0IsSUFBSSxDQUFDLGdCQUFnQixDQUFDLFdBQVcsRUFBRSxFQUFFO0FBQ3hELGdCQUFZLEdBQUcsMkVBQTJFLEdBQ3hGLHFFQUFxRSxDQUFDO0FBQ3hFLFdBQU87QUFDTCxlQUFTLEVBQUUsSUFBSTtBQUNmLGdCQUFVLEVBQUUsS0FBSztBQUNqQixlQUFTLEVBQUUsS0FBSztBQUNoQixrQkFBWSxFQUFaLFlBQVk7QUFDWixrQkFBWSxFQUFaLFlBQVk7S0FDYixDQUFDO0dBQ0g7O0FBRUQsTUFBTSxlQUFlLEdBQUcsZ0JBQWdCLENBQUMsT0FBTyxDQUFDLFFBQVEsRUFBRSxDQUFDO0FBQzVELE1BQU0sY0FBYyxHQUFHLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxPQUFPLENBQUMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDO0FBQ25FLE1BQU0sYUFBYSxHQUFHLGdCQUFnQixDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxTQUFTLEVBQUUsQ0FBQzs7QUFFdkUsTUFBSSxDQUFDLGFBQWEsRUFBRTtBQUNsQixnQkFBWSxHQUFHLGlFQUFpRSxDQUFDO0FBQ2pGLGFBQVMsR0FBRyxLQUFLLENBQUM7QUFDbEIsY0FBVSxHQUFHLElBQUksQ0FBQztBQUNsQixhQUFTLEdBQUcsS0FBSyxDQUFDO0dBQ25CLE1BQU0sSUFBSSxjQUFjLEVBQUU7QUFDekIsZ0JBQVksR0FBRyw0RUFBNEUsQ0FBQztBQUM1RixhQUFTLEdBQUcsS0FBSyxDQUFDO0FBQ2xCLGNBQVUsR0FBRyxJQUFJLENBQUM7QUFDbEIsYUFBUyxHQUFHLEtBQUssQ0FBQztHQUNuQixNQUFNLElBQUksQ0FBQyxlQUFlLEVBQUU7QUFDM0IsZ0JBQVksR0FBRyxzSEFBc0gsQ0FBQztBQUN0SSxnQkFBWSxHQUFHLGdGQUFnRixDQUFDO0FBQ2hHLGFBQVMsR0FBRyxJQUFJLENBQUM7QUFDakIsY0FBVSxHQUFHLEtBQUssQ0FBQztBQUNuQixhQUFTLEdBQUcsS0FBSyxDQUFDO0dBQ25CLE1BQU07QUFDTCxhQUFTLEdBQUcsSUFBSSxDQUFDO0FBQ2pCLGNBQVUsR0FBRyxJQUFJLENBQUM7QUFDbEIsYUFBUyxHQUFHLElBQUksQ0FBQztHQUNsQixDQUFDOztBQUVGLFNBQU87QUFDTCxhQUFTLEVBQVQsU0FBUztBQUNULGNBQVUsRUFBVixVQUFVO0FBQ1YsYUFBUyxFQUFULFNBQVM7QUFDVCxnQkFBWSxFQUFaLFlBQVk7QUFDWixnQkFBWSxFQUFaLFlBQVk7R0FDYixDQUFDO0NBRUg7O0FBQUEsQ0FBQyIsImZpbGUiOiIvaG9tZS91YnVudHUvd29ya3NwYWNlL2tpYmFuYS01LjAuMi1saW51eC14ODZfNjQvcGx1Z2lucy94LXBhY2svcGx1Z2lucy9zZWN1cml0eS9zZXJ2ZXIvbGliL2NoZWNrX2xpY2Vuc2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBjaGVja0xpY2Vuc2UoeHBhY2tMaWNlbnNlSW5mbykge1xuXG4gIGxldCBzaG93TG9naW47IC8vIHNob3cgbG9naW4gcGFnZSBvciBza2lwIGl0P1xuICBsZXQgYWxsb3dMb2dpbjsgLy8gYWxsb3cgbG9naW4gb3IgZGlzYWJsZSBpdCBvbiB0aGUgbG9naW4gcGFnZT9cbiAgbGV0IHNob3dMaW5rczsgLy8gc2hvdyBzZWN1cml0eSBsaW5rcyB0aHJvdWdob3V0IHRoZSBraWJhbmEgYXBwP1xuXG4gIGxldCBsb2dpbk1lc3NhZ2U7IC8vIG1lc3NhZ2UgdG8gc2hvdyBvbiBsb2dpbiBwYWdlXG4gIGxldCBsaW5rc01lc3NhZ2U7IC8vIG1lc3NhZ2UgdG8gc2hvdyB3aGVuIHNlY3VyaXR5IGxpbmtzIGFyZSBjbGlja2VkIHRocm91Z2hvdXQgdGhlIGtpYmFuYSBhcHBcblxuICAvLyBJZiwgZm9yIHNvbWUgcmVhc29uLCB3ZSBjYW5ub3QgZ2V0IGxpY2Vuc2UgaW5mb3JtYXRpb25cbiAgLy8gZnJvbSBFbGFzdGljc2VhcmNoLCBhc3N1bWUgd29yc3QtY2FzZSBhbmQgbG9jayB1c2VyXG4gIC8vIGF0IGxvZ2luIHNjcmVlbi5cbiAgaWYgKCF4cGFja0xpY2Vuc2VJbmZvIHx8ICF4cGFja0xpY2Vuc2VJbmZvLmlzQXZhaWxhYmxlKCkpIHtcbiAgICBsb2dpbk1lc3NhZ2UgPSAnTG9naW4gaXMgY3VycmVudGx5IGRpc2FibGVkIGJlY2F1c2UgdGhlIGxpY2Vuc2UgY291bGQgbm90IGJlIGRldGVybWluZWQuICdcbiAgICArICdQbGVhc2UgY2hlY2sgdGhhdCBFbGFzdGljc2VhcmNoIGlzIHJ1bm5pbmcsIHRoZW4gcmVmcmVzaCB0aGlzIHBhZ2UuJztcbiAgICByZXR1cm4ge1xuICAgICAgc2hvd0xvZ2luOiB0cnVlLFxuICAgICAgYWxsb3dMb2dpbjogZmFsc2UsXG4gICAgICBzaG93TGlua3M6IGZhbHNlLFxuICAgICAgbG9naW5NZXNzYWdlLFxuICAgICAgbGlua3NNZXNzYWdlXG4gICAgfTtcbiAgfVxuXG4gIGNvbnN0IGlzTGljZW5zZUFjdGl2ZSA9IHhwYWNrTGljZW5zZUluZm8ubGljZW5zZS5pc0FjdGl2ZSgpO1xuICBjb25zdCBpc0xpY2Vuc2VCYXNpYyA9IHhwYWNrTGljZW5zZUluZm8ubGljZW5zZS5pc09uZU9mKFsnYmFzaWMnXSk7XG4gIGNvbnN0IGlzRW5hYmxlZEluRVMgPSB4cGFja0xpY2Vuc2VJbmZvLmZlYXR1cmUoJ3NlY3VyaXR5JykuaXNFbmFibGVkKCk7XG5cbiAgaWYgKCFpc0VuYWJsZWRJbkVTKSB7XG4gICAgbGlua3NNZXNzYWdlID0gJ0FjY2VzcyBpcyBkZW5pZWQgYmVjYXVzZSBTZWN1cml0eSBpcyBkaXNhYmxlZCBpbiBFbGFzdGljc2VhcmNoLic7XG4gICAgc2hvd0xvZ2luID0gZmFsc2U7XG4gICAgYWxsb3dMb2dpbiA9IG51bGw7XG4gICAgc2hvd0xpbmtzID0gZmFsc2U7XG4gIH0gZWxzZSBpZiAoaXNMaWNlbnNlQmFzaWMpIHtcbiAgICBsaW5rc01lc3NhZ2UgPSAnWW91ciBCYXNpYyBsaWNlbnNlIGRvZXMgbm90IHN1cHBvcnQgU2VjdXJpdHkuIFBsZWFzZSB1cGdyYWRlIHlvdXIgbGljZW5zZS4nO1xuICAgIHNob3dMb2dpbiA9IGZhbHNlO1xuICAgIGFsbG93TG9naW4gPSBudWxsO1xuICAgIHNob3dMaW5rcyA9IGZhbHNlO1xuICB9IGVsc2UgaWYgKCFpc0xpY2Vuc2VBY3RpdmUpIHtcbiAgICBsb2dpbk1lc3NhZ2UgPSAnTG9naW4gaXMgZGlzYWJsZWQgYmVjYXVzZSB5b3VyIGxpY2Vuc2UgaGFzIGV4cGlyZWQuIFBsZWFzZSBleHRlbmQgeW91ciBsaWNlbnNlIG9yIGRpc2FibGUgU2VjdXJpdHkgaW4gRWxhc3RpY3NlYXJjaC4nO1xuICAgIGxpbmtzTWVzc2FnZSA9ICdBY2Nlc3MgaXMgZGVuaWVkIGJlY2F1c2UgeW91ciBsaWNlbnNlIGhhcyBleHBpcmVkLiBQbGVhc2UgZXh0ZW5kIHlvdXIgbGljZW5zZS4nO1xuICAgIHNob3dMb2dpbiA9IHRydWU7XG4gICAgYWxsb3dMb2dpbiA9IGZhbHNlO1xuICAgIHNob3dMaW5rcyA9IGZhbHNlO1xuICB9IGVsc2Uge1xuICAgIHNob3dMb2dpbiA9IHRydWU7XG4gICAgYWxsb3dMb2dpbiA9IHRydWU7XG4gICAgc2hvd0xpbmtzID0gdHJ1ZTtcbiAgfTtcblxuICByZXR1cm4ge1xuICAgIHNob3dMb2dpbixcbiAgICBhbGxvd0xvZ2luLFxuICAgIHNob3dMaW5rcyxcbiAgICBsb2dpbk1lc3NhZ2UsXG4gICAgbGlua3NNZXNzYWdlXG4gIH07XG5cbn07XG4iXX0=",
    "ast": null,
    "map": {
      "version": 3,
      "sources": [
        "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/check_license.js"
      ],
      "names": [],
      "mappings": ";;;;;qBAAwB,YAAY;;AAArB,SAAS,YAAY,CAAC,gBAAgB,EAAE;;AAErD,MAAI,SAAS,YAAA,CAAC;AACd,MAAI,UAAU,YAAA,CAAC;AACf,MAAI,SAAS,YAAA,CAAC;;AAEd,MAAI,YAAY,YAAA,CAAC;AACjB,MAAI,YAAY,YAAA,CAAC;;;;;AAKjB,MAAI,CAAC,gBAAgB,IAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE,EAAE;AACxD,gBAAY,GAAG,2EAA2E,GACxF,qEAAqE,CAAC;AACxE,WAAO;AACL,eAAS,EAAE,IAAI;AACf,gBAAU,EAAE,KAAK;AACjB,eAAS,EAAE,KAAK;AAChB,kBAAY,EAAZ,YAAY;AACZ,kBAAY,EAAZ,YAAY;KACb,CAAC;GACH;;AAED,MAAM,eAAe,GAAG,gBAAgB,CAAC,OAAO,CAAC,QAAQ,EAAE,CAAC;AAC5D,MAAM,cAAc,GAAG,gBAAgB,CAAC,OAAO,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC;AACnE,MAAM,aAAa,GAAG,gBAAgB,CAAC,OAAO,CAAC,UAAU,CAAC,CAAC,SAAS,EAAE,CAAC;;AAEvE,MAAI,CAAC,aAAa,EAAE;AAClB,gBAAY,GAAG,iEAAiE,CAAC;AACjF,aAAS,GAAG,KAAK,CAAC;AAClB,cAAU,GAAG,IAAI,CAAC;AAClB,aAAS,GAAG,KAAK,CAAC;GACnB,MAAM,IAAI,cAAc,EAAE;AACzB,gBAAY,GAAG,4EAA4E,CAAC;AAC5F,aAAS,GAAG,KAAK,CAAC;AAClB,cAAU,GAAG,IAAI,CAAC;AAClB,aAAS,GAAG,KAAK,CAAC;GACnB,MAAM,IAAI,CAAC,eAAe,EAAE;AAC3B,gBAAY,GAAG,sHAAsH,CAAC;AACtI,gBAAY,GAAG,gFAAgF,CAAC;AAChG,aAAS,GAAG,IAAI,CAAC;AACjB,cAAU,GAAG,KAAK,CAAC;AACnB,aAAS,GAAG,KAAK,CAAC;GACnB,MAAM;AACL,aAAS,GAAG,IAAI,CAAC;AACjB,cAAU,GAAG,IAAI,CAAC;AAClB,aAAS,GAAG,IAAI,CAAC;GAClB,CAAC;;AAEF,SAAO;AACL,aAAS,EAAT,SAAS;AACT,cAAU,EAAV,UAAU;AACV,aAAS,EAAT,SAAS;AACT,gBAAY,EAAZ,YAAY;AACZ,gBAAY,EAAZ,YAAY;GACb,CAAC;CAEH;;AAAA,CAAC",
      "file": "/home/ubuntu/workspace/kibana-5.0.2-linux-x86_64/plugins/x-pack/plugins/security/server/lib/check_license.js",
      "sourcesContent": [
        "export default function checkLicense(xpackLicenseInfo) {\n\n  let showLogin; // show login page or skip it?\n  let allowLogin; // allow login or disable it on the login page?\n  let showLinks; // show security links throughout the kibana app?\n\n  let loginMessage; // message to show on login page\n  let linksMessage; // message to show when security links are clicked throughout the kibana app\n\n  // If, for some reason, we cannot get license information\n  // from Elasticsearch, assume worst-case and lock user\n  // at login screen.\n  if (!xpackLicenseInfo || !xpackLicenseInfo.isAvailable()) {\n    loginMessage = 'Login is currently disabled because the license could not be determined. '\n    + 'Please check that Elasticsearch is running, then refresh this page.';\n    return {\n      showLogin: true,\n      allowLogin: false,\n      showLinks: false,\n      loginMessage,\n      linksMessage\n    };\n  }\n\n  const isLicenseActive = xpackLicenseInfo.license.isActive();\n  const isLicenseBasic = xpackLicenseInfo.license.isOneOf(['basic']);\n  const isEnabledInES = xpackLicenseInfo.feature('security').isEnabled();\n\n  if (!isEnabledInES) {\n    linksMessage = 'Access is denied because Security is disabled in Elasticsearch.';\n    showLogin = false;\n    allowLogin = null;\n    showLinks = false;\n  } else if (isLicenseBasic) {\n    linksMessage = 'Your Basic license does not support Security. Please upgrade your license.';\n    showLogin = false;\n    allowLogin = null;\n    showLinks = false;\n  } else if (!isLicenseActive) {\n    loginMessage = 'Login is disabled because your license has expired. Please extend your license or disable Security in Elasticsearch.';\n    linksMessage = 'Access is denied because your license has expired. Please extend your license.';\n    showLogin = true;\n    allowLogin = false;\n    showLinks = false;\n  } else {\n    showLogin = true;\n    allowLogin = true;\n    showLinks = true;\n  };\n\n  return {\n    showLogin,\n    allowLogin,\n    showLinks,\n    loginMessage,\n    linksMessage\n  };\n\n};\n"
      ]
    },
    "mtime": 1485775596253
  }
}